/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./src/color.ts":
/*!**********************!*\
  !*** ./src/color.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Color: () => (/* binding */ Color)\n/* harmony export */ });\nclass Color {\n    constructor(r, g, b, a) {\n        this.r = r;\n        this.g = g;\n        this.b = b;\n        this.a = a;\n    }\n    normalize() {\n        return new Color(this.r / 255, this.g / 255, this.b / 255, this.a / 255);\n    }\n    *[Symbol.iterator]() {\n        yield this.r;\n        yield this.g;\n        yield this.b;\n        yield this.a;\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29sb3IudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDaUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJnbC1wcm9iZS0yLy4vc3JjL2NvbG9yLnRzPzQ4MGYiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQ29sb3Ige1xuICAgIGNvbnN0cnVjdG9yKHIsIGcsIGIsIGEpIHtcbiAgICAgICAgdGhpcy5yID0gcjtcbiAgICAgICAgdGhpcy5nID0gZztcbiAgICAgICAgdGhpcy5iID0gYjtcbiAgICAgICAgdGhpcy5hID0gYTtcbiAgICB9XG4gICAgbm9ybWFsaXplKCkge1xuICAgICAgICByZXR1cm4gbmV3IENvbG9yKHRoaXMuciAvIDI1NSwgdGhpcy5nIC8gMjU1LCB0aGlzLmIgLyAyNTUsIHRoaXMuYSAvIDI1NSk7XG4gICAgfVxuICAgICpbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICAgICAgeWllbGQgdGhpcy5yO1xuICAgICAgICB5aWVsZCB0aGlzLmc7XG4gICAgICAgIHlpZWxkIHRoaXMuYjtcbiAgICAgICAgeWllbGQgdGhpcy5hO1xuICAgIH1cbn1cbmV4cG9ydCB7IENvbG9yIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/color.ts\n");

/***/ }),

/***/ "./src/constants.ts":
/*!**************************!*\
  !*** ./src/constants.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BUILDINGS_COLOR: () => (/* binding */ BUILDINGS_COLOR),\n/* harmony export */   CAMERA_TARGET_COLOR: () => (/* binding */ CAMERA_TARGET_COLOR),\n/* harmony export */   END_NODE_COLOR: () => (/* binding */ END_NODE_COLOR),\n/* harmony export */   HIGHLIGHTED_WAYS_COLOR: () => (/* binding */ HIGHLIGHTED_WAYS_COLOR),\n/* harmony export */   MOTORWAYS_COLOR: () => (/* binding */ MOTORWAYS_COLOR),\n/* harmony export */   NODES_COLOR: () => (/* binding */ NODES_COLOR),\n/* harmony export */   PRIMARIES_COLOR: () => (/* binding */ PRIMARIES_COLOR),\n/* harmony export */   QUADTREE_POINT_COLOR: () => (/* binding */ QUADTREE_POINT_COLOR),\n/* harmony export */   RESIDENTIALS_COLOR: () => (/* binding */ RESIDENTIALS_COLOR),\n/* harmony export */   SECONDARIES_COLOR: () => (/* binding */ SECONDARIES_COLOR),\n/* harmony export */   SHORTEST_PATH_COLOR: () => (/* binding */ SHORTEST_PATH_COLOR),\n/* harmony export */   START_NODE_COLOR: () => (/* binding */ START_NODE_COLOR),\n/* harmony export */   TERTIARIES_COLOR: () => (/* binding */ TERTIARIES_COLOR),\n/* harmony export */   TRUNKS_COLOR: () => (/* binding */ TRUNKS_COLOR),\n/* harmony export */   UNCLASSIFIEDS_COLOR: () => (/* binding */ UNCLASSIFIEDS_COLOR),\n/* harmony export */   VISITED_NODE_COLOR: () => (/* binding */ VISITED_NODE_COLOR),\n/* harmony export */   WORLD_OUTLINE_COLOR: () => (/* binding */ WORLD_OUTLINE_COLOR),\n/* harmony export */   X_AXIS_COLOR: () => (/* binding */ X_AXIS_COLOR),\n/* harmony export */   Y_AXIS_COLOR: () => (/* binding */ Y_AXIS_COLOR)\n/* harmony export */ });\n/* harmony import */ var _color__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./color */ \"./src/color.ts\");\n\nconst BUILDINGS_COLOR = new _color__WEBPACK_IMPORTED_MODULE_0__.Color(0.5, 0.35, 0.61, 1);\nconst MOTORWAYS_COLOR = new _color__WEBPACK_IMPORTED_MODULE_0__.Color(0.914, 0.565, 0.627, 1);\nconst TRUNKS_COLOR = new _color__WEBPACK_IMPORTED_MODULE_0__.Color(0.988, 0.753, 0.675, 1);\nconst PRIMARIES_COLOR = new _color__WEBPACK_IMPORTED_MODULE_0__.Color(0.992, 0.843, 0.631, 1);\nconst SECONDARIES_COLOR = new _color__WEBPACK_IMPORTED_MODULE_0__.Color(0.965, 0.98, 0.733, 1);\nconst TERTIARIES_COLOR = new _color__WEBPACK_IMPORTED_MODULE_0__.Color(1, 1, 1, 1);\nconst UNCLASSIFIEDS_COLOR = new _color__WEBPACK_IMPORTED_MODULE_0__.Color(1, 1, 1, 1);\nconst RESIDENTIALS_COLOR = new _color__WEBPACK_IMPORTED_MODULE_0__.Color(1, 1, 1, 1);\nconst NODES_COLOR = new _color__WEBPACK_IMPORTED_MODULE_0__.Color(0, 1, 0, 1);\nconst QUADTREE_POINT_COLOR = new _color__WEBPACK_IMPORTED_MODULE_0__.Color(1, 0, 0, 1);\nconst HIGHLIGHTED_WAYS_COLOR = new _color__WEBPACK_IMPORTED_MODULE_0__.Color(1, 0, 0, 1);\nconst VISITED_NODE_COLOR = new _color__WEBPACK_IMPORTED_MODULE_0__.Color(1, 0.5, 0, 1);\nconst SHORTEST_PATH_COLOR = new _color__WEBPACK_IMPORTED_MODULE_0__.Color(1, 1, 0, 1);\nconst X_AXIS_COLOR = new _color__WEBPACK_IMPORTED_MODULE_0__.Color(1, 0, 0, 1);\nconst Y_AXIS_COLOR = new _color__WEBPACK_IMPORTED_MODULE_0__.Color(0, 1, 0, 1);\nconst WORLD_OUTLINE_COLOR = new _color__WEBPACK_IMPORTED_MODULE_0__.Color(1, 1, 0, 1);\nconst CAMERA_TARGET_COLOR = new _color__WEBPACK_IMPORTED_MODULE_0__.Color(1, 1, 0, 1);\nconst START_NODE_COLOR = new _color__WEBPACK_IMPORTED_MODULE_0__.Color(0, 1, 0, 1);\nconst END_NODE_COLOR = new _color__WEBPACK_IMPORTED_MODULE_0__.Color(1, 0, 0, 1);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29uc3RhbnRzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWdDO0FBQ3pCLDRCQUE0Qix5Q0FBSztBQUNqQyw0QkFBNEIseUNBQUs7QUFDakMseUJBQXlCLHlDQUFLO0FBQzlCLDRCQUE0Qix5Q0FBSztBQUNqQyw4QkFBOEIseUNBQUs7QUFDbkMsNkJBQTZCLHlDQUFLO0FBQ2xDLGdDQUFnQyx5Q0FBSztBQUNyQywrQkFBK0IseUNBQUs7QUFDcEMsd0JBQXdCLHlDQUFLO0FBQzdCLGlDQUFpQyx5Q0FBSztBQUN0QyxtQ0FBbUMseUNBQUs7QUFDeEMsK0JBQStCLHlDQUFLO0FBQ3BDLGdDQUFnQyx5Q0FBSztBQUNyQyx5QkFBeUIseUNBQUs7QUFDOUIseUJBQXlCLHlDQUFLO0FBQzlCLGdDQUFnQyx5Q0FBSztBQUNyQyxnQ0FBZ0MseUNBQUs7QUFDckMsNkJBQTZCLHlDQUFLO0FBQ2xDLDJCQUEyQix5Q0FBSyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYmdsLXByb2JlLTIvLi9zcmMvY29uc3RhbnRzLnRzP2MzYjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29sb3IgfSBmcm9tIFwiLi9jb2xvclwiO1xuZXhwb3J0IGNvbnN0IEJVSUxESU5HU19DT0xPUiA9IG5ldyBDb2xvcigwLjUsIDAuMzUsIDAuNjEsIDEpO1xuZXhwb3J0IGNvbnN0IE1PVE9SV0FZU19DT0xPUiA9IG5ldyBDb2xvcigwLjkxNCwgMC41NjUsIDAuNjI3LCAxKTtcbmV4cG9ydCBjb25zdCBUUlVOS1NfQ09MT1IgPSBuZXcgQ29sb3IoMC45ODgsIDAuNzUzLCAwLjY3NSwgMSk7XG5leHBvcnQgY29uc3QgUFJJTUFSSUVTX0NPTE9SID0gbmV3IENvbG9yKDAuOTkyLCAwLjg0MywgMC42MzEsIDEpO1xuZXhwb3J0IGNvbnN0IFNFQ09OREFSSUVTX0NPTE9SID0gbmV3IENvbG9yKDAuOTY1LCAwLjk4LCAwLjczMywgMSk7XG5leHBvcnQgY29uc3QgVEVSVElBUklFU19DT0xPUiA9IG5ldyBDb2xvcigxLCAxLCAxLCAxKTtcbmV4cG9ydCBjb25zdCBVTkNMQVNTSUZJRURTX0NPTE9SID0gbmV3IENvbG9yKDEsIDEsIDEsIDEpO1xuZXhwb3J0IGNvbnN0IFJFU0lERU5USUFMU19DT0xPUiA9IG5ldyBDb2xvcigxLCAxLCAxLCAxKTtcbmV4cG9ydCBjb25zdCBOT0RFU19DT0xPUiA9IG5ldyBDb2xvcigwLCAxLCAwLCAxKTtcbmV4cG9ydCBjb25zdCBRVUFEVFJFRV9QT0lOVF9DT0xPUiA9IG5ldyBDb2xvcigxLCAwLCAwLCAxKTtcbmV4cG9ydCBjb25zdCBISUdITElHSFRFRF9XQVlTX0NPTE9SID0gbmV3IENvbG9yKDEsIDAsIDAsIDEpO1xuZXhwb3J0IGNvbnN0IFZJU0lURURfTk9ERV9DT0xPUiA9IG5ldyBDb2xvcigxLCAwLjUsIDAsIDEpO1xuZXhwb3J0IGNvbnN0IFNIT1JURVNUX1BBVEhfQ09MT1IgPSBuZXcgQ29sb3IoMSwgMSwgMCwgMSk7XG5leHBvcnQgY29uc3QgWF9BWElTX0NPTE9SID0gbmV3IENvbG9yKDEsIDAsIDAsIDEpO1xuZXhwb3J0IGNvbnN0IFlfQVhJU19DT0xPUiA9IG5ldyBDb2xvcigwLCAxLCAwLCAxKTtcbmV4cG9ydCBjb25zdCBXT1JMRF9PVVRMSU5FX0NPTE9SID0gbmV3IENvbG9yKDEsIDEsIDAsIDEpO1xuZXhwb3J0IGNvbnN0IENBTUVSQV9UQVJHRVRfQ09MT1IgPSBuZXcgQ29sb3IoMSwgMSwgMCwgMSk7XG5leHBvcnQgY29uc3QgU1RBUlRfTk9ERV9DT0xPUiA9IG5ldyBDb2xvcigwLCAxLCAwLCAxKTtcbmV4cG9ydCBjb25zdCBFTkRfTk9ERV9DT0xPUiA9IG5ldyBDb2xvcigxLCAwLCAwLCAxKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/constants.ts\n");

/***/ }),

/***/ "./src/draw.ts":
/*!*********************!*\
  !*** ./src/draw.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   drawCircle: () => (/* binding */ drawCircle),\n/* harmony export */   drawLine: () => (/* binding */ drawLine),\n/* harmony export */   drawRectangle: () => (/* binding */ drawRectangle),\n/* harmony export */   prepareDrawLineExBufferData: () => (/* binding */ prepareDrawLineExBufferData)\n/* harmony export */ });\n/* harmony import */ var _vector2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./vector2 */ \"./src/vector2.ts\");\n\nfunction drawLine(glContext, start, end, color) {\n    const vbo = glContext.gl.createBuffer();\n    glContext.gl.bindBuffer(glContext.gl.ARRAY_BUFFER, vbo);\n    glContext.gl.bufferData(glContext.gl.ARRAY_BUFFER, new Float32Array([...start, ...end]), glContext.gl.STATIC_DRAW);\n    const COMPONENTS_PER_AXIS = 2;\n    glContext.gl.vertexAttribPointer(glContext.uniformColorShader.attributes.a_position, COMPONENTS_PER_AXIS, glContext.gl.FLOAT, false, 0, 0);\n    glContext.gl.uniform4fv(glContext.uniformColorShader.uniforms.u_color, color);\n    glContext.gl.drawArrays(glContext.gl.LINES, 0, 2);\n    glContext.gl.deleteBuffer(vbo);\n}\nfunction drawCircle(glContext, center, r, color) {\n    const vbo = glContext.gl.createBuffer();\n    glContext.gl.bindBuffer(glContext.gl.ARRAY_BUFFER, vbo);\n    const RESOLUTION = 100;\n    const points = [...center];\n    for (let i = 0; i <= RESOLUTION; i++) {\n        const x = r * Math.cos((i * Math.PI * 2) / RESOLUTION);\n        const y = r * Math.sin((i * Math.PI * 2) / RESOLUTION);\n        points.push(points[0] + x, points[1] + y);\n    }\n    glContext.gl.bufferData(glContext.gl.ARRAY_BUFFER, new Float32Array(points), glContext.gl.STATIC_DRAW);\n    const COMPONENTS_PER_AXIS = 2;\n    glContext.gl.vertexAttribPointer(glContext.uniformColorShader.attributes.a_position, COMPONENTS_PER_AXIS, glContext.gl.FLOAT, false, 0, 0);\n    glContext.gl.uniform4fv(glContext.uniformColorShader.uniforms.u_color, color);\n    glContext.gl.drawArrays(glContext.gl.TRIANGLE_FAN, 0, points.length / 2);\n    glContext.gl.deleteBuffer(vbo);\n}\nfunction drawRectangle(glContext, v1, v2, color) {\n    const vbo = glContext.gl.createBuffer();\n    glContext.gl.bindBuffer(glContext.gl.ARRAY_BUFFER, vbo);\n    const points = [\n        v1.x, v1.y, // left top\n        v1.x, v2.y, // left bottom\n        v2.x, v1.y, // right top\n        v2.x, v2.y, // right bottom\n    ];\n    glContext.gl.bufferData(glContext.gl.ARRAY_BUFFER, new Float32Array(points), glContext.gl.STATIC_DRAW);\n    const COMPONENTS_PER_POINT = 2;\n    glContext.gl.vertexAttribPointer(glContext.uniformColorShader.attributes.a_position, COMPONENTS_PER_POINT, glContext.gl.FLOAT, false, 0, 0);\n    glContext.gl.uniform4fv(glContext.uniformColorShader.uniforms.u_color, color);\n    glContext.gl.drawArrays(glContext.gl.TRIANGLE_STRIP, 0, 4);\n    glContext.gl.deleteBuffer(vbo);\n}\n/**\n * Ported from raylib.js\n */\nfunction prepareDrawLineExBufferData(startPos, endPos, thickness) {\n    const delta = new _vector2__WEBPACK_IMPORTED_MODULE_0__.Vector2(endPos.x - startPos.x, endPos.y - startPos.y);\n    const length = delta.length();\n    if ((length > 0) && (thickness > 0)) {\n        const scale = thickness / (2 * length);\n        const radius = new _vector2__WEBPACK_IMPORTED_MODULE_0__.Vector2(-scale * delta.y, scale * delta.x);\n        const strip = [\n            startPos.x - radius.x, startPos.y - radius.y,\n            startPos.x + radius.x, startPos.y + radius.y,\n            endPos.x - radius.x, endPos.y - radius.y,\n            endPos.x + radius.x, endPos.y + radius.y\n        ];\n        return strip;\n    }\n    else {\n        return [];\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZHJhdy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFvQztBQUM3QjtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsaUJBQWlCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1Asc0JBQXNCLDZDQUFPO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiw2Q0FBTztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJnbC1wcm9iZS0yLy4vc3JjL2RyYXcudHM/YWRlNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSBcIi4vdmVjdG9yMlwiO1xuZXhwb3J0IGZ1bmN0aW9uIGRyYXdMaW5lKGdsQ29udGV4dCwgc3RhcnQsIGVuZCwgY29sb3IpIHtcbiAgICBjb25zdCB2Ym8gPSBnbENvbnRleHQuZ2wuY3JlYXRlQnVmZmVyKCk7XG4gICAgZ2xDb250ZXh0LmdsLmJpbmRCdWZmZXIoZ2xDb250ZXh0LmdsLkFSUkFZX0JVRkZFUiwgdmJvKTtcbiAgICBnbENvbnRleHQuZ2wuYnVmZmVyRGF0YShnbENvbnRleHQuZ2wuQVJSQVlfQlVGRkVSLCBuZXcgRmxvYXQzMkFycmF5KFsuLi5zdGFydCwgLi4uZW5kXSksIGdsQ29udGV4dC5nbC5TVEFUSUNfRFJBVyk7XG4gICAgY29uc3QgQ09NUE9ORU5UU19QRVJfQVhJUyA9IDI7XG4gICAgZ2xDb250ZXh0LmdsLnZlcnRleEF0dHJpYlBvaW50ZXIoZ2xDb250ZXh0LnVuaWZvcm1Db2xvclNoYWRlci5hdHRyaWJ1dGVzLmFfcG9zaXRpb24sIENPTVBPTkVOVFNfUEVSX0FYSVMsIGdsQ29udGV4dC5nbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuICAgIGdsQ29udGV4dC5nbC51bmlmb3JtNGZ2KGdsQ29udGV4dC51bmlmb3JtQ29sb3JTaGFkZXIudW5pZm9ybXMudV9jb2xvciwgY29sb3IpO1xuICAgIGdsQ29udGV4dC5nbC5kcmF3QXJyYXlzKGdsQ29udGV4dC5nbC5MSU5FUywgMCwgMik7XG4gICAgZ2xDb250ZXh0LmdsLmRlbGV0ZUJ1ZmZlcih2Ym8pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdDaXJjbGUoZ2xDb250ZXh0LCBjZW50ZXIsIHIsIGNvbG9yKSB7XG4gICAgY29uc3QgdmJvID0gZ2xDb250ZXh0LmdsLmNyZWF0ZUJ1ZmZlcigpO1xuICAgIGdsQ29udGV4dC5nbC5iaW5kQnVmZmVyKGdsQ29udGV4dC5nbC5BUlJBWV9CVUZGRVIsIHZibyk7XG4gICAgY29uc3QgUkVTT0xVVElPTiA9IDEwMDtcbiAgICBjb25zdCBwb2ludHMgPSBbLi4uY2VudGVyXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBSRVNPTFVUSU9OOyBpKyspIHtcbiAgICAgICAgY29uc3QgeCA9IHIgKiBNYXRoLmNvcygoaSAqIE1hdGguUEkgKiAyKSAvIFJFU09MVVRJT04pO1xuICAgICAgICBjb25zdCB5ID0gciAqIE1hdGguc2luKChpICogTWF0aC5QSSAqIDIpIC8gUkVTT0xVVElPTik7XG4gICAgICAgIHBvaW50cy5wdXNoKHBvaW50c1swXSArIHgsIHBvaW50c1sxXSArIHkpO1xuICAgIH1cbiAgICBnbENvbnRleHQuZ2wuYnVmZmVyRGF0YShnbENvbnRleHQuZ2wuQVJSQVlfQlVGRkVSLCBuZXcgRmxvYXQzMkFycmF5KHBvaW50cyksIGdsQ29udGV4dC5nbC5TVEFUSUNfRFJBVyk7XG4gICAgY29uc3QgQ09NUE9ORU5UU19QRVJfQVhJUyA9IDI7XG4gICAgZ2xDb250ZXh0LmdsLnZlcnRleEF0dHJpYlBvaW50ZXIoZ2xDb250ZXh0LnVuaWZvcm1Db2xvclNoYWRlci5hdHRyaWJ1dGVzLmFfcG9zaXRpb24sIENPTVBPTkVOVFNfUEVSX0FYSVMsIGdsQ29udGV4dC5nbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuICAgIGdsQ29udGV4dC5nbC51bmlmb3JtNGZ2KGdsQ29udGV4dC51bmlmb3JtQ29sb3JTaGFkZXIudW5pZm9ybXMudV9jb2xvciwgY29sb3IpO1xuICAgIGdsQ29udGV4dC5nbC5kcmF3QXJyYXlzKGdsQ29udGV4dC5nbC5UUklBTkdMRV9GQU4sIDAsIHBvaW50cy5sZW5ndGggLyAyKTtcbiAgICBnbENvbnRleHQuZ2wuZGVsZXRlQnVmZmVyKHZibyk7XG59XG5leHBvcnQgZnVuY3Rpb24gZHJhd1JlY3RhbmdsZShnbENvbnRleHQsIHYxLCB2MiwgY29sb3IpIHtcbiAgICBjb25zdCB2Ym8gPSBnbENvbnRleHQuZ2wuY3JlYXRlQnVmZmVyKCk7XG4gICAgZ2xDb250ZXh0LmdsLmJpbmRCdWZmZXIoZ2xDb250ZXh0LmdsLkFSUkFZX0JVRkZFUiwgdmJvKTtcbiAgICBjb25zdCBwb2ludHMgPSBbXG4gICAgICAgIHYxLngsIHYxLnksIC8vIGxlZnQgdG9wXG4gICAgICAgIHYxLngsIHYyLnksIC8vIGxlZnQgYm90dG9tXG4gICAgICAgIHYyLngsIHYxLnksIC8vIHJpZ2h0IHRvcFxuICAgICAgICB2Mi54LCB2Mi55LCAvLyByaWdodCBib3R0b21cbiAgICBdO1xuICAgIGdsQ29udGV4dC5nbC5idWZmZXJEYXRhKGdsQ29udGV4dC5nbC5BUlJBWV9CVUZGRVIsIG5ldyBGbG9hdDMyQXJyYXkocG9pbnRzKSwgZ2xDb250ZXh0LmdsLlNUQVRJQ19EUkFXKTtcbiAgICBjb25zdCBDT01QT05FTlRTX1BFUl9QT0lOVCA9IDI7XG4gICAgZ2xDb250ZXh0LmdsLnZlcnRleEF0dHJpYlBvaW50ZXIoZ2xDb250ZXh0LnVuaWZvcm1Db2xvclNoYWRlci5hdHRyaWJ1dGVzLmFfcG9zaXRpb24sIENPTVBPTkVOVFNfUEVSX1BPSU5ULCBnbENvbnRleHQuZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcbiAgICBnbENvbnRleHQuZ2wudW5pZm9ybTRmdihnbENvbnRleHQudW5pZm9ybUNvbG9yU2hhZGVyLnVuaWZvcm1zLnVfY29sb3IsIGNvbG9yKTtcbiAgICBnbENvbnRleHQuZ2wuZHJhd0FycmF5cyhnbENvbnRleHQuZ2wuVFJJQU5HTEVfU1RSSVAsIDAsIDQpO1xuICAgIGdsQ29udGV4dC5nbC5kZWxldGVCdWZmZXIodmJvKTtcbn1cbi8qKlxuICogUG9ydGVkIGZyb20gcmF5bGliLmpzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwcmVwYXJlRHJhd0xpbmVFeEJ1ZmZlckRhdGEoc3RhcnRQb3MsIGVuZFBvcywgdGhpY2tuZXNzKSB7XG4gICAgY29uc3QgZGVsdGEgPSBuZXcgVmVjdG9yMihlbmRQb3MueCAtIHN0YXJ0UG9zLngsIGVuZFBvcy55IC0gc3RhcnRQb3MueSk7XG4gICAgY29uc3QgbGVuZ3RoID0gZGVsdGEubGVuZ3RoKCk7XG4gICAgaWYgKChsZW5ndGggPiAwKSAmJiAodGhpY2tuZXNzID4gMCkpIHtcbiAgICAgICAgY29uc3Qgc2NhbGUgPSB0aGlja25lc3MgLyAoMiAqIGxlbmd0aCk7XG4gICAgICAgIGNvbnN0IHJhZGl1cyA9IG5ldyBWZWN0b3IyKC1zY2FsZSAqIGRlbHRhLnksIHNjYWxlICogZGVsdGEueCk7XG4gICAgICAgIGNvbnN0IHN0cmlwID0gW1xuICAgICAgICAgICAgc3RhcnRQb3MueCAtIHJhZGl1cy54LCBzdGFydFBvcy55IC0gcmFkaXVzLnksXG4gICAgICAgICAgICBzdGFydFBvcy54ICsgcmFkaXVzLngsIHN0YXJ0UG9zLnkgKyByYWRpdXMueSxcbiAgICAgICAgICAgIGVuZFBvcy54IC0gcmFkaXVzLngsIGVuZFBvcy55IC0gcmFkaXVzLnksXG4gICAgICAgICAgICBlbmRQb3MueCArIHJhZGl1cy54LCBlbmRQb3MueSArIHJhZGl1cy55XG4gICAgICAgIF07XG4gICAgICAgIHJldHVybiBzdHJpcDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/draw.ts\n");

/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./draw */ \"./src/draw.ts\");\n/* harmony import */ var _matrix__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./matrix */ \"./src/matrix.ts\");\n/* harmony import */ var _osm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./osm */ \"./src/osm.ts\");\n/* harmony import */ var _pathfinding__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pathfinding */ \"./src/pathfinding.ts\");\n/* harmony import */ var _quadtree__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./quadtree */ \"./src/quadtree.ts\");\n/* harmony import */ var _vector2__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./vector2 */ \"./src/vector2.ts\");\n/* harmony import */ var _external_osm_read_pbf__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./external/osm-read-pbf */ \"./src/external/osm-read-pbf.js\");\n/* harmony import */ var _external_osm_read_pbf__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_external_osm_read_pbf__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _webgl__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./webgl */ \"./src/webgl.ts\");\n/* harmony import */ var _worker_manager__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./worker-manager */ \"./src/worker-manager.ts\");\n/* harmony import */ var _color__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./color */ \"./src/color.ts\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./constants */ \"./src/constants.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\n\n\n\n\n\n\n\n\n\n\nfunction setLoadingText(text) {\n    const loadingElement = document.getElementById(\"loading\");\n    loadingElement.innerHTML = text;\n}\nfunction hideLoading() {\n    document.getElementById(\"loading\").style.display = 'none';\n}\nwindow.addEventListener(\"load\", () => __awaiter(void 0, void 0, void 0, function* () {\n    // Setup\n    setLoadingText(\"Initializing canvas\");\n    const canvas = (0,_webgl__WEBPACK_IMPORTED_MODULE_7__.initCanvas)(\"canvas\");\n    const gl = (0,_webgl__WEBPACK_IMPORTED_MODULE_7__.initGl)(canvas);\n    setLoadingText(\"Initializing Shaders\");\n    const uniformColorShader = (0,_webgl__WEBPACK_IMPORTED_MODULE_7__.initShader)({\n        gl,\n        vertexShaderId: '#uniform-color-vertex-shader',\n        fragmentShaderId: '#uniform-color-fragment-shader',\n        uniforms: ['u_color', 'u_matrix'],\n        attributes: ['a_position']\n    });\n    const attributeColorShader = (0,_webgl__WEBPACK_IMPORTED_MODULE_7__.initShader)({\n        gl,\n        vertexShaderId: '#attribute-color-vertex-shader',\n        fragmentShaderId: '#attribute-color-fragment-shader',\n        uniforms: ['u_matrix'],\n        attributes: ['a_position', 'a_color']\n    });\n    gl.useProgram(uniformColorShader.program);\n    const glContext = {\n        gl, uniformColorShader, attributeColorShader\n    };\n    const workerRequest = (0,_worker_manager__WEBPACK_IMPORTED_MODULE_8__.worker)((event) => {\n        if (event.eventType === 'GRAPH_VISITED_UPDATE_BULK') {\n            for (let i = 0; i < event.eventData.length; i++) {\n                visitedNodesIdxs.push(event.eventData[i]);\n            }\n        }\n    });\n    setLoadingText(\"Processing OSM PBF data\");\n    const osmContext = yield (0,_osm__WEBPACK_IMPORTED_MODULE_2__.initOSM)('/assets/kuwait.pbf');\n    // TODO: https://wiki.openstreetmap.org/wiki/Key:highway\n    setLoadingText(\"Extracting highway subgraphs\");\n    const motorways = (0,_osm__WEBPACK_IMPORTED_MODULE_2__.getSubgraphFromWayWithTag)(\"highway\", [\"motorway\", \"motorway_link\"], osmContext);\n    const trunks = (0,_osm__WEBPACK_IMPORTED_MODULE_2__.getSubgraphFromWayWithTag)(\"highway\", [\"trunk\", \"trunk_link\"], osmContext);\n    const primaries = (0,_osm__WEBPACK_IMPORTED_MODULE_2__.getSubgraphFromWayWithTag)(\"highway\", [\"primary\", \"primary_link\"], osmContext);\n    const secondaries = (0,_osm__WEBPACK_IMPORTED_MODULE_2__.getSubgraphFromWayWithTag)(\"highway\", [\"secondary\", \"secondary_link\"], osmContext);\n    const tertiaries = (0,_osm__WEBPACK_IMPORTED_MODULE_2__.getSubgraphFromWayWithTag)(\"highway\", [\"tertiary\", \"tertiary_link\"], osmContext);\n    const unclassifieds = (0,_osm__WEBPACK_IMPORTED_MODULE_2__.getSubgraphFromWayWithTag)(\"highway\", [\"unclassified\"], osmContext);\n    const residentials = (0,_osm__WEBPACK_IMPORTED_MODULE_2__.getSubgraphFromWayWithTag)(\"highway\", [\"residential\"], osmContext);\n    const buildings = (0,_osm__WEBPACK_IMPORTED_MODULE_2__.getSubgraphFromWayWithTag)(\"building\", [\"*\"], osmContext);\n    const normalizedNodesLonLatArray = (0,_osm__WEBPACK_IMPORTED_MODULE_2__.initFlatNodeData)(osmContext.worldNodes);\n    setLoadingText(\"Initizliaing WebGL Vertex Buffers\");\n    // gl buffers\n    const nodes_buffer = (0,_webgl__WEBPACK_IMPORTED_MODULE_7__.initBuffer)(glContext, new Float32Array(normalizedNodesLonLatArray), 'vbo');\n    const path_buffer = (0,_webgl__WEBPACK_IMPORTED_MODULE_7__.initBuffer)(glContext, new Uint32Array([]), 'vbo');\n    const building_nodes_index_buffer = (0,_webgl__WEBPACK_IMPORTED_MODULE_7__.initBuffer)(glContext, new Uint32Array(buildings.idxs), 'ebo');\n    const motorways_nodes_index_buffer = (0,_webgl__WEBPACK_IMPORTED_MODULE_7__.initBuffer)(glContext, new Uint32Array(motorways.idxs), 'ebo');\n    const trunks_nodes_index_buffer = (0,_webgl__WEBPACK_IMPORTED_MODULE_7__.initBuffer)(glContext, new Uint32Array(trunks.idxs), 'ebo');\n    const primaries_nodes_index_buffer = (0,_webgl__WEBPACK_IMPORTED_MODULE_7__.initBuffer)(glContext, new Uint32Array(primaries.idxs), 'ebo');\n    const secondaries_nodes_index_buffer = (0,_webgl__WEBPACK_IMPORTED_MODULE_7__.initBuffer)(glContext, new Uint32Array(secondaries.idxs), 'ebo');\n    const tertiaries_nodes_index_buffer = (0,_webgl__WEBPACK_IMPORTED_MODULE_7__.initBuffer)(glContext, new Uint32Array(tertiaries.idxs), 'ebo');\n    const unclassifieds_nodes_index_buffer = (0,_webgl__WEBPACK_IMPORTED_MODULE_7__.initBuffer)(glContext, new Uint32Array(unclassifieds.idxs), 'ebo');\n    const residentials_nodes_index_buffer = (0,_webgl__WEBPACK_IMPORTED_MODULE_7__.initBuffer)(glContext, new Uint32Array(residentials.idxs), 'ebo');\n    const highlighted_way_nodes_index_buffer = (0,_webgl__WEBPACK_IMPORTED_MODULE_7__.initBuffer)(glContext, new Uint32Array(0), 'ebo');\n    const visited_nodes_index_buffer = (0,_webgl__WEBPACK_IMPORTED_MODULE_7__.initBuffer)(glContext, new Uint32Array(new Array(osmContext.nodes.length * 2)), 'ebo');\n    // gl buffer optimizations\n    let visited_nodes_index_buffer_elements_count = 0;\n    setLoadingText(\"Initizliaing WebGL Array Buffers\");\n    // VAOs\n    const default_vao = (0,_webgl__WEBPACK_IMPORTED_MODULE_7__.initVao)({\n        glContext,\n        enableLocations: [glContext.uniformColorShader.attributes.a_position],\n        vbos: [],\n        ebo: null\n    });\n    const nodes_vao = (0,_webgl__WEBPACK_IMPORTED_MODULE_7__.initVao)({\n        glContext,\n        enableLocations: [glContext.uniformColorShader.attributes.a_position],\n        vbos: [\n            {\n                buffer: nodes_buffer,\n                vertexPtr: {\n                    location: glContext.uniformColorShader.attributes.a_position,\n                    components: 2,\n                    type: glContext.gl.FLOAT\n                }\n            }\n        ],\n        ebo: null,\n    });\n    const path_vao = (0,_webgl__WEBPACK_IMPORTED_MODULE_7__.initVao)({\n        glContext,\n        enableLocations: [glContext.uniformColorShader.attributes.a_position],\n        vbos: [\n            {\n                buffer: path_buffer,\n                vertexPtr: {\n                    location: glContext.uniformColorShader.attributes.a_position,\n                    components: 2,\n                    type: glContext.gl.FLOAT\n                }\n            }\n        ],\n        ebo: null,\n    });\n    // Quad tree\n    setLoadingText(\"Loading Quad Tree\");\n    let quadTree = new _quadtree__WEBPACK_IMPORTED_MODULE_4__.WorldQuadTree();\n    quadTree.populate([\n        ...motorways.worldNodes,\n        ...trunks.worldNodes,\n        ...primaries.worldNodes,\n        ...secondaries.worldNodes,\n        ...tertiaries.worldNodes,\n        ...unclassifieds.worldNodes,\n        ...residentials.worldNodes,\n    ]);\n    // State\n    let closestNodeToPointer;\n    let previousTimestamp;\n    let time = 0;\n    let anchor = undefined;\n    let camera = {\n        zoom: 100,\n        offset: new _vector2__WEBPACK_IMPORTED_MODULE_5__.Vector2(0, 0),\n        rotation: 2,\n        target: new _vector2__WEBPACK_IMPORTED_MODULE_5__.Vector2(_osm__WEBPACK_IMPORTED_MODULE_2__.WORLD_WIDTH / 2, _osm__WEBPACK_IMPORTED_MODULE_2__.WORLD_HEIGHT / 2)\n    };\n    let targetZoom = 1;\n    let targetRotation = 0;\n    let isCtrlPressed = false;\n    let mouseCanvasPosition = new _vector2__WEBPACK_IMPORTED_MODULE_5__.Vector2(0, 0);\n    let mouseWorldPosition = new _vector2__WEBPACK_IMPORTED_MODULE_5__.Vector2(0, 0);\n    let startNodeIdx;\n    let endNodeIdx;\n    let mouseDownTimeout;\n    let pathNodesIdxs = [];\n    let visitedNodesIdxs = [];\n    setLoadingText(\"Building Graphs\");\n    (0,_pathfinding__WEBPACK_IMPORTED_MODULE_3__.buildGraph)([\n        ...motorways.ways,\n        ...trunks.ways,\n        ...primaries.ways,\n        ...secondaries.ways,\n        ...tertiaries.ways,\n        ...unclassifieds.ways,\n        ...residentials.ways,\n    ], osmContext.nodes, osmContext.nodesIdIdxMap);\n    const workerProxy = yield workerRequest;\n    yield workerProxy.buildGraph([\n        ...motorways.ways,\n        ...trunks.ways,\n        ...primaries.ways,\n        ...secondaries.ways,\n        ...tertiaries.ways,\n        ...unclassifieds.ways,\n        ...residentials.ways,\n    ], osmContext.nodes, osmContext.nodesIdIdxMap);\n    window.addEventListener(\"mouseup\", (e) => {\n        anchor = undefined;\n    });\n    window.addEventListener(\"mousedown\", (e) => {\n        anchor = (0,_webgl__WEBPACK_IMPORTED_MODULE_7__.getMouseCanvasPosition)(e, canvas);\n        if (closestNodeToPointer) {\n            const idx = osmContext.nodesIdIdxMap.get(closestNodeToPointer.id);\n            mouseDownTimeout = window.setTimeout(() => {\n                if (startNodeIdx !== undefined && endNodeIdx !== undefined) {\n                    startNodeIdx = undefined;\n                    endNodeIdx = undefined;\n                    pathNodesIdxs.length = 0;\n                    visitedNodesIdxs.length = 0;\n                }\n                if (startNodeIdx === undefined) {\n                    startNodeIdx = idx;\n                }\n                else if (endNodeIdx === undefined) {\n                    endNodeIdx = idx;\n                }\n                ;\n            }, 200);\n        }\n    });\n    window.addEventListener(\"mousemove\", (e) => {\n        if (mouseDownTimeout)\n            clearTimeout(mouseDownTimeout);\n        mouseCanvasPosition = (0,_webgl__WEBPACK_IMPORTED_MODULE_7__.getMouseCanvasPosition)(e, canvas);\n        mouseWorldPosition = (0,_webgl__WEBPACK_IMPORTED_MODULE_7__.getScreenToWorld)(mouseCanvasPosition, camera);\n        closestNodeToPointer = quadTree.getClosestNodeForWorldPosition(mouseWorldPosition);\n        if (anchor && isCtrlPressed) {\n            const dy = mouseCanvasPosition.y - anchor.y;\n            targetRotation += dy / 250;\n            anchor = mouseCanvasPosition;\n            return;\n        }\n        if (anchor) {\n            const delta = mouseCanvasPosition.subtract(anchor);\n            // Ref https://matthew-brett.github.io/teaching/rotation_2d.html\n            const rotatedAndScaledDelta = new _vector2__WEBPACK_IMPORTED_MODULE_5__.Vector2(Math.cos(-camera.rotation) * delta.x - Math.sin(-camera.rotation) * delta.y, Math.sin(-camera.rotation) * delta.x + Math.cos(-camera.rotation) * delta.y)\n                .multiply(new _vector2__WEBPACK_IMPORTED_MODULE_5__.Vector2(1 / camera.zoom, 1 / camera.zoom));\n            camera.target = camera.target.subtract(rotatedAndScaledDelta);\n            anchor = mouseCanvasPosition;\n        }\n    });\n    canvas.addEventListener('wheel', (e) => {\n        if (e.ctrlKey) {\n            e.preventDefault();\n        }\n        if (e.deltaY < 0) {\n            targetZoom *= 1.5;\n        }\n        else if (targetZoom - 1 > 0) {\n            targetZoom /= 1.5;\n        }\n    });\n    document.addEventListener('contextmenu', event => event.preventDefault());\n    window.addEventListener(\"blur\", (e) => {\n        isCtrlPressed = false;\n    });\n    window.addEventListener(\"keydown\", (e) => {\n        if (e.key === 'Control') {\n            isCtrlPressed = true;\n        }\n        if (e.key === '=') {\n            targetZoom *= 1.5;\n        }\n        if (e.key === '-') {\n            targetZoom /= 1.5;\n            if (targetZoom < 1) {\n                targetZoom = 1;\n            }\n        }\n        if (e.code === 'Space') {\n            pathNodesIdxs.length = 0;\n            visitedNodesIdxs.length = 0;\n            if (startNodeIdx) {\n                workerProxy.dijkstra(startNodeIdx)\n                    .then((result) => {\n                    if (result) {\n                        if (endNodeIdx) {\n                            pathNodesIdxs = (0,_pathfinding__WEBPACK_IMPORTED_MODULE_3__.findPath)(result.previous, endNodeIdx);\n                        }\n                    }\n                });\n            }\n        }\n    });\n    window.addEventListener(\"keyup\", (e) => {\n        if (e.key === 'Control') {\n            isCtrlPressed = false;\n        }\n    });\n    function drawNodes() {\n        glContext.gl.bindVertexArray(nodes_vao);\n        glContext.gl.uniform4fv(glContext.uniformColorShader.uniforms.u_color, _constants__WEBPACK_IMPORTED_MODULE_10__.NODES_COLOR);\n        glContext.gl.drawArrays(glContext.gl.POINTS, 0, normalizedNodesLonLatArray.length / 2);\n        glContext.gl.bindVertexArray(default_vao);\n        ;\n    }\n    function drawWays() {\n        glContext.gl.bindVertexArray(nodes_vao);\n        glContext.gl.uniform4fv(glContext.uniformColorShader.uniforms.u_color, _constants__WEBPACK_IMPORTED_MODULE_10__.MOTORWAYS_COLOR);\n        glContext.gl.bindBuffer(glContext.gl.ELEMENT_ARRAY_BUFFER, motorways_nodes_index_buffer);\n        glContext.gl.drawElements(glContext.gl.LINE_STRIP, motorways.idxs.length, glContext.gl.UNSIGNED_INT, 0);\n        glContext.gl.uniform4fv(glContext.uniformColorShader.uniforms.u_color, _constants__WEBPACK_IMPORTED_MODULE_10__.BUILDINGS_COLOR);\n        glContext.gl.bindBuffer(glContext.gl.ELEMENT_ARRAY_BUFFER, building_nodes_index_buffer);\n        glContext.gl.drawElements(glContext.gl.TRIANGLE_STRIP, buildings.idxs.length, glContext.gl.UNSIGNED_INT, 0);\n        glContext.gl.uniform4fv(glContext.uniformColorShader.uniforms.u_color, _constants__WEBPACK_IMPORTED_MODULE_10__.TRUNKS_COLOR);\n        glContext.gl.bindBuffer(glContext.gl.ELEMENT_ARRAY_BUFFER, trunks_nodes_index_buffer);\n        glContext.gl.drawElements(glContext.gl.LINE_STRIP, trunks.idxs.length, glContext.gl.UNSIGNED_INT, 0);\n        glContext.gl.uniform4fv(glContext.uniformColorShader.uniforms.u_color, _constants__WEBPACK_IMPORTED_MODULE_10__.PRIMARIES_COLOR);\n        glContext.gl.bindBuffer(glContext.gl.ELEMENT_ARRAY_BUFFER, primaries_nodes_index_buffer);\n        glContext.gl.drawElements(glContext.gl.LINE_STRIP, primaries.idxs.length, glContext.gl.UNSIGNED_INT, 0);\n        glContext.gl.uniform4fv(glContext.uniformColorShader.uniforms.u_color, _constants__WEBPACK_IMPORTED_MODULE_10__.SECONDARIES_COLOR);\n        glContext.gl.bindBuffer(glContext.gl.ELEMENT_ARRAY_BUFFER, secondaries_nodes_index_buffer);\n        glContext.gl.drawElements(glContext.gl.LINE_STRIP, secondaries.idxs.length, glContext.gl.UNSIGNED_INT, 0);\n        glContext.gl.uniform4fv(glContext.uniformColorShader.uniforms.u_color, _constants__WEBPACK_IMPORTED_MODULE_10__.TERTIARIES_COLOR);\n        glContext.gl.bindBuffer(glContext.gl.ELEMENT_ARRAY_BUFFER, tertiaries_nodes_index_buffer);\n        glContext.gl.drawElements(glContext.gl.LINE_STRIP, tertiaries.idxs.length, glContext.gl.UNSIGNED_INT, 0);\n        glContext.gl.uniform4fv(glContext.uniformColorShader.uniforms.u_color, _constants__WEBPACK_IMPORTED_MODULE_10__.UNCLASSIFIEDS_COLOR);\n        glContext.gl.bindBuffer(glContext.gl.ELEMENT_ARRAY_BUFFER, unclassifieds_nodes_index_buffer);\n        glContext.gl.drawElements(glContext.gl.LINE_STRIP, unclassifieds.idxs.length, glContext.gl.UNSIGNED_INT, 0);\n        glContext.gl.uniform4fv(glContext.uniformColorShader.uniforms.u_color, _constants__WEBPACK_IMPORTED_MODULE_10__.RESIDENTIALS_COLOR);\n        glContext.gl.bindBuffer(glContext.gl.ELEMENT_ARRAY_BUFFER, residentials_nodes_index_buffer);\n        glContext.gl.drawElements(glContext.gl.LINE_STRIP, residentials.idxs.length, glContext.gl.UNSIGNED_INT, 0);\n        glContext.gl.bindVertexArray(default_vao);\n        ;\n    }\n    function drawQuadtreeData(time) {\n        glContext.gl.bindBuffer(glContext.gl.ARRAY_BUFFER, nodes_buffer);\n        const COMPONENTS_PER_WAY = 2;\n        glContext.gl.vertexAttribPointer(glContext.uniformColorShader.attributes.a_position, COMPONENTS_PER_WAY, glContext.gl.FLOAT, false, 0, 0);\n        glContext.gl.uniform4fv(glContext.uniformColorShader.uniforms.u_color, _constants__WEBPACK_IMPORTED_MODULE_10__.QUADTREE_POINT_COLOR);\n        if (closestNodeToPointer) {\n            const idx = osmContext.nodesIdIdxMap.get(closestNodeToPointer.id);\n            const lon = normalizedNodesLonLatArray[idx * 2];\n            const lat = normalizedNodesLonLatArray[idx * 2 + 1];\n            (0,_draw__WEBPACK_IMPORTED_MODULE_0__.drawCircle)(glContext, new _vector2__WEBPACK_IMPORTED_MODULE_5__.Vector2(lon, lat), (5 + (3 * Math.sin(time * 5))) / camera.zoom, new _color__WEBPACK_IMPORTED_MODULE_9__.Color(1, 0.9 + (Math.sin(time * 5) * 0.1), 1, 1));\n        }\n    }\n    function updateOverlay(dt) {\n        const fpsElement = document.querySelector(\"#fpsTarget\");\n        fpsElement.innerHTML = `${(Math.floor(1 / dt)).toFixed(0)}`;\n        const nodesCountElement = document.querySelector(\"#nodesCount\");\n        nodesCountElement.innerHTML = `${osmContext.metadata.nodesCount}`;\n        const cameraTargetElement = document.querySelector(\"#cameraTarget\");\n        cameraTargetElement.innerHTML = `${camera.target.x.toFixed(2)}, ${camera.target.y.toFixed(2)}`;\n        const cameraZoomElement = document.querySelector(\"#cameraZoom\");\n        cameraZoomElement.innerHTML = `${camera.zoom.toFixed(2)}`;\n        const cameraRotationElement = document.querySelector(\"#cameraRotation\");\n        cameraRotationElement.innerHTML = `${camera.rotation.toFixed(2)}`;\n        const mouseCanvasPositionElement = document.querySelector(\"#mouseCanvasPosition\");\n        mouseCanvasPositionElement.innerHTML = `${mouseCanvasPosition.x.toFixed(2)}, ${(mouseCanvasPosition.y).toFixed(2)}`;\n        const mouseWorldPositionElement = document.querySelector(\"#mouseWorldPosition\");\n        mouseWorldPositionElement.innerHTML = `${mouseWorldPosition.x.toFixed(2)}, ${mouseWorldPosition.y.toFixed(2)}`;\n    }\n    function drawWayHighlight() {\n        if (closestNodeToPointer) {\n            const wayIdxs = osmContext.nodesIdWayIdxsMap.get(closestNodeToPointer.id);\n            if (wayIdxs === undefined) {\n                // https://help.openstreetmap.org/questions/50206/orphan-nodes-and-ways\n                return;\n            }\n            const ways = wayIdxs.map(wayIdx => osmContext.ways[wayIdx]);\n            const nodeIdxs = ways\n                .reduce((acc, way) => [...acc, ...way.node_ids, \"*\"], [])\n                .map(nodeId => {\n                if (nodeId === \"*\")\n                    return 0xFFFFFFFF;\n                return osmContext.nodesIdIdxMap.get(nodeId);\n            });\n            glContext.gl.bindVertexArray(nodes_vao);\n            glContext.gl.uniform4fv(glContext.uniformColorShader.uniforms.u_color, _constants__WEBPACK_IMPORTED_MODULE_10__.HIGHLIGHTED_WAYS_COLOR);\n            glContext.gl.bindBuffer(glContext.gl.ELEMENT_ARRAY_BUFFER, highlighted_way_nodes_index_buffer);\n            glContext.gl.bufferData(glContext.gl.ELEMENT_ARRAY_BUFFER, new Uint32Array(nodeIdxs), glContext.gl.STATIC_DRAW);\n            glContext.gl.drawElements(glContext.gl.LINE_STRIP, nodeIdxs.length, glContext.gl.UNSIGNED_INT, 0);\n            glContext.gl.bindVertexArray(default_vao);\n            ;\n            const tagsArray = [];\n            for (let i = 0; i < ways.length; i++) {\n                tagsArray.push(...Object.entries(ways[i].tags).map((([k, v]) => `<div>${k}: ${v}</div>`)));\n            }\n            const wayTagsElement = document.querySelector(\"#wayTags\");\n            wayTagsElement.innerHTML = tagsArray.join(\" \");\n        }\n    }\n    function drawPathfindingAlgorithm() {\n        if (startNodeIdx) {\n            const lon = normalizedNodesLonLatArray[startNodeIdx * 2];\n            const lat = normalizedNodesLonLatArray[startNodeIdx * 2 + 1];\n            (0,_draw__WEBPACK_IMPORTED_MODULE_0__.drawCircle)(glContext, new _vector2__WEBPACK_IMPORTED_MODULE_5__.Vector2(lon, lat), (10 + (3 * Math.sin(time * 10))) / camera.zoom, _constants__WEBPACK_IMPORTED_MODULE_10__.START_NODE_COLOR);\n        }\n        if (endNodeIdx) {\n            const lon = normalizedNodesLonLatArray[endNodeIdx * 2];\n            const lat = normalizedNodesLonLatArray[endNodeIdx * 2 + 1];\n            (0,_draw__WEBPACK_IMPORTED_MODULE_0__.drawCircle)(glContext, new _vector2__WEBPACK_IMPORTED_MODULE_5__.Vector2(lon, lat), (10 + (3 * Math.sin(time * 10))) / camera.zoom, _constants__WEBPACK_IMPORTED_MODULE_10__.END_NODE_COLOR);\n        }\n        { // Visited nodes highlighting\n            glContext.gl.bindVertexArray(nodes_vao);\n            glContext.gl.bindBuffer(glContext.gl.ELEMENT_ARRAY_BUFFER, visited_nodes_index_buffer);\n            if (visitedNodesIdxs.length !== visited_nodes_index_buffer_elements_count) {\n                glContext.gl.bufferSubData(glContext.gl.ELEMENT_ARRAY_BUFFER, visited_nodes_index_buffer_elements_count * 4, new Uint32Array(visitedNodesIdxs.slice(visited_nodes_index_buffer_elements_count)));\n                visited_nodes_index_buffer_elements_count = visitedNodesIdxs.length;\n            }\n            glContext.gl.uniform4fv(glContext.uniformColorShader.uniforms.u_color, _constants__WEBPACK_IMPORTED_MODULE_10__.VISITED_NODE_COLOR);\n            glContext.gl.drawElements(glContext.gl.LINES, visitedNodesIdxs.length, glContext.gl.UNSIGNED_INT, 0);\n            glContext.gl.bindVertexArray(default_vao);\n        }\n        { // Path highlighting\n            const lines = [];\n            for (let i = 0; i < pathNodesIdxs.length - 1; i += 1) {\n                const startIdx = pathNodesIdxs[i];\n                const endIdx = pathNodesIdxs[i + 1];\n                const startNode = normalizedNodesLonLatArray.slice(startIdx * 2, startIdx * 2 + 2);\n                const endnode = normalizedNodesLonLatArray.slice(endIdx * 2, endIdx * 2 + 2);\n                const line = (0,_draw__WEBPACK_IMPORTED_MODULE_0__.prepareDrawLineExBufferData)(new _vector2__WEBPACK_IMPORTED_MODULE_5__.Vector2(startNode[0], startNode[1]), new _vector2__WEBPACK_IMPORTED_MODULE_5__.Vector2(endnode[0], endnode[1]), 5 / camera.zoom);\n                lines.push(...line);\n            }\n            glContext.gl.bindVertexArray(path_vao);\n            glContext.gl.bindBuffer(glContext.gl.ARRAY_BUFFER, path_buffer);\n            glContext.gl.bufferData(glContext.gl.ARRAY_BUFFER, new Float32Array(lines), glContext.gl.STATIC_DRAW);\n            glContext.gl.uniform4fv(glContext.uniformColorShader.uniforms.u_color, _constants__WEBPACK_IMPORTED_MODULE_10__.SHORTEST_PATH_COLOR);\n            glContext.gl.drawArrays(glContext.gl.TRIANGLE_STRIP, 0, lines.length / 2);\n            glContext.gl.bindVertexArray(default_vao);\n        }\n    }\n    function drawFrame(timestamp) {\n        const dt = (timestamp - previousTimestamp) / 1000;\n        previousTimestamp = timestamp;\n        time += dt;\n        glContext.gl.clearColor(0, 0, 0, 1);\n        glContext.gl.clear(glContext.gl.COLOR_BUFFER_BIT);\n        glContext.gl.viewport(0, 0, canvas.clientWidth, canvas.clientHeight);\n        glContext.gl.bindVertexArray(default_vao);\n        (0,_webgl__WEBPACK_IMPORTED_MODULE_7__.resizeCanvasToDisplaySize)(canvas);\n        camera.offset.x = canvas.clientWidth / 2;\n        camera.offset.y = canvas.clientHeight / 2;\n        const P = _matrix__WEBPACK_IMPORTED_MODULE_1__.Matrix.projection(canvas.clientWidth, canvas.clientHeight);\n        const CAM_P = (0,_webgl__WEBPACK_IMPORTED_MODULE_7__.getCameraMatrix)(camera).multiply(P);\n        gl.uniformMatrix3fv(glContext.uniformColorShader.uniforms.u_matrix, false, CAM_P.data);\n        drawQuadtreeData(time);\n        drawWays();\n        // drawNodes();\n        (0,_draw__WEBPACK_IMPORTED_MODULE_0__.drawCircle)(glContext, camera.target, 5 / camera.zoom, _constants__WEBPACK_IMPORTED_MODULE_10__.CAMERA_TARGET_COLOR);\n        drawWayHighlight();\n        drawPathfindingAlgorithm();\n        updateOverlay(dt);\n        // X,Y axis\n        (0,_draw__WEBPACK_IMPORTED_MODULE_0__.drawLine)(glContext, new _vector2__WEBPACK_IMPORTED_MODULE_5__.Vector2(-canvas.clientWidth / 2, 0), new _vector2__WEBPACK_IMPORTED_MODULE_5__.Vector2(canvas.clientWidth / 2, 0), _constants__WEBPACK_IMPORTED_MODULE_10__.X_AXIS_COLOR);\n        (0,_draw__WEBPACK_IMPORTED_MODULE_0__.drawLine)(glContext, new _vector2__WEBPACK_IMPORTED_MODULE_5__.Vector2(0, -canvas.clientHeight / 2), new _vector2__WEBPACK_IMPORTED_MODULE_5__.Vector2(0, canvas.clientHeight / 2), _constants__WEBPACK_IMPORTED_MODULE_10__.Y_AXIS_COLOR);\n        // World outline\n        (0,_draw__WEBPACK_IMPORTED_MODULE_0__.drawLine)(glContext, new _vector2__WEBPACK_IMPORTED_MODULE_5__.Vector2(0, 0), new _vector2__WEBPACK_IMPORTED_MODULE_5__.Vector2(_osm__WEBPACK_IMPORTED_MODULE_2__.WORLD_WIDTH, 0), _constants__WEBPACK_IMPORTED_MODULE_10__.WORLD_OUTLINE_COLOR);\n        (0,_draw__WEBPACK_IMPORTED_MODULE_0__.drawLine)(glContext, new _vector2__WEBPACK_IMPORTED_MODULE_5__.Vector2(_osm__WEBPACK_IMPORTED_MODULE_2__.WORLD_WIDTH, 0), new _vector2__WEBPACK_IMPORTED_MODULE_5__.Vector2(_osm__WEBPACK_IMPORTED_MODULE_2__.WORLD_WIDTH, _osm__WEBPACK_IMPORTED_MODULE_2__.WORLD_HEIGHT), _constants__WEBPACK_IMPORTED_MODULE_10__.WORLD_OUTLINE_COLOR);\n        (0,_draw__WEBPACK_IMPORTED_MODULE_0__.drawLine)(glContext, new _vector2__WEBPACK_IMPORTED_MODULE_5__.Vector2(_osm__WEBPACK_IMPORTED_MODULE_2__.WORLD_WIDTH, _osm__WEBPACK_IMPORTED_MODULE_2__.WORLD_HEIGHT), new _vector2__WEBPACK_IMPORTED_MODULE_5__.Vector2(0, _osm__WEBPACK_IMPORTED_MODULE_2__.WORLD_HEIGHT), _constants__WEBPACK_IMPORTED_MODULE_10__.WORLD_OUTLINE_COLOR);\n        (0,_draw__WEBPACK_IMPORTED_MODULE_0__.drawLine)(glContext, new _vector2__WEBPACK_IMPORTED_MODULE_5__.Vector2(0, _osm__WEBPACK_IMPORTED_MODULE_2__.WORLD_HEIGHT), new _vector2__WEBPACK_IMPORTED_MODULE_5__.Vector2(0, 0), _constants__WEBPACK_IMPORTED_MODULE_10__.WORLD_OUTLINE_COLOR);\n        camera.zoom += (targetZoom - camera.zoom) * 10 * dt;\n        camera.rotation += (targetRotation - camera.rotation) * 20 * dt;\n        window.requestAnimationFrame(drawFrame);\n    }\n    window.requestAnimationFrame(timestamp => {\n        previousTimestamp = timestamp;\n        hideLoading();\n        window.requestAnimationFrame(drawFrame);\n    });\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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USxpREFBVSw0Q0FBNEMsNERBQW1CO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwrQ0FBUSxnQkFBZ0IsNkNBQU8sa0NBQWtDLDZDQUFPLDZCQUE2QixxREFBWTtBQUN6SCxRQUFRLCtDQUFRLGdCQUFnQiw2Q0FBTyxtQ0FBbUMsNkNBQU8sOEJBQThCLHFEQUFZO0FBQzNIO0FBQ0EsUUFBUSwrQ0FBUSxnQkFBZ0IsNkNBQU8sWUFBWSw2Q0FBTyxDQUFDLDZDQUFXLE1BQU0sNERBQW1CO0FBQy9GLFFBQVEsK0NBQVEsZ0JBQWdCLDZDQUFPLENBQUMsNkNBQVcsVUFBVSw2Q0FBTyxDQUFDLDZDQUFXLEVBQUUsOENBQVksR0FBRyw0REFBbUI7QUFDcEgsUUFBUSwrQ0FBUSxnQkFBZ0IsNkNBQU8sQ0FBQyw2Q0FBVyxFQUFFLDhDQUFZLE9BQU8sNkNBQU8sSUFBSSw4Q0FBWSxHQUFHLDREQUFtQjtBQUNySCxRQUFRLCtDQUFRLGdCQUFnQiw2Q0FBTyxJQUFJLDhDQUFZLE9BQU8sNkNBQU8sUUFBUSw0REFBbUI7QUFDaEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViZ2wtcHJvYmUtMi8uL3NyYy9pbmRleC50cz9lOTRlIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHsgZHJhd0NpcmNsZSwgZHJhd0xpbmUsIHByZXBhcmVEcmF3TGluZUV4QnVmZmVyRGF0YSB9IGZyb20gXCIuL2RyYXdcIjtcbmltcG9ydCB7IE1hdHJpeCB9IGZyb20gXCIuL21hdHJpeFwiO1xuaW1wb3J0IHsgZ2V0U3ViZ3JhcGhGcm9tV2F5V2l0aFRhZywgaW5pdEZsYXROb2RlRGF0YSwgaW5pdE9TTSwgV09STERfSEVJR0hULCBXT1JMRF9XSURUSCB9IGZyb20gXCIuL29zbVwiO1xuaW1wb3J0IHsgYnVpbGRHcmFwaCwgZmluZFBhdGggfSBmcm9tIFwiLi9wYXRoZmluZGluZ1wiO1xuaW1wb3J0IHsgV29ybGRRdWFkVHJlZSB9IGZyb20gXCIuL3F1YWR0cmVlXCI7XG5pbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSBcIi4vdmVjdG9yMlwiO1xuaW1wb3J0ICcuL2V4dGVybmFsL29zbS1yZWFkLXBiZic7XG5pbXBvcnQgeyBnZXRDYW1lcmFNYXRyaXgsIGdldE1vdXNlQ2FudmFzUG9zaXRpb24sIGdldFNjcmVlblRvV29ybGQsIGluaXRCdWZmZXIsIGluaXRDYW52YXMsIGluaXRHbCwgaW5pdFNoYWRlciwgaW5pdFZhbywgcmVzaXplQ2FudmFzVG9EaXNwbGF5U2l6ZSB9IGZyb20gXCIuL3dlYmdsXCI7XG5pbXBvcnQgeyB3b3JrZXIgfSBmcm9tIFwiLi93b3JrZXItbWFuYWdlclwiO1xuaW1wb3J0IHsgQ29sb3IgfSBmcm9tIFwiLi9jb2xvclwiO1xuaW1wb3J0IHsgQlVJTERJTkdTX0NPTE9SLCBDQU1FUkFfVEFSR0VUX0NPTE9SLCBFTkRfTk9ERV9DT0xPUiwgSElHSExJR0hURURfV0FZU19DT0xPUiwgTU9UT1JXQVlTX0NPTE9SLCBOT0RFU19DT0xPUiwgUFJJTUFSSUVTX0NPTE9SLCBRVUFEVFJFRV9QT0lOVF9DT0xPUiwgUkVTSURFTlRJQUxTX0NPTE9SLCBTRUNPTkRBUklFU19DT0xPUiwgU0hPUlRFU1RfUEFUSF9DT0xPUiwgU1RBUlRfTk9ERV9DT0xPUiwgVEVSVElBUklFU19DT0xPUiwgVFJVTktTX0NPTE9SLCBVTkNMQVNTSUZJRURTX0NPTE9SLCBWSVNJVEVEX05PREVfQ09MT1IsIFdPUkxEX09VVExJTkVfQ09MT1IsIFhfQVhJU19DT0xPUiwgWV9BWElTX0NPTE9SIH0gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5mdW5jdGlvbiBzZXRMb2FkaW5nVGV4dCh0ZXh0KSB7XG4gICAgY29uc3QgbG9hZGluZ0VsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvYWRpbmdcIik7XG4gICAgbG9hZGluZ0VsZW1lbnQuaW5uZXJIVE1MID0gdGV4dDtcbn1cbmZ1bmN0aW9uIGhpZGVMb2FkaW5nKCkge1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9hZGluZ1wiKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xufVxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgIC8vIFNldHVwXG4gICAgc2V0TG9hZGluZ1RleHQoXCJJbml0aWFsaXppbmcgY2FudmFzXCIpO1xuICAgIGNvbnN0IGNhbnZhcyA9IGluaXRDYW52YXMoXCJjYW52YXNcIik7XG4gICAgY29uc3QgZ2wgPSBpbml0R2woY2FudmFzKTtcbiAgICBzZXRMb2FkaW5nVGV4dChcIkluaXRpYWxpemluZyBTaGFkZXJzXCIpO1xuICAgIGNvbnN0IHVuaWZvcm1Db2xvclNoYWRlciA9IGluaXRTaGFkZXIoe1xuICAgICAgICBnbCxcbiAgICAgICAgdmVydGV4U2hhZGVySWQ6ICcjdW5pZm9ybS1jb2xvci12ZXJ0ZXgtc2hhZGVyJyxcbiAgICAgICAgZnJhZ21lbnRTaGFkZXJJZDogJyN1bmlmb3JtLWNvbG9yLWZyYWdtZW50LXNoYWRlcicsXG4gICAgICAgIHVuaWZvcm1zOiBbJ3VfY29sb3InLCAndV9tYXRyaXgnXSxcbiAgICAgICAgYXR0cmlidXRlczogWydhX3Bvc2l0aW9uJ11cbiAgICB9KTtcbiAgICBjb25zdCBhdHRyaWJ1dGVDb2xvclNoYWRlciA9IGluaXRTaGFkZXIoe1xuICAgICAgICBnbCxcbiAgICAgICAgdmVydGV4U2hhZGVySWQ6ICcjYXR0cmlidXRlLWNvbG9yLXZlcnRleC1zaGFkZXInLFxuICAgICAgICBmcmFnbWVudFNoYWRlcklkOiAnI2F0dHJpYnV0ZS1jb2xvci1mcmFnbWVudC1zaGFkZXInLFxuICAgICAgICB1bmlmb3JtczogWyd1X21hdHJpeCddLFxuICAgICAgICBhdHRyaWJ1dGVzOiBbJ2FfcG9zaXRpb24nLCAnYV9jb2xvciddXG4gICAgfSk7XG4gICAgZ2wudXNlUHJvZ3JhbSh1bmlmb3JtQ29sb3JTaGFkZXIucHJvZ3JhbSk7XG4gICAgY29uc3QgZ2xDb250ZXh0ID0ge1xuICAgICAgICBnbCwgdW5pZm9ybUNvbG9yU2hhZGVyLCBhdHRyaWJ1dGVDb2xvclNoYWRlclxuICAgIH07XG4gICAgY29uc3Qgd29ya2VyUmVxdWVzdCA9IHdvcmtlcigoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LmV2ZW50VHlwZSA9PT0gJ0dSQVBIX1ZJU0lURURfVVBEQVRFX0JVTEsnKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV2ZW50LmV2ZW50RGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZpc2l0ZWROb2Rlc0lkeHMucHVzaChldmVudC5ldmVudERhdGFbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgc2V0TG9hZGluZ1RleHQoXCJQcm9jZXNzaW5nIE9TTSBQQkYgZGF0YVwiKTtcbiAgICBjb25zdCBvc21Db250ZXh0ID0geWllbGQgaW5pdE9TTSgnL2Fzc2V0cy9rdXdhaXQucGJmJyk7XG4gICAgLy8gVE9ETzogaHR0cHM6Ly93aWtpLm9wZW5zdHJlZXRtYXAub3JnL3dpa2kvS2V5OmhpZ2h3YXlcbiAgICBzZXRMb2FkaW5nVGV4dChcIkV4dHJhY3RpbmcgaGlnaHdheSBzdWJncmFwaHNcIik7XG4gICAgY29uc3QgbW90b3J3YXlzID0gZ2V0U3ViZ3JhcGhGcm9tV2F5V2l0aFRhZyhcImhpZ2h3YXlcIiwgW1wibW90b3J3YXlcIiwgXCJtb3RvcndheV9saW5rXCJdLCBvc21Db250ZXh0KTtcbiAgICBjb25zdCB0cnVua3MgPSBnZXRTdWJncmFwaEZyb21XYXlXaXRoVGFnKFwiaGlnaHdheVwiLCBbXCJ0cnVua1wiLCBcInRydW5rX2xpbmtcIl0sIG9zbUNvbnRleHQpO1xuICAgIGNvbnN0IHByaW1hcmllcyA9IGdldFN1YmdyYXBoRnJvbVdheVdpdGhUYWcoXCJoaWdod2F5XCIsIFtcInByaW1hcnlcIiwgXCJwcmltYXJ5X2xpbmtcIl0sIG9zbUNvbnRleHQpO1xuICAgIGNvbnN0IHNlY29uZGFyaWVzID0gZ2V0U3ViZ3JhcGhGcm9tV2F5V2l0aFRhZyhcImhpZ2h3YXlcIiwgW1wic2Vjb25kYXJ5XCIsIFwic2Vjb25kYXJ5X2xpbmtcIl0sIG9zbUNvbnRleHQpO1xuICAgIGNvbnN0IHRlcnRpYXJpZXMgPSBnZXRTdWJncmFwaEZyb21XYXlXaXRoVGFnKFwiaGlnaHdheVwiLCBbXCJ0ZXJ0aWFyeVwiLCBcInRlcnRpYXJ5X2xpbmtcIl0sIG9zbUNvbnRleHQpO1xuICAgIGNvbnN0IHVuY2xhc3NpZmllZHMgPSBnZXRTdWJncmFwaEZyb21XYXlXaXRoVGFnKFwiaGlnaHdheVwiLCBbXCJ1bmNsYXNzaWZpZWRcIl0sIG9zbUNvbnRleHQpO1xuICAgIGNvbnN0IHJlc2lkZW50aWFscyA9IGdldFN1YmdyYXBoRnJvbVdheVdpdGhUYWcoXCJoaWdod2F5XCIsIFtcInJlc2lkZW50aWFsXCJdLCBvc21Db250ZXh0KTtcbiAgICBjb25zdCBidWlsZGluZ3MgPSBnZXRTdWJncmFwaEZyb21XYXlXaXRoVGFnKFwiYnVpbGRpbmdcIiwgW1wiKlwiXSwgb3NtQ29udGV4dCk7XG4gICAgY29uc3Qgbm9ybWFsaXplZE5vZGVzTG9uTGF0QXJyYXkgPSBpbml0RmxhdE5vZGVEYXRhKG9zbUNvbnRleHQud29ybGROb2Rlcyk7XG4gICAgc2V0TG9hZGluZ1RleHQoXCJJbml0aXpsaWFpbmcgV2ViR0wgVmVydGV4IEJ1ZmZlcnNcIik7XG4gICAgLy8gZ2wgYnVmZmVyc1xuICAgIGNvbnN0IG5vZGVzX2J1ZmZlciA9IGluaXRCdWZmZXIoZ2xDb250ZXh0LCBuZXcgRmxvYXQzMkFycmF5KG5vcm1hbGl6ZWROb2Rlc0xvbkxhdEFycmF5KSwgJ3ZibycpO1xuICAgIGNvbnN0IHBhdGhfYnVmZmVyID0gaW5pdEJ1ZmZlcihnbENvbnRleHQsIG5ldyBVaW50MzJBcnJheShbXSksICd2Ym8nKTtcbiAgICBjb25zdCBidWlsZGluZ19ub2Rlc19pbmRleF9idWZmZXIgPSBpbml0QnVmZmVyKGdsQ29udGV4dCwgbmV3IFVpbnQzMkFycmF5KGJ1aWxkaW5ncy5pZHhzKSwgJ2VibycpO1xuICAgIGNvbnN0IG1vdG9yd2F5c19ub2Rlc19pbmRleF9idWZmZXIgPSBpbml0QnVmZmVyKGdsQ29udGV4dCwgbmV3IFVpbnQzMkFycmF5KG1vdG9yd2F5cy5pZHhzKSwgJ2VibycpO1xuICAgIGNvbnN0IHRydW5rc19ub2Rlc19pbmRleF9idWZmZXIgPSBpbml0QnVmZmVyKGdsQ29udGV4dCwgbmV3IFVpbnQzMkFycmF5KHRydW5rcy5pZHhzKSwgJ2VibycpO1xuICAgIGNvbnN0IHByaW1hcmllc19ub2Rlc19pbmRleF9idWZmZXIgPSBpbml0QnVmZmVyKGdsQ29udGV4dCwgbmV3IFVpbnQzMkFycmF5KHByaW1hcmllcy5pZHhzKSwgJ2VibycpO1xuICAgIGNvbnN0IHNlY29uZGFyaWVzX25vZGVzX2luZGV4X2J1ZmZlciA9IGluaXRCdWZmZXIoZ2xDb250ZXh0LCBuZXcgVWludDMyQXJyYXkoc2Vjb25kYXJpZXMuaWR4cyksICdlYm8nKTtcbiAgICBjb25zdCB0ZXJ0aWFyaWVzX25vZGVzX2luZGV4X2J1ZmZlciA9IGluaXRCdWZmZXIoZ2xDb250ZXh0LCBuZXcgVWludDMyQXJyYXkodGVydGlhcmllcy5pZHhzKSwgJ2VibycpO1xuICAgIGNvbnN0IHVuY2xhc3NpZmllZHNfbm9kZXNfaW5kZXhfYnVmZmVyID0gaW5pdEJ1ZmZlcihnbENvbnRleHQsIG5ldyBVaW50MzJBcnJheSh1bmNsYXNzaWZpZWRzLmlkeHMpLCAnZWJvJyk7XG4gICAgY29uc3QgcmVzaWRlbnRpYWxzX25vZGVzX2luZGV4X2J1ZmZlciA9IGluaXRCdWZmZXIoZ2xDb250ZXh0LCBuZXcgVWludDMyQXJyYXkocmVzaWRlbnRpYWxzLmlkeHMpLCAnZWJvJyk7XG4gICAgY29uc3QgaGlnaGxpZ2h0ZWRfd2F5X25vZGVzX2luZGV4X2J1ZmZlciA9IGluaXRCdWZmZXIoZ2xDb250ZXh0LCBuZXcgVWludDMyQXJyYXkoMCksICdlYm8nKTtcbiAgICBjb25zdCB2aXNpdGVkX25vZGVzX2luZGV4X2J1ZmZlciA9IGluaXRCdWZmZXIoZ2xDb250ZXh0LCBuZXcgVWludDMyQXJyYXkobmV3IEFycmF5KG9zbUNvbnRleHQubm9kZXMubGVuZ3RoICogMikpLCAnZWJvJyk7XG4gICAgLy8gZ2wgYnVmZmVyIG9wdGltaXphdGlvbnNcbiAgICBsZXQgdmlzaXRlZF9ub2Rlc19pbmRleF9idWZmZXJfZWxlbWVudHNfY291bnQgPSAwO1xuICAgIHNldExvYWRpbmdUZXh0KFwiSW5pdGl6bGlhaW5nIFdlYkdMIEFycmF5IEJ1ZmZlcnNcIik7XG4gICAgLy8gVkFPc1xuICAgIGNvbnN0IGRlZmF1bHRfdmFvID0gaW5pdFZhbyh7XG4gICAgICAgIGdsQ29udGV4dCxcbiAgICAgICAgZW5hYmxlTG9jYXRpb25zOiBbZ2xDb250ZXh0LnVuaWZvcm1Db2xvclNoYWRlci5hdHRyaWJ1dGVzLmFfcG9zaXRpb25dLFxuICAgICAgICB2Ym9zOiBbXSxcbiAgICAgICAgZWJvOiBudWxsXG4gICAgfSk7XG4gICAgY29uc3Qgbm9kZXNfdmFvID0gaW5pdFZhbyh7XG4gICAgICAgIGdsQ29udGV4dCxcbiAgICAgICAgZW5hYmxlTG9jYXRpb25zOiBbZ2xDb250ZXh0LnVuaWZvcm1Db2xvclNoYWRlci5hdHRyaWJ1dGVzLmFfcG9zaXRpb25dLFxuICAgICAgICB2Ym9zOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYnVmZmVyOiBub2Rlc19idWZmZXIsXG4gICAgICAgICAgICAgICAgdmVydGV4UHRyOiB7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBnbENvbnRleHQudW5pZm9ybUNvbG9yU2hhZGVyLmF0dHJpYnV0ZXMuYV9wb3NpdGlvbixcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50czogMixcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogZ2xDb250ZXh0LmdsLkZMT0FUXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBlYm86IG51bGwsXG4gICAgfSk7XG4gICAgY29uc3QgcGF0aF92YW8gPSBpbml0VmFvKHtcbiAgICAgICAgZ2xDb250ZXh0LFxuICAgICAgICBlbmFibGVMb2NhdGlvbnM6IFtnbENvbnRleHQudW5pZm9ybUNvbG9yU2hhZGVyLmF0dHJpYnV0ZXMuYV9wb3NpdGlvbl0sXG4gICAgICAgIHZib3M6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBidWZmZXI6IHBhdGhfYnVmZmVyLFxuICAgICAgICAgICAgICAgIHZlcnRleFB0cjoge1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogZ2xDb250ZXh0LnVuaWZvcm1Db2xvclNoYWRlci5hdHRyaWJ1dGVzLmFfcG9zaXRpb24sXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IDIsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGdsQ29udGV4dC5nbC5GTE9BVFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgZWJvOiBudWxsLFxuICAgIH0pO1xuICAgIC8vIFF1YWQgdHJlZVxuICAgIHNldExvYWRpbmdUZXh0KFwiTG9hZGluZyBRdWFkIFRyZWVcIik7XG4gICAgbGV0IHF1YWRUcmVlID0gbmV3IFdvcmxkUXVhZFRyZWUoKTtcbiAgICBxdWFkVHJlZS5wb3B1bGF0ZShbXG4gICAgICAgIC4uLm1vdG9yd2F5cy53b3JsZE5vZGVzLFxuICAgICAgICAuLi50cnVua3Mud29ybGROb2RlcyxcbiAgICAgICAgLi4ucHJpbWFyaWVzLndvcmxkTm9kZXMsXG4gICAgICAgIC4uLnNlY29uZGFyaWVzLndvcmxkTm9kZXMsXG4gICAgICAgIC4uLnRlcnRpYXJpZXMud29ybGROb2RlcyxcbiAgICAgICAgLi4udW5jbGFzc2lmaWVkcy53b3JsZE5vZGVzLFxuICAgICAgICAuLi5yZXNpZGVudGlhbHMud29ybGROb2RlcyxcbiAgICBdKTtcbiAgICAvLyBTdGF0ZVxuICAgIGxldCBjbG9zZXN0Tm9kZVRvUG9pbnRlcjtcbiAgICBsZXQgcHJldmlvdXNUaW1lc3RhbXA7XG4gICAgbGV0IHRpbWUgPSAwO1xuICAgIGxldCBhbmNob3IgPSB1bmRlZmluZWQ7XG4gICAgbGV0IGNhbWVyYSA9IHtcbiAgICAgICAgem9vbTogMTAwLFxuICAgICAgICBvZmZzZXQ6IG5ldyBWZWN0b3IyKDAsIDApLFxuICAgICAgICByb3RhdGlvbjogMixcbiAgICAgICAgdGFyZ2V0OiBuZXcgVmVjdG9yMihXT1JMRF9XSURUSCAvIDIsIFdPUkxEX0hFSUdIVCAvIDIpXG4gICAgfTtcbiAgICBsZXQgdGFyZ2V0Wm9vbSA9IDE7XG4gICAgbGV0IHRhcmdldFJvdGF0aW9uID0gMDtcbiAgICBsZXQgaXNDdHJsUHJlc3NlZCA9IGZhbHNlO1xuICAgIGxldCBtb3VzZUNhbnZhc1Bvc2l0aW9uID0gbmV3IFZlY3RvcjIoMCwgMCk7XG4gICAgbGV0IG1vdXNlV29ybGRQb3NpdGlvbiA9IG5ldyBWZWN0b3IyKDAsIDApO1xuICAgIGxldCBzdGFydE5vZGVJZHg7XG4gICAgbGV0IGVuZE5vZGVJZHg7XG4gICAgbGV0IG1vdXNlRG93blRpbWVvdXQ7XG4gICAgbGV0IHBhdGhOb2Rlc0lkeHMgPSBbXTtcbiAgICBsZXQgdmlzaXRlZE5vZGVzSWR4cyA9IFtdO1xuICAgIHNldExvYWRpbmdUZXh0KFwiQnVpbGRpbmcgR3JhcGhzXCIpO1xuICAgIGJ1aWxkR3JhcGgoW1xuICAgICAgICAuLi5tb3RvcndheXMud2F5cyxcbiAgICAgICAgLi4udHJ1bmtzLndheXMsXG4gICAgICAgIC4uLnByaW1hcmllcy53YXlzLFxuICAgICAgICAuLi5zZWNvbmRhcmllcy53YXlzLFxuICAgICAgICAuLi50ZXJ0aWFyaWVzLndheXMsXG4gICAgICAgIC4uLnVuY2xhc3NpZmllZHMud2F5cyxcbiAgICAgICAgLi4ucmVzaWRlbnRpYWxzLndheXMsXG4gICAgXSwgb3NtQ29udGV4dC5ub2Rlcywgb3NtQ29udGV4dC5ub2Rlc0lkSWR4TWFwKTtcbiAgICBjb25zdCB3b3JrZXJQcm94eSA9IHlpZWxkIHdvcmtlclJlcXVlc3Q7XG4gICAgeWllbGQgd29ya2VyUHJveHkuYnVpbGRHcmFwaChbXG4gICAgICAgIC4uLm1vdG9yd2F5cy53YXlzLFxuICAgICAgICAuLi50cnVua3Mud2F5cyxcbiAgICAgICAgLi4ucHJpbWFyaWVzLndheXMsXG4gICAgICAgIC4uLnNlY29uZGFyaWVzLndheXMsXG4gICAgICAgIC4uLnRlcnRpYXJpZXMud2F5cyxcbiAgICAgICAgLi4udW5jbGFzc2lmaWVkcy53YXlzLFxuICAgICAgICAuLi5yZXNpZGVudGlhbHMud2F5cyxcbiAgICBdLCBvc21Db250ZXh0Lm5vZGVzLCBvc21Db250ZXh0Lm5vZGVzSWRJZHhNYXApO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCAoZSkgPT4ge1xuICAgICAgICBhbmNob3IgPSB1bmRlZmluZWQ7XG4gICAgfSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGUpID0+IHtcbiAgICAgICAgYW5jaG9yID0gZ2V0TW91c2VDYW52YXNQb3NpdGlvbihlLCBjYW52YXMpO1xuICAgICAgICBpZiAoY2xvc2VzdE5vZGVUb1BvaW50ZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGlkeCA9IG9zbUNvbnRleHQubm9kZXNJZElkeE1hcC5nZXQoY2xvc2VzdE5vZGVUb1BvaW50ZXIuaWQpO1xuICAgICAgICAgICAgbW91c2VEb3duVGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhcnROb2RlSWR4ICE9PSB1bmRlZmluZWQgJiYgZW5kTm9kZUlkeCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0Tm9kZUlkeCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgZW5kTm9kZUlkeCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgcGF0aE5vZGVzSWR4cy5sZW5ndGggPSAwO1xuICAgICAgICAgICAgICAgICAgICB2aXNpdGVkTm9kZXNJZHhzLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzdGFydE5vZGVJZHggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBzdGFydE5vZGVJZHggPSBpZHg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGVuZE5vZGVJZHggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBlbmROb2RlSWR4ID0gaWR4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICB9LCAyMDApO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgKGUpID0+IHtcbiAgICAgICAgaWYgKG1vdXNlRG93blRpbWVvdXQpXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQobW91c2VEb3duVGltZW91dCk7XG4gICAgICAgIG1vdXNlQ2FudmFzUG9zaXRpb24gPSBnZXRNb3VzZUNhbnZhc1Bvc2l0aW9uKGUsIGNhbnZhcyk7XG4gICAgICAgIG1vdXNlV29ybGRQb3NpdGlvbiA9IGdldFNjcmVlblRvV29ybGQobW91c2VDYW52YXNQb3NpdGlvbiwgY2FtZXJhKTtcbiAgICAgICAgY2xvc2VzdE5vZGVUb1BvaW50ZXIgPSBxdWFkVHJlZS5nZXRDbG9zZXN0Tm9kZUZvcldvcmxkUG9zaXRpb24obW91c2VXb3JsZFBvc2l0aW9uKTtcbiAgICAgICAgaWYgKGFuY2hvciAmJiBpc0N0cmxQcmVzc2VkKSB7XG4gICAgICAgICAgICBjb25zdCBkeSA9IG1vdXNlQ2FudmFzUG9zaXRpb24ueSAtIGFuY2hvci55O1xuICAgICAgICAgICAgdGFyZ2V0Um90YXRpb24gKz0gZHkgLyAyNTA7XG4gICAgICAgICAgICBhbmNob3IgPSBtb3VzZUNhbnZhc1Bvc2l0aW9uO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhbmNob3IpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlbHRhID0gbW91c2VDYW52YXNQb3NpdGlvbi5zdWJ0cmFjdChhbmNob3IpO1xuICAgICAgICAgICAgLy8gUmVmIGh0dHBzOi8vbWF0dGhldy1icmV0dC5naXRodWIuaW8vdGVhY2hpbmcvcm90YXRpb25fMmQuaHRtbFxuICAgICAgICAgICAgY29uc3Qgcm90YXRlZEFuZFNjYWxlZERlbHRhID0gbmV3IFZlY3RvcjIoTWF0aC5jb3MoLWNhbWVyYS5yb3RhdGlvbikgKiBkZWx0YS54IC0gTWF0aC5zaW4oLWNhbWVyYS5yb3RhdGlvbikgKiBkZWx0YS55LCBNYXRoLnNpbigtY2FtZXJhLnJvdGF0aW9uKSAqIGRlbHRhLnggKyBNYXRoLmNvcygtY2FtZXJhLnJvdGF0aW9uKSAqIGRlbHRhLnkpXG4gICAgICAgICAgICAgICAgLm11bHRpcGx5KG5ldyBWZWN0b3IyKDEgLyBjYW1lcmEuem9vbSwgMSAvIGNhbWVyYS56b29tKSk7XG4gICAgICAgICAgICBjYW1lcmEudGFyZ2V0ID0gY2FtZXJhLnRhcmdldC5zdWJ0cmFjdChyb3RhdGVkQW5kU2NhbGVkRGVsdGEpO1xuICAgICAgICAgICAgYW5jaG9yID0gbW91c2VDYW52YXNQb3NpdGlvbjtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIChlKSA9PiB7XG4gICAgICAgIGlmIChlLmN0cmxLZXkpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZS5kZWx0YVkgPCAwKSB7XG4gICAgICAgICAgICB0YXJnZXRab29tICo9IDEuNTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0YXJnZXRab29tIC0gMSA+IDApIHtcbiAgICAgICAgICAgIHRhcmdldFpvb20gLz0gMS41O1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBldmVudCA9PiBldmVudC5wcmV2ZW50RGVmYXVsdCgpKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgKGUpID0+IHtcbiAgICAgICAgaXNDdHJsUHJlc3NlZCA9IGZhbHNlO1xuICAgIH0pO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xuICAgICAgICBpZiAoZS5rZXkgPT09ICdDb250cm9sJykge1xuICAgICAgICAgICAgaXNDdHJsUHJlc3NlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUua2V5ID09PSAnPScpIHtcbiAgICAgICAgICAgIHRhcmdldFpvb20gKj0gMS41O1xuICAgICAgICB9XG4gICAgICAgIGlmIChlLmtleSA9PT0gJy0nKSB7XG4gICAgICAgICAgICB0YXJnZXRab29tIC89IDEuNTtcbiAgICAgICAgICAgIGlmICh0YXJnZXRab29tIDwgMSkge1xuICAgICAgICAgICAgICAgIHRhcmdldFpvb20gPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlLmNvZGUgPT09ICdTcGFjZScpIHtcbiAgICAgICAgICAgIHBhdGhOb2Rlc0lkeHMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIHZpc2l0ZWROb2Rlc0lkeHMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIGlmIChzdGFydE5vZGVJZHgpIHtcbiAgICAgICAgICAgICAgICB3b3JrZXJQcm94eS5kaWprc3RyYShzdGFydE5vZGVJZHgpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVuZE5vZGVJZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoTm9kZXNJZHhzID0gZmluZFBhdGgocmVzdWx0LnByZXZpb3VzLCBlbmROb2RlSWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCAoZSkgPT4ge1xuICAgICAgICBpZiAoZS5rZXkgPT09ICdDb250cm9sJykge1xuICAgICAgICAgICAgaXNDdHJsUHJlc3NlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgZnVuY3Rpb24gZHJhd05vZGVzKCkge1xuICAgICAgICBnbENvbnRleHQuZ2wuYmluZFZlcnRleEFycmF5KG5vZGVzX3Zhbyk7XG4gICAgICAgIGdsQ29udGV4dC5nbC51bmlmb3JtNGZ2KGdsQ29udGV4dC51bmlmb3JtQ29sb3JTaGFkZXIudW5pZm9ybXMudV9jb2xvciwgTk9ERVNfQ09MT1IpO1xuICAgICAgICBnbENvbnRleHQuZ2wuZHJhd0FycmF5cyhnbENvbnRleHQuZ2wuUE9JTlRTLCAwLCBub3JtYWxpemVkTm9kZXNMb25MYXRBcnJheS5sZW5ndGggLyAyKTtcbiAgICAgICAgZ2xDb250ZXh0LmdsLmJpbmRWZXJ0ZXhBcnJheShkZWZhdWx0X3Zhbyk7XG4gICAgICAgIDtcbiAgICB9XG4gICAgZnVuY3Rpb24gZHJhd1dheXMoKSB7XG4gICAgICAgIGdsQ29udGV4dC5nbC5iaW5kVmVydGV4QXJyYXkobm9kZXNfdmFvKTtcbiAgICAgICAgZ2xDb250ZXh0LmdsLnVuaWZvcm00ZnYoZ2xDb250ZXh0LnVuaWZvcm1Db2xvclNoYWRlci51bmlmb3Jtcy51X2NvbG9yLCBNT1RPUldBWVNfQ09MT1IpO1xuICAgICAgICBnbENvbnRleHQuZ2wuYmluZEJ1ZmZlcihnbENvbnRleHQuZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIG1vdG9yd2F5c19ub2Rlc19pbmRleF9idWZmZXIpO1xuICAgICAgICBnbENvbnRleHQuZ2wuZHJhd0VsZW1lbnRzKGdsQ29udGV4dC5nbC5MSU5FX1NUUklQLCBtb3RvcndheXMuaWR4cy5sZW5ndGgsIGdsQ29udGV4dC5nbC5VTlNJR05FRF9JTlQsIDApO1xuICAgICAgICBnbENvbnRleHQuZ2wudW5pZm9ybTRmdihnbENvbnRleHQudW5pZm9ybUNvbG9yU2hhZGVyLnVuaWZvcm1zLnVfY29sb3IsIEJVSUxESU5HU19DT0xPUik7XG4gICAgICAgIGdsQ29udGV4dC5nbC5iaW5kQnVmZmVyKGdsQ29udGV4dC5nbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgYnVpbGRpbmdfbm9kZXNfaW5kZXhfYnVmZmVyKTtcbiAgICAgICAgZ2xDb250ZXh0LmdsLmRyYXdFbGVtZW50cyhnbENvbnRleHQuZ2wuVFJJQU5HTEVfU1RSSVAsIGJ1aWxkaW5ncy5pZHhzLmxlbmd0aCwgZ2xDb250ZXh0LmdsLlVOU0lHTkVEX0lOVCwgMCk7XG4gICAgICAgIGdsQ29udGV4dC5nbC51bmlmb3JtNGZ2KGdsQ29udGV4dC51bmlmb3JtQ29sb3JTaGFkZXIudW5pZm9ybXMudV9jb2xvciwgVFJVTktTX0NPTE9SKTtcbiAgICAgICAgZ2xDb250ZXh0LmdsLmJpbmRCdWZmZXIoZ2xDb250ZXh0LmdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB0cnVua3Nfbm9kZXNfaW5kZXhfYnVmZmVyKTtcbiAgICAgICAgZ2xDb250ZXh0LmdsLmRyYXdFbGVtZW50cyhnbENvbnRleHQuZ2wuTElORV9TVFJJUCwgdHJ1bmtzLmlkeHMubGVuZ3RoLCBnbENvbnRleHQuZ2wuVU5TSUdORURfSU5ULCAwKTtcbiAgICAgICAgZ2xDb250ZXh0LmdsLnVuaWZvcm00ZnYoZ2xDb250ZXh0LnVuaWZvcm1Db2xvclNoYWRlci51bmlmb3Jtcy51X2NvbG9yLCBQUklNQVJJRVNfQ09MT1IpO1xuICAgICAgICBnbENvbnRleHQuZ2wuYmluZEJ1ZmZlcihnbENvbnRleHQuZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIHByaW1hcmllc19ub2Rlc19pbmRleF9idWZmZXIpO1xuICAgICAgICBnbENvbnRleHQuZ2wuZHJhd0VsZW1lbnRzKGdsQ29udGV4dC5nbC5MSU5FX1NUUklQLCBwcmltYXJpZXMuaWR4cy5sZW5ndGgsIGdsQ29udGV4dC5nbC5VTlNJR05FRF9JTlQsIDApO1xuICAgICAgICBnbENvbnRleHQuZ2wudW5pZm9ybTRmdihnbENvbnRleHQudW5pZm9ybUNvbG9yU2hhZGVyLnVuaWZvcm1zLnVfY29sb3IsIFNFQ09OREFSSUVTX0NPTE9SKTtcbiAgICAgICAgZ2xDb250ZXh0LmdsLmJpbmRCdWZmZXIoZ2xDb250ZXh0LmdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBzZWNvbmRhcmllc19ub2Rlc19pbmRleF9idWZmZXIpO1xuICAgICAgICBnbENvbnRleHQuZ2wuZHJhd0VsZW1lbnRzKGdsQ29udGV4dC5nbC5MSU5FX1NUUklQLCBzZWNvbmRhcmllcy5pZHhzLmxlbmd0aCwgZ2xDb250ZXh0LmdsLlVOU0lHTkVEX0lOVCwgMCk7XG4gICAgICAgIGdsQ29udGV4dC5nbC51bmlmb3JtNGZ2KGdsQ29udGV4dC51bmlmb3JtQ29sb3JTaGFkZXIudW5pZm9ybXMudV9jb2xvciwgVEVSVElBUklFU19DT0xPUik7XG4gICAgICAgIGdsQ29udGV4dC5nbC5iaW5kQnVmZmVyKGdsQ29udGV4dC5nbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgdGVydGlhcmllc19ub2Rlc19pbmRleF9idWZmZXIpO1xuICAgICAgICBnbENvbnRleHQuZ2wuZHJhd0VsZW1lbnRzKGdsQ29udGV4dC5nbC5MSU5FX1NUUklQLCB0ZXJ0aWFyaWVzLmlkeHMubGVuZ3RoLCBnbENvbnRleHQuZ2wuVU5TSUdORURfSU5ULCAwKTtcbiAgICAgICAgZ2xDb250ZXh0LmdsLnVuaWZvcm00ZnYoZ2xDb250ZXh0LnVuaWZvcm1Db2xvclNoYWRlci51bmlmb3Jtcy51X2NvbG9yLCBVTkNMQVNTSUZJRURTX0NPTE9SKTtcbiAgICAgICAgZ2xDb250ZXh0LmdsLmJpbmRCdWZmZXIoZ2xDb250ZXh0LmdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB1bmNsYXNzaWZpZWRzX25vZGVzX2luZGV4X2J1ZmZlcik7XG4gICAgICAgIGdsQ29udGV4dC5nbC5kcmF3RWxlbWVudHMoZ2xDb250ZXh0LmdsLkxJTkVfU1RSSVAsIHVuY2xhc3NpZmllZHMuaWR4cy5sZW5ndGgsIGdsQ29udGV4dC5nbC5VTlNJR05FRF9JTlQsIDApO1xuICAgICAgICBnbENvbnRleHQuZ2wudW5pZm9ybTRmdihnbENvbnRleHQudW5pZm9ybUNvbG9yU2hhZGVyLnVuaWZvcm1zLnVfY29sb3IsIFJFU0lERU5USUFMU19DT0xPUik7XG4gICAgICAgIGdsQ29udGV4dC5nbC5iaW5kQnVmZmVyKGdsQ29udGV4dC5nbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgcmVzaWRlbnRpYWxzX25vZGVzX2luZGV4X2J1ZmZlcik7XG4gICAgICAgIGdsQ29udGV4dC5nbC5kcmF3RWxlbWVudHMoZ2xDb250ZXh0LmdsLkxJTkVfU1RSSVAsIHJlc2lkZW50aWFscy5pZHhzLmxlbmd0aCwgZ2xDb250ZXh0LmdsLlVOU0lHTkVEX0lOVCwgMCk7XG4gICAgICAgIGdsQ29udGV4dC5nbC5iaW5kVmVydGV4QXJyYXkoZGVmYXVsdF92YW8pO1xuICAgICAgICA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRyYXdRdWFkdHJlZURhdGEodGltZSkge1xuICAgICAgICBnbENvbnRleHQuZ2wuYmluZEJ1ZmZlcihnbENvbnRleHQuZ2wuQVJSQVlfQlVGRkVSLCBub2Rlc19idWZmZXIpO1xuICAgICAgICBjb25zdCBDT01QT05FTlRTX1BFUl9XQVkgPSAyO1xuICAgICAgICBnbENvbnRleHQuZ2wudmVydGV4QXR0cmliUG9pbnRlcihnbENvbnRleHQudW5pZm9ybUNvbG9yU2hhZGVyLmF0dHJpYnV0ZXMuYV9wb3NpdGlvbiwgQ09NUE9ORU5UU19QRVJfV0FZLCBnbENvbnRleHQuZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcbiAgICAgICAgZ2xDb250ZXh0LmdsLnVuaWZvcm00ZnYoZ2xDb250ZXh0LnVuaWZvcm1Db2xvclNoYWRlci51bmlmb3Jtcy51X2NvbG9yLCBRVUFEVFJFRV9QT0lOVF9DT0xPUik7XG4gICAgICAgIGlmIChjbG9zZXN0Tm9kZVRvUG9pbnRlcikge1xuICAgICAgICAgICAgY29uc3QgaWR4ID0gb3NtQ29udGV4dC5ub2Rlc0lkSWR4TWFwLmdldChjbG9zZXN0Tm9kZVRvUG9pbnRlci5pZCk7XG4gICAgICAgICAgICBjb25zdCBsb24gPSBub3JtYWxpemVkTm9kZXNMb25MYXRBcnJheVtpZHggKiAyXTtcbiAgICAgICAgICAgIGNvbnN0IGxhdCA9IG5vcm1hbGl6ZWROb2Rlc0xvbkxhdEFycmF5W2lkeCAqIDIgKyAxXTtcbiAgICAgICAgICAgIGRyYXdDaXJjbGUoZ2xDb250ZXh0LCBuZXcgVmVjdG9yMihsb24sIGxhdCksICg1ICsgKDMgKiBNYXRoLnNpbih0aW1lICogNSkpKSAvIGNhbWVyYS56b29tLCBuZXcgQ29sb3IoMSwgMC45ICsgKE1hdGguc2luKHRpbWUgKiA1KSAqIDAuMSksIDEsIDEpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiB1cGRhdGVPdmVybGF5KGR0KSB7XG4gICAgICAgIGNvbnN0IGZwc0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Zwc1RhcmdldFwiKTtcbiAgICAgICAgZnBzRWxlbWVudC5pbm5lckhUTUwgPSBgJHsoTWF0aC5mbG9vcigxIC8gZHQpKS50b0ZpeGVkKDApfWA7XG4gICAgICAgIGNvbnN0IG5vZGVzQ291bnRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNub2Rlc0NvdW50XCIpO1xuICAgICAgICBub2Rlc0NvdW50RWxlbWVudC5pbm5lckhUTUwgPSBgJHtvc21Db250ZXh0Lm1ldGFkYXRhLm5vZGVzQ291bnR9YDtcbiAgICAgICAgY29uc3QgY2FtZXJhVGFyZ2V0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FtZXJhVGFyZ2V0XCIpO1xuICAgICAgICBjYW1lcmFUYXJnZXRFbGVtZW50LmlubmVySFRNTCA9IGAke2NhbWVyYS50YXJnZXQueC50b0ZpeGVkKDIpfSwgJHtjYW1lcmEudGFyZ2V0LnkudG9GaXhlZCgyKX1gO1xuICAgICAgICBjb25zdCBjYW1lcmFab29tRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FtZXJhWm9vbVwiKTtcbiAgICAgICAgY2FtZXJhWm9vbUVsZW1lbnQuaW5uZXJIVE1MID0gYCR7Y2FtZXJhLnpvb20udG9GaXhlZCgyKX1gO1xuICAgICAgICBjb25zdCBjYW1lcmFSb3RhdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhbWVyYVJvdGF0aW9uXCIpO1xuICAgICAgICBjYW1lcmFSb3RhdGlvbkVsZW1lbnQuaW5uZXJIVE1MID0gYCR7Y2FtZXJhLnJvdGF0aW9uLnRvRml4ZWQoMil9YDtcbiAgICAgICAgY29uc3QgbW91c2VDYW52YXNQb3NpdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vdXNlQ2FudmFzUG9zaXRpb25cIik7XG4gICAgICAgIG1vdXNlQ2FudmFzUG9zaXRpb25FbGVtZW50LmlubmVySFRNTCA9IGAke21vdXNlQ2FudmFzUG9zaXRpb24ueC50b0ZpeGVkKDIpfSwgJHsobW91c2VDYW52YXNQb3NpdGlvbi55KS50b0ZpeGVkKDIpfWA7XG4gICAgICAgIGNvbnN0IG1vdXNlV29ybGRQb3NpdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vdXNlV29ybGRQb3NpdGlvblwiKTtcbiAgICAgICAgbW91c2VXb3JsZFBvc2l0aW9uRWxlbWVudC5pbm5lckhUTUwgPSBgJHttb3VzZVdvcmxkUG9zaXRpb24ueC50b0ZpeGVkKDIpfSwgJHttb3VzZVdvcmxkUG9zaXRpb24ueS50b0ZpeGVkKDIpfWA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRyYXdXYXlIaWdobGlnaHQoKSB7XG4gICAgICAgIGlmIChjbG9zZXN0Tm9kZVRvUG9pbnRlcikge1xuICAgICAgICAgICAgY29uc3Qgd2F5SWR4cyA9IG9zbUNvbnRleHQubm9kZXNJZFdheUlkeHNNYXAuZ2V0KGNsb3Nlc3ROb2RlVG9Qb2ludGVyLmlkKTtcbiAgICAgICAgICAgIGlmICh3YXlJZHhzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBodHRwczovL2hlbHAub3BlbnN0cmVldG1hcC5vcmcvcXVlc3Rpb25zLzUwMjA2L29ycGhhbi1ub2Rlcy1hbmQtd2F5c1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHdheXMgPSB3YXlJZHhzLm1hcCh3YXlJZHggPT4gb3NtQ29udGV4dC53YXlzW3dheUlkeF0pO1xuICAgICAgICAgICAgY29uc3Qgbm9kZUlkeHMgPSB3YXlzXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgoYWNjLCB3YXkpID0+IFsuLi5hY2MsIC4uLndheS5ub2RlX2lkcywgXCIqXCJdLCBbXSlcbiAgICAgICAgICAgICAgICAubWFwKG5vZGVJZCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGVJZCA9PT0gXCIqXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAweEZGRkZGRkZGO1xuICAgICAgICAgICAgICAgIHJldHVybiBvc21Db250ZXh0Lm5vZGVzSWRJZHhNYXAuZ2V0KG5vZGVJZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGdsQ29udGV4dC5nbC5iaW5kVmVydGV4QXJyYXkobm9kZXNfdmFvKTtcbiAgICAgICAgICAgIGdsQ29udGV4dC5nbC51bmlmb3JtNGZ2KGdsQ29udGV4dC51bmlmb3JtQ29sb3JTaGFkZXIudW5pZm9ybXMudV9jb2xvciwgSElHSExJR0hURURfV0FZU19DT0xPUik7XG4gICAgICAgICAgICBnbENvbnRleHQuZ2wuYmluZEJ1ZmZlcihnbENvbnRleHQuZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIGhpZ2hsaWdodGVkX3dheV9ub2Rlc19pbmRleF9idWZmZXIpO1xuICAgICAgICAgICAgZ2xDb250ZXh0LmdsLmJ1ZmZlckRhdGEoZ2xDb250ZXh0LmdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBuZXcgVWludDMyQXJyYXkobm9kZUlkeHMpLCBnbENvbnRleHQuZ2wuU1RBVElDX0RSQVcpO1xuICAgICAgICAgICAgZ2xDb250ZXh0LmdsLmRyYXdFbGVtZW50cyhnbENvbnRleHQuZ2wuTElORV9TVFJJUCwgbm9kZUlkeHMubGVuZ3RoLCBnbENvbnRleHQuZ2wuVU5TSUdORURfSU5ULCAwKTtcbiAgICAgICAgICAgIGdsQ29udGV4dC5nbC5iaW5kVmVydGV4QXJyYXkoZGVmYXVsdF92YW8pO1xuICAgICAgICAgICAgO1xuICAgICAgICAgICAgY29uc3QgdGFnc0FycmF5ID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdheXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0YWdzQXJyYXkucHVzaCguLi5PYmplY3QuZW50cmllcyh3YXlzW2ldLnRhZ3MpLm1hcCgoKFtrLCB2XSkgPT4gYDxkaXY+JHtrfTogJHt2fTwvZGl2PmApKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB3YXlUYWdzRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjd2F5VGFnc1wiKTtcbiAgICAgICAgICAgIHdheVRhZ3NFbGVtZW50LmlubmVySFRNTCA9IHRhZ3NBcnJheS5qb2luKFwiIFwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBkcmF3UGF0aGZpbmRpbmdBbGdvcml0aG0oKSB7XG4gICAgICAgIGlmIChzdGFydE5vZGVJZHgpIHtcbiAgICAgICAgICAgIGNvbnN0IGxvbiA9IG5vcm1hbGl6ZWROb2Rlc0xvbkxhdEFycmF5W3N0YXJ0Tm9kZUlkeCAqIDJdO1xuICAgICAgICAgICAgY29uc3QgbGF0ID0gbm9ybWFsaXplZE5vZGVzTG9uTGF0QXJyYXlbc3RhcnROb2RlSWR4ICogMiArIDFdO1xuICAgICAgICAgICAgZHJhd0NpcmNsZShnbENvbnRleHQsIG5ldyBWZWN0b3IyKGxvbiwgbGF0KSwgKDEwICsgKDMgKiBNYXRoLnNpbih0aW1lICogMTApKSkgLyBjYW1lcmEuem9vbSwgU1RBUlRfTk9ERV9DT0xPUik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVuZE5vZGVJZHgpIHtcbiAgICAgICAgICAgIGNvbnN0IGxvbiA9IG5vcm1hbGl6ZWROb2Rlc0xvbkxhdEFycmF5W2VuZE5vZGVJZHggKiAyXTtcbiAgICAgICAgICAgIGNvbnN0IGxhdCA9IG5vcm1hbGl6ZWROb2Rlc0xvbkxhdEFycmF5W2VuZE5vZGVJZHggKiAyICsgMV07XG4gICAgICAgICAgICBkcmF3Q2lyY2xlKGdsQ29udGV4dCwgbmV3IFZlY3RvcjIobG9uLCBsYXQpLCAoMTAgKyAoMyAqIE1hdGguc2luKHRpbWUgKiAxMCkpKSAvIGNhbWVyYS56b29tLCBFTkRfTk9ERV9DT0xPUik7XG4gICAgICAgIH1cbiAgICAgICAgeyAvLyBWaXNpdGVkIG5vZGVzIGhpZ2hsaWdodGluZ1xuICAgICAgICAgICAgZ2xDb250ZXh0LmdsLmJpbmRWZXJ0ZXhBcnJheShub2Rlc192YW8pO1xuICAgICAgICAgICAgZ2xDb250ZXh0LmdsLmJpbmRCdWZmZXIoZ2xDb250ZXh0LmdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB2aXNpdGVkX25vZGVzX2luZGV4X2J1ZmZlcik7XG4gICAgICAgICAgICBpZiAodmlzaXRlZE5vZGVzSWR4cy5sZW5ndGggIT09IHZpc2l0ZWRfbm9kZXNfaW5kZXhfYnVmZmVyX2VsZW1lbnRzX2NvdW50KSB7XG4gICAgICAgICAgICAgICAgZ2xDb250ZXh0LmdsLmJ1ZmZlclN1YkRhdGEoZ2xDb250ZXh0LmdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB2aXNpdGVkX25vZGVzX2luZGV4X2J1ZmZlcl9lbGVtZW50c19jb3VudCAqIDQsIG5ldyBVaW50MzJBcnJheSh2aXNpdGVkTm9kZXNJZHhzLnNsaWNlKHZpc2l0ZWRfbm9kZXNfaW5kZXhfYnVmZmVyX2VsZW1lbnRzX2NvdW50KSkpO1xuICAgICAgICAgICAgICAgIHZpc2l0ZWRfbm9kZXNfaW5kZXhfYnVmZmVyX2VsZW1lbnRzX2NvdW50ID0gdmlzaXRlZE5vZGVzSWR4cy5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnbENvbnRleHQuZ2wudW5pZm9ybTRmdihnbENvbnRleHQudW5pZm9ybUNvbG9yU2hhZGVyLnVuaWZvcm1zLnVfY29sb3IsIFZJU0lURURfTk9ERV9DT0xPUik7XG4gICAgICAgICAgICBnbENvbnRleHQuZ2wuZHJhd0VsZW1lbnRzKGdsQ29udGV4dC5nbC5MSU5FUywgdmlzaXRlZE5vZGVzSWR4cy5sZW5ndGgsIGdsQ29udGV4dC5nbC5VTlNJR05FRF9JTlQsIDApO1xuICAgICAgICAgICAgZ2xDb250ZXh0LmdsLmJpbmRWZXJ0ZXhBcnJheShkZWZhdWx0X3Zhbyk7XG4gICAgICAgIH1cbiAgICAgICAgeyAvLyBQYXRoIGhpZ2hsaWdodGluZ1xuICAgICAgICAgICAgY29uc3QgbGluZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGF0aE5vZGVzSWR4cy5sZW5ndGggLSAxOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFydElkeCA9IHBhdGhOb2Rlc0lkeHNbaV07XG4gICAgICAgICAgICAgICAgY29uc3QgZW5kSWR4ID0gcGF0aE5vZGVzSWR4c1tpICsgMV07XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhcnROb2RlID0gbm9ybWFsaXplZE5vZGVzTG9uTGF0QXJyYXkuc2xpY2Uoc3RhcnRJZHggKiAyLCBzdGFydElkeCAqIDIgKyAyKTtcbiAgICAgICAgICAgICAgICBjb25zdCBlbmRub2RlID0gbm9ybWFsaXplZE5vZGVzTG9uTGF0QXJyYXkuc2xpY2UoZW5kSWR4ICogMiwgZW5kSWR4ICogMiArIDIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBwcmVwYXJlRHJhd0xpbmVFeEJ1ZmZlckRhdGEobmV3IFZlY3RvcjIoc3RhcnROb2RlWzBdLCBzdGFydE5vZGVbMV0pLCBuZXcgVmVjdG9yMihlbmRub2RlWzBdLCBlbmRub2RlWzFdKSwgNSAvIGNhbWVyYS56b29tKTtcbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKC4uLmxpbmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ2xDb250ZXh0LmdsLmJpbmRWZXJ0ZXhBcnJheShwYXRoX3Zhbyk7XG4gICAgICAgICAgICBnbENvbnRleHQuZ2wuYmluZEJ1ZmZlcihnbENvbnRleHQuZ2wuQVJSQVlfQlVGRkVSLCBwYXRoX2J1ZmZlcik7XG4gICAgICAgICAgICBnbENvbnRleHQuZ2wuYnVmZmVyRGF0YShnbENvbnRleHQuZ2wuQVJSQVlfQlVGRkVSLCBuZXcgRmxvYXQzMkFycmF5KGxpbmVzKSwgZ2xDb250ZXh0LmdsLlNUQVRJQ19EUkFXKTtcbiAgICAgICAgICAgIGdsQ29udGV4dC5nbC51bmlmb3JtNGZ2KGdsQ29udGV4dC51bmlmb3JtQ29sb3JTaGFkZXIudW5pZm9ybXMudV9jb2xvciwgU0hPUlRFU1RfUEFUSF9DT0xPUik7XG4gICAgICAgICAgICBnbENvbnRleHQuZ2wuZHJhd0FycmF5cyhnbENvbnRleHQuZ2wuVFJJQU5HTEVfU1RSSVAsIDAsIGxpbmVzLmxlbmd0aCAvIDIpO1xuICAgICAgICAgICAgZ2xDb250ZXh0LmdsLmJpbmRWZXJ0ZXhBcnJheShkZWZhdWx0X3Zhbyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZHJhd0ZyYW1lKHRpbWVzdGFtcCkge1xuICAgICAgICBjb25zdCBkdCA9ICh0aW1lc3RhbXAgLSBwcmV2aW91c1RpbWVzdGFtcCkgLyAxMDAwO1xuICAgICAgICBwcmV2aW91c1RpbWVzdGFtcCA9IHRpbWVzdGFtcDtcbiAgICAgICAgdGltZSArPSBkdDtcbiAgICAgICAgZ2xDb250ZXh0LmdsLmNsZWFyQ29sb3IoMCwgMCwgMCwgMSk7XG4gICAgICAgIGdsQ29udGV4dC5nbC5jbGVhcihnbENvbnRleHQuZ2wuQ09MT1JfQlVGRkVSX0JJVCk7XG4gICAgICAgIGdsQ29udGV4dC5nbC52aWV3cG9ydCgwLCAwLCBjYW52YXMuY2xpZW50V2lkdGgsIGNhbnZhcy5jbGllbnRIZWlnaHQpO1xuICAgICAgICBnbENvbnRleHQuZ2wuYmluZFZlcnRleEFycmF5KGRlZmF1bHRfdmFvKTtcbiAgICAgICAgcmVzaXplQ2FudmFzVG9EaXNwbGF5U2l6ZShjYW52YXMpO1xuICAgICAgICBjYW1lcmEub2Zmc2V0LnggPSBjYW52YXMuY2xpZW50V2lkdGggLyAyO1xuICAgICAgICBjYW1lcmEub2Zmc2V0LnkgPSBjYW52YXMuY2xpZW50SGVpZ2h0IC8gMjtcbiAgICAgICAgY29uc3QgUCA9IE1hdHJpeC5wcm9qZWN0aW9uKGNhbnZhcy5jbGllbnRXaWR0aCwgY2FudmFzLmNsaWVudEhlaWdodCk7XG4gICAgICAgIGNvbnN0IENBTV9QID0gZ2V0Q2FtZXJhTWF0cml4KGNhbWVyYSkubXVsdGlwbHkoUCk7XG4gICAgICAgIGdsLnVuaWZvcm1NYXRyaXgzZnYoZ2xDb250ZXh0LnVuaWZvcm1Db2xvclNoYWRlci51bmlmb3Jtcy51X21hdHJpeCwgZmFsc2UsIENBTV9QLmRhdGEpO1xuICAgICAgICBkcmF3UXVhZHRyZWVEYXRhKHRpbWUpO1xuICAgICAgICBkcmF3V2F5cygpO1xuICAgICAgICAvLyBkcmF3Tm9kZXMoKTtcbiAgICAgICAgZHJhd0NpcmNsZShnbENvbnRleHQsIGNhbWVyYS50YXJnZXQsIDUgLyBjYW1lcmEuem9vbSwgQ0FNRVJBX1RBUkdFVF9DT0xPUik7XG4gICAgICAgIGRyYXdXYXlIaWdobGlnaHQoKTtcbiAgICAgICAgZHJhd1BhdGhmaW5kaW5nQWxnb3JpdGhtKCk7XG4gICAgICAgIHVwZGF0ZU92ZXJsYXkoZHQpO1xuICAgICAgICAvLyBYLFkgYXhpc1xuICAgICAgICBkcmF3TGluZShnbENvbnRleHQsIG5ldyBWZWN0b3IyKC1jYW52YXMuY2xpZW50V2lkdGggLyAyLCAwKSwgbmV3IFZlY3RvcjIoY2FudmFzLmNsaWVudFdpZHRoIC8gMiwgMCksIFhfQVhJU19DT0xPUik7XG4gICAgICAgIGRyYXdMaW5lKGdsQ29udGV4dCwgbmV3IFZlY3RvcjIoMCwgLWNhbnZhcy5jbGllbnRIZWlnaHQgLyAyKSwgbmV3IFZlY3RvcjIoMCwgY2FudmFzLmNsaWVudEhlaWdodCAvIDIpLCBZX0FYSVNfQ09MT1IpO1xuICAgICAgICAvLyBXb3JsZCBvdXRsaW5lXG4gICAgICAgIGRyYXdMaW5lKGdsQ29udGV4dCwgbmV3IFZlY3RvcjIoMCwgMCksIG5ldyBWZWN0b3IyKFdPUkxEX1dJRFRILCAwKSwgV09STERfT1VUTElORV9DT0xPUik7XG4gICAgICAgIGRyYXdMaW5lKGdsQ29udGV4dCwgbmV3IFZlY3RvcjIoV09STERfV0lEVEgsIDApLCBuZXcgVmVjdG9yMihXT1JMRF9XSURUSCwgV09STERfSEVJR0hUKSwgV09STERfT1VUTElORV9DT0xPUik7XG4gICAgICAgIGRyYXdMaW5lKGdsQ29udGV4dCwgbmV3IFZlY3RvcjIoV09STERfV0lEVEgsIFdPUkxEX0hFSUdIVCksIG5ldyBWZWN0b3IyKDAsIFdPUkxEX0hFSUdIVCksIFdPUkxEX09VVExJTkVfQ09MT1IpO1xuICAgICAgICBkcmF3TGluZShnbENvbnRleHQsIG5ldyBWZWN0b3IyKDAsIFdPUkxEX0hFSUdIVCksIG5ldyBWZWN0b3IyKDAsIDApLCBXT1JMRF9PVVRMSU5FX0NPTE9SKTtcbiAgICAgICAgY2FtZXJhLnpvb20gKz0gKHRhcmdldFpvb20gLSBjYW1lcmEuem9vbSkgKiAxMCAqIGR0O1xuICAgICAgICBjYW1lcmEucm90YXRpb24gKz0gKHRhcmdldFJvdGF0aW9uIC0gY2FtZXJhLnJvdGF0aW9uKSAqIDIwICogZHQ7XG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZHJhd0ZyYW1lKTtcbiAgICB9XG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aW1lc3RhbXAgPT4ge1xuICAgICAgICBwcmV2aW91c1RpbWVzdGFtcCA9IHRpbWVzdGFtcDtcbiAgICAgICAgaGlkZUxvYWRpbmcoKTtcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShkcmF3RnJhbWUpO1xuICAgIH0pO1xufSkpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/index.ts\n");

/***/ }),

/***/ "./src/matrix.ts":
/*!***********************!*\
  !*** ./src/matrix.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Matrix: () => (/* binding */ Matrix)\n/* harmony export */ });\nclass Matrix {\n    constructor(rows, cols, data) {\n        this.data = [];\n        this.rows = rows;\n        this.cols = cols;\n        if (data) {\n            if (this.rows * this.cols != data.length) {\n                throw new Error(`Data array size mismatch. Expected ${this.rows * this.cols}, received ${data.length}`);\n            }\n            this.data = data;\n        }\n        else {\n            this.data = new Array(this.rows * this.cols).fill(0);\n        }\n    }\n    at(row, column) {\n        return (this.cols * row) + column;\n    }\n    x() {\n        return this.data[this.at(0, 0)];\n    }\n    y() {\n        return this.data[this.at(0, 1)];\n    }\n    add(mat) {\n        if (this.rows !== mat.rows || this.cols !== mat.cols) {\n            throw new Error(`Cannot add ${this.rows}x${this.cols} with ${mat.rows}x${mat.cols}`);\n        }\n        const result = new Matrix(mat.rows, mat.cols);\n        for (let i = 0; i < result.rows; i++) {\n            for (let j = 0; j < result.cols; j++) {\n                result.data[this.at(i, j)] = this.data[this.at(i, j)] + mat.data[this.at(i, j)];\n            }\n        }\n        return result;\n    }\n    subtract(mat) {\n        if (this.rows !== mat.rows || this.cols !== mat.cols) {\n            throw new Error(`Cannot subtract ${this.rows}x${this.cols} with ${mat.rows}x${mat.cols}`);\n        }\n        const result = new Matrix(mat.rows, mat.cols);\n        for (let i = 0; i < result.rows; i++) {\n            for (let j = 0; j < result.cols; j++) {\n                result.data[this.at(i, j)] = this.data[this.at(i, j)] - mat.data[this.at(i, j)];\n            }\n        }\n        return result;\n    }\n    div(mat) {\n        if (this.rows !== mat.rows || this.cols !== mat.cols) {\n            throw new Error(`Cannot divide ${this.rows}x${this.cols} with ${mat.rows}x${mat.cols}`);\n        }\n        const result = new Matrix(mat.rows, mat.cols);\n        for (let i = 0; i < result.rows; i++) {\n            for (let j = 0; j < result.cols; j++) {\n                result.data[this.at(i, j)] = this.data[this.at(i, j)] / mat.data[this.at(i, j)];\n            }\n        }\n        return result;\n    }\n    scalar(s) {\n        const result = new Matrix(this.rows, this.cols);\n        for (let i = 0; i < result.rows; i++) {\n            for (let j = 0; j < result.cols; j++) {\n                result.data[this.at(i, j)] = this.data[this.at(i, j)] * s;\n            }\n        }\n        return result;\n    }\n    multiply(right) {\n        const left = this;\n        if (left.cols !== right.rows) {\n            throw new Error(`Cannot multiply ${left.rows}x${left.cols} by ${right.rows}x${right.cols}`);\n        }\n        const result = new Matrix(left.rows, right.cols);\n        let n = left.cols || right.rows;\n        for (let i = 0; i < result.rows; i++) {\n            for (let j = 0; j < result.cols; j++) {\n                for (let k = 0; k < n; k++) {\n                    result.data[result.at(i, j)] += left.data[left.at(i, k)] * right.data[right.at(k, j)];\n                }\n            }\n        }\n        return result;\n    }\n    static scale(sx, sy) {\n        const scaleMat = new Matrix(3, 3, [\n            sx, 0, 0,\n            0, sy, 0,\n            0, 0, 1\n        ]);\n        return scaleMat;\n    }\n    /**\n     * Rotates counter-clockwise\n     * @param angleRadian The angle\n     */\n    static rotate(angleRadian) {\n        const cos = Math.cos(angleRadian);\n        const sin = Math.sin(angleRadian);\n        const rotateMat = new Matrix(3, 3, [\n            cos, sin, 0,\n            -sin, cos, 0,\n            0, 0, 1\n        ]);\n        return rotateMat;\n    }\n    static translate(dx, dy) {\n        const translationMat = new Matrix(3, 3, [\n            1, 0, 0,\n            0, 1, 0,\n            dx, dy, 1\n        ]);\n        return translationMat;\n    }\n    static projection(clientWidth, clientHeight) {\n        const zeroToOne = Matrix.scale(1 / clientWidth, 1 / clientHeight);\n        const zeroToTwo = zeroToOne.multiply(Matrix.scale(2, 2));\n        const minusOneToOne = zeroToTwo.multiply(Matrix.translate(-1, -1));\n        return minusOneToOne;\n    }\n    determinant() {\n        if (this.rows !== 3 || this.cols !== 3) {\n            throw new Error(\"Determinant calculation is only implemented for 3x3 matrices\");\n        }\n        const [a, b, c, d, e, f, g, h, i] = this.data;\n        return a * (e * i - f * h) - b * (d * i - f * g) + c * (d * h - e * g);\n    }\n    adjugate() {\n        if (this.rows !== 3 || this.cols !== 3) {\n            throw new Error(\"Adjugate calculation is only implemented for 3x3 matrices\");\n        }\n        const [a, b, c, d, e, f, g, h, i] = this.data;\n        return new Matrix(3, 3, [\n            (e * i - f * h), -(b * i - c * h), (b * f - c * e),\n            -(d * i - f * g), (a * i - c * g), -(a * f - c * d),\n            (d * h - e * g), -(a * h - b * g), (a * e - b * d)\n        ]);\n    }\n    inverse() {\n        if (this.rows !== 3 || this.cols !== 3) {\n            throw new Error(\"Inverse calculation is only implemented for 3x3 matrices\");\n        }\n        const det = this.determinant();\n        if (Number.isNaN(det)) {\n            throw new Error(\"Matrix is not invertible (determinant is close to zero)\");\n        }\n        const adj = this.adjugate();\n        return adj.scalar(1 / det);\n    }\n    transpose() {\n        const result = new Matrix(this.cols, this.rows);\n        for (let i = 0; i < this.rows; i++) {\n            for (let j = 0; j < this.cols; j++) {\n                result.data[result.at(j, i)] = this.data[this.at(i, j)];\n            }\n        }\n        return result;\n    }\n    static identity() {\n        return new Matrix(3, 3, [\n            1, 0, 0,\n            0, 1, 0,\n            0, 0, 1\n        ]);\n    }\n    toString() {\n        let result = \"\";\n        for (let i = 0; i < this.rows * this.cols; i++) {\n            result += `${this.data[i]}  `;\n            if ((i + 1) % 3 === 0 && i !== 0)\n                result += '\\n';\n        }\n        return result;\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWF0cml4LnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNFQUFzRSxzQkFBc0IsYUFBYSxZQUFZO0FBQ3JIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxVQUFVLEdBQUcsV0FBVyxPQUFPLFNBQVMsR0FBRyxTQUFTO0FBQzlGO0FBQ0E7QUFDQSx3QkFBd0IsaUJBQWlCO0FBQ3pDLDRCQUE0QixpQkFBaUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsVUFBVSxHQUFHLFdBQVcsT0FBTyxTQUFTLEdBQUcsU0FBUztBQUNuRztBQUNBO0FBQ0Esd0JBQXdCLGlCQUFpQjtBQUN6Qyw0QkFBNEIsaUJBQWlCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLFVBQVUsR0FBRyxXQUFXLE9BQU8sU0FBUyxHQUFHLFNBQVM7QUFDakc7QUFDQTtBQUNBLHdCQUF3QixpQkFBaUI7QUFDekMsNEJBQTRCLGlCQUFpQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixpQkFBaUI7QUFDekMsNEJBQTRCLGlCQUFpQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLFVBQVUsR0FBRyxXQUFXLEtBQUssV0FBVyxHQUFHLFdBQVc7QUFDckc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGlCQUFpQjtBQUN6Qyw0QkFBNEIsaUJBQWlCO0FBQzdDLGdDQUFnQyxPQUFPO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGVBQWU7QUFDdkMsNEJBQTRCLGVBQWU7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwyQkFBMkI7QUFDbkQseUJBQXlCLGVBQWU7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2tCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViZ2wtcHJvYmUtMi8uL3NyYy9tYXRyaXgudHM/NTUzNiJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBNYXRyaXgge1xuICAgIGNvbnN0cnVjdG9yKHJvd3MsIGNvbHMsIGRhdGEpIHtcbiAgICAgICAgdGhpcy5kYXRhID0gW107XG4gICAgICAgIHRoaXMucm93cyA9IHJvd3M7XG4gICAgICAgIHRoaXMuY29scyA9IGNvbHM7XG4gICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yb3dzICogdGhpcy5jb2xzICE9IGRhdGEubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBEYXRhIGFycmF5IHNpemUgbWlzbWF0Y2guIEV4cGVjdGVkICR7dGhpcy5yb3dzICogdGhpcy5jb2xzfSwgcmVjZWl2ZWQgJHtkYXRhLmxlbmd0aH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRhdGEgPSBuZXcgQXJyYXkodGhpcy5yb3dzICogdGhpcy5jb2xzKS5maWxsKDApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGF0KHJvdywgY29sdW1uKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5jb2xzICogcm93KSArIGNvbHVtbjtcbiAgICB9XG4gICAgeCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVt0aGlzLmF0KDAsIDApXTtcbiAgICB9XG4gICAgeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVt0aGlzLmF0KDAsIDEpXTtcbiAgICB9XG4gICAgYWRkKG1hdCkge1xuICAgICAgICBpZiAodGhpcy5yb3dzICE9PSBtYXQucm93cyB8fCB0aGlzLmNvbHMgIT09IG1hdC5jb2xzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBhZGQgJHt0aGlzLnJvd3N9eCR7dGhpcy5jb2xzfSB3aXRoICR7bWF0LnJvd3N9eCR7bWF0LmNvbHN9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IE1hdHJpeChtYXQucm93cywgbWF0LmNvbHMpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3VsdC5yb3dzOyBpKyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcmVzdWx0LmNvbHM7IGorKykge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5kYXRhW3RoaXMuYXQoaSwgaildID0gdGhpcy5kYXRhW3RoaXMuYXQoaSwgaildICsgbWF0LmRhdGFbdGhpcy5hdChpLCBqKV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgc3VidHJhY3QobWF0KSB7XG4gICAgICAgIGlmICh0aGlzLnJvd3MgIT09IG1hdC5yb3dzIHx8IHRoaXMuY29scyAhPT0gbWF0LmNvbHMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHN1YnRyYWN0ICR7dGhpcy5yb3dzfXgke3RoaXMuY29sc30gd2l0aCAke21hdC5yb3dzfXgke21hdC5jb2xzfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBNYXRyaXgobWF0LnJvd3MsIG1hdC5jb2xzKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXN1bHQucm93czsgaSsrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHJlc3VsdC5jb2xzOyBqKyspIHtcbiAgICAgICAgICAgICAgICByZXN1bHQuZGF0YVt0aGlzLmF0KGksIGopXSA9IHRoaXMuZGF0YVt0aGlzLmF0KGksIGopXSAtIG1hdC5kYXRhW3RoaXMuYXQoaSwgaildO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGRpdihtYXQpIHtcbiAgICAgICAgaWYgKHRoaXMucm93cyAhPT0gbWF0LnJvd3MgfHwgdGhpcy5jb2xzICE9PSBtYXQuY29scykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgZGl2aWRlICR7dGhpcy5yb3dzfXgke3RoaXMuY29sc30gd2l0aCAke21hdC5yb3dzfXgke21hdC5jb2xzfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBNYXRyaXgobWF0LnJvd3MsIG1hdC5jb2xzKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXN1bHQucm93czsgaSsrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHJlc3VsdC5jb2xzOyBqKyspIHtcbiAgICAgICAgICAgICAgICByZXN1bHQuZGF0YVt0aGlzLmF0KGksIGopXSA9IHRoaXMuZGF0YVt0aGlzLmF0KGksIGopXSAvIG1hdC5kYXRhW3RoaXMuYXQoaSwgaildO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIHNjYWxhcihzKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBNYXRyaXgodGhpcy5yb3dzLCB0aGlzLmNvbHMpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3VsdC5yb3dzOyBpKyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcmVzdWx0LmNvbHM7IGorKykge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5kYXRhW3RoaXMuYXQoaSwgaildID0gdGhpcy5kYXRhW3RoaXMuYXQoaSwgaildICogcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBtdWx0aXBseShyaWdodCkge1xuICAgICAgICBjb25zdCBsZWZ0ID0gdGhpcztcbiAgICAgICAgaWYgKGxlZnQuY29scyAhPT0gcmlnaHQucm93cykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgbXVsdGlwbHkgJHtsZWZ0LnJvd3N9eCR7bGVmdC5jb2xzfSBieSAke3JpZ2h0LnJvd3N9eCR7cmlnaHQuY29sc31gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgTWF0cml4KGxlZnQucm93cywgcmlnaHQuY29scyk7XG4gICAgICAgIGxldCBuID0gbGVmdC5jb2xzIHx8IHJpZ2h0LnJvd3M7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzdWx0LnJvd3M7IGkrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCByZXN1bHQuY29sczsgaisrKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBuOyBrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRhdGFbcmVzdWx0LmF0KGksIGopXSArPSBsZWZ0LmRhdGFbbGVmdC5hdChpLCBrKV0gKiByaWdodC5kYXRhW3JpZ2h0LmF0KGssIGopXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgc3RhdGljIHNjYWxlKHN4LCBzeSkge1xuICAgICAgICBjb25zdCBzY2FsZU1hdCA9IG5ldyBNYXRyaXgoMywgMywgW1xuICAgICAgICAgICAgc3gsIDAsIDAsXG4gICAgICAgICAgICAwLCBzeSwgMCxcbiAgICAgICAgICAgIDAsIDAsIDFcbiAgICAgICAgXSk7XG4gICAgICAgIHJldHVybiBzY2FsZU1hdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUm90YXRlcyBjb3VudGVyLWNsb2Nrd2lzZVxuICAgICAqIEBwYXJhbSBhbmdsZVJhZGlhbiBUaGUgYW5nbGVcbiAgICAgKi9cbiAgICBzdGF0aWMgcm90YXRlKGFuZ2xlUmFkaWFuKSB7XG4gICAgICAgIGNvbnN0IGNvcyA9IE1hdGguY29zKGFuZ2xlUmFkaWFuKTtcbiAgICAgICAgY29uc3Qgc2luID0gTWF0aC5zaW4oYW5nbGVSYWRpYW4pO1xuICAgICAgICBjb25zdCByb3RhdGVNYXQgPSBuZXcgTWF0cml4KDMsIDMsIFtcbiAgICAgICAgICAgIGNvcywgc2luLCAwLFxuICAgICAgICAgICAgLXNpbiwgY29zLCAwLFxuICAgICAgICAgICAgMCwgMCwgMVxuICAgICAgICBdKTtcbiAgICAgICAgcmV0dXJuIHJvdGF0ZU1hdDtcbiAgICB9XG4gICAgc3RhdGljIHRyYW5zbGF0ZShkeCwgZHkpIHtcbiAgICAgICAgY29uc3QgdHJhbnNsYXRpb25NYXQgPSBuZXcgTWF0cml4KDMsIDMsIFtcbiAgICAgICAgICAgIDEsIDAsIDAsXG4gICAgICAgICAgICAwLCAxLCAwLFxuICAgICAgICAgICAgZHgsIGR5LCAxXG4gICAgICAgIF0pO1xuICAgICAgICByZXR1cm4gdHJhbnNsYXRpb25NYXQ7XG4gICAgfVxuICAgIHN0YXRpYyBwcm9qZWN0aW9uKGNsaWVudFdpZHRoLCBjbGllbnRIZWlnaHQpIHtcbiAgICAgICAgY29uc3QgemVyb1RvT25lID0gTWF0cml4LnNjYWxlKDEgLyBjbGllbnRXaWR0aCwgMSAvIGNsaWVudEhlaWdodCk7XG4gICAgICAgIGNvbnN0IHplcm9Ub1R3byA9IHplcm9Ub09uZS5tdWx0aXBseShNYXRyaXguc2NhbGUoMiwgMikpO1xuICAgICAgICBjb25zdCBtaW51c09uZVRvT25lID0gemVyb1RvVHdvLm11bHRpcGx5KE1hdHJpeC50cmFuc2xhdGUoLTEsIC0xKSk7XG4gICAgICAgIHJldHVybiBtaW51c09uZVRvT25lO1xuICAgIH1cbiAgICBkZXRlcm1pbmFudCgpIHtcbiAgICAgICAgaWYgKHRoaXMucm93cyAhPT0gMyB8fCB0aGlzLmNvbHMgIT09IDMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkRldGVybWluYW50IGNhbGN1bGF0aW9uIGlzIG9ubHkgaW1wbGVtZW50ZWQgZm9yIDN4MyBtYXRyaWNlc1wiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBbYSwgYiwgYywgZCwgZSwgZiwgZywgaCwgaV0gPSB0aGlzLmRhdGE7XG4gICAgICAgIHJldHVybiBhICogKGUgKiBpIC0gZiAqIGgpIC0gYiAqIChkICogaSAtIGYgKiBnKSArIGMgKiAoZCAqIGggLSBlICogZyk7XG4gICAgfVxuICAgIGFkanVnYXRlKCkge1xuICAgICAgICBpZiAodGhpcy5yb3dzICE9PSAzIHx8IHRoaXMuY29scyAhPT0gMykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQWRqdWdhdGUgY2FsY3VsYXRpb24gaXMgb25seSBpbXBsZW1lbnRlZCBmb3IgM3gzIG1hdHJpY2VzXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IFthLCBiLCBjLCBkLCBlLCBmLCBnLCBoLCBpXSA9IHRoaXMuZGF0YTtcbiAgICAgICAgcmV0dXJuIG5ldyBNYXRyaXgoMywgMywgW1xuICAgICAgICAgICAgKGUgKiBpIC0gZiAqIGgpLCAtKGIgKiBpIC0gYyAqIGgpLCAoYiAqIGYgLSBjICogZSksXG4gICAgICAgICAgICAtKGQgKiBpIC0gZiAqIGcpLCAoYSAqIGkgLSBjICogZyksIC0oYSAqIGYgLSBjICogZCksXG4gICAgICAgICAgICAoZCAqIGggLSBlICogZyksIC0oYSAqIGggLSBiICogZyksIChhICogZSAtIGIgKiBkKVxuICAgICAgICBdKTtcbiAgICB9XG4gICAgaW52ZXJzZSgpIHtcbiAgICAgICAgaWYgKHRoaXMucm93cyAhPT0gMyB8fCB0aGlzLmNvbHMgIT09IDMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmVyc2UgY2FsY3VsYXRpb24gaXMgb25seSBpbXBsZW1lbnRlZCBmb3IgM3gzIG1hdHJpY2VzXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRldCA9IHRoaXMuZGV0ZXJtaW5hbnQoKTtcbiAgICAgICAgaWYgKE51bWJlci5pc05hTihkZXQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNYXRyaXggaXMgbm90IGludmVydGlibGUgKGRldGVybWluYW50IGlzIGNsb3NlIHRvIHplcm8pXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFkaiA9IHRoaXMuYWRqdWdhdGUoKTtcbiAgICAgICAgcmV0dXJuIGFkai5zY2FsYXIoMSAvIGRldCk7XG4gICAgfVxuICAgIHRyYW5zcG9zZSgpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IE1hdHJpeCh0aGlzLmNvbHMsIHRoaXMucm93cyk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yb3dzOyBpKyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5jb2xzOyBqKyspIHtcbiAgICAgICAgICAgICAgICByZXN1bHQuZGF0YVtyZXN1bHQuYXQoaiwgaSldID0gdGhpcy5kYXRhW3RoaXMuYXQoaSwgaildO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIHN0YXRpYyBpZGVudGl0eSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNYXRyaXgoMywgMywgW1xuICAgICAgICAgICAgMSwgMCwgMCxcbiAgICAgICAgICAgIDAsIDEsIDAsXG4gICAgICAgICAgICAwLCAwLCAxXG4gICAgICAgIF0pO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFwiXCI7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yb3dzICogdGhpcy5jb2xzOyBpKyspIHtcbiAgICAgICAgICAgIHJlc3VsdCArPSBgJHt0aGlzLmRhdGFbaV19ICBgO1xuICAgICAgICAgICAgaWYgKChpICsgMSkgJSAzID09PSAwICYmIGkgIT09IDApXG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9ICdcXG4nO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuZXhwb3J0IHsgTWF0cml4IH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/matrix.ts\n");

/***/ }),

/***/ "./src/osm.ts":
/*!********************!*\
  !*** ./src/osm.ts ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WORLD_HEIGHT: () => (/* binding */ WORLD_HEIGHT),\n/* harmony export */   WORLD_WIDTH: () => (/* binding */ WORLD_WIDTH),\n/* harmony export */   getSubgraphFromWayWithTag: () => (/* binding */ getSubgraphFromWayWithTag),\n/* harmony export */   initFlatNodeData: () => (/* binding */ initFlatNodeData),\n/* harmony export */   initOSM: () => (/* binding */ initOSM),\n/* harmony export */   normalizeNode: () => (/* binding */ normalizeNode)\n/* harmony export */ });\n/* harmony import */ var _vector2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./vector2 */ \"./src/vector2.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\nconst WORLD_WIDTH = 1000;\nconst WORLD_HEIGHT = 1000;\nfunction parseOSMPbf(url) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const nodes = [];\n        const worldNodes = [];\n        const ways = [];\n        const nodesIdIdxMap = new Map();\n        const nodesIdWayIdxsMap = new Map();\n        const metadata = {\n            minLat: Number.MAX_VALUE,\n            maxLat: Number.MIN_VALUE,\n            minLon: Number.MAX_VALUE,\n            maxLon: Number.MIN_VALUE,\n            nodesCount: 0,\n            lonRange: 0,\n            latRange: 0,\n        };\n        console.time(\"reading pbf\");\n        return new Promise(res => {\n            const parser = window.pbfParser.parse({\n                filePath: url,\n                endDocument: function () {\n                    metadata.latRange = metadata.maxLat - metadata.minLat;\n                    metadata.lonRange = metadata.maxLon - metadata.minLon;\n                    console.timeEnd(\"reading pbf\");\n                    console.log('document end');\n                    res({\n                        nodes,\n                        ways,\n                        metadata,\n                        nodesIdIdxMap,\n                        nodesIdWayIdxsMap,\n                        worldNodes,\n                    });\n                },\n                node: function (node) {\n                    metadata.minLat = Math.min(metadata.minLat, node.lat);\n                    metadata.maxLat = Math.max(metadata.maxLat, node.lat);\n                    metadata.minLon = Math.min(metadata.minLon, node.lon);\n                    metadata.maxLon = Math.max(metadata.maxLon, node.lon);\n                    metadata.nodesCount++;\n                    const osmNode = {\n                        id: node.id,\n                        lat: node.lat,\n                        lon: node.lon,\n                        __brand: 'OSM_NODE'\n                    };\n                    nodes.push(osmNode);\n                    worldNodes.push(osmNodeToWorldNode(osmNode));\n                    nodesIdIdxMap.set(node.id, nodes.length - 1);\n                },\n                way: function (way) {\n                    const wayNodeIds = way.nodeRefs;\n                    /**\n                     * \"It is possible that faulty ways with zero or one node exist\"\n                     * From: https://wiki.openstreetmap.org/wiki/Way\n                     */\n                    if (wayNodeIds.length <= 1)\n                        return;\n                    for (let i = 0; i < wayNodeIds.length; i++) {\n                        const nodeId = wayNodeIds[i];\n                        const wayIdxs = nodesIdWayIdxsMap.get(nodeId);\n                        if (wayIdxs === undefined) {\n                            nodesIdWayIdxsMap.set(nodeId, [ways.length]);\n                        }\n                        else {\n                            wayIdxs.push(ways.length);\n                            nodesIdWayIdxsMap.set(nodeId, wayIdxs);\n                        }\n                    }\n                    ways.push({\n                        node_ids: wayNodeIds,\n                        tags: way.tags\n                    });\n                },\n            });\n        });\n    });\n}\nfunction initOSM(url) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return parseOSMPbf(url);\n    });\n}\nfunction mapContains(map, key, searchValues) {\n    const tagValue = map[key];\n    if (tagValue === undefined)\n        return false;\n    if (searchValues.includes(\"*\"))\n        return true;\n    if (searchValues.some(v => v === tagValue))\n        return true;\n    return false;\n}\nfunction getSubgraphFromWayWithTag(key, values, osmContext) {\n    const filteredNodes = [];\n    const filteredWorldNodes = [];\n    const filteredNodesIdx = [];\n    const filteredWays = [];\n    const { nodes, worldNodes, ways, nodesIdIdxMap } = osmContext;\n    for (let i = 0; i < ways.length; i++) {\n        if (!mapContains(ways[i].tags, key, values))\n            continue;\n        for (let j = 0; j < ways[i].node_ids.length; j++) {\n            const nodeId = ways[i].node_ids[j];\n            const idx = nodesIdIdxMap.get(nodeId);\n            if (idx === undefined)\n                throw new Error(`Invalid node id ${nodeId} referenced in a way ${i}, but not found in root data`);\n            filteredNodes.push(nodes[idx]);\n            filteredWorldNodes.push(worldNodes[idx]);\n            filteredNodesIdx.push(idx);\n        }\n        filteredWays.push(ways[i]);\n        filteredNodesIdx.push(0xFFFFFFFF);\n    }\n    return {\n        ways: filteredWays,\n        worldNodes: filteredWorldNodes,\n        nodes: filteredNodes,\n        idxs: filteredNodesIdx\n    };\n}\nfunction degreesToRads(degree) {\n    return degree * (Math.PI / 180);\n}\n/**\n * Ref: https://en.wikipedia.org/wiki/Web_Mercator_projection\n * https://wiki.openstreetmap.org/wiki/Slippy_map_tilenames#Derivation_of_tile_names\n*/\nfunction wgs84toWebMercator(node) {\n    const ZOOM_LEVEL = 0;\n    const PI = Math.PI;\n    const x = (((1 / (2 * PI))) * Math.pow(2, ZOOM_LEVEL) * (PI + degreesToRads(node.lon)));\n    const y = (((1 / (2 * PI))) * Math.pow(2, ZOOM_LEVEL) * (PI - Math.log(Math.tan((PI / 4) + (degreesToRads(node.lat) / 2)))));\n    if (x > Math.pow(2, ZOOM_LEVEL) || y > Math.pow(2, ZOOM_LEVEL)) {\n        throw new Error(`Invalid web mercator position (${x},${y}). Lon lat ${node.lon}, ${node.lat}`);\n    }\n    const position = new _vector2__WEBPACK_IMPORTED_MODULE_0__.Vector2(x, y);\n    return {\n        id: node.id,\n        position,\n        __brand: 'WEB_MERCATOR_NODE'\n    };\n}\nfunction normalizeNode(node, metadata) {\n    const { minLat, minLon, lonRange, latRange } = metadata;\n    return Object.assign(Object.assign({}, node), { lon: ((node.lon - minLon) / lonRange), lat: ((node.lat - minLat) / latRange) });\n}\nfunction osmNodeToWorldNode(node) {\n    const webMercatorNode = wgs84toWebMercator(node);\n    /**\n     * The projection top left is 0, 0, whereas our project uses bottom left as 0,0, so we fix the y axis by inverting it and adding a 1.\n    */\n    const worldPosition = webMercatorNode\n        .position\n        .multiplyScalar(1, -1)\n        .addScalar(0, 1)\n        .multiplyScalar(WORLD_WIDTH, WORLD_HEIGHT);\n    return {\n        id: webMercatorNode.id,\n        position: worldPosition,\n        __brand: 'WORLD_NODE'\n    };\n}\nfunction initFlatNodeData(nodes) {\n    const data = [];\n    for (let i = 0; i < nodes.length; i++) {\n        data.push(nodes[i].position.x, nodes[i].position.y);\n    }\n    return data;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvb3NtLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxpQkFBaUIsU0FBSSxJQUFJLFNBQUk7QUFDN0IsNEJBQTRCLCtEQUErRCxpQkFBaUI7QUFDNUc7QUFDQSxvQ0FBb0MsTUFBTSwrQkFBK0IsWUFBWTtBQUNyRixtQ0FBbUMsTUFBTSxtQ0FBbUMsWUFBWTtBQUN4RixnQ0FBZ0M7QUFDaEM7QUFDQSxLQUFLO0FBQ0w7QUFDb0M7QUFDN0I7QUFDQTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLHVCQUF1QjtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakIsYUFBYTtBQUNiLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDTztBQUNQO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHlDQUF5QztBQUNyRCxvQkFBb0IsaUJBQWlCO0FBQ3JDO0FBQ0E7QUFDQSx3QkFBd0IsNkJBQTZCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxRQUFRLHNCQUFzQixFQUFFO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxFQUFFLEdBQUcsRUFBRSxhQUFhLFNBQVMsSUFBSSxTQUFTO0FBQ3BHO0FBQ0EseUJBQXlCLDZDQUFPO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsWUFBWSxxQ0FBcUM7QUFDakQseUNBQXlDLFdBQVcsOEVBQThFO0FBQ2xJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0Esb0JBQW9CLGtCQUFrQjtBQUN0QztBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYmdsLXByb2JlLTIvLi9zcmMvb3NtLnRzPzk4ODMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5pbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSBcIi4vdmVjdG9yMlwiO1xuZXhwb3J0IGNvbnN0IFdPUkxEX1dJRFRIID0gMTAwMDtcbmV4cG9ydCBjb25zdCBXT1JMRF9IRUlHSFQgPSAxMDAwO1xuZnVuY3Rpb24gcGFyc2VPU01QYmYodXJsKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgY29uc3Qgbm9kZXMgPSBbXTtcbiAgICAgICAgY29uc3Qgd29ybGROb2RlcyA9IFtdO1xuICAgICAgICBjb25zdCB3YXlzID0gW107XG4gICAgICAgIGNvbnN0IG5vZGVzSWRJZHhNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIGNvbnN0IG5vZGVzSWRXYXlJZHhzTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IHtcbiAgICAgICAgICAgIG1pbkxhdDogTnVtYmVyLk1BWF9WQUxVRSxcbiAgICAgICAgICAgIG1heExhdDogTnVtYmVyLk1JTl9WQUxVRSxcbiAgICAgICAgICAgIG1pbkxvbjogTnVtYmVyLk1BWF9WQUxVRSxcbiAgICAgICAgICAgIG1heExvbjogTnVtYmVyLk1JTl9WQUxVRSxcbiAgICAgICAgICAgIG5vZGVzQ291bnQ6IDAsXG4gICAgICAgICAgICBsb25SYW5nZTogMCxcbiAgICAgICAgICAgIGxhdFJhbmdlOiAwLFxuICAgICAgICB9O1xuICAgICAgICBjb25zb2xlLnRpbWUoXCJyZWFkaW5nIHBiZlwiKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlcyA9PiB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZXIgPSB3aW5kb3cucGJmUGFyc2VyLnBhcnNlKHtcbiAgICAgICAgICAgICAgICBmaWxlUGF0aDogdXJsLFxuICAgICAgICAgICAgICAgIGVuZERvY3VtZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhLmxhdFJhbmdlID0gbWV0YWRhdGEubWF4TGF0IC0gbWV0YWRhdGEubWluTGF0O1xuICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YS5sb25SYW5nZSA9IG1ldGFkYXRhLm1heExvbiAtIG1ldGFkYXRhLm1pbkxvbjtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS50aW1lRW5kKFwicmVhZGluZyBwYmZcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkb2N1bWVudCBlbmQnKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2F5cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZXNJZElkeE1hcCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVzSWRXYXlJZHhzTWFwLFxuICAgICAgICAgICAgICAgICAgICAgICAgd29ybGROb2RlcyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBub2RlOiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YS5taW5MYXQgPSBNYXRoLm1pbihtZXRhZGF0YS5taW5MYXQsIG5vZGUubGF0KTtcbiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGEubWF4TGF0ID0gTWF0aC5tYXgobWV0YWRhdGEubWF4TGF0LCBub2RlLmxhdCk7XG4gICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhLm1pbkxvbiA9IE1hdGgubWluKG1ldGFkYXRhLm1pbkxvbiwgbm9kZS5sb24pO1xuICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YS5tYXhMb24gPSBNYXRoLm1heChtZXRhZGF0YS5tYXhMb24sIG5vZGUubG9uKTtcbiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGEubm9kZXNDb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvc21Ob2RlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IG5vZGUuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXQ6IG5vZGUubGF0LFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9uOiBub2RlLmxvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIF9fYnJhbmQ6ICdPU01fTk9ERSdcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgbm9kZXMucHVzaChvc21Ob2RlKTtcbiAgICAgICAgICAgICAgICAgICAgd29ybGROb2Rlcy5wdXNoKG9zbU5vZGVUb1dvcmxkTm9kZShvc21Ob2RlKSk7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVzSWRJZHhNYXAuc2V0KG5vZGUuaWQsIG5vZGVzLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgd2F5OiBmdW5jdGlvbiAod2F5KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHdheU5vZGVJZHMgPSB3YXkubm9kZVJlZnM7XG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBcIkl0IGlzIHBvc3NpYmxlIHRoYXQgZmF1bHR5IHdheXMgd2l0aCB6ZXJvIG9yIG9uZSBub2RlIGV4aXN0XCJcbiAgICAgICAgICAgICAgICAgICAgICogRnJvbTogaHR0cHM6Ly93aWtpLm9wZW5zdHJlZXRtYXAub3JnL3dpa2kvV2F5XG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBpZiAod2F5Tm9kZUlkcy5sZW5ndGggPD0gMSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3YXlOb2RlSWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBub2RlSWQgPSB3YXlOb2RlSWRzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2F5SWR4cyA9IG5vZGVzSWRXYXlJZHhzTWFwLmdldChub2RlSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdheUlkeHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVzSWRXYXlJZHhzTWFwLnNldChub2RlSWQsIFt3YXlzLmxlbmd0aF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2F5SWR4cy5wdXNoKHdheXMubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2Rlc0lkV2F5SWR4c01hcC5zZXQobm9kZUlkLCB3YXlJZHhzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB3YXlzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZV9pZHM6IHdheU5vZGVJZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdzOiB3YXkudGFnc1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGluaXRPU00odXJsKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlT1NNUGJmKHVybCk7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBtYXBDb250YWlucyhtYXAsIGtleSwgc2VhcmNoVmFsdWVzKSB7XG4gICAgY29uc3QgdGFnVmFsdWUgPSBtYXBba2V5XTtcbiAgICBpZiAodGFnVmFsdWUgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChzZWFyY2hWYWx1ZXMuaW5jbHVkZXMoXCIqXCIpKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoc2VhcmNoVmFsdWVzLnNvbWUodiA9PiB2ID09PSB0YWdWYWx1ZSkpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdWJncmFwaEZyb21XYXlXaXRoVGFnKGtleSwgdmFsdWVzLCBvc21Db250ZXh0KSB7XG4gICAgY29uc3QgZmlsdGVyZWROb2RlcyA9IFtdO1xuICAgIGNvbnN0IGZpbHRlcmVkV29ybGROb2RlcyA9IFtdO1xuICAgIGNvbnN0IGZpbHRlcmVkTm9kZXNJZHggPSBbXTtcbiAgICBjb25zdCBmaWx0ZXJlZFdheXMgPSBbXTtcbiAgICBjb25zdCB7IG5vZGVzLCB3b3JsZE5vZGVzLCB3YXlzLCBub2Rlc0lkSWR4TWFwIH0gPSBvc21Db250ZXh0O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd2F5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoIW1hcENvbnRhaW5zKHdheXNbaV0udGFncywga2V5LCB2YWx1ZXMpKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgd2F5c1tpXS5ub2RlX2lkcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgY29uc3Qgbm9kZUlkID0gd2F5c1tpXS5ub2RlX2lkc1tqXTtcbiAgICAgICAgICAgIGNvbnN0IGlkeCA9IG5vZGVzSWRJZHhNYXAuZ2V0KG5vZGVJZCk7XG4gICAgICAgICAgICBpZiAoaWR4ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIG5vZGUgaWQgJHtub2RlSWR9IHJlZmVyZW5jZWQgaW4gYSB3YXkgJHtpfSwgYnV0IG5vdCBmb3VuZCBpbiByb290IGRhdGFgKTtcbiAgICAgICAgICAgIGZpbHRlcmVkTm9kZXMucHVzaChub2Rlc1tpZHhdKTtcbiAgICAgICAgICAgIGZpbHRlcmVkV29ybGROb2Rlcy5wdXNoKHdvcmxkTm9kZXNbaWR4XSk7XG4gICAgICAgICAgICBmaWx0ZXJlZE5vZGVzSWR4LnB1c2goaWR4KTtcbiAgICAgICAgfVxuICAgICAgICBmaWx0ZXJlZFdheXMucHVzaCh3YXlzW2ldKTtcbiAgICAgICAgZmlsdGVyZWROb2Rlc0lkeC5wdXNoKDB4RkZGRkZGRkYpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB3YXlzOiBmaWx0ZXJlZFdheXMsXG4gICAgICAgIHdvcmxkTm9kZXM6IGZpbHRlcmVkV29ybGROb2RlcyxcbiAgICAgICAgbm9kZXM6IGZpbHRlcmVkTm9kZXMsXG4gICAgICAgIGlkeHM6IGZpbHRlcmVkTm9kZXNJZHhcbiAgICB9O1xufVxuZnVuY3Rpb24gZGVncmVlc1RvUmFkcyhkZWdyZWUpIHtcbiAgICByZXR1cm4gZGVncmVlICogKE1hdGguUEkgLyAxODApO1xufVxuLyoqXG4gKiBSZWY6IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1dlYl9NZXJjYXRvcl9wcm9qZWN0aW9uXG4gKiBodHRwczovL3dpa2kub3BlbnN0cmVldG1hcC5vcmcvd2lraS9TbGlwcHlfbWFwX3RpbGVuYW1lcyNEZXJpdmF0aW9uX29mX3RpbGVfbmFtZXNcbiovXG5mdW5jdGlvbiB3Z3M4NHRvV2ViTWVyY2F0b3Iobm9kZSkge1xuICAgIGNvbnN0IFpPT01fTEVWRUwgPSAwO1xuICAgIGNvbnN0IFBJID0gTWF0aC5QSTtcbiAgICBjb25zdCB4ID0gKCgoMSAvICgyICogUEkpKSkgKiBNYXRoLnBvdygyLCBaT09NX0xFVkVMKSAqIChQSSArIGRlZ3JlZXNUb1JhZHMobm9kZS5sb24pKSk7XG4gICAgY29uc3QgeSA9ICgoKDEgLyAoMiAqIFBJKSkpICogTWF0aC5wb3coMiwgWk9PTV9MRVZFTCkgKiAoUEkgLSBNYXRoLmxvZyhNYXRoLnRhbigoUEkgLyA0KSArIChkZWdyZWVzVG9SYWRzKG5vZGUubGF0KSAvIDIpKSkpKTtcbiAgICBpZiAoeCA+IE1hdGgucG93KDIsIFpPT01fTEVWRUwpIHx8IHkgPiBNYXRoLnBvdygyLCBaT09NX0xFVkVMKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgd2ViIG1lcmNhdG9yIHBvc2l0aW9uICgke3h9LCR7eX0pLiBMb24gbGF0ICR7bm9kZS5sb259LCAke25vZGUubGF0fWApO1xuICAgIH1cbiAgICBjb25zdCBwb3NpdGlvbiA9IG5ldyBWZWN0b3IyKHgsIHkpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGlkOiBub2RlLmlkLFxuICAgICAgICBwb3NpdGlvbixcbiAgICAgICAgX19icmFuZDogJ1dFQl9NRVJDQVRPUl9OT0RFJ1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplTm9kZShub2RlLCBtZXRhZGF0YSkge1xuICAgIGNvbnN0IHsgbWluTGF0LCBtaW5Mb24sIGxvblJhbmdlLCBsYXRSYW5nZSB9ID0gbWV0YWRhdGE7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbm9kZSksIHsgbG9uOiAoKG5vZGUubG9uIC0gbWluTG9uKSAvIGxvblJhbmdlKSwgbGF0OiAoKG5vZGUubGF0IC0gbWluTGF0KSAvIGxhdFJhbmdlKSB9KTtcbn1cbmZ1bmN0aW9uIG9zbU5vZGVUb1dvcmxkTm9kZShub2RlKSB7XG4gICAgY29uc3Qgd2ViTWVyY2F0b3JOb2RlID0gd2dzODR0b1dlYk1lcmNhdG9yKG5vZGUpO1xuICAgIC8qKlxuICAgICAqIFRoZSBwcm9qZWN0aW9uIHRvcCBsZWZ0IGlzIDAsIDAsIHdoZXJlYXMgb3VyIHByb2plY3QgdXNlcyBib3R0b20gbGVmdCBhcyAwLDAsIHNvIHdlIGZpeCB0aGUgeSBheGlzIGJ5IGludmVydGluZyBpdCBhbmQgYWRkaW5nIGEgMS5cbiAgICAqL1xuICAgIGNvbnN0IHdvcmxkUG9zaXRpb24gPSB3ZWJNZXJjYXRvck5vZGVcbiAgICAgICAgLnBvc2l0aW9uXG4gICAgICAgIC5tdWx0aXBseVNjYWxhcigxLCAtMSlcbiAgICAgICAgLmFkZFNjYWxhcigwLCAxKVxuICAgICAgICAubXVsdGlwbHlTY2FsYXIoV09STERfV0lEVEgsIFdPUkxEX0hFSUdIVCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6IHdlYk1lcmNhdG9yTm9kZS5pZCxcbiAgICAgICAgcG9zaXRpb246IHdvcmxkUG9zaXRpb24sXG4gICAgICAgIF9fYnJhbmQ6ICdXT1JMRF9OT0RFJ1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gaW5pdEZsYXROb2RlRGF0YShub2Rlcykge1xuICAgIGNvbnN0IGRhdGEgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGRhdGEucHVzaChub2Rlc1tpXS5wb3NpdGlvbi54LCBub2Rlc1tpXS5wb3NpdGlvbi55KTtcbiAgICB9XG4gICAgcmV0dXJuIGRhdGE7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/osm.ts\n");

/***/ }),

/***/ "./src/pathfinding.ts":
/*!****************************!*\
  !*** ./src/pathfinding.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildGraph: () => (/* binding */ buildGraph),\n/* harmony export */   dijkstra: () => (/* binding */ dijkstra),\n/* harmony export */   findPath: () => (/* binding */ findPath),\n/* harmony export */   graph: () => (/* binding */ graph),\n/* harmony export */   haversine: () => (/* binding */ haversine)\n/* harmony export */ });\n/* harmony import */ var _external_priorityqueue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./external/priorityqueue */ \"./src/external/priorityqueue.js\");\n\nlet graph;\nfunction findPath(previous, endNodeIdx) {\n    const path = [];\n    let u = endNodeIdx;\n    if (u === undefined)\n        throw new Error(`Cannot find target node in the reverse lookup ${1}`);\n    while (u !== undefined) {\n        path.unshift(u);\n        u = previous[u];\n    }\n    return path;\n}\nfunction dijkstra(startNodeIndex) {\n    console.log(\"Starting dijkstra\");\n    let distances = {};\n    let previous = {};\n    const visited = new Set();\n    let nodes = graph.keys();\n    for (let node of nodes) {\n        distances[node] = Infinity;\n        previous[node] = undefined;\n    }\n    const pq = new _external_priorityqueue__WEBPACK_IMPORTED_MODULE_0__[\"default\"]((a, b) => {\n        return a.distance < b.distance;\n    });\n    pq.add({ distance: 0, idx: startNodeIndex });\n    distances[startNodeIndex] = 0;\n    console.time(\"dijkstra time:\");\n    const updates = [];\n    while (!pq.isEmpty()) {\n        const u = pq.poll().idx;\n        if (distances[u] === Infinity)\n            break;\n        visited.add(u);\n        for (const [v] of graph.get(u)) {\n            updates.push(v, u);\n            if (!visited.has(v)) {\n                const w = graph.get(u).get(v);\n                const newDistance = distances[u] + w;\n                if (distances[v] > newDistance) {\n                    distances[v] = newDistance;\n                    previous[v] = u;\n                    pq.add({ distance: distances[v], idx: v });\n                }\n            }\n        }\n        if (updates.length >= 100) {\n            self.postMessage({\n                eventType: \"GRAPH_VISITED_UPDATE_BULK\",\n                eventData: updates,\n            });\n            updates.length = 0;\n        }\n    }\n    self.postMessage({\n        eventType: \"GRAPH_VISITED_UPDATE_BULK\",\n        eventData: updates,\n    });\n    updates.length = 0;\n    console.timeEnd(\"dijkstra time:\");\n    return { previous };\n}\n/**\n * Ref: http://www.movable-type.co.uk/scripts/latlong.html\n * @param lon1\n * @param lat1\n * @param lon2\n * @param lat2\n */\nfunction haversine(lon1, lat1, lon2, lat2) {\n    const R = 6371e3; // metres\n    const 1 = lat1 * Math.PI / 180; // ,  in radians\n    const 2 = lat2 * Math.PI / 180;\n    const  = (lat2 - lat1) * Math.PI / 180;\n    const  = (lon2 - lon1) * Math.PI / 180;\n    const a = Math.sin( / 2) * Math.sin( / 2) +\n        Math.cos(1) * Math.cos(2) *\n            Math.sin( / 2) * Math.sin( / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    const d = R * c; // in metres\n    return d;\n}\nfunction buildGraph(ways, nodes, nodeIdIdxMap) {\n    const g = new Map();\n    let edges = 0;\n    for (let i = 0; i < ways.length; i++) {\n        const way = ways[i];\n        let oneWay = false;\n        if (way.tags[\"oneway\"] === \"yes\" || way.tags[\"junction\"] === \"roundabout\") {\n            oneWay = true;\n        }\n        const wayNodes = way.node_ids.map(id => {\n            const idx = nodeIdIdxMap.get(id);\n            if (idx === undefined) {\n                throw new Error(\"Cannot find index for node id\");\n            }\n            return nodes[idx];\n        });\n        for (let j = 0; j < wayNodes.length; j++) {\n            const start = wayNodes[j];\n            const end = wayNodes[j + 1];\n            if (start && end) {\n                const startIndex = nodeIdIdxMap.get(start.id);\n                const endIndex = nodeIdIdxMap.get(end.id);\n                if (startIndex === undefined || endIndex === undefined) {\n                    throw new Error(\"Cannot find index for node ids\");\n                }\n                const distance = haversine(start.lon, start.lat, end.lon, end.lat);\n                if (g.get(startIndex) === undefined) {\n                    g.set(startIndex, new Map());\n                }\n                if (g.get(endIndex) === undefined) {\n                    g.set(endIndex, new Map());\n                }\n                if (oneWay) {\n                    edges++;\n                    g.get(startIndex).set(endIndex, distance);\n                }\n                else {\n                    edges += 2;\n                    g.get(startIndex).set(endIndex, distance);\n                    g.get(endIndex).set(startIndex, distance);\n                }\n            }\n        }\n    }\n    console.log(`Built graph. Edges count: ${edges}`);\n    graph = g;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGF0aGZpbmRpbmcudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXlEO0FBQ2xEO0FBQ0E7QUFDUDtBQUNBO0FBQ0E7QUFDQSx5RUFBeUUsRUFBRTtBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiwrREFBaUI7QUFDcEM7QUFDQSxLQUFLO0FBQ0wsYUFBYSxrQ0FBa0M7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsZ0NBQWdDO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLHNCQUFzQjtBQUN0QixxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLG9CQUFvQixpQkFBaUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCx3QkFBd0IscUJBQXFCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxNQUFNO0FBQ25EO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJnbC1wcm9iZS0yLy4vc3JjL3BhdGhmaW5kaW5nLnRzPzU5YzYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEZhc3RQcmlvcml0eVF1ZXVlIGZyb20gXCIuL2V4dGVybmFsL3ByaW9yaXR5cXVldWVcIjtcbmV4cG9ydCBsZXQgZ3JhcGg7XG5leHBvcnQgZnVuY3Rpb24gZmluZFBhdGgocHJldmlvdXMsIGVuZE5vZGVJZHgpIHtcbiAgICBjb25zdCBwYXRoID0gW107XG4gICAgbGV0IHUgPSBlbmROb2RlSWR4O1xuICAgIGlmICh1ID09PSB1bmRlZmluZWQpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGZpbmQgdGFyZ2V0IG5vZGUgaW4gdGhlIHJldmVyc2UgbG9va3VwICR7MX1gKTtcbiAgICB3aGlsZSAodSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHBhdGgudW5zaGlmdCh1KTtcbiAgICAgICAgdSA9IHByZXZpb3VzW3VdO1xuICAgIH1cbiAgICByZXR1cm4gcGF0aDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkaWprc3RyYShzdGFydE5vZGVJbmRleCkge1xuICAgIGNvbnNvbGUubG9nKFwiU3RhcnRpbmcgZGlqa3N0cmFcIik7XG4gICAgbGV0IGRpc3RhbmNlcyA9IHt9O1xuICAgIGxldCBwcmV2aW91cyA9IHt9O1xuICAgIGNvbnN0IHZpc2l0ZWQgPSBuZXcgU2V0KCk7XG4gICAgbGV0IG5vZGVzID0gZ3JhcGgua2V5cygpO1xuICAgIGZvciAobGV0IG5vZGUgb2Ygbm9kZXMpIHtcbiAgICAgICAgZGlzdGFuY2VzW25vZGVdID0gSW5maW5pdHk7XG4gICAgICAgIHByZXZpb3VzW25vZGVdID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBwcSA9IG5ldyBGYXN0UHJpb3JpdHlRdWV1ZSgoYSwgYikgPT4ge1xuICAgICAgICByZXR1cm4gYS5kaXN0YW5jZSA8IGIuZGlzdGFuY2U7XG4gICAgfSk7XG4gICAgcHEuYWRkKHsgZGlzdGFuY2U6IDAsIGlkeDogc3RhcnROb2RlSW5kZXggfSk7XG4gICAgZGlzdGFuY2VzW3N0YXJ0Tm9kZUluZGV4XSA9IDA7XG4gICAgY29uc29sZS50aW1lKFwiZGlqa3N0cmEgdGltZTpcIik7XG4gICAgY29uc3QgdXBkYXRlcyA9IFtdO1xuICAgIHdoaWxlICghcHEuaXNFbXB0eSgpKSB7XG4gICAgICAgIGNvbnN0IHUgPSBwcS5wb2xsKCkuaWR4O1xuICAgICAgICBpZiAoZGlzdGFuY2VzW3VdID09PSBJbmZpbml0eSlcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB2aXNpdGVkLmFkZCh1KTtcbiAgICAgICAgZm9yIChjb25zdCBbdl0gb2YgZ3JhcGguZ2V0KHUpKSB7XG4gICAgICAgICAgICB1cGRhdGVzLnB1c2godiwgdSk7XG4gICAgICAgICAgICBpZiAoIXZpc2l0ZWQuaGFzKHYpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdyA9IGdyYXBoLmdldCh1KS5nZXQodik7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3RGlzdGFuY2UgPSBkaXN0YW5jZXNbdV0gKyB3O1xuICAgICAgICAgICAgICAgIGlmIChkaXN0YW5jZXNbdl0gPiBuZXdEaXN0YW5jZSkge1xuICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZXNbdl0gPSBuZXdEaXN0YW5jZTtcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNbdl0gPSB1O1xuICAgICAgICAgICAgICAgICAgICBwcS5hZGQoeyBkaXN0YW5jZTogZGlzdGFuY2VzW3ZdLCBpZHg6IHYgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh1cGRhdGVzLmxlbmd0aCA+PSAxMDApIHtcbiAgICAgICAgICAgIHNlbGYucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgIGV2ZW50VHlwZTogXCJHUkFQSF9WSVNJVEVEX1VQREFURV9CVUxLXCIsXG4gICAgICAgICAgICAgICAgZXZlbnREYXRhOiB1cGRhdGVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB1cGRhdGVzLmxlbmd0aCA9IDA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2VsZi5wb3N0TWVzc2FnZSh7XG4gICAgICAgIGV2ZW50VHlwZTogXCJHUkFQSF9WSVNJVEVEX1VQREFURV9CVUxLXCIsXG4gICAgICAgIGV2ZW50RGF0YTogdXBkYXRlcyxcbiAgICB9KTtcbiAgICB1cGRhdGVzLmxlbmd0aCA9IDA7XG4gICAgY29uc29sZS50aW1lRW5kKFwiZGlqa3N0cmEgdGltZTpcIik7XG4gICAgcmV0dXJuIHsgcHJldmlvdXMgfTtcbn1cbi8qKlxuICogUmVmOiBodHRwOi8vd3d3Lm1vdmFibGUtdHlwZS5jby51ay9zY3JpcHRzL2xhdGxvbmcuaHRtbFxuICogQHBhcmFtIGxvbjFcbiAqIEBwYXJhbSBsYXQxXG4gKiBAcGFyYW0gbG9uMlxuICogQHBhcmFtIGxhdDJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhdmVyc2luZShsb24xLCBsYXQxLCBsb24yLCBsYXQyKSB7XG4gICAgY29uc3QgUiA9IDYzNzFlMzsgLy8gbWV0cmVzXG4gICAgY29uc3Qgz4YxID0gbGF0MSAqIE1hdGguUEkgLyAxODA7IC8vIM+GLCDOuyBpbiByYWRpYW5zXG4gICAgY29uc3Qgz4YyID0gbGF0MiAqIE1hdGguUEkgLyAxODA7XG4gICAgY29uc3QgzpTPhiA9IChsYXQyIC0gbGF0MSkgKiBNYXRoLlBJIC8gMTgwO1xuICAgIGNvbnN0IM6UzrsgPSAobG9uMiAtIGxvbjEpICogTWF0aC5QSSAvIDE4MDtcbiAgICBjb25zdCBhID0gTWF0aC5zaW4ozpTPhiAvIDIpICogTWF0aC5zaW4ozpTPhiAvIDIpICtcbiAgICAgICAgTWF0aC5jb3Moz4YxKSAqIE1hdGguY29zKM+GMikgKlxuICAgICAgICAgICAgTWF0aC5zaW4ozpTOuyAvIDIpICogTWF0aC5zaW4ozpTOuyAvIDIpO1xuICAgIGNvbnN0IGMgPSAyICogTWF0aC5hdGFuMihNYXRoLnNxcnQoYSksIE1hdGguc3FydCgxIC0gYSkpO1xuICAgIGNvbnN0IGQgPSBSICogYzsgLy8gaW4gbWV0cmVzXG4gICAgcmV0dXJuIGQ7XG59XG5leHBvcnQgZnVuY3Rpb24gYnVpbGRHcmFwaCh3YXlzLCBub2Rlcywgbm9kZUlkSWR4TWFwKSB7XG4gICAgY29uc3QgZyA9IG5ldyBNYXAoKTtcbiAgICBsZXQgZWRnZXMgPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd2F5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCB3YXkgPSB3YXlzW2ldO1xuICAgICAgICBsZXQgb25lV2F5ID0gZmFsc2U7XG4gICAgICAgIGlmICh3YXkudGFnc1tcIm9uZXdheVwiXSA9PT0gXCJ5ZXNcIiB8fCB3YXkudGFnc1tcImp1bmN0aW9uXCJdID09PSBcInJvdW5kYWJvdXRcIikge1xuICAgICAgICAgICAgb25lV2F5ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB3YXlOb2RlcyA9IHdheS5ub2RlX2lkcy5tYXAoaWQgPT4ge1xuICAgICAgICAgICAgY29uc3QgaWR4ID0gbm9kZUlkSWR4TWFwLmdldChpZCk7XG4gICAgICAgICAgICBpZiAoaWR4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBpbmRleCBmb3Igbm9kZSBpZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBub2Rlc1tpZHhdO1xuICAgICAgICB9KTtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB3YXlOb2Rlcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSB3YXlOb2Rlc1tqXTtcbiAgICAgICAgICAgIGNvbnN0IGVuZCA9IHdheU5vZGVzW2ogKyAxXTtcbiAgICAgICAgICAgIGlmIChzdGFydCAmJiBlbmQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFydEluZGV4ID0gbm9kZUlkSWR4TWFwLmdldChzdGFydC5pZCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZW5kSW5kZXggPSBub2RlSWRJZHhNYXAuZ2V0KGVuZC5pZCk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXJ0SW5kZXggPT09IHVuZGVmaW5lZCB8fCBlbmRJbmRleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIGluZGV4IGZvciBub2RlIGlkc1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgZGlzdGFuY2UgPSBoYXZlcnNpbmUoc3RhcnQubG9uLCBzdGFydC5sYXQsIGVuZC5sb24sIGVuZC5sYXQpO1xuICAgICAgICAgICAgICAgIGlmIChnLmdldChzdGFydEluZGV4KSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGcuc2V0KHN0YXJ0SW5kZXgsIG5ldyBNYXAoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnLmdldChlbmRJbmRleCkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBnLnNldChlbmRJbmRleCwgbmV3IE1hcCgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG9uZVdheSkge1xuICAgICAgICAgICAgICAgICAgICBlZGdlcysrO1xuICAgICAgICAgICAgICAgICAgICBnLmdldChzdGFydEluZGV4KS5zZXQoZW5kSW5kZXgsIGRpc3RhbmNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVkZ2VzICs9IDI7XG4gICAgICAgICAgICAgICAgICAgIGcuZ2V0KHN0YXJ0SW5kZXgpLnNldChlbmRJbmRleCwgZGlzdGFuY2UpO1xuICAgICAgICAgICAgICAgICAgICBnLmdldChlbmRJbmRleCkuc2V0KHN0YXJ0SW5kZXgsIGRpc3RhbmNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc29sZS5sb2coYEJ1aWx0IGdyYXBoLiBFZGdlcyBjb3VudDogJHtlZGdlc31gKTtcbiAgICBncmFwaCA9IGc7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/pathfinding.ts\n");

/***/ }),

/***/ "./src/quadtree.ts":
/*!*************************!*\
  !*** ./src/quadtree.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WorldQuadTree: () => (/* binding */ WorldQuadTree)\n/* harmony export */ });\n/* harmony import */ var _osm__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./osm */ \"./src/osm.ts\");\n\nclass Rectangle {\n    // x, y defines Top left corner\n    constructor(x, y, width, height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n    }\n    contains(point) {\n        return (point.x >= this.x &&\n            point.x <= this.x + this.width &&\n            point.y <= this.y &&\n            point.y >= this.y - this.height);\n    }\n    intersects(range) {\n        const xOverlap = this.x < range.x + range.width && this.x + this.width > range.x;\n        const yOverlap = this.y > range.y - range.height && this.y - this.height < range.y;\n        return xOverlap && yOverlap;\n    }\n    distanceTo(point) {\n        const dx = Math.max(this.x - point.x, 0, point.x - (this.x + this.width));\n        const dy = Math.max(this.y - point.y, 0, point.y - (this.y - this.height));\n        return Math.sqrt(dx * dx + dy * dy);\n    }\n    toString() {\n        return `(${this.x}, ${this.y})..........(${this.x + this.width}, ${this.y})\\n`\n            + `(${this.x}, ${this.y - this.height})...........(${this.x + this.width}, ${this.y - this.height})`;\n    }\n}\nclass QuadTree {\n    constructor(boundary, capacity, parent = null) {\n        this.boundary = boundary;\n        this.capacity = capacity;\n        this.parent = parent;\n        this.nodes = [];\n        this.northeast = null;\n        this.northwest = null;\n        this.southeast = null;\n        this.southwest = null;\n        this.divided = false;\n        this.maxDepth = 0;\n        QuadTree.quadsCount++;\n    }\n    insert(node, currentDepth = 0) {\n        if (!this.boundary.contains(node.position)) {\n            return { added: false, atDepth: 0 };\n        }\n        if (this.nodes.length < this.capacity) {\n            this.nodes.push(node);\n            return { added: true, atDepth: currentDepth };\n        }\n        if (!this.divided) {\n            this.subdivide();\n        }\n        const addedNE = this.northeast.insert(node, currentDepth + 1);\n        const addedNW = this.northwest.insert(node, currentDepth + 1);\n        const addedSE = this.southeast.insert(node, currentDepth + 1);\n        const addedSW = this.southwest.insert(node, currentDepth + 1);\n        const isAdded = addedNE.added || addedNW.added || addedSE.added || addedSW.added;\n        const addedDepth = addedNE.atDepth || addedNW.atDepth || addedSE.atDepth || addedSW.atDepth;\n        if (addedDepth > this.maxDepth) {\n            this.maxDepth = addedDepth;\n        }\n        return {\n            added: isAdded,\n            atDepth: addedDepth\n        };\n    }\n    subdivide() {\n        const x = this.boundary.x;\n        const y = this.boundary.y;\n        const w = this.boundary.width / 2;\n        const h = this.boundary.height / 2;\n        const ne = new Rectangle(x + w, y, w, h);\n        this.northeast = new QuadTree(ne, this.capacity, this);\n        const nw = new Rectangle(x, y, w, h);\n        this.northwest = new QuadTree(nw, this.capacity, this);\n        const se = new Rectangle(x + w, y - h, w, h);\n        this.southeast = new QuadTree(se, this.capacity, this);\n        const sw = new Rectangle(x, y - h, w, h);\n        this.southwest = new QuadTree(sw, this.capacity, this);\n        this.divided = true;\n    }\n    query(range, found = []) {\n        if (!this.boundary.intersects(range)) {\n            return found;\n        }\n        for (const node of this.nodes) {\n            if (range.contains(node.position)) {\n                found.push(node);\n            }\n        }\n        if (this.divided) {\n            this.northeast.query(range, found);\n            this.northwest.query(range, found);\n            this.southeast.query(range, found);\n            this.southwest.query(range, found);\n        }\n        return found;\n    }\n    findNearest(point) {\n        return this.findNearestRecursive(point, null, Number.MAX_VALUE);\n    }\n    findNearestRecursive(point, best, bestDistance) {\n        if (!this.boundary.contains(point) && this.boundary.distanceTo(point) > bestDistance) {\n            return best;\n        }\n        for (const node of this.nodes) {\n            const distance = node.position.distance(point);\n            if (distance < bestDistance) {\n                best = node;\n                bestDistance = distance;\n            }\n        }\n        if (this.divided) {\n            const quadrants = [this.northeast, this.northwest, this.southeast, this.southwest];\n            quadrants.sort((a, b) => a.boundary.distanceTo(point) - b.boundary.distanceTo(point));\n            for (const quadrant of quadrants) {\n                best = quadrant.findNearestRecursive(point, best, bestDistance);\n                bestDistance = best ? best.position.distance(point) : bestDistance;\n            }\n        }\n        return best;\n    }\n}\nQuadTree.quadsCount = 0;\nclass WorldQuadTree {\n    constructor() {\n        this.quadTree = new QuadTree(new Rectangle(0, _osm__WEBPACK_IMPORTED_MODULE_0__.WORLD_HEIGHT, _osm__WEBPACK_IMPORTED_MODULE_0__.WORLD_WIDTH, _osm__WEBPACK_IMPORTED_MODULE_0__.WORLD_HEIGHT), 4);\n    }\n    populate(nodes) {\n        for (const node of nodes) {\n            const result = this.quadTree.insert(node);\n            if (result.added === false) {\n                throw new Error(`Failed to insert node into the qudd tree. ${JSON.stringify(node)}`);\n            }\n        }\n        console.log(\"Quad tree max depth = \" + this.quadTree.maxDepth);\n        console.log(\"Quads count: \" + QuadTree.quadsCount);\n    }\n    getClosestNodeForWorldPosition(worldPosition) {\n        var _a;\n        return (_a = this.quadTree.findNearest(worldPosition)) !== null && _a !== void 0 ? _a : undefined;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcXVhZHRyZWUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBa0Q7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsT0FBTyxJQUFJLE9BQU8sY0FBYyxvQkFBb0IsSUFBSSxPQUFPO0FBQ2xGLGtCQUFrQixPQUFPLElBQUkscUJBQXFCLGVBQWUsb0JBQW9CLElBQUkscUJBQXFCO0FBQzlHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0Esc0RBQXNELDhDQUFZLEVBQUUsNkNBQVcsRUFBRSw4Q0FBWTtBQUM3RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkVBQTZFLHFCQUFxQjtBQUNsRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYmdsLXByb2JlLTIvLi9zcmMvcXVhZHRyZWUudHM/MTQ0NyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBXT1JMRF9IRUlHSFQsIFdPUkxEX1dJRFRIIH0gZnJvbSBcIi4vb3NtXCI7XG5jbGFzcyBSZWN0YW5nbGUge1xuICAgIC8vIHgsIHkgZGVmaW5lcyBUb3AgbGVmdCBjb3JuZXJcbiAgICBjb25zdHJ1Y3Rvcih4LCB5LCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgIHRoaXMueSA9IHk7XG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgfVxuICAgIGNvbnRhaW5zKHBvaW50KSB7XG4gICAgICAgIHJldHVybiAocG9pbnQueCA+PSB0aGlzLnggJiZcbiAgICAgICAgICAgIHBvaW50LnggPD0gdGhpcy54ICsgdGhpcy53aWR0aCAmJlxuICAgICAgICAgICAgcG9pbnQueSA8PSB0aGlzLnkgJiZcbiAgICAgICAgICAgIHBvaW50LnkgPj0gdGhpcy55IC0gdGhpcy5oZWlnaHQpO1xuICAgIH1cbiAgICBpbnRlcnNlY3RzKHJhbmdlKSB7XG4gICAgICAgIGNvbnN0IHhPdmVybGFwID0gdGhpcy54IDwgcmFuZ2UueCArIHJhbmdlLndpZHRoICYmIHRoaXMueCArIHRoaXMud2lkdGggPiByYW5nZS54O1xuICAgICAgICBjb25zdCB5T3ZlcmxhcCA9IHRoaXMueSA+IHJhbmdlLnkgLSByYW5nZS5oZWlnaHQgJiYgdGhpcy55IC0gdGhpcy5oZWlnaHQgPCByYW5nZS55O1xuICAgICAgICByZXR1cm4geE92ZXJsYXAgJiYgeU92ZXJsYXA7XG4gICAgfVxuICAgIGRpc3RhbmNlVG8ocG9pbnQpIHtcbiAgICAgICAgY29uc3QgZHggPSBNYXRoLm1heCh0aGlzLnggLSBwb2ludC54LCAwLCBwb2ludC54IC0gKHRoaXMueCArIHRoaXMud2lkdGgpKTtcbiAgICAgICAgY29uc3QgZHkgPSBNYXRoLm1heCh0aGlzLnkgLSBwb2ludC55LCAwLCBwb2ludC55IC0gKHRoaXMueSAtIHRoaXMuaGVpZ2h0KSk7XG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIGAoJHt0aGlzLnh9LCAke3RoaXMueX0pLi4uLi4uLi4uLigke3RoaXMueCArIHRoaXMud2lkdGh9LCAke3RoaXMueX0pXFxuYFxuICAgICAgICAgICAgKyBgKCR7dGhpcy54fSwgJHt0aGlzLnkgLSB0aGlzLmhlaWdodH0pLi4uLi4uLi4uLi4oJHt0aGlzLnggKyB0aGlzLndpZHRofSwgJHt0aGlzLnkgLSB0aGlzLmhlaWdodH0pYDtcbiAgICB9XG59XG5jbGFzcyBRdWFkVHJlZSB7XG4gICAgY29uc3RydWN0b3IoYm91bmRhcnksIGNhcGFjaXR5LCBwYXJlbnQgPSBudWxsKSB7XG4gICAgICAgIHRoaXMuYm91bmRhcnkgPSBib3VuZGFyeTtcbiAgICAgICAgdGhpcy5jYXBhY2l0eSA9IGNhcGFjaXR5O1xuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgdGhpcy5ub2RlcyA9IFtdO1xuICAgICAgICB0aGlzLm5vcnRoZWFzdCA9IG51bGw7XG4gICAgICAgIHRoaXMubm9ydGh3ZXN0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5zb3V0aGVhc3QgPSBudWxsO1xuICAgICAgICB0aGlzLnNvdXRod2VzdCA9IG51bGw7XG4gICAgICAgIHRoaXMuZGl2aWRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLm1heERlcHRoID0gMDtcbiAgICAgICAgUXVhZFRyZWUucXVhZHNDb3VudCsrO1xuICAgIH1cbiAgICBpbnNlcnQobm9kZSwgY3VycmVudERlcHRoID0gMCkge1xuICAgICAgICBpZiAoIXRoaXMuYm91bmRhcnkuY29udGFpbnMobm9kZS5wb3NpdGlvbikpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGFkZGVkOiBmYWxzZSwgYXREZXB0aDogMCB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm5vZGVzLmxlbmd0aCA8IHRoaXMuY2FwYWNpdHkpIHtcbiAgICAgICAgICAgIHRoaXMubm9kZXMucHVzaChub2RlKTtcbiAgICAgICAgICAgIHJldHVybiB7IGFkZGVkOiB0cnVlLCBhdERlcHRoOiBjdXJyZW50RGVwdGggfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuZGl2aWRlZCkge1xuICAgICAgICAgICAgdGhpcy5zdWJkaXZpZGUoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhZGRlZE5FID0gdGhpcy5ub3J0aGVhc3QuaW5zZXJ0KG5vZGUsIGN1cnJlbnREZXB0aCArIDEpO1xuICAgICAgICBjb25zdCBhZGRlZE5XID0gdGhpcy5ub3J0aHdlc3QuaW5zZXJ0KG5vZGUsIGN1cnJlbnREZXB0aCArIDEpO1xuICAgICAgICBjb25zdCBhZGRlZFNFID0gdGhpcy5zb3V0aGVhc3QuaW5zZXJ0KG5vZGUsIGN1cnJlbnREZXB0aCArIDEpO1xuICAgICAgICBjb25zdCBhZGRlZFNXID0gdGhpcy5zb3V0aHdlc3QuaW5zZXJ0KG5vZGUsIGN1cnJlbnREZXB0aCArIDEpO1xuICAgICAgICBjb25zdCBpc0FkZGVkID0gYWRkZWRORS5hZGRlZCB8fCBhZGRlZE5XLmFkZGVkIHx8IGFkZGVkU0UuYWRkZWQgfHwgYWRkZWRTVy5hZGRlZDtcbiAgICAgICAgY29uc3QgYWRkZWREZXB0aCA9IGFkZGVkTkUuYXREZXB0aCB8fCBhZGRlZE5XLmF0RGVwdGggfHwgYWRkZWRTRS5hdERlcHRoIHx8IGFkZGVkU1cuYXREZXB0aDtcbiAgICAgICAgaWYgKGFkZGVkRGVwdGggPiB0aGlzLm1heERlcHRoKSB7XG4gICAgICAgICAgICB0aGlzLm1heERlcHRoID0gYWRkZWREZXB0aDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYWRkZWQ6IGlzQWRkZWQsXG4gICAgICAgICAgICBhdERlcHRoOiBhZGRlZERlcHRoXG4gICAgICAgIH07XG4gICAgfVxuICAgIHN1YmRpdmlkZSgpIHtcbiAgICAgICAgY29uc3QgeCA9IHRoaXMuYm91bmRhcnkueDtcbiAgICAgICAgY29uc3QgeSA9IHRoaXMuYm91bmRhcnkueTtcbiAgICAgICAgY29uc3QgdyA9IHRoaXMuYm91bmRhcnkud2lkdGggLyAyO1xuICAgICAgICBjb25zdCBoID0gdGhpcy5ib3VuZGFyeS5oZWlnaHQgLyAyO1xuICAgICAgICBjb25zdCBuZSA9IG5ldyBSZWN0YW5nbGUoeCArIHcsIHksIHcsIGgpO1xuICAgICAgICB0aGlzLm5vcnRoZWFzdCA9IG5ldyBRdWFkVHJlZShuZSwgdGhpcy5jYXBhY2l0eSwgdGhpcyk7XG4gICAgICAgIGNvbnN0IG53ID0gbmV3IFJlY3RhbmdsZSh4LCB5LCB3LCBoKTtcbiAgICAgICAgdGhpcy5ub3J0aHdlc3QgPSBuZXcgUXVhZFRyZWUobncsIHRoaXMuY2FwYWNpdHksIHRoaXMpO1xuICAgICAgICBjb25zdCBzZSA9IG5ldyBSZWN0YW5nbGUoeCArIHcsIHkgLSBoLCB3LCBoKTtcbiAgICAgICAgdGhpcy5zb3V0aGVhc3QgPSBuZXcgUXVhZFRyZWUoc2UsIHRoaXMuY2FwYWNpdHksIHRoaXMpO1xuICAgICAgICBjb25zdCBzdyA9IG5ldyBSZWN0YW5nbGUoeCwgeSAtIGgsIHcsIGgpO1xuICAgICAgICB0aGlzLnNvdXRod2VzdCA9IG5ldyBRdWFkVHJlZShzdywgdGhpcy5jYXBhY2l0eSwgdGhpcyk7XG4gICAgICAgIHRoaXMuZGl2aWRlZCA9IHRydWU7XG4gICAgfVxuICAgIHF1ZXJ5KHJhbmdlLCBmb3VuZCA9IFtdKSB7XG4gICAgICAgIGlmICghdGhpcy5ib3VuZGFyeS5pbnRlcnNlY3RzKHJhbmdlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZvdW5kO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiB0aGlzLm5vZGVzKSB7XG4gICAgICAgICAgICBpZiAocmFuZ2UuY29udGFpbnMobm9kZS5wb3NpdGlvbikpIHtcbiAgICAgICAgICAgICAgICBmb3VuZC5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRpdmlkZWQpIHtcbiAgICAgICAgICAgIHRoaXMubm9ydGhlYXN0LnF1ZXJ5KHJhbmdlLCBmb3VuZCk7XG4gICAgICAgICAgICB0aGlzLm5vcnRod2VzdC5xdWVyeShyYW5nZSwgZm91bmQpO1xuICAgICAgICAgICAgdGhpcy5zb3V0aGVhc3QucXVlcnkocmFuZ2UsIGZvdW5kKTtcbiAgICAgICAgICAgIHRoaXMuc291dGh3ZXN0LnF1ZXJ5KHJhbmdlLCBmb3VuZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZvdW5kO1xuICAgIH1cbiAgICBmaW5kTmVhcmVzdChwb2ludCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kTmVhcmVzdFJlY3Vyc2l2ZShwb2ludCwgbnVsbCwgTnVtYmVyLk1BWF9WQUxVRSk7XG4gICAgfVxuICAgIGZpbmROZWFyZXN0UmVjdXJzaXZlKHBvaW50LCBiZXN0LCBiZXN0RGlzdGFuY2UpIHtcbiAgICAgICAgaWYgKCF0aGlzLmJvdW5kYXJ5LmNvbnRhaW5zKHBvaW50KSAmJiB0aGlzLmJvdW5kYXJ5LmRpc3RhbmNlVG8ocG9pbnQpID4gYmVzdERpc3RhbmNlKSB7XG4gICAgICAgICAgICByZXR1cm4gYmVzdDtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IG5vZGUgb2YgdGhpcy5ub2Rlcykge1xuICAgICAgICAgICAgY29uc3QgZGlzdGFuY2UgPSBub2RlLnBvc2l0aW9uLmRpc3RhbmNlKHBvaW50KTtcbiAgICAgICAgICAgIGlmIChkaXN0YW5jZSA8IGJlc3REaXN0YW5jZSkge1xuICAgICAgICAgICAgICAgIGJlc3QgPSBub2RlO1xuICAgICAgICAgICAgICAgIGJlc3REaXN0YW5jZSA9IGRpc3RhbmNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRpdmlkZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHF1YWRyYW50cyA9IFt0aGlzLm5vcnRoZWFzdCwgdGhpcy5ub3J0aHdlc3QsIHRoaXMuc291dGhlYXN0LCB0aGlzLnNvdXRod2VzdF07XG4gICAgICAgICAgICBxdWFkcmFudHMuc29ydCgoYSwgYikgPT4gYS5ib3VuZGFyeS5kaXN0YW5jZVRvKHBvaW50KSAtIGIuYm91bmRhcnkuZGlzdGFuY2VUbyhwb2ludCkpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBxdWFkcmFudCBvZiBxdWFkcmFudHMpIHtcbiAgICAgICAgICAgICAgICBiZXN0ID0gcXVhZHJhbnQuZmluZE5lYXJlc3RSZWN1cnNpdmUocG9pbnQsIGJlc3QsIGJlc3REaXN0YW5jZSk7XG4gICAgICAgICAgICAgICAgYmVzdERpc3RhbmNlID0gYmVzdCA/IGJlc3QucG9zaXRpb24uZGlzdGFuY2UocG9pbnQpIDogYmVzdERpc3RhbmNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBiZXN0O1xuICAgIH1cbn1cblF1YWRUcmVlLnF1YWRzQ291bnQgPSAwO1xuZXhwb3J0IGNsYXNzIFdvcmxkUXVhZFRyZWUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnF1YWRUcmVlID0gbmV3IFF1YWRUcmVlKG5ldyBSZWN0YW5nbGUoMCwgV09STERfSEVJR0hULCBXT1JMRF9XSURUSCwgV09STERfSEVJR0hUKSwgNCk7XG4gICAgfVxuICAgIHBvcHVsYXRlKG5vZGVzKSB7XG4gICAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiBub2Rlcykge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5xdWFkVHJlZS5pbnNlcnQobm9kZSk7XG4gICAgICAgICAgICBpZiAocmVzdWx0LmFkZGVkID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGluc2VydCBub2RlIGludG8gdGhlIHF1ZGQgdHJlZS4gJHtKU09OLnN0cmluZ2lmeShub2RlKX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhcIlF1YWQgdHJlZSBtYXggZGVwdGggPSBcIiArIHRoaXMucXVhZFRyZWUubWF4RGVwdGgpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIlF1YWRzIGNvdW50OiBcIiArIFF1YWRUcmVlLnF1YWRzQ291bnQpO1xuICAgIH1cbiAgICBnZXRDbG9zZXN0Tm9kZUZvcldvcmxkUG9zaXRpb24od29ybGRQb3NpdGlvbikge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiAoX2EgPSB0aGlzLnF1YWRUcmVlLmZpbmROZWFyZXN0KHdvcmxkUG9zaXRpb24pKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB1bmRlZmluZWQ7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/quadtree.ts\n");

/***/ }),

/***/ "./src/vector2.ts":
/*!************************!*\
  !*** ./src/vector2.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Vector2: () => (/* binding */ Vector2)\n/* harmony export */ });\nclass Vector2 {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    multiply(v2) {\n        return new Vector2(this.x * v2.x, this.y * v2.y);\n    }\n    multiplyScalar(x, y) {\n        return new Vector2(this.x * x, this.y * y);\n    }\n    add(v2) {\n        return new Vector2(this.x + v2.x, this.y + v2.y);\n    }\n    addScalar(x, y) {\n        return new Vector2(this.x + x, this.y + y);\n    }\n    subtract(v2) {\n        return new Vector2(this.x - v2.x, this.y - v2.y);\n    }\n    distance(v) {\n        return Math.sqrt(Math.pow((this.x - v.x), 2) + Math.pow((this.y - v.y), 2));\n    }\n    length() {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n    }\n    static scalar(s) {\n        return new Vector2(s, s);\n    }\n    *[Symbol.iterator]() {\n        yield this.x;\n        yield this.y;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdmVjdG9yMi50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJnbC1wcm9iZS0yLy4vc3JjL3ZlY3RvcjIudHM/ZjkyYiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgVmVjdG9yMiB7XG4gICAgY29uc3RydWN0b3IoeCwgeSkge1xuICAgICAgICB0aGlzLnggPSB4O1xuICAgICAgICB0aGlzLnkgPSB5O1xuICAgIH1cbiAgICBtdWx0aXBseSh2Mikge1xuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjIodGhpcy54ICogdjIueCwgdGhpcy55ICogdjIueSk7XG4gICAgfVxuICAgIG11bHRpcGx5U2NhbGFyKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKHRoaXMueCAqIHgsIHRoaXMueSAqIHkpO1xuICAgIH1cbiAgICBhZGQodjIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKHRoaXMueCArIHYyLngsIHRoaXMueSArIHYyLnkpO1xuICAgIH1cbiAgICBhZGRTY2FsYXIoeCwgeSkge1xuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjIodGhpcy54ICsgeCwgdGhpcy55ICsgeSk7XG4gICAgfVxuICAgIHN1YnRyYWN0KHYyKSB7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yMih0aGlzLnggLSB2Mi54LCB0aGlzLnkgLSB2Mi55KTtcbiAgICB9XG4gICAgZGlzdGFuY2Uodikge1xuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KCh0aGlzLnggLSB2LngpLCAyKSArIE1hdGgucG93KCh0aGlzLnkgLSB2LnkpLCAyKSk7XG4gICAgfVxuICAgIGxlbmd0aCgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydCh0aGlzLnggKiB0aGlzLnggKyB0aGlzLnkgKiB0aGlzLnkpO1xuICAgIH1cbiAgICBzdGF0aWMgc2NhbGFyKHMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKHMsIHMpO1xuICAgIH1cbiAgICAqW1N5bWJvbC5pdGVyYXRvcl0oKSB7XG4gICAgICAgIHlpZWxkIHRoaXMueDtcbiAgICAgICAgeWllbGQgdGhpcy55O1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/vector2.ts\n");

/***/ }),

/***/ "./src/webgl.ts":
/*!**********************!*\
  !*** ./src/webgl.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createProgram: () => (/* binding */ createProgram),\n/* harmony export */   createShader: () => (/* binding */ createShader),\n/* harmony export */   getCameraMatrix: () => (/* binding */ getCameraMatrix),\n/* harmony export */   getMouseCanvasPosition: () => (/* binding */ getMouseCanvasPosition),\n/* harmony export */   getScreenToWorld: () => (/* binding */ getScreenToWorld),\n/* harmony export */   initBuffer: () => (/* binding */ initBuffer),\n/* harmony export */   initCanvas: () => (/* binding */ initCanvas),\n/* harmony export */   initGl: () => (/* binding */ initGl),\n/* harmony export */   initShader: () => (/* binding */ initShader),\n/* harmony export */   initVao: () => (/* binding */ initVao),\n/* harmony export */   loadSources: () => (/* binding */ loadSources),\n/* harmony export */   resizeCanvasToDisplaySize: () => (/* binding */ resizeCanvasToDisplaySize)\n/* harmony export */ });\n/* harmony import */ var _matrix__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./matrix */ \"./src/matrix.ts\");\n/* harmony import */ var _vector2__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./vector2 */ \"./src/vector2.ts\");\n\n\nfunction initBuffer(glContext, data, type) {\n    const { gl } = glContext;\n    const buffer = gl.createBuffer();\n    const BUFFER_TYPE_MAP = {\n        vbo: gl.ARRAY_BUFFER,\n        ebo: gl.ELEMENT_ARRAY_BUFFER\n    };\n    const glBufferType = BUFFER_TYPE_MAP[type];\n    gl.bindBuffer(glBufferType, buffer);\n    gl.bufferData(glBufferType, data, gl.STATIC_DRAW);\n    return buffer;\n}\nfunction initVao(args) {\n    const { ebo, enableLocations, vbos, glContext } = args;\n    const vao = glContext.gl.createVertexArray();\n    glContext.gl.bindVertexArray(vao);\n    for (let i = 0; i < enableLocations.length; i++) {\n        glContext.gl.enableVertexAttribArray(enableLocations[i]);\n    }\n    for (let i = 0; i < vbos.length; i++) {\n        const { buffer, vertexPtr } = vbos[i];\n        glContext.gl.bindBuffer(glContext.gl.ARRAY_BUFFER, buffer);\n        glContext.gl.vertexAttribPointer(vertexPtr.location, vertexPtr.components, vertexPtr.type, false, 0, 0);\n    }\n    if (ebo) {\n        glContext.gl.bindBuffer(glContext.gl.ELEMENT_ARRAY_BUFFER, ebo);\n    }\n    glContext.gl.bindVertexArray(null);\n    return vao;\n}\nfunction initCanvas(id) {\n    const canvas = document.getElementById(id);\n    canvas.width = canvas.clientWidth;\n    canvas.height = canvas.clientHeight;\n    return canvas;\n}\nfunction initGl(canvas) {\n    const gl = canvas.getContext('webgl2', {\n        premultipliedAlpha: false,\n    });\n    if (!gl) {\n        throw new Error(\"Cannot create webgl context\");\n    }\n    return gl;\n}\nfunction initShader(args) {\n    const { attributes, fragmentShaderId, gl, uniforms, vertexShaderId } = args;\n    const [vertex_source, fragment_source] = loadSources(vertexShaderId, fragmentShaderId);\n    const vertex_shader = createShader(gl, 'vertex', vertex_source);\n    const fragment_shader = createShader(gl, 'fragment', fragment_source);\n    const program = createProgram(gl, vertex_shader, fragment_shader);\n    const _uniforms = {};\n    const _attributes = {};\n    for (let i = 0; i < uniforms.length; i++) {\n        const name = uniforms[i];\n        const location = gl.getUniformLocation(program, name);\n        _uniforms[name] = location;\n        ;\n    }\n    for (let i = 0; i < attributes.length; i++) {\n        const name = attributes[i];\n        const location = gl.getAttribLocation(program, name);\n        _attributes[name] = location;\n        ;\n    }\n    return {\n        program,\n        uniforms: _uniforms,\n        attributes: _attributes\n    };\n}\nfunction loadSources(vertexId, fragmentId) {\n    var _a, _b;\n    const vertexSource = (_a = document.querySelector(vertexId)) === null || _a === void 0 ? void 0 : _a.textContent;\n    const fragmentSource = (_b = document.querySelector(fragmentId)) === null || _b === void 0 ? void 0 : _b.textContent;\n    if (typeof vertexSource !== 'string') {\n        throw new Error(\"Vertex shader not available\");\n    }\n    if (typeof fragmentSource !== 'string') {\n        throw new Error(\"Fragment shader not available\");\n    }\n    return [vertexSource, fragmentSource];\n}\nfunction createShader(gl, type, source) {\n    const shader = gl.createShader(type === 'vertex' ? gl.VERTEX_SHADER : gl.FRAGMENT_SHADER);\n    if (!shader) {\n        throw new Error(\"Cannot create shader\");\n    }\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n        console.error(gl.getShaderInfoLog(shader));\n        gl.deleteShader(shader);\n        throw new Error(\"Cannot compile shader\");\n    }\n    return shader;\n}\nfunction createProgram(gl, vertexShader, fragmentShader) {\n    const program = gl.createProgram();\n    if (!program) {\n        throw new Error(\"Cannot create the program\");\n    }\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    gl.linkProgram(program);\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n        console.error(gl.getProgramInfoLog(program));\n        gl.deleteProgram(program);\n        throw new Error(\"Cannot create program\");\n    }\n    return program;\n}\n// (Bottom, left) => (top, right)\nfunction getMouseCanvasPosition(e, canvas) {\n    const rect = canvas.getBoundingClientRect();\n    return new _vector2__WEBPACK_IMPORTED_MODULE_1__.Vector2(e.clientX - rect.left, (canvas.clientHeight - (e.clientY - rect.top)));\n}\nfunction getScreenToWorld(screenPosition, camera) {\n    const inverse = getCameraMatrix(camera).inverse().transpose();\n    const x = screenPosition.x;\n    const y = screenPosition.y;\n    const result = new _vector2__WEBPACK_IMPORTED_MODULE_1__.Vector2(0, 0);\n    result.x = (inverse.data[0] * x) + (inverse.data[1] * y) + inverse.data[2];\n    result.y = (inverse.data[3] * x) + (inverse.data[4] * y) + inverse.data[5];\n    return result;\n}\n/**\n * Credit to raylib,  rcore.c\n */\nfunction getCameraMatrix(camera) {\n    const O = _matrix__WEBPACK_IMPORTED_MODULE_0__.Matrix.translate(-camera.target.x, -camera.target.y);\n    const R = _matrix__WEBPACK_IMPORTED_MODULE_0__.Matrix.rotate(camera.rotation);\n    const S = _matrix__WEBPACK_IMPORTED_MODULE_0__.Matrix.scale(camera.zoom, camera.zoom);\n    const T = _matrix__WEBPACK_IMPORTED_MODULE_0__.Matrix.translate(camera.offset.x, camera.offset.y);\n    return O.multiply(S).multiply(R).multiply(T);\n}\n/**\n * Credit: https://webglfundamentals.org/webgl/lessons/webgl-resizing-the-canvas.html\n */\nfunction resizeCanvasToDisplaySize(canvas) {\n    // Lookup the size the browser is displaying the canvas in CSS pixels.\n    const displayWidth = canvas.clientWidth;\n    const displayHeight = canvas.clientHeight;\n    // Check if the canvas is not the same size.\n    const needResize = canvas.width !== displayWidth ||\n        canvas.height !== displayHeight;\n    if (needResize) {\n        // Make the canvas the same size\n        canvas.width = displayWidth;\n        canvas.height = displayHeight;\n    }\n    return needResize;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvd2ViZ2wudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBa0M7QUFDRTtBQUM3QjtBQUNQLFlBQVksS0FBSztBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsWUFBWSx3Q0FBd0M7QUFDcEQ7QUFDQTtBQUNBLG9CQUFvQiw0QkFBNEI7QUFDaEQ7QUFDQTtBQUNBLG9CQUFvQixpQkFBaUI7QUFDckMsZ0JBQWdCLG9CQUFvQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsWUFBWSw2REFBNkQ7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHFCQUFxQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHVCQUF1QjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLGVBQWUsNkNBQU87QUFDdEI7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qiw2Q0FBTztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsY0FBYywyQ0FBTTtBQUNwQixjQUFjLDJDQUFNO0FBQ3BCLGNBQWMsMkNBQU07QUFDcEIsY0FBYywyQ0FBTTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYmdsLXByb2JlLTIvLi9zcmMvd2ViZ2wudHM/NTEwNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNYXRyaXggfSBmcm9tIFwiLi9tYXRyaXhcIjtcbmltcG9ydCB7IFZlY3RvcjIgfSBmcm9tIFwiLi92ZWN0b3IyXCI7XG5leHBvcnQgZnVuY3Rpb24gaW5pdEJ1ZmZlcihnbENvbnRleHQsIGRhdGEsIHR5cGUpIHtcbiAgICBjb25zdCB7IGdsIH0gPSBnbENvbnRleHQ7XG4gICAgY29uc3QgYnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG4gICAgY29uc3QgQlVGRkVSX1RZUEVfTUFQID0ge1xuICAgICAgICB2Ym86IGdsLkFSUkFZX0JVRkZFUixcbiAgICAgICAgZWJvOiBnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUlxuICAgIH07XG4gICAgY29uc3QgZ2xCdWZmZXJUeXBlID0gQlVGRkVSX1RZUEVfTUFQW3R5cGVdO1xuICAgIGdsLmJpbmRCdWZmZXIoZ2xCdWZmZXJUeXBlLCBidWZmZXIpO1xuICAgIGdsLmJ1ZmZlckRhdGEoZ2xCdWZmZXJUeXBlLCBkYXRhLCBnbC5TVEFUSUNfRFJBVyk7XG4gICAgcmV0dXJuIGJ1ZmZlcjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpbml0VmFvKGFyZ3MpIHtcbiAgICBjb25zdCB7IGVibywgZW5hYmxlTG9jYXRpb25zLCB2Ym9zLCBnbENvbnRleHQgfSA9IGFyZ3M7XG4gICAgY29uc3QgdmFvID0gZ2xDb250ZXh0LmdsLmNyZWF0ZVZlcnRleEFycmF5KCk7XG4gICAgZ2xDb250ZXh0LmdsLmJpbmRWZXJ0ZXhBcnJheSh2YW8pO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZW5hYmxlTG9jYXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGdsQ29udGV4dC5nbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShlbmFibGVMb2NhdGlvbnNbaV0pO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZib3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgeyBidWZmZXIsIHZlcnRleFB0ciB9ID0gdmJvc1tpXTtcbiAgICAgICAgZ2xDb250ZXh0LmdsLmJpbmRCdWZmZXIoZ2xDb250ZXh0LmdsLkFSUkFZX0JVRkZFUiwgYnVmZmVyKTtcbiAgICAgICAgZ2xDb250ZXh0LmdsLnZlcnRleEF0dHJpYlBvaW50ZXIodmVydGV4UHRyLmxvY2F0aW9uLCB2ZXJ0ZXhQdHIuY29tcG9uZW50cywgdmVydGV4UHRyLnR5cGUsIGZhbHNlLCAwLCAwKTtcbiAgICB9XG4gICAgaWYgKGVibykge1xuICAgICAgICBnbENvbnRleHQuZ2wuYmluZEJ1ZmZlcihnbENvbnRleHQuZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIGVibyk7XG4gICAgfVxuICAgIGdsQ29udGV4dC5nbC5iaW5kVmVydGV4QXJyYXkobnVsbCk7XG4gICAgcmV0dXJuIHZhbztcbn1cbmV4cG9ydCBmdW5jdGlvbiBpbml0Q2FudmFzKGlkKSB7XG4gICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgIGNhbnZhcy53aWR0aCA9IGNhbnZhcy5jbGllbnRXaWR0aDtcbiAgICBjYW52YXMuaGVpZ2h0ID0gY2FudmFzLmNsaWVudEhlaWdodDtcbiAgICByZXR1cm4gY2FudmFzO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGluaXRHbChjYW52YXMpIHtcbiAgICBjb25zdCBnbCA9IGNhbnZhcy5nZXRDb250ZXh0KCd3ZWJnbDInLCB7XG4gICAgICAgIHByZW11bHRpcGxpZWRBbHBoYTogZmFsc2UsXG4gICAgfSk7XG4gICAgaWYgKCFnbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgY3JlYXRlIHdlYmdsIGNvbnRleHRcIik7XG4gICAgfVxuICAgIHJldHVybiBnbDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpbml0U2hhZGVyKGFyZ3MpIHtcbiAgICBjb25zdCB7IGF0dHJpYnV0ZXMsIGZyYWdtZW50U2hhZGVySWQsIGdsLCB1bmlmb3JtcywgdmVydGV4U2hhZGVySWQgfSA9IGFyZ3M7XG4gICAgY29uc3QgW3ZlcnRleF9zb3VyY2UsIGZyYWdtZW50X3NvdXJjZV0gPSBsb2FkU291cmNlcyh2ZXJ0ZXhTaGFkZXJJZCwgZnJhZ21lbnRTaGFkZXJJZCk7XG4gICAgY29uc3QgdmVydGV4X3NoYWRlciA9IGNyZWF0ZVNoYWRlcihnbCwgJ3ZlcnRleCcsIHZlcnRleF9zb3VyY2UpO1xuICAgIGNvbnN0IGZyYWdtZW50X3NoYWRlciA9IGNyZWF0ZVNoYWRlcihnbCwgJ2ZyYWdtZW50JywgZnJhZ21lbnRfc291cmNlKTtcbiAgICBjb25zdCBwcm9ncmFtID0gY3JlYXRlUHJvZ3JhbShnbCwgdmVydGV4X3NoYWRlciwgZnJhZ21lbnRfc2hhZGVyKTtcbiAgICBjb25zdCBfdW5pZm9ybXMgPSB7fTtcbiAgICBjb25zdCBfYXR0cmlidXRlcyA9IHt9O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdW5pZm9ybXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgbmFtZSA9IHVuaWZvcm1zW2ldO1xuICAgICAgICBjb25zdCBsb2NhdGlvbiA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCBuYW1lKTtcbiAgICAgICAgX3VuaWZvcm1zW25hbWVdID0gbG9jYXRpb247XG4gICAgICAgIDtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhdHRyaWJ1dGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBhdHRyaWJ1dGVzW2ldO1xuICAgICAgICBjb25zdCBsb2NhdGlvbiA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sIG5hbWUpO1xuICAgICAgICBfYXR0cmlidXRlc1tuYW1lXSA9IGxvY2F0aW9uO1xuICAgICAgICA7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHByb2dyYW0sXG4gICAgICAgIHVuaWZvcm1zOiBfdW5pZm9ybXMsXG4gICAgICAgIGF0dHJpYnV0ZXM6IF9hdHRyaWJ1dGVzXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBsb2FkU291cmNlcyh2ZXJ0ZXhJZCwgZnJhZ21lbnRJZCkge1xuICAgIHZhciBfYSwgX2I7XG4gICAgY29uc3QgdmVydGV4U291cmNlID0gKF9hID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih2ZXJ0ZXhJZCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50ZXh0Q29udGVudDtcbiAgICBjb25zdCBmcmFnbWVudFNvdXJjZSA9IChfYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZnJhZ21lbnRJZCkpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi50ZXh0Q29udGVudDtcbiAgICBpZiAodHlwZW9mIHZlcnRleFNvdXJjZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVmVydGV4IHNoYWRlciBub3QgYXZhaWxhYmxlXCIpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGZyYWdtZW50U291cmNlICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGcmFnbWVudCBzaGFkZXIgbm90IGF2YWlsYWJsZVwiKTtcbiAgICB9XG4gICAgcmV0dXJuIFt2ZXJ0ZXhTb3VyY2UsIGZyYWdtZW50U291cmNlXTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTaGFkZXIoZ2wsIHR5cGUsIHNvdXJjZSkge1xuICAgIGNvbnN0IHNoYWRlciA9IGdsLmNyZWF0ZVNoYWRlcih0eXBlID09PSAndmVydGV4JyA/IGdsLlZFUlRFWF9TSEFERVIgOiBnbC5GUkFHTUVOVF9TSEFERVIpO1xuICAgIGlmICghc2hhZGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBjcmVhdGUgc2hhZGVyXCIpO1xuICAgIH1cbiAgICBnbC5zaGFkZXJTb3VyY2Uoc2hhZGVyLCBzb3VyY2UpO1xuICAgIGdsLmNvbXBpbGVTaGFkZXIoc2hhZGVyKTtcbiAgICBpZiAoIWdsLmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsIGdsLkNPTVBJTEVfU1RBVFVTKSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGdsLmdldFNoYWRlckluZm9Mb2coc2hhZGVyKSk7XG4gICAgICAgIGdsLmRlbGV0ZVNoYWRlcihzaGFkZXIpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgY29tcGlsZSBzaGFkZXJcIik7XG4gICAgfVxuICAgIHJldHVybiBzaGFkZXI7XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUHJvZ3JhbShnbCwgdmVydGV4U2hhZGVyLCBmcmFnbWVudFNoYWRlcikge1xuICAgIGNvbnN0IHByb2dyYW0gPSBnbC5jcmVhdGVQcm9ncmFtKCk7XG4gICAgaWYgKCFwcm9ncmFtKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBjcmVhdGUgdGhlIHByb2dyYW1cIik7XG4gICAgfVxuICAgIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCB2ZXJ0ZXhTaGFkZXIpO1xuICAgIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCBmcmFnbWVudFNoYWRlcik7XG4gICAgZ2wubGlua1Byb2dyYW0ocHJvZ3JhbSk7XG4gICAgaWYgKCFnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sIGdsLkxJTktfU1RBVFVTKSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGdsLmdldFByb2dyYW1JbmZvTG9nKHByb2dyYW0pKTtcbiAgICAgICAgZ2wuZGVsZXRlUHJvZ3JhbShwcm9ncmFtKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGNyZWF0ZSBwcm9ncmFtXCIpO1xuICAgIH1cbiAgICByZXR1cm4gcHJvZ3JhbTtcbn1cbi8vIChCb3R0b20sIGxlZnQpID0+ICh0b3AsIHJpZ2h0KVxuZXhwb3J0IGZ1bmN0aW9uIGdldE1vdXNlQ2FudmFzUG9zaXRpb24oZSwgY2FudmFzKSB7XG4gICAgY29uc3QgcmVjdCA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICByZXR1cm4gbmV3IFZlY3RvcjIoZS5jbGllbnRYIC0gcmVjdC5sZWZ0LCAoY2FudmFzLmNsaWVudEhlaWdodCAtIChlLmNsaWVudFkgLSByZWN0LnRvcCkpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRTY3JlZW5Ub1dvcmxkKHNjcmVlblBvc2l0aW9uLCBjYW1lcmEpIHtcbiAgICBjb25zdCBpbnZlcnNlID0gZ2V0Q2FtZXJhTWF0cml4KGNhbWVyYSkuaW52ZXJzZSgpLnRyYW5zcG9zZSgpO1xuICAgIGNvbnN0IHggPSBzY3JlZW5Qb3NpdGlvbi54O1xuICAgIGNvbnN0IHkgPSBzY3JlZW5Qb3NpdGlvbi55O1xuICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBWZWN0b3IyKDAsIDApO1xuICAgIHJlc3VsdC54ID0gKGludmVyc2UuZGF0YVswXSAqIHgpICsgKGludmVyc2UuZGF0YVsxXSAqIHkpICsgaW52ZXJzZS5kYXRhWzJdO1xuICAgIHJlc3VsdC55ID0gKGludmVyc2UuZGF0YVszXSAqIHgpICsgKGludmVyc2UuZGF0YVs0XSAqIHkpICsgaW52ZXJzZS5kYXRhWzVdO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG4vKipcbiAqIENyZWRpdCB0byByYXlsaWIsICByY29yZS5jXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDYW1lcmFNYXRyaXgoY2FtZXJhKSB7XG4gICAgY29uc3QgTyA9IE1hdHJpeC50cmFuc2xhdGUoLWNhbWVyYS50YXJnZXQueCwgLWNhbWVyYS50YXJnZXQueSk7XG4gICAgY29uc3QgUiA9IE1hdHJpeC5yb3RhdGUoY2FtZXJhLnJvdGF0aW9uKTtcbiAgICBjb25zdCBTID0gTWF0cml4LnNjYWxlKGNhbWVyYS56b29tLCBjYW1lcmEuem9vbSk7XG4gICAgY29uc3QgVCA9IE1hdHJpeC50cmFuc2xhdGUoY2FtZXJhLm9mZnNldC54LCBjYW1lcmEub2Zmc2V0LnkpO1xuICAgIHJldHVybiBPLm11bHRpcGx5KFMpLm11bHRpcGx5KFIpLm11bHRpcGx5KFQpO1xufVxuLyoqXG4gKiBDcmVkaXQ6IGh0dHBzOi8vd2ViZ2xmdW5kYW1lbnRhbHMub3JnL3dlYmdsL2xlc3NvbnMvd2ViZ2wtcmVzaXppbmctdGhlLWNhbnZhcy5odG1sXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXNpemVDYW52YXNUb0Rpc3BsYXlTaXplKGNhbnZhcykge1xuICAgIC8vIExvb2t1cCB0aGUgc2l6ZSB0aGUgYnJvd3NlciBpcyBkaXNwbGF5aW5nIHRoZSBjYW52YXMgaW4gQ1NTIHBpeGVscy5cbiAgICBjb25zdCBkaXNwbGF5V2lkdGggPSBjYW52YXMuY2xpZW50V2lkdGg7XG4gICAgY29uc3QgZGlzcGxheUhlaWdodCA9IGNhbnZhcy5jbGllbnRIZWlnaHQ7XG4gICAgLy8gQ2hlY2sgaWYgdGhlIGNhbnZhcyBpcyBub3QgdGhlIHNhbWUgc2l6ZS5cbiAgICBjb25zdCBuZWVkUmVzaXplID0gY2FudmFzLndpZHRoICE9PSBkaXNwbGF5V2lkdGggfHxcbiAgICAgICAgY2FudmFzLmhlaWdodCAhPT0gZGlzcGxheUhlaWdodDtcbiAgICBpZiAobmVlZFJlc2l6ZSkge1xuICAgICAgICAvLyBNYWtlIHRoZSBjYW52YXMgdGhlIHNhbWUgc2l6ZVxuICAgICAgICBjYW52YXMud2lkdGggPSBkaXNwbGF5V2lkdGg7XG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBkaXNwbGF5SGVpZ2h0O1xuICAgIH1cbiAgICByZXR1cm4gbmVlZFJlc2l6ZTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/webgl.ts\n");

/***/ }),

/***/ "./src/worker-manager.ts":
/*!*******************************!*\
  !*** ./src/worker-manager.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   worker: () => (/* binding */ worker)\n/* harmony export */ });\nfunction worker(cb) {\n    const proxy = {};\n    let id = 0;\n    let idPromises = {};\n    return new Promise((resolve, reject) => {\n        const worker = new Worker('/graph-worker.js', { type: 'module' });\n        worker.postMessage({\n            eventType: \"INITIALISE\"\n        });\n        worker.addEventListener('message', function (event) {\n            const { eventType, eventData, eventId } = event.data;\n            if (eventType === \"INITIALISED\") {\n                const methods = event.data.eventData;\n                methods.forEach((method) => {\n                    // @ts-ignore\n                    proxy[method] = function () {\n                        return new Promise((resolve, reject) => {\n                            worker.postMessage({\n                                eventType: \"CALL\",\n                                eventData: {\n                                    method: method,\n                                    arguments: Array.from(arguments) // arguments is not an array\n                                },\n                                eventId: id\n                            });\n                            idPromises[id] = { resolve, reject };\n                            id++;\n                        });\n                    };\n                });\n                // @ts-ignore\n                resolve(proxy);\n                return;\n            }\n            else if (eventType === \"RESULT\") {\n                if (eventId !== undefined && idPromises[eventId]) {\n                    idPromises[eventId].resolve(eventData);\n                    delete idPromises[eventId];\n                }\n            }\n            else if (eventType === \"ERROR\") {\n                if (eventId !== undefined && idPromises[eventId]) {\n                    idPromises[eventId].reject(event.data.eventData);\n                    delete idPromises[eventId];\n                }\n            }\n            else {\n                cb(event.data);\n            }\n            // } else if (eventType === 'GRAPH_VISITED_UPDATE') {\n            //     state.visited.push(eventData.parentNode,eventData.node);\n            // } else if (eventType === 'GRAPH_VISITED_UPDATE_BULK') {\n            //     for (let i = 0; i < eventData.length; i++) {\n            //         state.visited.push(eventData[i]);\n            //     }\n            // }\n        });\n        worker.addEventListener(\"error\", function (error) {\n            reject(error);\n        });\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvd29ya2VyLW1hbmFnZXIudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0QsZ0JBQWdCO0FBQ3hFO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxvQkFBb0IsZ0NBQWdDO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQSw2QkFBNkI7QUFDN0IsK0NBQStDO0FBQy9DO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsaUJBQWlCO0FBQ2pCLG1DQUFtQyxzQkFBc0I7QUFDekQ7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViZ2wtcHJvYmUtMi8uL3NyYy93b3JrZXItbWFuYWdlci50cz84NTJhIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiB3b3JrZXIoY2IpIHtcbiAgICBjb25zdCBwcm94eSA9IHt9O1xuICAgIGxldCBpZCA9IDA7XG4gICAgbGV0IGlkUHJvbWlzZXMgPSB7fTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCB3b3JrZXIgPSBuZXcgV29ya2VyKCcvZ3JhcGgtd29ya2VyLmpzJywgeyB0eXBlOiAnbW9kdWxlJyB9KTtcbiAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgIGV2ZW50VHlwZTogXCJJTklUSUFMSVNFXCJcbiAgICAgICAgfSk7XG4gICAgICAgIHdvcmtlci5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBjb25zdCB7IGV2ZW50VHlwZSwgZXZlbnREYXRhLCBldmVudElkIH0gPSBldmVudC5kYXRhO1xuICAgICAgICAgICAgaWYgKGV2ZW50VHlwZSA9PT0gXCJJTklUSUFMSVNFRFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWV0aG9kcyA9IGV2ZW50LmRhdGEuZXZlbnREYXRhO1xuICAgICAgICAgICAgICAgIG1ldGhvZHMuZm9yRWFjaCgobWV0aG9kKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgcHJveHlbbWV0aG9kXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRUeXBlOiBcIkNBTExcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogQXJyYXkuZnJvbShhcmd1bWVudHMpIC8vIGFyZ3VtZW50cyBpcyBub3QgYW4gYXJyYXlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRJZDogaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZFByb21pc2VzW2lkXSA9IHsgcmVzb2x2ZSwgcmVqZWN0IH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICByZXNvbHZlKHByb3h5KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChldmVudFR5cGUgPT09IFwiUkVTVUxUXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnRJZCAhPT0gdW5kZWZpbmVkICYmIGlkUHJvbWlzZXNbZXZlbnRJZF0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWRQcm9taXNlc1tldmVudElkXS5yZXNvbHZlKGV2ZW50RGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBpZFByb21pc2VzW2V2ZW50SWRdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50VHlwZSA9PT0gXCJFUlJPUlwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50SWQgIT09IHVuZGVmaW5lZCAmJiBpZFByb21pc2VzW2V2ZW50SWRdKSB7XG4gICAgICAgICAgICAgICAgICAgIGlkUHJvbWlzZXNbZXZlbnRJZF0ucmVqZWN0KGV2ZW50LmRhdGEuZXZlbnREYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGlkUHJvbWlzZXNbZXZlbnRJZF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY2IoZXZlbnQuZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB9IGVsc2UgaWYgKGV2ZW50VHlwZSA9PT0gJ0dSQVBIX1ZJU0lURURfVVBEQVRFJykge1xuICAgICAgICAgICAgLy8gICAgIHN0YXRlLnZpc2l0ZWQucHVzaChldmVudERhdGEucGFyZW50Tm9kZSxldmVudERhdGEubm9kZSk7XG4gICAgICAgICAgICAvLyB9IGVsc2UgaWYgKGV2ZW50VHlwZSA9PT0gJ0dSQVBIX1ZJU0lURURfVVBEQVRFX0JVTEsnKSB7XG4gICAgICAgICAgICAvLyAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBldmVudERhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgc3RhdGUudmlzaXRlZC5wdXNoKGV2ZW50RGF0YVtpXSk7XG4gICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgLy8gfVxuICAgICAgICB9KTtcbiAgICAgICAgd29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/worker-manager.ts\n");

/***/ }),

/***/ "./src/external/osm-read-pbf.js":
/*!**************************************!*\
  !*** ./src/external/osm-read-pbf.js ***!
  \**************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("(function(f){if(true){module.exports=f()}else { var g; }})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=undefined;if(!f&&c)return require(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=undefined,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\nfunction readBlobHeaderSize(e,t,n,r){return r(null,new DataView(e).getInt32(t,!1))}function readPBFElement(e,t,n,r,o){var i=new Uint8Array(n);i.set(new Uint8Array(e,t,n)),setImmediate(function(){buf.readPBFElementFromBuffer(i,r,o)})}function getFileSize(e,t){return t(null,e.byteLength)}function get(e,t){var n=new XMLHttpRequest;n.open(\"GET\",e,!0),n.responseType=\"arraybuffer\",n.onerror=function(e){t(new Error(this.status+\": \"+this.statusText))},n.onload=function(e){t(null,this.response)},n.send()}function open(e,t){e.filePath?get(e.filePath,t):e.buffer?t(null,e.buffer):t(new Error('Use either the \"filePath\" option to pass an URL or the \"buffer\" option to pass an ArrayBuffer.'))}function close(e,t){t&&t(null)}var buf=require(\"../buffer.js\");require(\"setimmediate\"),module.exports={readBlobHeaderSize:readBlobHeaderSize,readPBFElement:readPBFElement,getFileSize:getFileSize,open:open,close:close};\n},{\"../buffer.js\":4,\"setimmediate\":27}],2:[function(require,module,exports){\nfunction readBlobHeaderSize(e,r,n,i){read(e,r,n,function(e,r){if(e)return i(e);var n=new DataView(r).getInt32(0,!1);return i(null,n)})}function readPBFElement(e,r,n,i,l){read(e,r,n,function(e,r){if(e)return l(e);buf.readPBFElementFromBuffer(r,i,l)})}function getFileSize(e,r){return r(null,e.size)}function read(e,r,n,i){var l,t;l=new FileReader,l.onerror=function(e){return i(new Error(\"Error reading file (\"+l.error.code+\")\"))},l.onload=function(e){return i(null,l.result)},t=e.webkitSlice?e.webkitSlice(r,r+n):e.slice(r,r+n),l.readAsArrayBuffer(t)}function open(e,r){return r(null,e.file)}function close(e,r){if(r)return r(null)}var buf=require(\"../buffer.js\");module.exports={readBlobHeaderSize:readBlobHeaderSize,readPBFElement:readPBFElement,getFileSize:getFileSize,open:open,close:close};\n},{\"../buffer.js\":4}],3:[function(require,module,exports){\nfunction inflateBlob(e,l){return l(null,new Zlib.Inflate(new Uint8Array(e.zlibData),{bufferSize:e.rawSize}).decompress())}var Zlib=require(\"../../node_modules/zlibjs/bin/inflate.min.js\").Zlib;module.exports={inflateBlob:inflateBlob};\n},{\"../../node_modules/zlibjs/bin/inflate.min.js\":28}],4:[function(require,module,exports){\nfunction readPBFElementFromBuffer(e,r,f){return f(null,r(e))}module.exports={readPBFElementFromBuffer:readPBFElementFromBuffer};\n},{}],5:[function(require,module,exports){\nfunction bytesReadFail(e,r,n){return e(new Error(\"Expected \"+r+\" bytes but got \"+n))}function readBlobHeaderSize(e,r,n,t){var f;f=new Buffer(n),fs.read(e,f,0,n,r,function(e,r,f){return r!==n?bytesReadFail(t,n,r):t(null,f.readInt32BE(0))})}function readPBFElement(e,r,n,t,f){var o;if(n>33554432)return f(new Error(\"PBF element too big: \"+n+\" bytes\"));o=new Buffer(n),fs.read(e,o,0,n,r,function(e,r,o){return r!==n?bytesReadFail(f,n,r):buf.readPBFElementFromBuffer(o,t,f)})}function getFileSize(e,r){fs.fstat(e,function(e,n){return r(e,n.size)})}function open(e,r){fs.open(e.filePath,\"r\",r)}function close(e,r){return fs.close(e,r||function(){})}var fs=require(\"fs\"),buf=require(\"../buffer.js\");module.exports={readBlobHeaderSize:readBlobHeaderSize,readPBFElement:readPBFElement,getFileSize:getFileSize,open:open,close:close};\n},{\"../buffer.js\":4,\"fs\":undefined}],6:[function(require,module,exports){\nfunction inflateBlob(l,i){zlib.inflate(l.zlibData,i)}var zlib=require(\"zlib\");module.exports={inflateBlob:inflateBlob};\n},{\"zlib\":undefined}],7:[function(require,module,exports){\nfunction parse(e){function r(){n=!0}function t(){n=!1,i&&i()}var n,i,o;return o=!1,n=!1,i=null,createPathParser({filePath:e.filePath,buffer:e.buffer,file:e.file,callback:function(r,t){function a(r){return t&&t.close(),e.error(r)}function s(){var r;if(!o&&!n){if(u>=t.fileBlocks.length)return o=!0,t.close(),void e.endDocument();r=t.fileBlocks[u],t.readBlock(r,function(t,n){if(t)return a(t);visitBlock(r,n,e),u+=1,s()})}}var u;if(r)return a(r);u=0,i=s,s()}}),{pause:r,resume:t}}function createPathParser(e){reader=getReader(e),reader.open(e,function(r,t){createFileParser(t,function(r,n){return r?e.callback(r):(n.close=function(e){return reader.close(t,e)},e.callback(null,n))})})}function getReader(e){return arrayBufferReader?e.file?fileReader:arrayBufferReader:reader}function visitBlock(e,r,t){BLOCK_VISITORS_BY_TYPE[e.blobHeader.type](r,t)}function visitOSMHeaderBlock(e,r){}function visitOSMDataBlock(e,r){var t;for(t=0;t<e.primitivegroup.length;++t)visitPrimitiveGroup(e.primitivegroup[t],r)}function visitPrimitiveGroup(e,r){var t;if(r.node)for(t=0;t<e.nodesView.length;++t)r.node(e.nodesView.get(t));if(r.way)for(t=0;t<e.waysView.length;++t)r.way(e.waysView.get(t));if(r.relation)for(t=0;t<e.relationsView.length;++t)r.relation(e.relationsView.get(t))}function readBlobHeaderContent(e,r,t,n){return reader.readPBFElement(e,r,t,proto.OSMPBF.BlobHeader.decode,n)}function readFileBlock(e,r,t){reader.readBlobHeaderSize(e,r,BLOB_HEADER_SIZE_SIZE,function(n,i){return n?t(n):readBlobHeaderContent(e,r+BLOB_HEADER_SIZE_SIZE,i,function(e,n){return e?t(e):(n.position=r+BLOB_HEADER_SIZE_SIZE+i,t(e,{position:r,size:BLOB_HEADER_SIZE_SIZE+i+n.datasize,blobHeader:n}))})})}function readFileBlocks(e,r){reader.getFileSize(e,function(t,n){function i(){readFileBlock(e,o,function(e,t){return e?r(e):(a.push(t),(o=t.position+t.size)<n?void i():r(null,a))})}var o,a;o=0,a=[],i()})}function getStringTableEntry(e){var r,t;return e in this.cache?t=this.cache[e]:(r=this.s[e],t=protobuf.util.utf8.read(r,0,r.length),this.cache[e]=t),t}function extendStringTable(e){e.cache={},e.getEntry=getStringTableEntry}function createNodesView(e,r){function t(t){var n,a;return a=o[t],n={id:\"\"+a.id,lat:(toNumber(e.latOffset)+e.granularity*a.lat)/1e9,lon:(toNumber(e.lonOffset)+e.granularity*a.lon)/1e9,tags:i[t]},r.dense.denseinfo&&(n.version=r.dense.denseinfo.version[t],n.timestamp=a.timestamp,n.changeset=a.changeset,n.uid=\"\"+a.uid,n.user=e.stringtable.getEntry(a.userIndex)),n}var n,i,o;if(0!==r.nodes.length)throw new Error(\"primitivegroup.nodes.length !== 0 not supported yet\");return n=0,r.dense&&(n=r.dense.id.length),i=function(){var t,n,i,o,a,s,u,l;if(!r.dense)return null;for(a=r.dense.keysVals,i={},t=[],n=0;n<a.length;)o=a[n++],0!==o?(s=a[n++],u=e.stringtable.getEntry(o),l=e.stringtable.getEntry(s),i[u]=l):(t.push(i),i={});return t}(),o=function(){var t,i,o,a,s,u,l,d,f,c;if(!r.dense)return null;for(i=0,f=0,c=0,r.dense.denseinfo&&(o=0,a=0,s=0,u=0),l=[],t=0;t<n;++t)i+=toNumber(r.dense.id[t]),f+=toNumber(r.dense.lat[t]),c+=toNumber(r.dense.lon[t]),d={id:i,lat:f,lon:c},r.dense.denseinfo&&(o+=toNumber(r.dense.denseinfo.timestamp[t]),a+=toNumber(r.dense.denseinfo.changeset[t]),s+=r.dense.denseinfo.uid[t],u+=r.dense.denseinfo.userSid[t],d.timestamp=o*e.dateGranularity,d.changeset=a,d.uid=s,d.userIndex=u),l.push(d);return l}(),{length:n,get:t}}function createTagsObject(e,r){var t,n,i,o,a,s,u;for(t={},n=0,i=r.keys.length;n<i;++n)o=r.keys[n],a=r.vals[n],s=e.stringtable.getEntry(o),u=e.stringtable.getEntry(a),t[s]=u;return t}function addInfo(e,r,t){t&&(t.version&&(r.version=t.version),t.timestamp&&(r.timestamp=toNumber(t.timestamp)*e.dateGranularity),t.changeset&&(r.changeset=toNumber(t.changeset)),t.uid&&(r.uid=\"\"+t.uid),t.userSid&&(r.user=e.stringtable.getEntry(t.userSid)))}function createWaysView(e,r){function t(t){var n,i;return n=r.ways[t],i={id:n.id.toString(),tags:createTagsObject(e,n),nodeRefs:function(){var e,r,t;for(e=[],r=0,t=0;t<n.refs.length;++t)r+=toNumber(n.refs[t]),e.push(\"\"+r);return e}()},addInfo(e,i,n.info),i}var n;return n=r.ways.length,{length:n,get:t}}function createRelationsView(e,r){function t(t){var n,i;return n=r.relations[t],i={id:n.id.toString(),tags:createTagsObject(e,n),members:function(){var r,t,i,o,a,s;for(a=proto.OSMPBF.Relation.MemberType,r=[],i=0,o=0;o<n.memids.length;++o)t={},i+=toNumber(n.memids[o]),t.ref=\"\"+i,t.role=e.stringtable.getEntry(n.rolesSid[o]),s=n.types[o],a.NODE===s?t.type=\"node\":a.WAY===s?t.type=\"way\":a.RELATION===s&&(t.type=\"relation\"),r.push(t);return r}()},addInfo(e,i,n.info),i}var n;return n=r.relations.length,{length:n,get:t}}function toNumber(e){return\"number\"==typeof e?e:e.toNumber()}function extendPrimitiveGroup(e,r){r.nodesView=createNodesView(e,r),r.waysView=createWaysView(e,r),r.relationsView=createRelationsView(e,r)}function decodePrimitiveBlock(e){var r,t;for(r=proto.OSMPBF.PrimitiveBlock.decode(e),extendStringTable(r.stringtable),t=0;t<r.primitivegroup.length;++t)extendPrimitiveGroup(r,r.primitivegroup[t]);return r}function createFileParser(e,r){readFileBlocks(e,function(t,n){function i(e){var r,t,i;for(r=[],t=0;t<n.length;++t)i=n[t],i.blobHeader.type===e&&r.push(i);return r}function o(r,t){return reader.readPBFElement(e,r.blobHeader.position,r.blobHeader.datasize,proto.OSMPBF.Blob.decode,t)}function a(e,r){return o(e,function(t,n){return t?r(t):0===n.rawSize?r(\"Uncompressed pbfs are currently not supported.\"):void zlib.inflateBlob(n,function(t,n){return t?r(t):buf.readPBFElementFromBuffer(n,OSM_BLOB_DECODER_BY_TYPE[e.blobHeader.type],r)})})}return t?r(t):r(null,{fileBlocks:n,findFileBlocksByBlobType:i,readBlock:a})})}var protobuf=require(\"protobufjs/minimal\"),proto=require(\"./proto\"),buf=require(\"./buffer.js\"),zlib,reader,arrayBufferReader,fileReader;\"undefined\"!=typeof self?(zlib=require(\"./browser/zlib.js\"),arrayBufferReader=require(\"./browser/arrayBufferReader.js\"),fileReader=require(\"./browser/fileReader.js\")):(zlib=require(\"./nodejs/zlib.js\"),reader=require(\"./nodejs/fsReader.js\"));var BLOCK_VISITORS_BY_TYPE={OSMHeader:visitOSMHeaderBlock,OSMData:visitOSMDataBlock},BLOB_HEADER_SIZE_SIZE=4,OSM_BLOB_DECODER_BY_TYPE={OSMHeader:proto.OSMPBF.HeaderBlock.decode,OSMData:decodePrimitiveBlock};module.exports={parse:parse,createParser:createPathParser};\n},{\"./browser/arrayBufferReader.js\":1,\"./browser/fileReader.js\":2,\"./browser/zlib.js\":3,\"./buffer.js\":4,\"./nodejs/fsReader.js\":5,\"./nodejs/zlib.js\":6,\"./proto\":8,\"protobufjs/minimal\":16}],8:[function(require,module,exports){\n\"use strict\";var $protobuf=require(\"protobufjs/minimal\"),$Reader=$protobuf.Reader,$Writer=$protobuf.Writer,$util=$protobuf.util,$root=$protobuf.roots.default||($protobuf.roots.default={});$root.OSMPBF=function(){var e={};return e.Blob=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.raw=$util.newBuffer([]),e.prototype.rawSize=0,e.prototype.zlibData=$util.newBuffer([]),e.prototype.lzmaData=$util.newBuffer([]),e.prototype.OBSOLETEBzip2Data=$util.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.raw&&e.hasOwnProperty(\"raw\")&&t.uint32(10).bytes(e.raw),null!=e.rawSize&&e.hasOwnProperty(\"rawSize\")&&t.uint32(16).int32(e.rawSize),null!=e.zlibData&&e.hasOwnProperty(\"zlibData\")&&t.uint32(26).bytes(e.zlibData),null!=e.lzmaData&&e.hasOwnProperty(\"lzmaData\")&&t.uint32(34).bytes(e.lzmaData),null!=e.OBSOLETEBzip2Data&&e.hasOwnProperty(\"OBSOLETEBzip2Data\")&&t.uint32(42).bytes(e.OBSOLETEBzip2Data),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.OSMPBF.Blob;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.raw=e.bytes();break;case 2:i.rawSize=e.int32();break;case 3:i.zlibData=e.bytes();break;case 4:i.lzmaData=e.bytes();break;case 5:i.OBSOLETEBzip2Data=e.bytes();break;default:e.skipType(7&n)}}return i},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return\"object\"!=typeof e||null===e?\"object expected\":null!=e.raw&&e.hasOwnProperty(\"raw\")&&!(e.raw&&\"number\"==typeof e.raw.length||$util.isString(e.raw))?\"raw: buffer expected\":null!=e.rawSize&&e.hasOwnProperty(\"rawSize\")&&!$util.isInteger(e.rawSize)?\"rawSize: integer expected\":null!=e.zlibData&&e.hasOwnProperty(\"zlibData\")&&!(e.zlibData&&\"number\"==typeof e.zlibData.length||$util.isString(e.zlibData))?\"zlibData: buffer expected\":null!=e.lzmaData&&e.hasOwnProperty(\"lzmaData\")&&!(e.lzmaData&&\"number\"==typeof e.lzmaData.length||$util.isString(e.lzmaData))?\"lzmaData: buffer expected\":null!=e.OBSOLETEBzip2Data&&e.hasOwnProperty(\"OBSOLETEBzip2Data\")&&!(e.OBSOLETEBzip2Data&&\"number\"==typeof e.OBSOLETEBzip2Data.length||$util.isString(e.OBSOLETEBzip2Data))?\"OBSOLETEBzip2Data: buffer expected\":null},e.fromObject=function(e){if(e instanceof $root.OSMPBF.Blob)return e;var t=new $root.OSMPBF.Blob;return null!=e.raw&&(\"string\"==typeof e.raw?$util.base64.decode(e.raw,t.raw=$util.newBuffer($util.base64.length(e.raw)),0):e.raw.length&&(t.raw=e.raw)),null!=e.rawSize&&(t.rawSize=0|e.rawSize),null!=e.zlibData&&(\"string\"==typeof e.zlibData?$util.base64.decode(e.zlibData,t.zlibData=$util.newBuffer($util.base64.length(e.zlibData)),0):e.zlibData.length&&(t.zlibData=e.zlibData)),null!=e.lzmaData&&(\"string\"==typeof e.lzmaData?$util.base64.decode(e.lzmaData,t.lzmaData=$util.newBuffer($util.base64.length(e.lzmaData)),0):e.lzmaData.length&&(t.lzmaData=e.lzmaData)),null!=e.OBSOLETEBzip2Data&&(\"string\"==typeof e.OBSOLETEBzip2Data?$util.base64.decode(e.OBSOLETEBzip2Data,t.OBSOLETEBzip2Data=$util.newBuffer($util.base64.length(e.OBSOLETEBzip2Data)),0):e.OBSOLETEBzip2Data.length&&(t.OBSOLETEBzip2Data=e.OBSOLETEBzip2Data)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.raw=\"\":(r.raw=[],t.bytes!==Array&&(r.raw=$util.newBuffer(r.raw))),r.rawSize=0,t.bytes===String?r.zlibData=\"\":(r.zlibData=[],t.bytes!==Array&&(r.zlibData=$util.newBuffer(r.zlibData))),t.bytes===String?r.lzmaData=\"\":(r.lzmaData=[],t.bytes!==Array&&(r.lzmaData=$util.newBuffer(r.lzmaData))),t.bytes===String?r.OBSOLETEBzip2Data=\"\":(r.OBSOLETEBzip2Data=[],t.bytes!==Array&&(r.OBSOLETEBzip2Data=$util.newBuffer(r.OBSOLETEBzip2Data)))),null!=e.raw&&e.hasOwnProperty(\"raw\")&&(r.raw=t.bytes===String?$util.base64.encode(e.raw,0,e.raw.length):t.bytes===Array?Array.prototype.slice.call(e.raw):e.raw),null!=e.rawSize&&e.hasOwnProperty(\"rawSize\")&&(r.rawSize=e.rawSize),null!=e.zlibData&&e.hasOwnProperty(\"zlibData\")&&(r.zlibData=t.bytes===String?$util.base64.encode(e.zlibData,0,e.zlibData.length):t.bytes===Array?Array.prototype.slice.call(e.zlibData):e.zlibData),null!=e.lzmaData&&e.hasOwnProperty(\"lzmaData\")&&(r.lzmaData=t.bytes===String?$util.base64.encode(e.lzmaData,0,e.lzmaData.length):t.bytes===Array?Array.prototype.slice.call(e.lzmaData):e.lzmaData),null!=e.OBSOLETEBzip2Data&&e.hasOwnProperty(\"OBSOLETEBzip2Data\")&&(r.OBSOLETEBzip2Data=t.bytes===String?$util.base64.encode(e.OBSOLETEBzip2Data,0,e.OBSOLETEBzip2Data.length):t.bytes===Array?Array.prototype.slice.call(e.OBSOLETEBzip2Data):e.OBSOLETEBzip2Data),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),e.BlobHeader=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.type=\"\",e.prototype.indexdata=$util.newBuffer([]),e.prototype.datasize=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),t.uint32(10).string(e.type),null!=e.indexdata&&e.hasOwnProperty(\"indexdata\")&&t.uint32(18).bytes(e.indexdata),t.uint32(24).int32(e.datasize),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.OSMPBF.BlobHeader;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.type=e.string();break;case 2:i.indexdata=e.bytes();break;case 3:i.datasize=e.int32();break;default:e.skipType(7&n)}}if(!i.hasOwnProperty(\"type\"))throw $util.ProtocolError(\"missing required 'type'\",{instance:i});if(!i.hasOwnProperty(\"datasize\"))throw $util.ProtocolError(\"missing required 'datasize'\",{instance:i});return i},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return\"object\"!=typeof e||null===e?\"object expected\":$util.isString(e.type)?null!=e.indexdata&&e.hasOwnProperty(\"indexdata\")&&!(e.indexdata&&\"number\"==typeof e.indexdata.length||$util.isString(e.indexdata))?\"indexdata: buffer expected\":$util.isInteger(e.datasize)?null:\"datasize: integer expected\":\"type: string expected\"},e.fromObject=function(e){if(e instanceof $root.OSMPBF.BlobHeader)return e;var t=new $root.OSMPBF.BlobHeader;return null!=e.type&&(t.type=String(e.type)),null!=e.indexdata&&(\"string\"==typeof e.indexdata?$util.base64.decode(e.indexdata,t.indexdata=$util.newBuffer($util.base64.length(e.indexdata)),0):e.indexdata.length&&(t.indexdata=e.indexdata)),null!=e.datasize&&(t.datasize=0|e.datasize),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.type=\"\",t.bytes===String?r.indexdata=\"\":(r.indexdata=[],t.bytes!==Array&&(r.indexdata=$util.newBuffer(r.indexdata))),r.datasize=0),null!=e.type&&e.hasOwnProperty(\"type\")&&(r.type=e.type),null!=e.indexdata&&e.hasOwnProperty(\"indexdata\")&&(r.indexdata=t.bytes===String?$util.base64.encode(e.indexdata,0,e.indexdata.length):t.bytes===Array?Array.prototype.slice.call(e.indexdata):e.indexdata),null!=e.datasize&&e.hasOwnProperty(\"datasize\")&&(r.datasize=e.datasize),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),e.HeaderBlock=function(){function e(e){if(this.requiredFeatures=[],this.optionalFeatures=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.bbox=null,e.prototype.requiredFeatures=$util.emptyArray,e.prototype.optionalFeatures=$util.emptyArray,e.prototype.writingprogram=\"\",e.prototype.source=\"\",e.prototype.osmosisReplicationTimestamp=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.osmosisReplicationSequenceNumber=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.osmosisReplicationBaseUrl=\"\",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.bbox&&e.hasOwnProperty(\"bbox\")&&$root.OSMPBF.HeaderBBox.encode(e.bbox,t.uint32(10).fork()).ldelim(),null!=e.requiredFeatures&&e.requiredFeatures.length)for(var r=0;r<e.requiredFeatures.length;++r)t.uint32(34).string(e.requiredFeatures[r]);if(null!=e.optionalFeatures&&e.optionalFeatures.length)for(var r=0;r<e.optionalFeatures.length;++r)t.uint32(42).string(e.optionalFeatures[r]);return null!=e.writingprogram&&e.hasOwnProperty(\"writingprogram\")&&t.uint32(130).string(e.writingprogram),null!=e.source&&e.hasOwnProperty(\"source\")&&t.uint32(138).string(e.source),null!=e.osmosisReplicationTimestamp&&e.hasOwnProperty(\"osmosisReplicationTimestamp\")&&t.uint32(256).int64(e.osmosisReplicationTimestamp),null!=e.osmosisReplicationSequenceNumber&&e.hasOwnProperty(\"osmosisReplicationSequenceNumber\")&&t.uint32(264).int64(e.osmosisReplicationSequenceNumber),null!=e.osmosisReplicationBaseUrl&&e.hasOwnProperty(\"osmosisReplicationBaseUrl\")&&t.uint32(274).string(e.osmosisReplicationBaseUrl),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.OSMPBF.HeaderBlock;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.bbox=$root.OSMPBF.HeaderBBox.decode(e,e.uint32());break;case 4:i.requiredFeatures&&i.requiredFeatures.length||(i.requiredFeatures=[]),i.requiredFeatures.push(e.string());break;case 5:i.optionalFeatures&&i.optionalFeatures.length||(i.optionalFeatures=[]),i.optionalFeatures.push(e.string());break;case 16:i.writingprogram=e.string();break;case 17:i.source=e.string();break;case 32:i.osmosisReplicationTimestamp=e.int64();break;case 33:i.osmosisReplicationSequenceNumber=e.int64();break;case 34:i.osmosisReplicationBaseUrl=e.string();break;default:e.skipType(7&n)}}return i},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if(\"object\"!=typeof e||null===e)return\"object expected\";if(null!=e.bbox&&e.hasOwnProperty(\"bbox\")){var t=$root.OSMPBF.HeaderBBox.verify(e.bbox);if(t)return\"bbox.\"+t}if(null!=e.requiredFeatures&&e.hasOwnProperty(\"requiredFeatures\")){if(!Array.isArray(e.requiredFeatures))return\"requiredFeatures: array expected\";for(var r=0;r<e.requiredFeatures.length;++r)if(!$util.isString(e.requiredFeatures[r]))return\"requiredFeatures: string[] expected\"}if(null!=e.optionalFeatures&&e.hasOwnProperty(\"optionalFeatures\")){if(!Array.isArray(e.optionalFeatures))return\"optionalFeatures: array expected\";for(var r=0;r<e.optionalFeatures.length;++r)if(!$util.isString(e.optionalFeatures[r]))return\"optionalFeatures: string[] expected\"}return null!=e.writingprogram&&e.hasOwnProperty(\"writingprogram\")&&!$util.isString(e.writingprogram)?\"writingprogram: string expected\":null!=e.source&&e.hasOwnProperty(\"source\")&&!$util.isString(e.source)?\"source: string expected\":null!=e.osmosisReplicationTimestamp&&e.hasOwnProperty(\"osmosisReplicationTimestamp\")&&!($util.isInteger(e.osmosisReplicationTimestamp)||e.osmosisReplicationTimestamp&&$util.isInteger(e.osmosisReplicationTimestamp.low)&&$util.isInteger(e.osmosisReplicationTimestamp.high))?\"osmosisReplicationTimestamp: integer|Long expected\":null!=e.osmosisReplicationSequenceNumber&&e.hasOwnProperty(\"osmosisReplicationSequenceNumber\")&&!($util.isInteger(e.osmosisReplicationSequenceNumber)||e.osmosisReplicationSequenceNumber&&$util.isInteger(e.osmosisReplicationSequenceNumber.low)&&$util.isInteger(e.osmosisReplicationSequenceNumber.high))?\"osmosisReplicationSequenceNumber: integer|Long expected\":null!=e.osmosisReplicationBaseUrl&&e.hasOwnProperty(\"osmosisReplicationBaseUrl\")&&!$util.isString(e.osmosisReplicationBaseUrl)?\"osmosisReplicationBaseUrl: string expected\":null},e.fromObject=function(e){if(e instanceof $root.OSMPBF.HeaderBlock)return e;var t=new $root.OSMPBF.HeaderBlock;if(null!=e.bbox){if(\"object\"!=typeof e.bbox)throw TypeError(\".OSMPBF.HeaderBlock.bbox: object expected\");t.bbox=$root.OSMPBF.HeaderBBox.fromObject(e.bbox)}if(e.requiredFeatures){if(!Array.isArray(e.requiredFeatures))throw TypeError(\".OSMPBF.HeaderBlock.requiredFeatures: array expected\");t.requiredFeatures=[];for(var r=0;r<e.requiredFeatures.length;++r)t.requiredFeatures[r]=String(e.requiredFeatures[r])}if(e.optionalFeatures){if(!Array.isArray(e.optionalFeatures))throw TypeError(\".OSMPBF.HeaderBlock.optionalFeatures: array expected\");t.optionalFeatures=[];for(var r=0;r<e.optionalFeatures.length;++r)t.optionalFeatures[r]=String(e.optionalFeatures[r])}return null!=e.writingprogram&&(t.writingprogram=String(e.writingprogram)),null!=e.source&&(t.source=String(e.source)),null!=e.osmosisReplicationTimestamp&&($util.Long?(t.osmosisReplicationTimestamp=$util.Long.fromValue(e.osmosisReplicationTimestamp)).unsigned=!1:\"string\"==typeof e.osmosisReplicationTimestamp?t.osmosisReplicationTimestamp=parseInt(e.osmosisReplicationTimestamp,10):\"number\"==typeof e.osmosisReplicationTimestamp?t.osmosisReplicationTimestamp=e.osmosisReplicationTimestamp:\"object\"==typeof e.osmosisReplicationTimestamp&&(t.osmosisReplicationTimestamp=new $util.LongBits(e.osmosisReplicationTimestamp.low>>>0,e.osmosisReplicationTimestamp.high>>>0).toNumber())),null!=e.osmosisReplicationSequenceNumber&&($util.Long?(t.osmosisReplicationSequenceNumber=$util.Long.fromValue(e.osmosisReplicationSequenceNumber)).unsigned=!1:\"string\"==typeof e.osmosisReplicationSequenceNumber?t.osmosisReplicationSequenceNumber=parseInt(e.osmosisReplicationSequenceNumber,10):\"number\"==typeof e.osmosisReplicationSequenceNumber?t.osmosisReplicationSequenceNumber=e.osmosisReplicationSequenceNumber:\"object\"==typeof e.osmosisReplicationSequenceNumber&&(t.osmosisReplicationSequenceNumber=new $util.LongBits(e.osmosisReplicationSequenceNumber.low>>>0,e.osmosisReplicationSequenceNumber.high>>>0).toNumber())),null!=e.osmosisReplicationBaseUrl&&(t.osmosisReplicationBaseUrl=String(e.osmosisReplicationBaseUrl)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.requiredFeatures=[],r.optionalFeatures=[]),t.defaults){if(r.bbox=null,r.writingprogram=\"\",r.source=\"\",$util.Long){var i=new $util.Long(0,0,!1);r.osmosisReplicationTimestamp=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else r.osmosisReplicationTimestamp=t.longs===String?\"0\":0;if($util.Long){var i=new $util.Long(0,0,!1);r.osmosisReplicationSequenceNumber=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else r.osmosisReplicationSequenceNumber=t.longs===String?\"0\":0;r.osmosisReplicationBaseUrl=\"\"}if(null!=e.bbox&&e.hasOwnProperty(\"bbox\")&&(r.bbox=$root.OSMPBF.HeaderBBox.toObject(e.bbox,t)),e.requiredFeatures&&e.requiredFeatures.length){r.requiredFeatures=[];for(var n=0;n<e.requiredFeatures.length;++n)r.requiredFeatures[n]=e.requiredFeatures[n]}if(e.optionalFeatures&&e.optionalFeatures.length){r.optionalFeatures=[];for(var n=0;n<e.optionalFeatures.length;++n)r.optionalFeatures[n]=e.optionalFeatures[n]}return null!=e.writingprogram&&e.hasOwnProperty(\"writingprogram\")&&(r.writingprogram=e.writingprogram),null!=e.source&&e.hasOwnProperty(\"source\")&&(r.source=e.source),null!=e.osmosisReplicationTimestamp&&e.hasOwnProperty(\"osmosisReplicationTimestamp\")&&(\"number\"==typeof e.osmosisReplicationTimestamp?r.osmosisReplicationTimestamp=t.longs===String?String(e.osmosisReplicationTimestamp):e.osmosisReplicationTimestamp:r.osmosisReplicationTimestamp=t.longs===String?$util.Long.prototype.toString.call(e.osmosisReplicationTimestamp):t.longs===Number?new $util.LongBits(e.osmosisReplicationTimestamp.low>>>0,e.osmosisReplicationTimestamp.high>>>0).toNumber():e.osmosisReplicationTimestamp),null!=e.osmosisReplicationSequenceNumber&&e.hasOwnProperty(\"osmosisReplicationSequenceNumber\")&&(\"number\"==typeof e.osmosisReplicationSequenceNumber?r.osmosisReplicationSequenceNumber=t.longs===String?String(e.osmosisReplicationSequenceNumber):e.osmosisReplicationSequenceNumber:r.osmosisReplicationSequenceNumber=t.longs===String?$util.Long.prototype.toString.call(e.osmosisReplicationSequenceNumber):t.longs===Number?new $util.LongBits(e.osmosisReplicationSequenceNumber.low>>>0,e.osmosisReplicationSequenceNumber.high>>>0).toNumber():e.osmosisReplicationSequenceNumber),null!=e.osmosisReplicationBaseUrl&&e.hasOwnProperty(\"osmosisReplicationBaseUrl\")&&(r.osmosisReplicationBaseUrl=e.osmosisReplicationBaseUrl),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),e.HeaderBBox=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.left=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.right=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.top=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.bottom=$util.Long?$util.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),t.uint32(8).sint64(e.left),t.uint32(16).sint64(e.right),t.uint32(24).sint64(e.top),t.uint32(32).sint64(e.bottom),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.OSMPBF.HeaderBBox;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.left=e.sint64();break;case 2:i.right=e.sint64();break;case 3:i.top=e.sint64();break;case 4:i.bottom=e.sint64();break;default:e.skipType(7&n)}}if(!i.hasOwnProperty(\"left\"))throw $util.ProtocolError(\"missing required 'left'\",{instance:i});if(!i.hasOwnProperty(\"right\"))throw $util.ProtocolError(\"missing required 'right'\",{instance:i});if(!i.hasOwnProperty(\"top\"))throw $util.ProtocolError(\"missing required 'top'\",{instance:i});if(!i.hasOwnProperty(\"bottom\"))throw $util.ProtocolError(\"missing required 'bottom'\",{instance:i});return i},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return\"object\"!=typeof e||null===e?\"object expected\":$util.isInteger(e.left)||e.left&&$util.isInteger(e.left.low)&&$util.isInteger(e.left.high)?$util.isInteger(e.right)||e.right&&$util.isInteger(e.right.low)&&$util.isInteger(e.right.high)?$util.isInteger(e.top)||e.top&&$util.isInteger(e.top.low)&&$util.isInteger(e.top.high)?$util.isInteger(e.bottom)||e.bottom&&$util.isInteger(e.bottom.low)&&$util.isInteger(e.bottom.high)?null:\"bottom: integer|Long expected\":\"top: integer|Long expected\":\"right: integer|Long expected\":\"left: integer|Long expected\"},e.fromObject=function(e){if(e instanceof $root.OSMPBF.HeaderBBox)return e;var t=new $root.OSMPBF.HeaderBBox;return null!=e.left&&($util.Long?(t.left=$util.Long.fromValue(e.left)).unsigned=!1:\"string\"==typeof e.left?t.left=parseInt(e.left,10):\"number\"==typeof e.left?t.left=e.left:\"object\"==typeof e.left&&(t.left=new $util.LongBits(e.left.low>>>0,e.left.high>>>0).toNumber())),null!=e.right&&($util.Long?(t.right=$util.Long.fromValue(e.right)).unsigned=!1:\"string\"==typeof e.right?t.right=parseInt(e.right,10):\"number\"==typeof e.right?t.right=e.right:\"object\"==typeof e.right&&(t.right=new $util.LongBits(e.right.low>>>0,e.right.high>>>0).toNumber())),null!=e.top&&($util.Long?(t.top=$util.Long.fromValue(e.top)).unsigned=!1:\"string\"==typeof e.top?t.top=parseInt(e.top,10):\"number\"==typeof e.top?t.top=e.top:\"object\"==typeof e.top&&(t.top=new $util.LongBits(e.top.low>>>0,e.top.high>>>0).toNumber())),null!=e.bottom&&($util.Long?(t.bottom=$util.Long.fromValue(e.bottom)).unsigned=!1:\"string\"==typeof e.bottom?t.bottom=parseInt(e.bottom,10):\"number\"==typeof e.bottom?t.bottom=e.bottom:\"object\"==typeof e.bottom&&(t.bottom=new $util.LongBits(e.bottom.low>>>0,e.bottom.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if($util.Long){var i=new $util.Long(0,0,!1);r.left=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else r.left=t.longs===String?\"0\":0;if($util.Long){var i=new $util.Long(0,0,!1);r.right=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else r.right=t.longs===String?\"0\":0;if($util.Long){var i=new $util.Long(0,0,!1);r.top=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else r.top=t.longs===String?\"0\":0;if($util.Long){var i=new $util.Long(0,0,!1);r.bottom=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else r.bottom=t.longs===String?\"0\":0}return null!=e.left&&e.hasOwnProperty(\"left\")&&(\"number\"==typeof e.left?r.left=t.longs===String?String(e.left):e.left:r.left=t.longs===String?$util.Long.prototype.toString.call(e.left):t.longs===Number?new $util.LongBits(e.left.low>>>0,e.left.high>>>0).toNumber():e.left),null!=e.right&&e.hasOwnProperty(\"right\")&&(\"number\"==typeof e.right?r.right=t.longs===String?String(e.right):e.right:r.right=t.longs===String?$util.Long.prototype.toString.call(e.right):t.longs===Number?new $util.LongBits(e.right.low>>>0,e.right.high>>>0).toNumber():e.right),null!=e.top&&e.hasOwnProperty(\"top\")&&(\"number\"==typeof e.top?r.top=t.longs===String?String(e.top):e.top:r.top=t.longs===String?$util.Long.prototype.toString.call(e.top):t.longs===Number?new $util.LongBits(e.top.low>>>0,e.top.high>>>0).toNumber():e.top),null!=e.bottom&&e.hasOwnProperty(\"bottom\")&&(\"number\"==typeof e.bottom?r.bottom=t.longs===String?String(e.bottom):e.bottom:r.bottom=t.longs===String?$util.Long.prototype.toString.call(e.bottom):t.longs===Number?new $util.LongBits(e.bottom.low>>>0,e.bottom.high>>>0).toNumber():e.bottom),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),e.PrimitiveBlock=function(){function e(e){if(this.primitivegroup=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.stringtable=null,e.prototype.primitivegroup=$util.emptyArray,e.prototype.granularity=100,e.prototype.latOffset=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.lonOffset=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.dateGranularity=1e3,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=$Writer.create()),$root.OSMPBF.StringTable.encode(e.stringtable,t.uint32(10).fork()).ldelim(),null!=e.primitivegroup&&e.primitivegroup.length)for(var r=0;r<e.primitivegroup.length;++r)$root.OSMPBF.PrimitiveGroup.encode(e.primitivegroup[r],t.uint32(18).fork()).ldelim();return null!=e.granularity&&e.hasOwnProperty(\"granularity\")&&t.uint32(136).int32(e.granularity),null!=e.dateGranularity&&e.hasOwnProperty(\"dateGranularity\")&&t.uint32(144).int32(e.dateGranularity),null!=e.latOffset&&e.hasOwnProperty(\"latOffset\")&&t.uint32(152).int64(e.latOffset),null!=e.lonOffset&&e.hasOwnProperty(\"lonOffset\")&&t.uint32(160).int64(e.lonOffset),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.OSMPBF.PrimitiveBlock;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.stringtable=$root.OSMPBF.StringTable.decode(e,e.uint32());break;case 2:i.primitivegroup&&i.primitivegroup.length||(i.primitivegroup=[]),i.primitivegroup.push($root.OSMPBF.PrimitiveGroup.decode(e,e.uint32()));break;case 17:i.granularity=e.int32();break;case 19:i.latOffset=e.int64();break;case 20:i.lonOffset=e.int64();break;case 18:i.dateGranularity=e.int32();break;default:e.skipType(7&n)}}if(!i.hasOwnProperty(\"stringtable\"))throw $util.ProtocolError(\"missing required 'stringtable'\",{instance:i});return i},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if(\"object\"!=typeof e||null===e)return\"object expected\";var t=$root.OSMPBF.StringTable.verify(e.stringtable);if(t)return\"stringtable.\"+t;if(null!=e.primitivegroup&&e.hasOwnProperty(\"primitivegroup\")){if(!Array.isArray(e.primitivegroup))return\"primitivegroup: array expected\";for(var r=0;r<e.primitivegroup.length;++r){var t=$root.OSMPBF.PrimitiveGroup.verify(e.primitivegroup[r]);if(t)return\"primitivegroup.\"+t}}return null!=e.granularity&&e.hasOwnProperty(\"granularity\")&&!$util.isInteger(e.granularity)?\"granularity: integer expected\":null!=e.latOffset&&e.hasOwnProperty(\"latOffset\")&&!($util.isInteger(e.latOffset)||e.latOffset&&$util.isInteger(e.latOffset.low)&&$util.isInteger(e.latOffset.high))?\"latOffset: integer|Long expected\":null!=e.lonOffset&&e.hasOwnProperty(\"lonOffset\")&&!($util.isInteger(e.lonOffset)||e.lonOffset&&$util.isInteger(e.lonOffset.low)&&$util.isInteger(e.lonOffset.high))?\"lonOffset: integer|Long expected\":null!=e.dateGranularity&&e.hasOwnProperty(\"dateGranularity\")&&!$util.isInteger(e.dateGranularity)?\"dateGranularity: integer expected\":null},e.fromObject=function(e){if(e instanceof $root.OSMPBF.PrimitiveBlock)return e;var t=new $root.OSMPBF.PrimitiveBlock;if(null!=e.stringtable){if(\"object\"!=typeof e.stringtable)throw TypeError(\".OSMPBF.PrimitiveBlock.stringtable: object expected\");t.stringtable=$root.OSMPBF.StringTable.fromObject(e.stringtable)}if(e.primitivegroup){if(!Array.isArray(e.primitivegroup))throw TypeError(\".OSMPBF.PrimitiveBlock.primitivegroup: array expected\");t.primitivegroup=[];for(var r=0;r<e.primitivegroup.length;++r){if(\"object\"!=typeof e.primitivegroup[r])throw TypeError(\".OSMPBF.PrimitiveBlock.primitivegroup: object expected\");t.primitivegroup[r]=$root.OSMPBF.PrimitiveGroup.fromObject(e.primitivegroup[r])}}return null!=e.granularity&&(t.granularity=0|e.granularity),null!=e.latOffset&&($util.Long?(t.latOffset=$util.Long.fromValue(e.latOffset)).unsigned=!1:\"string\"==typeof e.latOffset?t.latOffset=parseInt(e.latOffset,10):\"number\"==typeof e.latOffset?t.latOffset=e.latOffset:\"object\"==typeof e.latOffset&&(t.latOffset=new $util.LongBits(e.latOffset.low>>>0,e.latOffset.high>>>0).toNumber())),null!=e.lonOffset&&($util.Long?(t.lonOffset=$util.Long.fromValue(e.lonOffset)).unsigned=!1:\"string\"==typeof e.lonOffset?t.lonOffset=parseInt(e.lonOffset,10):\"number\"==typeof e.lonOffset?t.lonOffset=e.lonOffset:\"object\"==typeof e.lonOffset&&(t.lonOffset=new $util.LongBits(e.lonOffset.low>>>0,e.lonOffset.high>>>0).toNumber())),null!=e.dateGranularity&&(t.dateGranularity=0|e.dateGranularity),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.primitivegroup=[]),t.defaults){if(r.stringtable=null,r.granularity=100,r.dateGranularity=1e3,$util.Long){var i=new $util.Long(0,0,!1);r.latOffset=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else r.latOffset=t.longs===String?\"0\":0;if($util.Long){var i=new $util.Long(0,0,!1);r.lonOffset=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else r.lonOffset=t.longs===String?\"0\":0}if(null!=e.stringtable&&e.hasOwnProperty(\"stringtable\")&&(r.stringtable=$root.OSMPBF.StringTable.toObject(e.stringtable,t)),e.primitivegroup&&e.primitivegroup.length){r.primitivegroup=[];for(var n=0;n<e.primitivegroup.length;++n)r.primitivegroup[n]=$root.OSMPBF.PrimitiveGroup.toObject(e.primitivegroup[n],t)}return null!=e.granularity&&e.hasOwnProperty(\"granularity\")&&(r.granularity=e.granularity),null!=e.dateGranularity&&e.hasOwnProperty(\"dateGranularity\")&&(r.dateGranularity=e.dateGranularity),null!=e.latOffset&&e.hasOwnProperty(\"latOffset\")&&(\"number\"==typeof e.latOffset?r.latOffset=t.longs===String?String(e.latOffset):e.latOffset:r.latOffset=t.longs===String?$util.Long.prototype.toString.call(e.latOffset):t.longs===Number?new $util.LongBits(e.latOffset.low>>>0,e.latOffset.high>>>0).toNumber():e.latOffset),null!=e.lonOffset&&e.hasOwnProperty(\"lonOffset\")&&(\"number\"==typeof e.lonOffset?r.lonOffset=t.longs===String?String(e.lonOffset):e.lonOffset:r.lonOffset=t.longs===String?$util.Long.prototype.toString.call(e.lonOffset):t.longs===Number?new $util.LongBits(e.lonOffset.low>>>0,e.lonOffset.high>>>0).toNumber():e.lonOffset),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),e.PrimitiveGroup=function(){function e(e){if(this.nodes=[],this.ways=[],this.relations=[],this.changesets=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.nodes=$util.emptyArray,e.prototype.dense=null,e.prototype.ways=$util.emptyArray,e.prototype.relations=$util.emptyArray,e.prototype.changesets=$util.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.nodes&&e.nodes.length)for(var r=0;r<e.nodes.length;++r)$root.OSMPBF.Node.encode(e.nodes[r],t.uint32(10).fork()).ldelim();if(null!=e.dense&&e.hasOwnProperty(\"dense\")&&$root.OSMPBF.DenseNodes.encode(e.dense,t.uint32(18).fork()).ldelim(),null!=e.ways&&e.ways.length)for(var r=0;r<e.ways.length;++r)$root.OSMPBF.Way.encode(e.ways[r],t.uint32(26).fork()).ldelim();if(null!=e.relations&&e.relations.length)for(var r=0;r<e.relations.length;++r)$root.OSMPBF.Relation.encode(e.relations[r],t.uint32(34).fork()).ldelim();if(null!=e.changesets&&e.changesets.length)for(var r=0;r<e.changesets.length;++r)$root.OSMPBF.ChangeSet.encode(e.changesets[r],t.uint32(42).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.OSMPBF.PrimitiveGroup;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.nodes&&i.nodes.length||(i.nodes=[]),i.nodes.push($root.OSMPBF.Node.decode(e,e.uint32()));break;case 2:i.dense=$root.OSMPBF.DenseNodes.decode(e,e.uint32());break;case 3:i.ways&&i.ways.length||(i.ways=[]),i.ways.push($root.OSMPBF.Way.decode(e,e.uint32()));break;case 4:i.relations&&i.relations.length||(i.relations=[]),i.relations.push($root.OSMPBF.Relation.decode(e,e.uint32()));break;case 5:i.changesets&&i.changesets.length||(i.changesets=[]),i.changesets.push($root.OSMPBF.ChangeSet.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return i},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if(\"object\"!=typeof e||null===e)return\"object expected\";if(null!=e.nodes&&e.hasOwnProperty(\"nodes\")){if(!Array.isArray(e.nodes))return\"nodes: array expected\";for(var t=0;t<e.nodes.length;++t){var r=$root.OSMPBF.Node.verify(e.nodes[t]);if(r)return\"nodes.\"+r}}if(null!=e.dense&&e.hasOwnProperty(\"dense\")){var r=$root.OSMPBF.DenseNodes.verify(e.dense);if(r)return\"dense.\"+r}if(null!=e.ways&&e.hasOwnProperty(\"ways\")){if(!Array.isArray(e.ways))return\"ways: array expected\";for(var t=0;t<e.ways.length;++t){var r=$root.OSMPBF.Way.verify(e.ways[t]);if(r)return\"ways.\"+r}}if(null!=e.relations&&e.hasOwnProperty(\"relations\")){if(!Array.isArray(e.relations))return\"relations: array expected\";for(var t=0;t<e.relations.length;++t){var r=$root.OSMPBF.Relation.verify(e.relations[t]);if(r)return\"relations.\"+r}}if(null!=e.changesets&&e.hasOwnProperty(\"changesets\")){if(!Array.isArray(e.changesets))return\"changesets: array expected\";for(var t=0;t<e.changesets.length;++t){var r=$root.OSMPBF.ChangeSet.verify(e.changesets[t]);if(r)return\"changesets.\"+r}}return null},e.fromObject=function(e){if(e instanceof $root.OSMPBF.PrimitiveGroup)return e;var t=new $root.OSMPBF.PrimitiveGroup;if(e.nodes){if(!Array.isArray(e.nodes))throw TypeError(\".OSMPBF.PrimitiveGroup.nodes: array expected\");t.nodes=[];for(var r=0;r<e.nodes.length;++r){if(\"object\"!=typeof e.nodes[r])throw TypeError(\".OSMPBF.PrimitiveGroup.nodes: object expected\");t.nodes[r]=$root.OSMPBF.Node.fromObject(e.nodes[r])}}if(null!=e.dense){if(\"object\"!=typeof e.dense)throw TypeError(\".OSMPBF.PrimitiveGroup.dense: object expected\");t.dense=$root.OSMPBF.DenseNodes.fromObject(e.dense)}if(e.ways){if(!Array.isArray(e.ways))throw TypeError(\".OSMPBF.PrimitiveGroup.ways: array expected\");t.ways=[];for(var r=0;r<e.ways.length;++r){if(\"object\"!=typeof e.ways[r])throw TypeError(\".OSMPBF.PrimitiveGroup.ways: object expected\");t.ways[r]=$root.OSMPBF.Way.fromObject(e.ways[r])}}if(e.relations){if(!Array.isArray(e.relations))throw TypeError(\".OSMPBF.PrimitiveGroup.relations: array expected\");t.relations=[];for(var r=0;r<e.relations.length;++r){\nif(\"object\"!=typeof e.relations[r])throw TypeError(\".OSMPBF.PrimitiveGroup.relations: object expected\");t.relations[r]=$root.OSMPBF.Relation.fromObject(e.relations[r])}}if(e.changesets){if(!Array.isArray(e.changesets))throw TypeError(\".OSMPBF.PrimitiveGroup.changesets: array expected\");t.changesets=[];for(var r=0;r<e.changesets.length;++r){if(\"object\"!=typeof e.changesets[r])throw TypeError(\".OSMPBF.PrimitiveGroup.changesets: object expected\");t.changesets[r]=$root.OSMPBF.ChangeSet.fromObject(e.changesets[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.nodes=[],r.ways=[],r.relations=[],r.changesets=[]),t.defaults&&(r.dense=null),e.nodes&&e.nodes.length){r.nodes=[];for(var i=0;i<e.nodes.length;++i)r.nodes[i]=$root.OSMPBF.Node.toObject(e.nodes[i],t)}if(null!=e.dense&&e.hasOwnProperty(\"dense\")&&(r.dense=$root.OSMPBF.DenseNodes.toObject(e.dense,t)),e.ways&&e.ways.length){r.ways=[];for(var i=0;i<e.ways.length;++i)r.ways[i]=$root.OSMPBF.Way.toObject(e.ways[i],t)}if(e.relations&&e.relations.length){r.relations=[];for(var i=0;i<e.relations.length;++i)r.relations[i]=$root.OSMPBF.Relation.toObject(e.relations[i],t)}if(e.changesets&&e.changesets.length){r.changesets=[];for(var i=0;i<e.changesets.length;++i)r.changesets[i]=$root.OSMPBF.ChangeSet.toObject(e.changesets[i],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),e.StringTable=function(){function e(e){if(this.s=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.s=$util.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.s&&e.s.length)for(var r=0;r<e.s.length;++r)t.uint32(10).bytes(e.s[r]);return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.OSMPBF.StringTable;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.s&&i.s.length||(i.s=[]),i.s.push(e.bytes());break;default:e.skipType(7&n)}}return i},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if(\"object\"!=typeof e||null===e)return\"object expected\";if(null!=e.s&&e.hasOwnProperty(\"s\")){if(!Array.isArray(e.s))return\"s: array expected\";for(var t=0;t<e.s.length;++t)if(!(e.s[t]&&\"number\"==typeof e.s[t].length||$util.isString(e.s[t])))return\"s: buffer[] expected\"}return null},e.fromObject=function(e){if(e instanceof $root.OSMPBF.StringTable)return e;var t=new $root.OSMPBF.StringTable;if(e.s){if(!Array.isArray(e.s))throw TypeError(\".OSMPBF.StringTable.s: array expected\");t.s=[];for(var r=0;r<e.s.length;++r)\"string\"==typeof e.s[r]?$util.base64.decode(e.s[r],t.s[r]=$util.newBuffer($util.base64.length(e.s[r])),0):e.s[r].length&&(t.s[r]=e.s[r])}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.s=[]),e.s&&e.s.length){r.s=[];for(var i=0;i<e.s.length;++i)r.s[i]=t.bytes===String?$util.base64.encode(e.s[i],0,e.s[i].length):t.bytes===Array?Array.prototype.slice.call(e.s[i]):e.s[i]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),e.Info=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.version=-1,e.prototype.timestamp=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.changeset=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.uid=0,e.prototype.userSid=0,e.prototype.visible=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.version&&e.hasOwnProperty(\"version\")&&t.uint32(8).int32(e.version),null!=e.timestamp&&e.hasOwnProperty(\"timestamp\")&&t.uint32(16).int64(e.timestamp),null!=e.changeset&&e.hasOwnProperty(\"changeset\")&&t.uint32(24).int64(e.changeset),null!=e.uid&&e.hasOwnProperty(\"uid\")&&t.uint32(32).int32(e.uid),null!=e.userSid&&e.hasOwnProperty(\"userSid\")&&t.uint32(40).uint32(e.userSid),null!=e.visible&&e.hasOwnProperty(\"visible\")&&t.uint32(48).bool(e.visible),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.OSMPBF.Info;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.version=e.int32();break;case 2:i.timestamp=e.int64();break;case 3:i.changeset=e.int64();break;case 4:i.uid=e.int32();break;case 5:i.userSid=e.uint32();break;case 6:i.visible=e.bool();break;default:e.skipType(7&n)}}return i},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return\"object\"!=typeof e||null===e?\"object expected\":null!=e.version&&e.hasOwnProperty(\"version\")&&!$util.isInteger(e.version)?\"version: integer expected\":null!=e.timestamp&&e.hasOwnProperty(\"timestamp\")&&!($util.isInteger(e.timestamp)||e.timestamp&&$util.isInteger(e.timestamp.low)&&$util.isInteger(e.timestamp.high))?\"timestamp: integer|Long expected\":null!=e.changeset&&e.hasOwnProperty(\"changeset\")&&!($util.isInteger(e.changeset)||e.changeset&&$util.isInteger(e.changeset.low)&&$util.isInteger(e.changeset.high))?\"changeset: integer|Long expected\":null!=e.uid&&e.hasOwnProperty(\"uid\")&&!$util.isInteger(e.uid)?\"uid: integer expected\":null!=e.userSid&&e.hasOwnProperty(\"userSid\")&&!$util.isInteger(e.userSid)?\"userSid: integer expected\":null!=e.visible&&e.hasOwnProperty(\"visible\")&&\"boolean\"!=typeof e.visible?\"visible: boolean expected\":null},e.fromObject=function(e){if(e instanceof $root.OSMPBF.Info)return e;var t=new $root.OSMPBF.Info;return null!=e.version&&(t.version=0|e.version),null!=e.timestamp&&($util.Long?(t.timestamp=$util.Long.fromValue(e.timestamp)).unsigned=!1:\"string\"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):\"number\"==typeof e.timestamp?t.timestamp=e.timestamp:\"object\"==typeof e.timestamp&&(t.timestamp=new $util.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber())),null!=e.changeset&&($util.Long?(t.changeset=$util.Long.fromValue(e.changeset)).unsigned=!1:\"string\"==typeof e.changeset?t.changeset=parseInt(e.changeset,10):\"number\"==typeof e.changeset?t.changeset=e.changeset:\"object\"==typeof e.changeset&&(t.changeset=new $util.LongBits(e.changeset.low>>>0,e.changeset.high>>>0).toNumber())),null!=e.uid&&(t.uid=0|e.uid),null!=e.userSid&&(t.userSid=e.userSid>>>0),null!=e.visible&&(t.visible=Boolean(e.visible)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(r.version=-1,$util.Long){var i=new $util.Long(0,0,!1);r.timestamp=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else r.timestamp=t.longs===String?\"0\":0;if($util.Long){var i=new $util.Long(0,0,!1);r.changeset=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else r.changeset=t.longs===String?\"0\":0;r.uid=0,r.userSid=0,r.visible=!1}return null!=e.version&&e.hasOwnProperty(\"version\")&&(r.version=e.version),null!=e.timestamp&&e.hasOwnProperty(\"timestamp\")&&(\"number\"==typeof e.timestamp?r.timestamp=t.longs===String?String(e.timestamp):e.timestamp:r.timestamp=t.longs===String?$util.Long.prototype.toString.call(e.timestamp):t.longs===Number?new $util.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber():e.timestamp),null!=e.changeset&&e.hasOwnProperty(\"changeset\")&&(\"number\"==typeof e.changeset?r.changeset=t.longs===String?String(e.changeset):e.changeset:r.changeset=t.longs===String?$util.Long.prototype.toString.call(e.changeset):t.longs===Number?new $util.LongBits(e.changeset.low>>>0,e.changeset.high>>>0).toNumber():e.changeset),null!=e.uid&&e.hasOwnProperty(\"uid\")&&(r.uid=e.uid),null!=e.userSid&&e.hasOwnProperty(\"userSid\")&&(r.userSid=e.userSid),null!=e.visible&&e.hasOwnProperty(\"visible\")&&(r.visible=e.visible),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),e.DenseInfo=function(){function e(e){if(this.version=[],this.timestamp=[],this.changeset=[],this.uid=[],this.userSid=[],this.visible=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.version=$util.emptyArray,e.prototype.timestamp=$util.emptyArray,e.prototype.changeset=$util.emptyArray,e.prototype.uid=$util.emptyArray,e.prototype.userSid=$util.emptyArray,e.prototype.visible=$util.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.version&&e.version.length){t.uint32(10).fork();for(var r=0;r<e.version.length;++r)t.int32(e.version[r]);t.ldelim()}if(null!=e.timestamp&&e.timestamp.length){t.uint32(18).fork();for(var r=0;r<e.timestamp.length;++r)t.sint64(e.timestamp[r]);t.ldelim()}if(null!=e.changeset&&e.changeset.length){t.uint32(26).fork();for(var r=0;r<e.changeset.length;++r)t.sint64(e.changeset[r]);t.ldelim()}if(null!=e.uid&&e.uid.length){t.uint32(34).fork();for(var r=0;r<e.uid.length;++r)t.sint32(e.uid[r]);t.ldelim()}if(null!=e.userSid&&e.userSid.length){t.uint32(42).fork();for(var r=0;r<e.userSid.length;++r)t.sint32(e.userSid[r]);t.ldelim()}if(null!=e.visible&&e.visible.length){t.uint32(50).fork();for(var r=0;r<e.visible.length;++r)t.bool(e.visible[r]);t.ldelim()}return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.OSMPBF.DenseInfo;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:if(i.version&&i.version.length||(i.version=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.version.push(e.int32());else i.version.push(e.int32());break;case 2:if(i.timestamp&&i.timestamp.length||(i.timestamp=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.timestamp.push(e.sint64());else i.timestamp.push(e.sint64());break;case 3:if(i.changeset&&i.changeset.length||(i.changeset=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.changeset.push(e.sint64());else i.changeset.push(e.sint64());break;case 4:if(i.uid&&i.uid.length||(i.uid=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.uid.push(e.sint32());else i.uid.push(e.sint32());break;case 5:if(i.userSid&&i.userSid.length||(i.userSid=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.userSid.push(e.sint32());else i.userSid.push(e.sint32());break;case 6:if(i.visible&&i.visible.length||(i.visible=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.visible.push(e.bool());else i.visible.push(e.bool());break;default:e.skipType(7&n)}}return i},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if(\"object\"!=typeof e||null===e)return\"object expected\";if(null!=e.version&&e.hasOwnProperty(\"version\")){if(!Array.isArray(e.version))return\"version: array expected\";for(var t=0;t<e.version.length;++t)if(!$util.isInteger(e.version[t]))return\"version: integer[] expected\"}if(null!=e.timestamp&&e.hasOwnProperty(\"timestamp\")){if(!Array.isArray(e.timestamp))return\"timestamp: array expected\";for(var t=0;t<e.timestamp.length;++t)if(!($util.isInteger(e.timestamp[t])||e.timestamp[t]&&$util.isInteger(e.timestamp[t].low)&&$util.isInteger(e.timestamp[t].high)))return\"timestamp: integer|Long[] expected\"}if(null!=e.changeset&&e.hasOwnProperty(\"changeset\")){if(!Array.isArray(e.changeset))return\"changeset: array expected\";for(var t=0;t<e.changeset.length;++t)if(!($util.isInteger(e.changeset[t])||e.changeset[t]&&$util.isInteger(e.changeset[t].low)&&$util.isInteger(e.changeset[t].high)))return\"changeset: integer|Long[] expected\"}if(null!=e.uid&&e.hasOwnProperty(\"uid\")){if(!Array.isArray(e.uid))return\"uid: array expected\";for(var t=0;t<e.uid.length;++t)if(!$util.isInteger(e.uid[t]))return\"uid: integer[] expected\"}if(null!=e.userSid&&e.hasOwnProperty(\"userSid\")){if(!Array.isArray(e.userSid))return\"userSid: array expected\";for(var t=0;t<e.userSid.length;++t)if(!$util.isInteger(e.userSid[t]))return\"userSid: integer[] expected\"}if(null!=e.visible&&e.hasOwnProperty(\"visible\")){if(!Array.isArray(e.visible))return\"visible: array expected\";for(var t=0;t<e.visible.length;++t)if(\"boolean\"!=typeof e.visible[t])return\"visible: boolean[] expected\"}return null},e.fromObject=function(e){if(e instanceof $root.OSMPBF.DenseInfo)return e;var t=new $root.OSMPBF.DenseInfo;if(e.version){if(!Array.isArray(e.version))throw TypeError(\".OSMPBF.DenseInfo.version: array expected\");t.version=[];for(var r=0;r<e.version.length;++r)t.version[r]=0|e.version[r]}if(e.timestamp){if(!Array.isArray(e.timestamp))throw TypeError(\".OSMPBF.DenseInfo.timestamp: array expected\");t.timestamp=[];for(var r=0;r<e.timestamp.length;++r)$util.Long?(t.timestamp[r]=$util.Long.fromValue(e.timestamp[r])).unsigned=!1:\"string\"==typeof e.timestamp[r]?t.timestamp[r]=parseInt(e.timestamp[r],10):\"number\"==typeof e.timestamp[r]?t.timestamp[r]=e.timestamp[r]:\"object\"==typeof e.timestamp[r]&&(t.timestamp[r]=new $util.LongBits(e.timestamp[r].low>>>0,e.timestamp[r].high>>>0).toNumber())}if(e.changeset){if(!Array.isArray(e.changeset))throw TypeError(\".OSMPBF.DenseInfo.changeset: array expected\");t.changeset=[];for(var r=0;r<e.changeset.length;++r)$util.Long?(t.changeset[r]=$util.Long.fromValue(e.changeset[r])).unsigned=!1:\"string\"==typeof e.changeset[r]?t.changeset[r]=parseInt(e.changeset[r],10):\"number\"==typeof e.changeset[r]?t.changeset[r]=e.changeset[r]:\"object\"==typeof e.changeset[r]&&(t.changeset[r]=new $util.LongBits(e.changeset[r].low>>>0,e.changeset[r].high>>>0).toNumber())}if(e.uid){if(!Array.isArray(e.uid))throw TypeError(\".OSMPBF.DenseInfo.uid: array expected\");t.uid=[];for(var r=0;r<e.uid.length;++r)t.uid[r]=0|e.uid[r]}if(e.userSid){if(!Array.isArray(e.userSid))throw TypeError(\".OSMPBF.DenseInfo.userSid: array expected\");t.userSid=[];for(var r=0;r<e.userSid.length;++r)t.userSid[r]=0|e.userSid[r]}if(e.visible){if(!Array.isArray(e.visible))throw TypeError(\".OSMPBF.DenseInfo.visible: array expected\");t.visible=[];for(var r=0;r<e.visible.length;++r)t.visible[r]=Boolean(e.visible[r])}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.version=[],r.timestamp=[],r.changeset=[],r.uid=[],r.userSid=[],r.visible=[]),e.version&&e.version.length){r.version=[];for(var i=0;i<e.version.length;++i)r.version[i]=e.version[i]}if(e.timestamp&&e.timestamp.length){r.timestamp=[];for(var i=0;i<e.timestamp.length;++i)\"number\"==typeof e.timestamp[i]?r.timestamp[i]=t.longs===String?String(e.timestamp[i]):e.timestamp[i]:r.timestamp[i]=t.longs===String?$util.Long.prototype.toString.call(e.timestamp[i]):t.longs===Number?new $util.LongBits(e.timestamp[i].low>>>0,e.timestamp[i].high>>>0).toNumber():e.timestamp[i]}if(e.changeset&&e.changeset.length){r.changeset=[];for(var i=0;i<e.changeset.length;++i)\"number\"==typeof e.changeset[i]?r.changeset[i]=t.longs===String?String(e.changeset[i]):e.changeset[i]:r.changeset[i]=t.longs===String?$util.Long.prototype.toString.call(e.changeset[i]):t.longs===Number?new $util.LongBits(e.changeset[i].low>>>0,e.changeset[i].high>>>0).toNumber():e.changeset[i]}if(e.uid&&e.uid.length){r.uid=[];for(var i=0;i<e.uid.length;++i)r.uid[i]=e.uid[i]}if(e.userSid&&e.userSid.length){r.userSid=[];for(var i=0;i<e.userSid.length;++i)r.userSid[i]=e.userSid[i]}if(e.visible&&e.visible.length){r.visible=[];for(var i=0;i<e.visible.length;++i)r.visible[i]=e.visible[i]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),e.ChangeSet=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.id=$util.Long?$util.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),t.uint32(8).int64(e.id),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.OSMPBF.ChangeSet;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.id=e.int64();break;default:e.skipType(7&n)}}if(!i.hasOwnProperty(\"id\"))throw $util.ProtocolError(\"missing required 'id'\",{instance:i});return i},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return\"object\"!=typeof e||null===e?\"object expected\":$util.isInteger(e.id)||e.id&&$util.isInteger(e.id.low)&&$util.isInteger(e.id.high)?null:\"id: integer|Long expected\"},e.fromObject=function(e){if(e instanceof $root.OSMPBF.ChangeSet)return e;var t=new $root.OSMPBF.ChangeSet;return null!=e.id&&($util.Long?(t.id=$util.Long.fromValue(e.id)).unsigned=!1:\"string\"==typeof e.id?t.id=parseInt(e.id,10):\"number\"==typeof e.id?t.id=e.id:\"object\"==typeof e.id&&(t.id=new $util.LongBits(e.id.low>>>0,e.id.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults)if($util.Long){var i=new $util.Long(0,0,!1);r.id=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else r.id=t.longs===String?\"0\":0;return null!=e.id&&e.hasOwnProperty(\"id\")&&(\"number\"==typeof e.id?r.id=t.longs===String?String(e.id):e.id:r.id=t.longs===String?$util.Long.prototype.toString.call(e.id):t.longs===Number?new $util.LongBits(e.id.low>>>0,e.id.high>>>0).toNumber():e.id),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),e.Node=function(){function e(e){if(this.keys=[],this.vals=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.id=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.keys=$util.emptyArray,e.prototype.vals=$util.emptyArray,e.prototype.info=null,e.prototype.lat=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.lon=$util.Long?$util.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=$Writer.create()),t.uint32(8).sint64(e.id),null!=e.keys&&e.keys.length){t.uint32(18).fork();for(var r=0;r<e.keys.length;++r)t.uint32(e.keys[r]);t.ldelim()}if(null!=e.vals&&e.vals.length){t.uint32(26).fork();for(var r=0;r<e.vals.length;++r)t.uint32(e.vals[r]);t.ldelim()}return null!=e.info&&e.hasOwnProperty(\"info\")&&$root.OSMPBF.Info.encode(e.info,t.uint32(34).fork()).ldelim(),t.uint32(64).sint64(e.lat),t.uint32(72).sint64(e.lon),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.OSMPBF.Node;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.id=e.sint64();break;case 2:if(i.keys&&i.keys.length||(i.keys=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.keys.push(e.uint32());else i.keys.push(e.uint32());break;case 3:if(i.vals&&i.vals.length||(i.vals=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.vals.push(e.uint32());else i.vals.push(e.uint32());break;case 4:i.info=$root.OSMPBF.Info.decode(e,e.uint32());break;case 8:i.lat=e.sint64();break;case 9:i.lon=e.sint64();break;default:e.skipType(7&n)}}if(!i.hasOwnProperty(\"id\"))throw $util.ProtocolError(\"missing required 'id'\",{instance:i});if(!i.hasOwnProperty(\"lat\"))throw $util.ProtocolError(\"missing required 'lat'\",{instance:i});if(!i.hasOwnProperty(\"lon\"))throw $util.ProtocolError(\"missing required 'lon'\",{instance:i});return i},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if(\"object\"!=typeof e||null===e)return\"object expected\";if(!($util.isInteger(e.id)||e.id&&$util.isInteger(e.id.low)&&$util.isInteger(e.id.high)))return\"id: integer|Long expected\";if(null!=e.keys&&e.hasOwnProperty(\"keys\")){if(!Array.isArray(e.keys))return\"keys: array expected\";for(var t=0;t<e.keys.length;++t)if(!$util.isInteger(e.keys[t]))return\"keys: integer[] expected\"}if(null!=e.vals&&e.hasOwnProperty(\"vals\")){if(!Array.isArray(e.vals))return\"vals: array expected\";for(var t=0;t<e.vals.length;++t)if(!$util.isInteger(e.vals[t]))return\"vals: integer[] expected\"}if(null!=e.info&&e.hasOwnProperty(\"info\")){var r=$root.OSMPBF.Info.verify(e.info);if(r)return\"info.\"+r}return $util.isInteger(e.lat)||e.lat&&$util.isInteger(e.lat.low)&&$util.isInteger(e.lat.high)?$util.isInteger(e.lon)||e.lon&&$util.isInteger(e.lon.low)&&$util.isInteger(e.lon.high)?null:\"lon: integer|Long expected\":\"lat: integer|Long expected\"},e.fromObject=function(e){if(e instanceof $root.OSMPBF.Node)return e;var t=new $root.OSMPBF.Node;if(null!=e.id&&($util.Long?(t.id=$util.Long.fromValue(e.id)).unsigned=!1:\"string\"==typeof e.id?t.id=parseInt(e.id,10):\"number\"==typeof e.id?t.id=e.id:\"object\"==typeof e.id&&(t.id=new $util.LongBits(e.id.low>>>0,e.id.high>>>0).toNumber())),e.keys){if(!Array.isArray(e.keys))throw TypeError(\".OSMPBF.Node.keys: array expected\");t.keys=[];for(var r=0;r<e.keys.length;++r)t.keys[r]=e.keys[r]>>>0}if(e.vals){if(!Array.isArray(e.vals))throw TypeError(\".OSMPBF.Node.vals: array expected\");t.vals=[];for(var r=0;r<e.vals.length;++r)t.vals[r]=e.vals[r]>>>0}if(null!=e.info){if(\"object\"!=typeof e.info)throw TypeError(\".OSMPBF.Node.info: object expected\");t.info=$root.OSMPBF.Info.fromObject(e.info)}return null!=e.lat&&($util.Long?(t.lat=$util.Long.fromValue(e.lat)).unsigned=!1:\"string\"==typeof e.lat?t.lat=parseInt(e.lat,10):\"number\"==typeof e.lat?t.lat=e.lat:\"object\"==typeof e.lat&&(t.lat=new $util.LongBits(e.lat.low>>>0,e.lat.high>>>0).toNumber())),null!=e.lon&&($util.Long?(t.lon=$util.Long.fromValue(e.lon)).unsigned=!1:\"string\"==typeof e.lon?t.lon=parseInt(e.lon,10):\"number\"==typeof e.lon?t.lon=e.lon:\"object\"==typeof e.lon&&(t.lon=new $util.LongBits(e.lon.low>>>0,e.lon.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.keys=[],r.vals=[]),t.defaults){if($util.Long){var i=new $util.Long(0,0,!1);r.id=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else r.id=t.longs===String?\"0\":0;if(r.info=null,$util.Long){var i=new $util.Long(0,0,!1);r.lat=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else r.lat=t.longs===String?\"0\":0;if($util.Long){var i=new $util.Long(0,0,!1);r.lon=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else r.lon=t.longs===String?\"0\":0}if(null!=e.id&&e.hasOwnProperty(\"id\")&&(\"number\"==typeof e.id?r.id=t.longs===String?String(e.id):e.id:r.id=t.longs===String?$util.Long.prototype.toString.call(e.id):t.longs===Number?new $util.LongBits(e.id.low>>>0,e.id.high>>>0).toNumber():e.id),e.keys&&e.keys.length){r.keys=[];for(var n=0;n<e.keys.length;++n)r.keys[n]=e.keys[n]}if(e.vals&&e.vals.length){r.vals=[];for(var n=0;n<e.vals.length;++n)r.vals[n]=e.vals[n]}return null!=e.info&&e.hasOwnProperty(\"info\")&&(r.info=$root.OSMPBF.Info.toObject(e.info,t)),null!=e.lat&&e.hasOwnProperty(\"lat\")&&(\"number\"==typeof e.lat?r.lat=t.longs===String?String(e.lat):e.lat:r.lat=t.longs===String?$util.Long.prototype.toString.call(e.lat):t.longs===Number?new $util.LongBits(e.lat.low>>>0,e.lat.high>>>0).toNumber():e.lat),null!=e.lon&&e.hasOwnProperty(\"lon\")&&(\"number\"==typeof e.lon?r.lon=t.longs===String?String(e.lon):e.lon:r.lon=t.longs===String?$util.Long.prototype.toString.call(e.lon):t.longs===Number?new $util.LongBits(e.lon.low>>>0,e.lon.high>>>0).toNumber():e.lon),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),e.DenseNodes=function(){function e(e){if(this.id=[],this.lat=[],this.lon=[],this.keysVals=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.id=$util.emptyArray,e.prototype.denseinfo=null,e.prototype.lat=$util.emptyArray,e.prototype.lon=$util.emptyArray,e.prototype.keysVals=$util.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.id&&e.id.length){t.uint32(10).fork();for(var r=0;r<e.id.length;++r)t.sint64(e.id[r]);t.ldelim()}if(null!=e.denseinfo&&e.hasOwnProperty(\"denseinfo\")&&$root.OSMPBF.DenseInfo.encode(e.denseinfo,t.uint32(42).fork()).ldelim(),null!=e.lat&&e.lat.length){t.uint32(66).fork();for(var r=0;r<e.lat.length;++r)t.sint64(e.lat[r]);t.ldelim()}if(null!=e.lon&&e.lon.length){t.uint32(74).fork();for(var r=0;r<e.lon.length;++r)t.sint64(e.lon[r]);t.ldelim()}if(null!=e.keysVals&&e.keysVals.length){t.uint32(82).fork();for(var r=0;r<e.keysVals.length;++r)t.int32(e.keysVals[r]);t.ldelim()}return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.OSMPBF.DenseNodes;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:if(i.id&&i.id.length||(i.id=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.id.push(e.sint64());else i.id.push(e.sint64());break;case 5:i.denseinfo=$root.OSMPBF.DenseInfo.decode(e,e.uint32());break;case 8:if(i.lat&&i.lat.length||(i.lat=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.lat.push(e.sint64());else i.lat.push(e.sint64());break;case 9:if(i.lon&&i.lon.length||(i.lon=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.lon.push(e.sint64());else i.lon.push(e.sint64());break;case 10:if(i.keysVals&&i.keysVals.length||(i.keysVals=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.keysVals.push(e.int32());else i.keysVals.push(e.int32());break;default:e.skipType(7&n)}}return i},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if(\"object\"!=typeof e||null===e)return\"object expected\";if(null!=e.id&&e.hasOwnProperty(\"id\")){if(!Array.isArray(e.id))return\"id: array expected\";for(var t=0;t<e.id.length;++t)if(!($util.isInteger(e.id[t])||e.id[t]&&$util.isInteger(e.id[t].low)&&$util.isInteger(e.id[t].high)))return\"id: integer|Long[] expected\"}if(null!=e.denseinfo&&e.hasOwnProperty(\"denseinfo\")){var r=$root.OSMPBF.DenseInfo.verify(e.denseinfo);if(r)return\"denseinfo.\"+r}if(null!=e.lat&&e.hasOwnProperty(\"lat\")){if(!Array.isArray(e.lat))return\"lat: array expected\";for(var t=0;t<e.lat.length;++t)if(!($util.isInteger(e.lat[t])||e.lat[t]&&$util.isInteger(e.lat[t].low)&&$util.isInteger(e.lat[t].high)))return\"lat: integer|Long[] expected\"}if(null!=e.lon&&e.hasOwnProperty(\"lon\")){if(!Array.isArray(e.lon))return\"lon: array expected\";for(var t=0;t<e.lon.length;++t)if(!($util.isInteger(e.lon[t])||e.lon[t]&&$util.isInteger(e.lon[t].low)&&$util.isInteger(e.lon[t].high)))return\"lon: integer|Long[] expected\"}if(null!=e.keysVals&&e.hasOwnProperty(\"keysVals\")){if(!Array.isArray(e.keysVals))return\"keysVals: array expected\";for(var t=0;t<e.keysVals.length;++t)if(!$util.isInteger(e.keysVals[t]))return\"keysVals: integer[] expected\"}return null},e.fromObject=function(e){if(e instanceof $root.OSMPBF.DenseNodes)return e;var t=new $root.OSMPBF.DenseNodes;if(e.id){if(!Array.isArray(e.id))throw TypeError(\".OSMPBF.DenseNodes.id: array expected\");t.id=[];for(var r=0;r<e.id.length;++r)$util.Long?(t.id[r]=$util.Long.fromValue(e.id[r])).unsigned=!1:\"string\"==typeof e.id[r]?t.id[r]=parseInt(e.id[r],10):\"number\"==typeof e.id[r]?t.id[r]=e.id[r]:\"object\"==typeof e.id[r]&&(t.id[r]=new $util.LongBits(e.id[r].low>>>0,e.id[r].high>>>0).toNumber())}if(null!=e.denseinfo){if(\"object\"!=typeof e.denseinfo)throw TypeError(\".OSMPBF.DenseNodes.denseinfo: object expected\");t.denseinfo=$root.OSMPBF.DenseInfo.fromObject(e.denseinfo)}if(e.lat){if(!Array.isArray(e.lat))throw TypeError(\".OSMPBF.DenseNodes.lat: array expected\");t.lat=[];for(var r=0;r<e.lat.length;++r)$util.Long?(t.lat[r]=$util.Long.fromValue(e.lat[r])).unsigned=!1:\"string\"==typeof e.lat[r]?t.lat[r]=parseInt(e.lat[r],10):\"number\"==typeof e.lat[r]?t.lat[r]=e.lat[r]:\"object\"==typeof e.lat[r]&&(t.lat[r]=new $util.LongBits(e.lat[r].low>>>0,e.lat[r].high>>>0).toNumber())}if(e.lon){if(!Array.isArray(e.lon))throw TypeError(\".OSMPBF.DenseNodes.lon: array expected\");t.lon=[];for(var r=0;r<e.lon.length;++r)$util.Long?(t.lon[r]=$util.Long.fromValue(e.lon[r])).unsigned=!1:\"string\"==typeof e.lon[r]?t.lon[r]=parseInt(e.lon[r],10):\"number\"==typeof e.lon[r]?t.lon[r]=e.lon[r]:\"object\"==typeof e.lon[r]&&(t.lon[r]=new $util.LongBits(e.lon[r].low>>>0,e.lon[r].high>>>0).toNumber())}if(e.keysVals){if(!Array.isArray(e.keysVals))throw TypeError(\".OSMPBF.DenseNodes.keysVals: array expected\");t.keysVals=[];for(var r=0;r<e.keysVals.length;++r)t.keysVals[r]=0|e.keysVals[r]}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.id=[],r.lat=[],r.lon=[],r.keysVals=[]),t.defaults&&(r.denseinfo=null),e.id&&e.id.length){r.id=[];for(var i=0;i<e.id.length;++i)\"number\"==typeof e.id[i]?r.id[i]=t.longs===String?String(e.id[i]):e.id[i]:r.id[i]=t.longs===String?$util.Long.prototype.toString.call(e.id[i]):t.longs===Number?new $util.LongBits(e.id[i].low>>>0,e.id[i].high>>>0).toNumber():e.id[i]}if(null!=e.denseinfo&&e.hasOwnProperty(\"denseinfo\")&&(r.denseinfo=$root.OSMPBF.DenseInfo.toObject(e.denseinfo,t)),e.lat&&e.lat.length){r.lat=[];for(var i=0;i<e.lat.length;++i)\"number\"==typeof e.lat[i]?r.lat[i]=t.longs===String?String(e.lat[i]):e.lat[i]:r.lat[i]=t.longs===String?$util.Long.prototype.toString.call(e.lat[i]):t.longs===Number?new $util.LongBits(e.lat[i].low>>>0,e.lat[i].high>>>0).toNumber():e.lat[i]}if(e.lon&&e.lon.length){r.lon=[];for(var i=0;i<e.lon.length;++i)\"number\"==typeof e.lon[i]?r.lon[i]=t.longs===String?String(e.lon[i]):e.lon[i]:r.lon[i]=t.longs===String?$util.Long.prototype.toString.call(e.lon[i]):t.longs===Number?new $util.LongBits(e.lon[i].low>>>0,e.lon[i].high>>>0).toNumber():e.lon[i]}if(e.keysVals&&e.keysVals.length){r.keysVals=[];for(var i=0;i<e.keysVals.length;++i)r.keysVals[i]=e.keysVals[i]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),e.Way=function(){function e(e){if(this.keys=[],this.vals=[],this.refs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.id=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.keys=$util.emptyArray,e.prototype.vals=$util.emptyArray,e.prototype.info=null,e.prototype.refs=$util.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=$Writer.create()),t.uint32(8).int64(e.id),null!=e.keys&&e.keys.length){t.uint32(18).fork();for(var r=0;r<e.keys.length;++r)t.uint32(e.keys[r]);t.ldelim()}if(null!=e.vals&&e.vals.length){t.uint32(26).fork();for(var r=0;r<e.vals.length;++r)t.uint32(e.vals[r]);t.ldelim()}if(null!=e.info&&e.hasOwnProperty(\"info\")&&$root.OSMPBF.Info.encode(e.info,t.uint32(34).fork()).ldelim(),null!=e.refs&&e.refs.length){t.uint32(66).fork();for(var r=0;r<e.refs.length;++r)t.sint64(e.refs[r]);t.ldelim()}return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.OSMPBF.Way;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.id=e.int64();break;case 2:if(i.keys&&i.keys.length||(i.keys=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.keys.push(e.uint32());else i.keys.push(e.uint32());break;case 3:if(i.vals&&i.vals.length||(i.vals=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.vals.push(e.uint32());else i.vals.push(e.uint32());break;case 4:i.info=$root.OSMPBF.Info.decode(e,e.uint32());break;case 8:if(i.refs&&i.refs.length||(i.refs=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.refs.push(e.sint64());else i.refs.push(e.sint64());break;default:e.skipType(7&n)}}if(!i.hasOwnProperty(\"id\"))throw $util.ProtocolError(\"missing required 'id'\",{instance:i});return i},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if(\"object\"!=typeof e||null===e)return\"object expected\";if(!($util.isInteger(e.id)||e.id&&$util.isInteger(e.id.low)&&$util.isInteger(e.id.high)))return\"id: integer|Long expected\";if(null!=e.keys&&e.hasOwnProperty(\"keys\")){if(!Array.isArray(e.keys))return\"keys: array expected\";for(var t=0;t<e.keys.length;++t)if(!$util.isInteger(e.keys[t]))return\"keys: integer[] expected\"}if(null!=e.vals&&e.hasOwnProperty(\"vals\")){\nif(!Array.isArray(e.vals))return\"vals: array expected\";for(var t=0;t<e.vals.length;++t)if(!$util.isInteger(e.vals[t]))return\"vals: integer[] expected\"}if(null!=e.info&&e.hasOwnProperty(\"info\")){var r=$root.OSMPBF.Info.verify(e.info);if(r)return\"info.\"+r}if(null!=e.refs&&e.hasOwnProperty(\"refs\")){if(!Array.isArray(e.refs))return\"refs: array expected\";for(var t=0;t<e.refs.length;++t)if(!($util.isInteger(e.refs[t])||e.refs[t]&&$util.isInteger(e.refs[t].low)&&$util.isInteger(e.refs[t].high)))return\"refs: integer|Long[] expected\"}return null},e.fromObject=function(e){if(e instanceof $root.OSMPBF.Way)return e;var t=new $root.OSMPBF.Way;if(null!=e.id&&($util.Long?(t.id=$util.Long.fromValue(e.id)).unsigned=!1:\"string\"==typeof e.id?t.id=parseInt(e.id,10):\"number\"==typeof e.id?t.id=e.id:\"object\"==typeof e.id&&(t.id=new $util.LongBits(e.id.low>>>0,e.id.high>>>0).toNumber())),e.keys){if(!Array.isArray(e.keys))throw TypeError(\".OSMPBF.Way.keys: array expected\");t.keys=[];for(var r=0;r<e.keys.length;++r)t.keys[r]=e.keys[r]>>>0}if(e.vals){if(!Array.isArray(e.vals))throw TypeError(\".OSMPBF.Way.vals: array expected\");t.vals=[];for(var r=0;r<e.vals.length;++r)t.vals[r]=e.vals[r]>>>0}if(null!=e.info){if(\"object\"!=typeof e.info)throw TypeError(\".OSMPBF.Way.info: object expected\");t.info=$root.OSMPBF.Info.fromObject(e.info)}if(e.refs){if(!Array.isArray(e.refs))throw TypeError(\".OSMPBF.Way.refs: array expected\");t.refs=[];for(var r=0;r<e.refs.length;++r)$util.Long?(t.refs[r]=$util.Long.fromValue(e.refs[r])).unsigned=!1:\"string\"==typeof e.refs[r]?t.refs[r]=parseInt(e.refs[r],10):\"number\"==typeof e.refs[r]?t.refs[r]=e.refs[r]:\"object\"==typeof e.refs[r]&&(t.refs[r]=new $util.LongBits(e.refs[r].low>>>0,e.refs[r].high>>>0).toNumber())}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.keys=[],r.vals=[],r.refs=[]),t.defaults){if($util.Long){var i=new $util.Long(0,0,!1);r.id=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else r.id=t.longs===String?\"0\":0;r.info=null}if(null!=e.id&&e.hasOwnProperty(\"id\")&&(\"number\"==typeof e.id?r.id=t.longs===String?String(e.id):e.id:r.id=t.longs===String?$util.Long.prototype.toString.call(e.id):t.longs===Number?new $util.LongBits(e.id.low>>>0,e.id.high>>>0).toNumber():e.id),e.keys&&e.keys.length){r.keys=[];for(var n=0;n<e.keys.length;++n)r.keys[n]=e.keys[n]}if(e.vals&&e.vals.length){r.vals=[];for(var n=0;n<e.vals.length;++n)r.vals[n]=e.vals[n]}if(null!=e.info&&e.hasOwnProperty(\"info\")&&(r.info=$root.OSMPBF.Info.toObject(e.info,t)),e.refs&&e.refs.length){r.refs=[];for(var n=0;n<e.refs.length;++n)\"number\"==typeof e.refs[n]?r.refs[n]=t.longs===String?String(e.refs[n]):e.refs[n]:r.refs[n]=t.longs===String?$util.Long.prototype.toString.call(e.refs[n]):t.longs===Number?new $util.LongBits(e.refs[n].low>>>0,e.refs[n].high>>>0).toNumber():e.refs[n]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),e.Relation=function(){function e(e){if(this.keys=[],this.vals=[],this.rolesSid=[],this.memids=[],this.types=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.id=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.keys=$util.emptyArray,e.prototype.vals=$util.emptyArray,e.prototype.info=null,e.prototype.rolesSid=$util.emptyArray,e.prototype.memids=$util.emptyArray,e.prototype.types=$util.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=$Writer.create()),t.uint32(8).int64(e.id),null!=e.keys&&e.keys.length){t.uint32(18).fork();for(var r=0;r<e.keys.length;++r)t.uint32(e.keys[r]);t.ldelim()}if(null!=e.vals&&e.vals.length){t.uint32(26).fork();for(var r=0;r<e.vals.length;++r)t.uint32(e.vals[r]);t.ldelim()}if(null!=e.info&&e.hasOwnProperty(\"info\")&&$root.OSMPBF.Info.encode(e.info,t.uint32(34).fork()).ldelim(),null!=e.rolesSid&&e.rolesSid.length){t.uint32(66).fork();for(var r=0;r<e.rolesSid.length;++r)t.int32(e.rolesSid[r]);t.ldelim()}if(null!=e.memids&&e.memids.length){t.uint32(74).fork();for(var r=0;r<e.memids.length;++r)t.sint64(e.memids[r]);t.ldelim()}if(null!=e.types&&e.types.length){t.uint32(82).fork();for(var r=0;r<e.types.length;++r)t.int32(e.types[r]);t.ldelim()}return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.OSMPBF.Relation;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.id=e.int64();break;case 2:if(i.keys&&i.keys.length||(i.keys=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.keys.push(e.uint32());else i.keys.push(e.uint32());break;case 3:if(i.vals&&i.vals.length||(i.vals=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.vals.push(e.uint32());else i.vals.push(e.uint32());break;case 4:i.info=$root.OSMPBF.Info.decode(e,e.uint32());break;case 8:if(i.rolesSid&&i.rolesSid.length||(i.rolesSid=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.rolesSid.push(e.int32());else i.rolesSid.push(e.int32());break;case 9:if(i.memids&&i.memids.length||(i.memids=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.memids.push(e.sint64());else i.memids.push(e.sint64());break;case 10:if(i.types&&i.types.length||(i.types=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.types.push(e.int32());else i.types.push(e.int32());break;default:e.skipType(7&n)}}if(!i.hasOwnProperty(\"id\"))throw $util.ProtocolError(\"missing required 'id'\",{instance:i});return i},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if(\"object\"!=typeof e||null===e)return\"object expected\";if(!($util.isInteger(e.id)||e.id&&$util.isInteger(e.id.low)&&$util.isInteger(e.id.high)))return\"id: integer|Long expected\";if(null!=e.keys&&e.hasOwnProperty(\"keys\")){if(!Array.isArray(e.keys))return\"keys: array expected\";for(var t=0;t<e.keys.length;++t)if(!$util.isInteger(e.keys[t]))return\"keys: integer[] expected\"}if(null!=e.vals&&e.hasOwnProperty(\"vals\")){if(!Array.isArray(e.vals))return\"vals: array expected\";for(var t=0;t<e.vals.length;++t)if(!$util.isInteger(e.vals[t]))return\"vals: integer[] expected\"}if(null!=e.info&&e.hasOwnProperty(\"info\")){var r=$root.OSMPBF.Info.verify(e.info);if(r)return\"info.\"+r}if(null!=e.rolesSid&&e.hasOwnProperty(\"rolesSid\")){if(!Array.isArray(e.rolesSid))return\"rolesSid: array expected\";for(var t=0;t<e.rolesSid.length;++t)if(!$util.isInteger(e.rolesSid[t]))return\"rolesSid: integer[] expected\"}if(null!=e.memids&&e.hasOwnProperty(\"memids\")){if(!Array.isArray(e.memids))return\"memids: array expected\";for(var t=0;t<e.memids.length;++t)if(!($util.isInteger(e.memids[t])||e.memids[t]&&$util.isInteger(e.memids[t].low)&&$util.isInteger(e.memids[t].high)))return\"memids: integer|Long[] expected\"}if(null!=e.types&&e.hasOwnProperty(\"types\")){if(!Array.isArray(e.types))return\"types: array expected\";for(var t=0;t<e.types.length;++t)switch(e.types[t]){default:return\"types: enum value[] expected\";case 0:case 1:case 2:}}return null},e.fromObject=function(e){if(e instanceof $root.OSMPBF.Relation)return e;var t=new $root.OSMPBF.Relation;if(null!=e.id&&($util.Long?(t.id=$util.Long.fromValue(e.id)).unsigned=!1:\"string\"==typeof e.id?t.id=parseInt(e.id,10):\"number\"==typeof e.id?t.id=e.id:\"object\"==typeof e.id&&(t.id=new $util.LongBits(e.id.low>>>0,e.id.high>>>0).toNumber())),e.keys){if(!Array.isArray(e.keys))throw TypeError(\".OSMPBF.Relation.keys: array expected\");t.keys=[];for(var r=0;r<e.keys.length;++r)t.keys[r]=e.keys[r]>>>0}if(e.vals){if(!Array.isArray(e.vals))throw TypeError(\".OSMPBF.Relation.vals: array expected\");t.vals=[];for(var r=0;r<e.vals.length;++r)t.vals[r]=e.vals[r]>>>0}if(null!=e.info){if(\"object\"!=typeof e.info)throw TypeError(\".OSMPBF.Relation.info: object expected\");t.info=$root.OSMPBF.Info.fromObject(e.info)}if(e.rolesSid){if(!Array.isArray(e.rolesSid))throw TypeError(\".OSMPBF.Relation.rolesSid: array expected\");t.rolesSid=[];for(var r=0;r<e.rolesSid.length;++r)t.rolesSid[r]=0|e.rolesSid[r]}if(e.memids){if(!Array.isArray(e.memids))throw TypeError(\".OSMPBF.Relation.memids: array expected\");t.memids=[];for(var r=0;r<e.memids.length;++r)$util.Long?(t.memids[r]=$util.Long.fromValue(e.memids[r])).unsigned=!1:\"string\"==typeof e.memids[r]?t.memids[r]=parseInt(e.memids[r],10):\"number\"==typeof e.memids[r]?t.memids[r]=e.memids[r]:\"object\"==typeof e.memids[r]&&(t.memids[r]=new $util.LongBits(e.memids[r].low>>>0,e.memids[r].high>>>0).toNumber())}if(e.types){if(!Array.isArray(e.types))throw TypeError(\".OSMPBF.Relation.types: array expected\");t.types=[];for(var r=0;r<e.types.length;++r)switch(e.types[r]){default:case\"NODE\":case 0:t.types[r]=0;break;case\"WAY\":case 1:t.types[r]=1;break;case\"RELATION\":case 2:t.types[r]=2}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.keys=[],r.vals=[],r.rolesSid=[],r.memids=[],r.types=[]),t.defaults){if($util.Long){var i=new $util.Long(0,0,!1);r.id=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else r.id=t.longs===String?\"0\":0;r.info=null}if(null!=e.id&&e.hasOwnProperty(\"id\")&&(\"number\"==typeof e.id?r.id=t.longs===String?String(e.id):e.id:r.id=t.longs===String?$util.Long.prototype.toString.call(e.id):t.longs===Number?new $util.LongBits(e.id.low>>>0,e.id.high>>>0).toNumber():e.id),e.keys&&e.keys.length){r.keys=[];for(var n=0;n<e.keys.length;++n)r.keys[n]=e.keys[n]}if(e.vals&&e.vals.length){r.vals=[];for(var n=0;n<e.vals.length;++n)r.vals[n]=e.vals[n]}if(null!=e.info&&e.hasOwnProperty(\"info\")&&(r.info=$root.OSMPBF.Info.toObject(e.info,t)),e.rolesSid&&e.rolesSid.length){r.rolesSid=[];for(var n=0;n<e.rolesSid.length;++n)r.rolesSid[n]=e.rolesSid[n]}if(e.memids&&e.memids.length){r.memids=[];for(var n=0;n<e.memids.length;++n)\"number\"==typeof e.memids[n]?r.memids[n]=t.longs===String?String(e.memids[n]):e.memids[n]:r.memids[n]=t.longs===String?$util.Long.prototype.toString.call(e.memids[n]):t.longs===Number?new $util.LongBits(e.memids[n].low>>>0,e.memids[n].high>>>0).toNumber():e.memids[n]}if(e.types&&e.types.length){r.types=[];for(var n=0;n<e.types.length;++n)r.types[n]=t.enums===String?$root.OSMPBF.Relation.MemberType[e.types[n]]:e.types[n]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e.MemberType=function(){var e={},t=Object.create(e);return t[e[0]=\"NODE\"]=0,t[e[1]=\"WAY\"]=1,t[e[2]=\"RELATION\"]=2,t}(),e}(),e}(),module.exports=$root;\n},{\"protobufjs/minimal\":16}],9:[function(require,module,exports){\n\"use strict\";function asPromise(e,n){for(var r=new Array(arguments.length-1),t=0,l=2,o=!0;l<arguments.length;)r[t++]=arguments[l++];return new Promise(function(l,a){r[t]=function(e){if(o)if(o=!1,e)a(e);else{for(var n=new Array(arguments.length-1),r=0;r<n.length;)n[r++]=arguments[r];l.apply(null,n)}};try{e.apply(n||null,r)}catch(e){o&&(o=!1,a(e))}})}module.exports=asPromise;\n},{}],10:[function(require,module,exports){\n\"use strict\";var base64=exports;base64.length=function(r){var a=r.length;if(!a)return 0;for(var e=0;--a%4>1&&\"=\"===r.charAt(a);)++e;return Math.ceil(3*r.length)/4-e};for(var b64=new Array(64),s64=new Array(123),i=0;i<64;)s64[b64[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;base64.encode=function(r,a,e){for(var i,n=null,t=[],o=0,s=0;a<e;){var c=r[a++];switch(s){case 0:t[o++]=b64[c>>2],i=(3&c)<<4,s=1;break;case 1:t[o++]=b64[i|c>>4],i=(15&c)<<2,s=2;break;case 2:t[o++]=b64[i|c>>6],t[o++]=b64[63&c],s=0}o>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,t)),o=0)}return s&&(t[o++]=b64[i],t[o++]=61,1===s&&(t[o++]=61)),n?(o&&n.push(String.fromCharCode.apply(String,t.slice(0,o))),n.join(\"\")):String.fromCharCode.apply(String,t.slice(0,o))};var invalidEncoding=\"invalid encoding\";base64.decode=function(r,a,e){for(var i,n=e,t=0,o=0;o<r.length;){var s=r.charCodeAt(o++);if(61===s&&t>1)break;if(void 0===(s=s64[s]))throw Error(invalidEncoding);switch(t){case 0:i=s,t=1;break;case 1:a[e++]=i<<2|(48&s)>>4,i=s,t=2;break;case 2:a[e++]=(15&i)<<4|(60&s)>>2,i=s,t=3;break;case 3:a[e++]=(3&i)<<6|s,t=0}}if(1===t)throw Error(invalidEncoding);return e-n},base64.test=function(r){return/^(?:[A-Za-z0-9+\\/]{4})*(?:[A-Za-z0-9+\\/]{2}==|[A-Za-z0-9+\\/]{3}=)?$/.test(r)};\n},{}],11:[function(require,module,exports){\n\"use strict\";function EventEmitter(){this._listeners={}}module.exports=EventEmitter,EventEmitter.prototype.on=function(t,e,i){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:i||this}),this},EventEmitter.prototype.off=function(t,e){if(void 0===t)this._listeners={};else if(void 0===e)this._listeners[t]=[];else for(var i=this._listeners[t],s=0;s<i.length;)i[s].fn===e?i.splice(s,1):++s;return this},EventEmitter.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var i=[],s=1;s<arguments.length;)i.push(arguments[s++]);for(s=0;s<e.length;)e[s].fn.apply(e[s++].ctx,i)}return this};\n},{}],12:[function(require,module,exports){\n\"use strict\";function factory(n){return\"undefined\"!=typeof Float32Array?function(){function t(n,t,e){a[0]=n,t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],t[e+3]=o[3]}function e(n,t,e){a[0]=n,t[e]=o[3],t[e+1]=o[2],t[e+2]=o[1],t[e+3]=o[0]}function r(n,t){return o[0]=n[t],o[1]=n[t+1],o[2]=n[t+2],o[3]=n[t+3],a[0]}function i(n,t){return o[3]=n[t],o[2]=n[t+1],o[1]=n[t+2],o[0]=n[t+3],a[0]}var a=new Float32Array([-0]),o=new Uint8Array(a.buffer),u=128===o[3];n.writeFloatLE=u?t:e,n.writeFloatBE=u?e:t,n.readFloatLE=u?r:i,n.readFloatBE=u?i:r}():function(){function t(n,t,e,r){var i=t<0?1:0;if(i&&(t=-t),0===t)n(1/t>0?0:2147483648,e,r);else if(isNaN(t))n(2143289344,e,r);else if(t>3.4028234663852886e38)n((i<<31|2139095040)>>>0,e,r);else if(t<1.1754943508222875e-38)n((i<<31|Math.round(t/1.401298464324817e-45))>>>0,e,r);else{var a=Math.floor(Math.log(t)/Math.LN2),o=8388607&Math.round(t*Math.pow(2,-a)*8388608);n((i<<31|a+127<<23|o)>>>0,e,r)}}function e(n,t,e){var r=n(t,e),i=2*(r>>31)+1,a=r>>>23&255,o=8388607&r;return 255===a?o?NaN:i*(1/0):0===a?1.401298464324817e-45*i*o:i*Math.pow(2,a-150)*(o+8388608)}n.writeFloatLE=t.bind(null,writeUintLE),n.writeFloatBE=t.bind(null,writeUintBE),n.readFloatLE=e.bind(null,readUintLE),n.readFloatBE=e.bind(null,readUintBE)}(),\"undefined\"!=typeof Float64Array?function(){function t(n,t,e){a[0]=n,t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],t[e+3]=o[3],t[e+4]=o[4],t[e+5]=o[5],t[e+6]=o[6],t[e+7]=o[7]}function e(n,t,e){a[0]=n,t[e]=o[7],t[e+1]=o[6],t[e+2]=o[5],t[e+3]=o[4],t[e+4]=o[3],t[e+5]=o[2],t[e+6]=o[1],t[e+7]=o[0]}function r(n,t){return o[0]=n[t],o[1]=n[t+1],o[2]=n[t+2],o[3]=n[t+3],o[4]=n[t+4],o[5]=n[t+5],o[6]=n[t+6],o[7]=n[t+7],a[0]}function i(n,t){return o[7]=n[t],o[6]=n[t+1],o[5]=n[t+2],o[4]=n[t+3],o[3]=n[t+4],o[2]=n[t+5],o[1]=n[t+6],o[0]=n[t+7],a[0]}var a=new Float64Array([-0]),o=new Uint8Array(a.buffer),u=128===o[7];n.writeDoubleLE=u?t:e,n.writeDoubleBE=u?e:t,n.readDoubleLE=u?r:i,n.readDoubleBE=u?i:r}():function(){function t(n,t,e,r,i,a){var o=r<0?1:0;if(o&&(r=-r),0===r)n(0,i,a+t),n(1/r>0?0:2147483648,i,a+e);else if(isNaN(r))n(0,i,a+t),n(2146959360,i,a+e);else if(r>1.7976931348623157e308)n(0,i,a+t),n((o<<31|2146435072)>>>0,i,a+e);else{var u;if(r<2.2250738585072014e-308)u=r/5e-324,n(u>>>0,i,a+t),n((o<<31|u/4294967296)>>>0,i,a+e);else{var l=Math.floor(Math.log(r)/Math.LN2);1024===l&&(l=1023),u=r*Math.pow(2,-l),n(4503599627370496*u>>>0,i,a+t),n((o<<31|l+1023<<20|1048576*u&1048575)>>>0,i,a+e)}}}function e(n,t,e,r,i){var a=n(r,i+t),o=n(r,i+e),u=2*(o>>31)+1,l=o>>>20&2047,f=4294967296*(1048575&o)+a;return 2047===l?f?NaN:u*(1/0):0===l?5e-324*u*f:u*Math.pow(2,l-1075)*(f+4503599627370496)}n.writeDoubleLE=t.bind(null,writeUintLE,0,4),n.writeDoubleBE=t.bind(null,writeUintBE,4,0),n.readDoubleLE=e.bind(null,readUintLE,0,4),n.readDoubleBE=e.bind(null,readUintBE,4,0)}(),n}function writeUintLE(n,t,e){t[e]=255&n,t[e+1]=n>>>8&255,t[e+2]=n>>>16&255,t[e+3]=n>>>24}function writeUintBE(n,t,e){t[e]=n>>>24,t[e+1]=n>>>16&255,t[e+2]=n>>>8&255,t[e+3]=255&n}function readUintLE(n,t){return(n[t]|n[t+1]<<8|n[t+2]<<16|n[t+3]<<24)>>>0}function readUintBE(n,t){return(n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3])>>>0}module.exports=factory(factory);\n},{}],13:[function(require,module,exports){\n\"use strict\";function inquire(moduleName){try{var mod=eval(\"quire\".replace(/^/,\"re\"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire;\n},{}],14:[function(require,module,exports){\n\"use strict\";function pool(r,n,o){var t=o||8192,u=t>>>1,l=null,e=t;return function(o){if(o<1||o>u)return r(o);e+o>t&&(l=r(t),e=0);var c=n.call(l,e,e+=o);return 7&e&&(e=1+(7|e)),c}}module.exports=pool;\n},{}],15:[function(require,module,exports){\n\"use strict\";var utf8=exports;utf8.length=function(r){for(var t=0,n=0,e=0;e<r.length;++e)n=r.charCodeAt(e),n<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&r.charCodeAt(e+1))?(++e,t+=4):t+=3;return t},utf8.read=function(r,t,n){if(n-t<1)return\"\";for(var e,o=null,a=[],i=0;t<n;)e=r[t++],e<128?a[i++]=e:e>191&&e<224?a[i++]=(31&e)<<6|63&r[t++]:e>239&&e<365?(e=((7&e)<<18|(63&r[t++])<<12|(63&r[t++])<<6|63&r[t++])-65536,a[i++]=55296+(e>>10),a[i++]=56320+(1023&e)):a[i++]=(15&e)<<12|(63&r[t++])<<6|63&r[t++],i>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),i=0);return o?(i&&o.push(String.fromCharCode.apply(String,a.slice(0,i))),o.join(\"\")):String.fromCharCode.apply(String,a.slice(0,i))},utf8.write=function(r,t,n){for(var e,o,a=n,i=0;i<r.length;++i)e=r.charCodeAt(i),e<128?t[n++]=e:e<2048?(t[n++]=e>>6|192,t[n++]=63&e|128):55296==(64512&e)&&56320==(64512&(o=r.charCodeAt(i+1)))?(e=65536+((1023&e)<<10)+(1023&o),++i,t[n++]=e>>18|240,t[n++]=e>>12&63|128,t[n++]=e>>6&63|128,t[n++]=63&e|128):(t[n++]=e>>12|224,t[n++]=e>>6&63|128,t[n++]=63&e|128);return n-a};\n},{}],16:[function(require,module,exports){\n\"use strict\";module.exports=require(\"./src/index-minimal\");\n},{\"./src/index-minimal\":17}],17:[function(require,module,exports){\n\"use strict\";function configure(){protobuf.Reader._configure(protobuf.BufferReader),protobuf.util._configure()}var protobuf=exports;protobuf.build=\"minimal\",protobuf.Writer=require(\"./writer\"),protobuf.BufferWriter=require(\"./writer_buffer\"),protobuf.Reader=require(\"./reader\"),protobuf.BufferReader=require(\"./reader_buffer\"),protobuf.util=require(\"./util/minimal\"),protobuf.rpc=require(\"./rpc\"),protobuf.roots=require(\"./roots\"),protobuf.configure=configure,protobuf.Writer._configure(protobuf.BufferWriter),configure();\n},{\"./reader\":18,\"./reader_buffer\":19,\"./roots\":20,\"./rpc\":21,\"./util/minimal\":24,\"./writer\":25,\"./writer_buffer\":26}],18:[function(require,module,exports){\n\"use strict\";function indexOutOfRange(t,i){return RangeError(\"index out of range: \"+t.pos+\" + \"+(i||1)+\" > \"+t.len)}function Reader(t){this.buf=t,this.pos=0,this.len=t.length}function readLongVarint(){var t=new LongBits(0,0),i=0;if(!(this.len-this.pos>4)){for(;i<3;++i){if(this.pos>=this.len)throw indexOutOfRange(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*i)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*i)>>>0,t}for(;i<4;++i)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*i)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(i=0,this.len-this.pos>4){for(;i<5;++i)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*i+3)>>>0,this.buf[this.pos++]<128)return t}else for(;i<5;++i){if(this.pos>=this.len)throw indexOutOfRange(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*i+3)>>>0,this.buf[this.pos++]<128)return t}throw Error(\"invalid varint encoding\")}function readFixed32_end(t,i){return(t[i-4]|t[i-3]<<8|t[i-2]<<16|t[i-1]<<24)>>>0}function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}module.exports=Reader;var util=require(\"./util/minimal\"),BufferReader,LongBits=util.LongBits,utf8=util.utf8,create_array=\"undefined\"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new Reader(t);throw Error(\"illegal buffer\")}:function(t){if(Array.isArray(t))return new Reader(t);throw Error(\"illegal buffer\")};Reader.create=util.Buffer?function(t){return(Reader.create=function(t){return util.Buffer.isBuffer(t)?new BufferReader(t):create_array(t)})(t)}:create_array,Reader.prototype._slice=util.Array.prototype.subarray||util.Array.prototype.slice,Reader.prototype.uint32=function(){var t=4294967295;return function(){if(t=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return t;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return t}}(),Reader.prototype.int32=function(){return 0|this.uint32()},Reader.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},Reader.prototype.bool=function(){return 0!==this.uint32()},Reader.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return 0|readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var t=util.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},Reader.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var t=util.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},Reader.prototype.bytes=function(){var t=this.uint32(),i=this.pos,e=this.pos+t;if(e>this.len)throw indexOutOfRange(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(i,e):i===e?new this.buf.constructor(0):this._slice.call(this.buf,i,e)},Reader.prototype.string=function(){var t=this.bytes();return utf8.read(t,0,t.length)},Reader.prototype.skip=function(t){if(\"number\"==typeof t){if(this.pos+t>this.len)throw indexOutOfRange(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(128&this.buf[this.pos++]);return this},Reader.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error(\"invalid wire type \"+t+\" at offset \"+this.pos)}return this},Reader._configure=function(t){BufferReader=t;var i=util.Long?\"toLong\":\"toNumber\";util.merge(Reader.prototype,{int64:function(){return readLongVarint.call(this)[i](!1)},uint64:function(){return readLongVarint.call(this)[i](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[i](!1)},fixed64:function(){return readFixed64.call(this)[i](!0)},sfixed64:function(){return readFixed64.call(this)[i](!1)}})};\n},{\"./util/minimal\":24}],19:[function(require,module,exports){\n\"use strict\";function BufferReader(e){Reader.call(this,e)}module.exports=BufferReader;var Reader=require(\"./reader\");(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util=require(\"./util/minimal\");util.Buffer&&(BufferReader.prototype._slice=util.Buffer.prototype.slice),BufferReader.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len))};\n},{\"./reader\":18,\"./util/minimal\":24}],20:[function(require,module,exports){\n\"use strict\";module.exports={};\n},{}],21:[function(require,module,exports){\n\"use strict\";var rpc=exports;rpc.Service=require(\"./rpc/service\");\n},{\"./rpc/service\":22}],22:[function(require,module,exports){\n\"use strict\";function Service(e,t,r){if(\"function\"!=typeof e)throw TypeError(\"rpcImpl must be a function\");util.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}module.exports=Service;var util=require(\"../util/minimal\");(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service,Service.prototype.rpcCall=function e(t,r,i,n,o){if(!n)throw TypeError(\"request must be specified\");var l=this;if(!o)return util.asPromise(e,l,t,r,i,n);if(!l.rpcImpl)return void setTimeout(function(){o(Error(\"already ended\"))},0);try{return l.rpcImpl(t,r[l.requestDelimited?\"encodeDelimited\":\"encode\"](n).finish(),function(e,r){if(e)return l.emit(\"error\",e,t),o(e);if(null===r)return void l.end(!0);if(!(r instanceof i))try{r=i[l.responseDelimited?\"decodeDelimited\":\"decode\"](r)}catch(e){return l.emit(\"error\",e,t),o(e)}return l.emit(\"data\",r,t),o(null,r)})}catch(e){return l.emit(\"error\",e,t),void setTimeout(function(){o(e)},0)}},Service.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit(\"end\").off()),this};\n},{\"../util/minimal\":24}],23:[function(require,module,exports){\n\"use strict\";function LongBits(t,o){this.lo=t>>>0,this.hi=o>>>0}module.exports=LongBits;var util=require(\"../util/minimal\"),zero=LongBits.zero=new LongBits(0,0);zero.toNumber=function(){return 0},zero.zzEncode=zero.zzDecode=function(){return this},zero.length=function(){return 1};var zeroHash=LongBits.zeroHash=\"\\0\\0\\0\\0\\0\\0\\0\\0\";LongBits.fromNumber=function(t){if(0===t)return zero;var o=t<0;o&&(t=-t);var i=t>>>0,r=(t-i)/4294967296>>>0;return o&&(r=~r>>>0,i=~i>>>0,++i>4294967295&&(i=0,++r>4294967295&&(r=0))),new LongBits(i,r)},LongBits.from=function(t){if(\"number\"==typeof t)return LongBits.fromNumber(t);if(util.isString(t)){if(!util.Long)return LongBits.fromNumber(parseInt(t,10));t=util.Long.fromString(t)}return t.low||t.high?new LongBits(t.low>>>0,t.high>>>0):zero},LongBits.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var o=1+~this.lo>>>0,i=~this.hi>>>0;return o||(i=i+1>>>0),-(o+4294967296*i)}return this.lo+4294967296*this.hi},LongBits.prototype.toLong=function(t){return util.Long?new util.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var charCodeAt=String.prototype.charCodeAt;LongBits.fromHash=function(t){return t===zeroHash?zero:new LongBits((charCodeAt.call(t,0)|charCodeAt.call(t,1)<<8|charCodeAt.call(t,2)<<16|charCodeAt.call(t,3)<<24)>>>0,(charCodeAt.call(t,4)|charCodeAt.call(t,5)<<8|charCodeAt.call(t,6)<<16|charCodeAt.call(t,7)<<24)>>>0)},LongBits.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},LongBits.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},LongBits.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},LongBits.prototype.length=function(){var t=this.lo,o=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return 0===i?0===o?t<16384?t<128?1:2:t<2097152?3:4:o<16384?o<128?5:6:o<2097152?7:8:i<128?9:10};\n},{\"../util/minimal\":24}],24:[function(require,module,exports){\n\"use strict\";function merge(t,e,r){for(var i=Object.keys(e),o=0;o<i.length;++o)void 0!==t[i[o]]&&r||(t[i[o]]=e[i[o]]);return t}function newError(t){function e(t,r){if(!(this instanceof e))return new e(t,r);Object.defineProperty(this,\"message\",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,\"stack\",{value:(new Error).stack||\"\"}),r&&merge(this,r)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,\"name\",{get:function(){return t}}),e.prototype.toString=function(){return this.name+\": \"+this.message},e}var util=exports;util.asPromise=require(\"@protobufjs/aspromise\"),util.base64=require(\"@protobufjs/base64\"),util.EventEmitter=require(\"@protobufjs/eventemitter\"),util.float=require(\"@protobufjs/float\"),util.inquire=require(\"@protobufjs/inquire\"),util.utf8=require(\"@protobufjs/utf8\"),util.pool=require(\"@protobufjs/pool\"),util.LongBits=require(\"./longbits\"),util.global=\"undefined\"!=typeof window&&window||\"undefined\"!=typeof __webpack_require__.g&&__webpack_require__.g||\"undefined\"!=typeof self&&self||this,util.emptyArray=Object.freeze?Object.freeze([]):[],util.emptyObject=Object.freeze?Object.freeze({}):{},util.isNode=Boolean(util.global.process&&util.global.process.versions&&util.global.process.versions.node),util.isInteger=Number.isInteger||function(t){return\"number\"==typeof t&&isFinite(t)&&Math.floor(t)===t},util.isString=function(t){return\"string\"==typeof t||t instanceof String},util.isObject=function(t){return t&&\"object\"==typeof t},util.isset=util.isSet=function(t,e){var r=t[e];return!(null==r||!t.hasOwnProperty(e))&&(\"object\"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},util.Buffer=function(){try{var t=util.inquire(\"buffer\").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),util._Buffer_from=null,util._Buffer_allocUnsafe=null,util.newBuffer=function(t){return\"number\"==typeof t?util.Buffer?util._Buffer_allocUnsafe(t):new util.Array(t):util.Buffer?util._Buffer_from(t):\"undefined\"==typeof Uint8Array?t:new Uint8Array(t)},util.Array=\"undefined\"!=typeof Uint8Array?Uint8Array:Array,util.Long=util.global.dcodeIO&&util.global.dcodeIO.Long||util.global.Long||util.inquire(\"long\"),util.key2Re=/^true|false|0|1$/,util.key32Re=/^-?(?:0|[1-9][0-9]*)$/,util.key64Re=/^(?:[\\\\x00-\\\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,util.longToHash=function(t){return t?util.LongBits.from(t).toHash():util.LongBits.zeroHash},util.longFromHash=function(t,e){var r=util.LongBits.fromHash(t);return util.Long?util.Long.fromBits(r.lo,r.hi,e):r.toNumber(Boolean(e))},util.merge=merge,util.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},util.newError=newError,util.ProtocolError=newError(\"ProtocolError\"),util.oneOfGetter=function(t){for(var e={},r=0;r<t.length;++r)e[t[r]]=1;return function(){for(var t=Object.keys(this),r=t.length-1;r>-1;--r)if(1===e[t[r]]&&void 0!==this[t[r]]&&null!==this[t[r]])return t[r]}},util.oneOfSetter=function(t){return function(e){for(var r=0;r<t.length;++r)t[r]!==e&&delete this[t[r]]}},util.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},util._configure=function(){var t=util.Buffer;if(!t)return void(util._Buffer_from=util._Buffer_allocUnsafe=null);util._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,r){return new t(e,r)},util._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e)}};\n},{\"./longbits\":23,\"@protobufjs/aspromise\":9,\"@protobufjs/base64\":10,\"@protobufjs/eventemitter\":11,\"@protobufjs/float\":12,\"@protobufjs/inquire\":13,\"@protobufjs/pool\":14,\"@protobufjs/utf8\":15}],25:[function(require,module,exports){\n\"use strict\";function Op(t,i,r){this.fn=t,this.len=i,this.next=void 0,this.val=r}function noop(){}function State(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function Writer(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}function writeByte(t,i,r){i[r]=255&t}function writeVarint32(t,i,r){for(;t>127;)i[r++]=127&t|128,t>>>=7;i[r]=t}function VarintOp(t,i){this.len=t,this.next=void 0,this.val=i}function writeVarint64(t,i,r){for(;t.hi;)i[r++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)i[r++]=127&t.lo|128,t.lo=t.lo>>>7;i[r++]=t.lo}function writeFixed32(t,i,r){i[r]=255&t,i[r+1]=t>>>8&255,i[r+2]=t>>>16&255,i[r+3]=t>>>24}module.exports=Writer;var util=require(\"./util/minimal\"),BufferWriter,LongBits=util.LongBits,base64=util.base64,utf8=util.utf8;Writer.create=util.Buffer?function(){return(Writer.create=function(){return new BufferWriter})()}:function(){return new Writer},Writer.alloc=function(t){return new util.Array(t)},util.Array!==Array&&(Writer.alloc=util.pool(Writer.alloc,util.Array.prototype.subarray)),Writer.prototype._push=function(t,i,r){return this.tail=this.tail.next=new Op(t,i,r),this.len+=i,this},VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new VarintOp((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},Writer.prototype.int32=function(t){return t<0?this._push(writeVarint64,10,LongBits.fromNumber(t)):this.uint32(t)},Writer.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},Writer.prototype.uint64=function(t){var i=LongBits.from(t);return this._push(writeVarint64,i.length(),i)},Writer.prototype.int64=Writer.prototype.uint64,Writer.prototype.sint64=function(t){var i=LongBits.from(t).zzEncode();return this._push(writeVarint64,i.length(),i)},Writer.prototype.bool=function(t){return this._push(writeByte,1,t?1:0)},Writer.prototype.fixed32=function(t){return this._push(writeFixed32,4,t>>>0)},Writer.prototype.sfixed32=Writer.prototype.fixed32,Writer.prototype.fixed64=function(t){var i=LongBits.from(t);return this._push(writeFixed32,4,i.lo)._push(writeFixed32,4,i.hi)},Writer.prototype.sfixed64=Writer.prototype.fixed64,Writer.prototype.float=function(t){return this._push(util.float.writeFloatLE,4,t)},Writer.prototype.double=function(t){return this._push(util.float.writeDoubleLE,8,t)};var writeBytes=util.Array.prototype.set?function(t,i,r){i.set(t,r)}:function(t,i,r){for(var e=0;e<t.length;++e)i[r+e]=t[e]};Writer.prototype.bytes=function(t){var i=t.length>>>0;if(!i)return this._push(writeByte,1,0);if(util.isString(t)){var r=Writer.alloc(i=base64.length(t));base64.decode(t,r,0),t=r}return this.uint32(i)._push(writeBytes,i,t)},Writer.prototype.string=function(t){var i=utf8.length(t);return i?this.uint32(i)._push(utf8.write,i,t):this._push(writeByte,1,0)},Writer.prototype.fork=function(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this},Writer.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this},Writer.prototype.ldelim=function(){var t=this.head,i=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=t.next,this.tail=i,this.len+=r),this},Writer.prototype.finish=function(){for(var t=this.head.next,i=this.constructor.alloc(this.len),r=0;t;)t.fn(t.val,i,r),r+=t.len,t=t.next;return i},Writer._configure=function(t){BufferWriter=t};\n},{\"./util/minimal\":24}],26:[function(require,module,exports){\n\"use strict\";function BufferWriter(){Writer.call(this)}function writeStringBuffer(r,t,e){r.length<40?util.utf8.write(r,t,e):t.utf8Write(r,e)}module.exports=BufferWriter;var Writer=require(\"./writer\");(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util=require(\"./util/minimal\"),Buffer=util.Buffer;BufferWriter.alloc=function(r){return(BufferWriter.alloc=util._Buffer_allocUnsafe)(r)};var writeBytesBuffer=Buffer&&Buffer.prototype instanceof Uint8Array&&\"set\"===Buffer.prototype.set.name?function(r,t,e){t.set(r,e)}:function(r,t,e){if(r.copy)r.copy(t,e,0,r.length);else for(var f=0;f<r.length;)t[e++]=r[f++]};BufferWriter.prototype.bytes=function(r){util.isString(r)&&(r=util._Buffer_from(r,\"base64\"));var t=r.length>>>0;return this.uint32(t),t&&this._push(writeBytesBuffer,t,r),this},BufferWriter.prototype.string=function(r){var t=Buffer.byteLength(r);return this.uint32(t),t&&this._push(writeStringBuffer,t,r),this};\n},{\"./util/minimal\":24,\"./writer\":25}],27:[function(require,module,exports){\n!function(e,t){\"use strict\";function n(e){return c[i]=a.apply(t,e),i++}function a(e){var n=[].slice.call(arguments,1);return function(){\"function\"==typeof e?e.apply(t,n):new Function(\"\"+e)()}}function o(e){if(u)setTimeout(a(o,e),0);else{var t=c[e];if(t){u=!0;try{t()}finally{r(e),u=!1}}}}function r(e){delete c[e]}if(!e.setImmediate){var s,i=1,c={},u=!1,f=e.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(e);l=l&&l.setTimeout?l:e,\"[object process]\"==={}.toString.call(e.process)?function(){s=function(){var e=n(arguments);return process.nextTick(a(o,e)),e}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage(\"\",\"*\"),e.onmessage=n,t}}()?function(){var t=\"setImmediate$\"+Math.random()+\"$\",a=function(n){n.source===e&&\"string\"==typeof n.data&&0===n.data.indexOf(t)&&o(+n.data.slice(t.length))};e.addEventListener?e.addEventListener(\"message\",a,!1):e.attachEvent(\"onmessage\",a),s=function(){var a=n(arguments);return e.postMessage(t+a,\"*\"),a}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){o(e.data)},s=function(){var t=n(arguments);return e.port2.postMessage(t),t}}():f&&\"onreadystatechange\"in f.createElement(\"script\")?function(){var e=f.documentElement;s=function(){var t=n(arguments),a=f.createElement(\"script\");return a.onreadystatechange=function(){o(t),a.onreadystatechange=null,e.removeChild(a),a=null},e.appendChild(a),t}}():function(){s=function(){var e=n(arguments);return setTimeout(a(o,e),0),e}}(),l.setImmediate=s,l.clearImmediate=r}}(new Function(\"return this\")());\n},{}],28:[function(require,module,exports){\n(function(){\"use strict\";function t(t,r){var i=t.split(\".\"),e=a;!(i[0]in e)&&e.execScript&&e.execScript(\"var \"+i[0]);for(var s;i.length&&(s=i.shift());)i.length||void 0===r?e=e[s]?e[s]:e[s]={}:e[s]=r}function r(t){var r,i,e,s,h,n,a,o,l,u,c=t.length,b=0,y=Number.POSITIVE_INFINITY;for(o=0;o<c;++o)t[o]>b&&(b=t[o]),t[o]<y&&(y=t[o]);for(r=1<<b,i=new(f?Uint32Array:Array)(r),e=1,s=0,h=2;e<=b;){for(o=0;o<c;++o)if(t[o]===e){for(n=0,a=s,l=0;l<e;++l)n=n<<1|1&a,a>>=1;for(u=e<<16|o,l=n;l<r;l+=h)i[l]=u;++s}++e,s<<=1,h<<=1}return[i,b,y]}function i(t,r){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=f?new Uint8Array(t):t,this.m=!1,this.i=l,this.s=!1,!r&&(r={})||(r.index&&(this.a=r.index),r.bufferSize&&(this.h=r.bufferSize),r.bufferType&&(this.i=r.bufferType),r.resize&&(this.s=r.resize)),this.i){case o:this.b=32768,this.c=new(f?Uint8Array:Array)(32768+this.h+258);break;case l:this.b=0,this.c=new(f?Uint8Array:Array)(this.h),this.e=this.A,this.n=this.w,this.j=this.z;break;default:throw Error(\"invalid inflate mode\")}}function e(t,r){for(var i,e=t.f,s=t.d,h=t.input,n=t.a,a=h.length;s<r;){if(n>=a)throw Error(\"input buffer is broken\");e|=h[n++]<<s,s+=8}return i=e&(1<<r)-1,t.f=e>>>r,t.d=s-r,t.a=n,i}function s(t,r){for(var i,e,s=t.f,h=t.d,n=t.input,a=t.a,f=n.length,o=r[0],l=r[1];h<l&&!(a>=f);)s|=n[a++]<<h,h+=8;return i=o[s&(1<<l)-1],e=i>>>16,t.f=s>>e,t.d=h-e,t.a=a,65535&i}function h(t){function i(t,r,i){var h,n,a,f=this.q;for(a=0;a<t;)switch(h=s(this,r)){case 16:for(n=3+e(this,2);n--;)i[a++]=f;break;case 17:for(n=3+e(this,3);n--;)i[a++]=0;f=0;break;case 18:for(n=11+e(this,7);n--;)i[a++]=0;f=0;break;default:f=i[a++]=h}return this.q=f,i}var h,n,a,o,l=e(t,5)+257,u=e(t,5)+1,c=e(t,4)+4,b=new(f?Uint8Array:Array)(p.length);for(o=0;o<c;++o)b[p[o]]=e(t,3);if(!f)for(o=c,c=b.length;o<c;++o)b[p[o]]=0;h=r(b),n=new(f?Uint8Array:Array)(l),a=new(f?Uint8Array:Array)(u),t.q=0,t.j(r(i.call(t,l,h,n)),r(i.call(t,u,h,a)))}function n(t,r){var e,s;switch(this.input=t,this.a=0,!r&&(r={})||(r.index&&(this.a=r.index),r.verify&&(this.B=r.verify)),e=t[this.a++],s=t[this.a++],15&e){case j:this.method=j;break;default:throw Error(\"unsupported compression method\")}if(0!=((e<<8)+s)%31)throw Error(\"invalid fcheck flag:\"+((e<<8)+s)%31);if(32&s)throw Error(\"fdict flag is not supported\");this.r=new i(t,{index:this.a,bufferSize:r.bufferSize,bufferType:r.bufferType,resize:r.resize})}var a=this,f=\"undefined\"!=typeof Uint8Array&&\"undefined\"!=typeof Uint16Array&&\"undefined\"!=typeof Uint32Array&&\"undefined\"!=typeof DataView,o=0,l=1,u={u:o,t:l};i.prototype.k=function(){for(;!this.m;){var t=e(this,3);switch(1&t&&(this.m=!0),t>>>=1){case 0:var r=this.input,i=this.a,s=this.c,n=this.b,a=r.length,u=void 0,c=void 0,b=s.length,y=void 0;if(this.d=this.f=0,i+1>=a)throw Error(\"invalid uncompressed block header: LEN\");if(u=r[i++]|r[i++]<<8,i+1>=a)throw Error(\"invalid uncompressed block header: NLEN\");if(c=r[i++]|r[i++]<<8,u===~c)throw Error(\"invalid uncompressed block header: length verify\");if(i+u>r.length)throw Error(\"input buffer is broken\");switch(this.i){case o:for(;n+u>s.length;){if(y=b-n,u-=y,f)s.set(r.subarray(i,i+y),n),n+=y,i+=y;else for(;y--;)s[n++]=r[i++];this.b=n,s=this.e(),n=this.b}break;case l:for(;n+u>s.length;)s=this.e({p:2});break;default:throw Error(\"invalid inflate mode\")}if(f)s.set(r.subarray(i,i+u),n),n+=u,i+=u;else for(;u--;)s[n++]=r[i++];this.a=i,this.b=n,this.c=s;break;case 1:this.j(T,S);break;case 2:h(this);break;default:throw Error(\"unknown BTYPE: \"+t)}}return this.n()};var c,b,y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],p=f?new Uint16Array(y):y,d=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],v=f?new Uint16Array(d):d,g=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],w=f?new Uint8Array(g):g,A=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],k=f?new Uint16Array(A):A,U=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],E=f?new Uint8Array(U):U,m=new(f?Uint8Array:Array)(288);for(c=0,b=m.length;c<b;++c)m[c]=143>=c?8:255>=c?9:279>=c?7:8;var z,I,T=r(m),x=new(f?Uint8Array:Array)(30);for(z=0,I=x.length;z<I;++z)x[z]=5;var S=r(x);i.prototype.j=function(t,r){var i=this.c,h=this.b;this.o=t;for(var n,a,f,o,l=i.length-258;256!==(n=s(this,t));)if(256>n)h>=l&&(this.b=h,i=this.e(),h=this.b),i[h++]=n;else for(a=n-257,o=v[a],0<w[a]&&(o+=e(this,w[a])),n=s(this,r),f=k[n],0<E[n]&&(f+=e(this,E[n])),h>=l&&(this.b=h,i=this.e(),h=this.b);o--;)i[h]=i[h++-f];for(;8<=this.d;)this.d-=8,this.a--;this.b=h},i.prototype.z=function(t,r){var i=this.c,h=this.b;this.o=t;for(var n,a,f,o,l=i.length;256!==(n=s(this,t));)if(256>n)h>=l&&(i=this.e(),l=i.length),i[h++]=n;else for(a=n-257,o=v[a],0<w[a]&&(o+=e(this,w[a])),n=s(this,r),f=k[n],0<E[n]&&(f+=e(this,E[n])),h+o>l&&(i=this.e(),l=i.length);o--;)i[h]=i[h++-f];for(;8<=this.d;)this.d-=8,this.a--;this.b=h},i.prototype.e=function(){var t,r,i=new(f?Uint8Array:Array)(this.b-32768),e=this.b-32768,s=this.c;if(f)i.set(s.subarray(32768,i.length));else for(t=0,r=i.length;t<r;++t)i[t]=s[t+32768];if(this.g.push(i),this.l+=i.length,f)s.set(s.subarray(e,e+32768));else for(t=0;32768>t;++t)s[t]=s[e+t];return this.b=32768,s},i.prototype.A=function(t){var r,i,e,s,h=this.input.length/this.a+1|0,n=this.input,a=this.c;return t&&(\"number\"==typeof t.p&&(h=t.p),\"number\"==typeof t.v&&(h+=t.v)),2>h?(i=(n.length-this.a)/this.o[2],s=i/2*258|0,e=s<a.length?a.length+s:a.length<<1):e=a.length*h,f?(r=new Uint8Array(e),r.set(a)):r=a,this.c=r},i.prototype.n=function(){var t,r,i,e,s,h=0,n=this.c,a=this.g,o=new(f?Uint8Array:Array)(this.l+(this.b-32768));if(0===a.length)return f?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(r=0,i=a.length;r<i;++r)for(t=a[r],e=0,s=t.length;e<s;++e)o[h++]=t[e];for(r=32768,i=this.b;r<i;++r)o[h++]=n[r];return this.g=[],this.buffer=o},i.prototype.w=function(){var t,r=this.b;return f?this.s?(t=new Uint8Array(r),t.set(this.c.subarray(0,r))):t=this.c.subarray(0,r):(this.c.length>r&&(this.c.length=r),t=this.c),this.buffer=t},n.prototype.k=function(){var t,r,i=this.input;if(t=this.r.k(),this.a=this.r.a,this.B){r=(i[this.a++]<<24|i[this.a++]<<16|i[this.a++]<<8|i[this.a++])>>>0;var e=t;if(\"string\"==typeof e){var s,h,n=e.split(\"\");for(s=0,h=n.length;s<h;s++)n[s]=(255&n[s].charCodeAt(0))>>>0;e=n}for(var a,f=1,o=0,l=e.length,u=0;0<l;){a=1024<l?1024:l,l-=a;do{f+=e[u++],o+=f}while(--a);f%=65521,o%=65521}if(r!==(o<<16|f)>>>0)throw Error(\"invalid adler-32 checksum\")}return t};var j=8;t(\"Zlib.Inflate\",n),t(\"Zlib.Inflate.prototype.decompress\",n.prototype.k);var N,B,O,q,L={ADAPTIVE:u.t,BLOCK:u.u};if(Object.keys)N=Object.keys(L);else for(B in N=[],O=0,L)N[O++]=B;for(O=0,q=N.length;O<q;++O)B=N[O],t(\"Zlib.Inflate.BufferType.\"+B,L[B])}).call(this);\n},{}]},{},[7])(7)\n});\n\n\n//# sourceMappingURL=osm-read-pbf.map.json//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUUsTUFBTSw0Q0FBNEMsMENBQTBDLFVBQVUsSUFBSSxlQUFlLDJCQUEyQixNQUFNLG1CQUFtQixNQUFNLGVBQWUsTUFBTSwwQ0FBMEMsaUJBQWlCLHFqQkFBcWpCLG1CQUFtQixJQUFJLHNDQUFzQyw2Q0FBNkMsbUJBQW1CLElBQUksV0FBVyxXQUFXLDRCQUE0QixzQkFBc0IsU0FBUywrQkFBK0Isb0JBQW9CLHdEQUF3RCxvSUFBb0ksSUFBSSxlQUFlLEtBQUssVUFBVSxvQkFBb0IsU0FBUyw2QkFBNkIsc0JBQXNCLFNBQVMsMkJBQTJCLG9CQUFvQixpREFBaUQsOEhBQThILElBQUksZUFBZSxLQUFLLFVBQVUsb0JBQW9CLFNBQVMsMEJBQTBCLHdFQUF3RSx1Q0FBdUMsd0JBQXdCLElBQUksb0JBQW9CLGtFQUFrRSxhQUFhLFFBQVEsZ0JBQWdCLHNCQUFzQiwyQkFBMkIsaUVBQWlFLHdOQUF3TiwwQkFBMEIscUZBQXFGLGtGQUFrRixtQkFBbUIsSUFBSSw4QkFBOEIsSUFBSSxnQkFBZ0IscUJBQXFCLElBQUksZ0JBQWdCLCtCQUErQiwwQkFBMEIsZUFBZSxxSkFBcUosMEJBQTBCLHFCQUFxQix3Q0FBd0MsbUVBQW1FLFFBQVEsdUJBQXVCLHNCQUFzQixtQkFBbUIsSUFBSSxzQ0FBc0MsSUFBSSxpQ0FBaUMsSUFBSSxFQUFFLHFCQUFxQixHQUFHLGVBQWUsV0FBVyxrQkFBa0IsOERBQThELFVBQVUsUUFBUSx5RUFBeUUsZUFBZSx3QkFBd0IsZ0NBQWdDLGtDQUFrQyxtQkFBbUIsSUFBSSxnREFBZ0Q7QUFDNW5OLENBQUMsR0FBRyxFQUFFLEdBQUc7QUFDVCxDQUFDOzs7QUFHRCIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYmdsLXByb2JlLTIvLi9zcmMvZXh0ZXJuYWwvb3NtLXJlYWQtcGJmLmpzPzY5YjUiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09XCJvYmplY3RcIiYmdHlwZW9mIG1vZHVsZSE9PVwidW5kZWZpbmVkXCIpe21vZHVsZS5leHBvcnRzPWYoKX1lbHNlIGlmKHR5cGVvZiBkZWZpbmU9PT1cImZ1bmN0aW9uXCImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT1cInVuZGVmaW5lZFwiKXtnPXdpbmRvd31lbHNlIGlmKHR5cGVvZiBnbG9iYWwhPT1cInVuZGVmaW5lZFwiKXtnPWdsb2JhbH1lbHNlIGlmKHR5cGVvZiBzZWxmIT09XCJ1bmRlZmluZWRcIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcucGJmUGFyc2VyID0gZigpfX0pKGZ1bmN0aW9uKCl7dmFyIGRlZmluZSxtb2R1bGUsZXhwb3J0cztyZXR1cm4gKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSh7MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5mdW5jdGlvbiByZWFkQmxvYkhlYWRlclNpemUoZSx0LG4scil7cmV0dXJuIHIobnVsbCxuZXcgRGF0YVZpZXcoZSkuZ2V0SW50MzIodCwhMSkpfWZ1bmN0aW9uIHJlYWRQQkZFbGVtZW50KGUsdCxuLHIsbyl7dmFyIGk9bmV3IFVpbnQ4QXJyYXkobik7aS5zZXQobmV3IFVpbnQ4QXJyYXkoZSx0LG4pKSxzZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXtidWYucmVhZFBCRkVsZW1lbnRGcm9tQnVmZmVyKGkscixvKX0pfWZ1bmN0aW9uIGdldEZpbGVTaXplKGUsdCl7cmV0dXJuIHQobnVsbCxlLmJ5dGVMZW5ndGgpfWZ1bmN0aW9uIGdldChlLHQpe3ZhciBuPW5ldyBYTUxIdHRwUmVxdWVzdDtuLm9wZW4oXCJHRVRcIixlLCEwKSxuLnJlc3BvbnNlVHlwZT1cImFycmF5YnVmZmVyXCIsbi5vbmVycm9yPWZ1bmN0aW9uKGUpe3QobmV3IEVycm9yKHRoaXMuc3RhdHVzK1wiOiBcIit0aGlzLnN0YXR1c1RleHQpKX0sbi5vbmxvYWQ9ZnVuY3Rpb24oZSl7dChudWxsLHRoaXMucmVzcG9uc2UpfSxuLnNlbmQoKX1mdW5jdGlvbiBvcGVuKGUsdCl7ZS5maWxlUGF0aD9nZXQoZS5maWxlUGF0aCx0KTplLmJ1ZmZlcj90KG51bGwsZS5idWZmZXIpOnQobmV3IEVycm9yKCdVc2UgZWl0aGVyIHRoZSBcImZpbGVQYXRoXCIgb3B0aW9uIHRvIHBhc3MgYW4gVVJMIG9yIHRoZSBcImJ1ZmZlclwiIG9wdGlvbiB0byBwYXNzIGFuIEFycmF5QnVmZmVyLicpKX1mdW5jdGlvbiBjbG9zZShlLHQpe3QmJnQobnVsbCl9dmFyIGJ1Zj1yZXF1aXJlKFwiLi4vYnVmZmVyLmpzXCIpO3JlcXVpcmUoXCJzZXRpbW1lZGlhdGVcIiksbW9kdWxlLmV4cG9ydHM9e3JlYWRCbG9iSGVhZGVyU2l6ZTpyZWFkQmxvYkhlYWRlclNpemUscmVhZFBCRkVsZW1lbnQ6cmVhZFBCRkVsZW1lbnQsZ2V0RmlsZVNpemU6Z2V0RmlsZVNpemUsb3BlbjpvcGVuLGNsb3NlOmNsb3NlfTtcbn0se1wiLi4vYnVmZmVyLmpzXCI6NCxcInNldGltbWVkaWF0ZVwiOjI3fV0sMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5mdW5jdGlvbiByZWFkQmxvYkhlYWRlclNpemUoZSxyLG4saSl7cmVhZChlLHIsbixmdW5jdGlvbihlLHIpe2lmKGUpcmV0dXJuIGkoZSk7dmFyIG49bmV3IERhdGFWaWV3KHIpLmdldEludDMyKDAsITEpO3JldHVybiBpKG51bGwsbil9KX1mdW5jdGlvbiByZWFkUEJGRWxlbWVudChlLHIsbixpLGwpe3JlYWQoZSxyLG4sZnVuY3Rpb24oZSxyKXtpZihlKXJldHVybiBsKGUpO2J1Zi5yZWFkUEJGRWxlbWVudEZyb21CdWZmZXIocixpLGwpfSl9ZnVuY3Rpb24gZ2V0RmlsZVNpemUoZSxyKXtyZXR1cm4gcihudWxsLGUuc2l6ZSl9ZnVuY3Rpb24gcmVhZChlLHIsbixpKXt2YXIgbCx0O2w9bmV3IEZpbGVSZWFkZXIsbC5vbmVycm9yPWZ1bmN0aW9uKGUpe3JldHVybiBpKG5ldyBFcnJvcihcIkVycm9yIHJlYWRpbmcgZmlsZSAoXCIrbC5lcnJvci5jb2RlK1wiKVwiKSl9LGwub25sb2FkPWZ1bmN0aW9uKGUpe3JldHVybiBpKG51bGwsbC5yZXN1bHQpfSx0PWUud2Via2l0U2xpY2U/ZS53ZWJraXRTbGljZShyLHIrbik6ZS5zbGljZShyLHIrbiksbC5yZWFkQXNBcnJheUJ1ZmZlcih0KX1mdW5jdGlvbiBvcGVuKGUscil7cmV0dXJuIHIobnVsbCxlLmZpbGUpfWZ1bmN0aW9uIGNsb3NlKGUscil7aWYocilyZXR1cm4gcihudWxsKX12YXIgYnVmPXJlcXVpcmUoXCIuLi9idWZmZXIuanNcIik7bW9kdWxlLmV4cG9ydHM9e3JlYWRCbG9iSGVhZGVyU2l6ZTpyZWFkQmxvYkhlYWRlclNpemUscmVhZFBCRkVsZW1lbnQ6cmVhZFBCRkVsZW1lbnQsZ2V0RmlsZVNpemU6Z2V0RmlsZVNpemUsb3BlbjpvcGVuLGNsb3NlOmNsb3NlfTtcbn0se1wiLi4vYnVmZmVyLmpzXCI6NH1dLDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuZnVuY3Rpb24gaW5mbGF0ZUJsb2IoZSxsKXtyZXR1cm4gbChudWxsLG5ldyBabGliLkluZmxhdGUobmV3IFVpbnQ4QXJyYXkoZS56bGliRGF0YSkse2J1ZmZlclNpemU6ZS5yYXdTaXplfSkuZGVjb21wcmVzcygpKX12YXIgWmxpYj1yZXF1aXJlKFwiLi4vLi4vbm9kZV9tb2R1bGVzL3psaWJqcy9iaW4vaW5mbGF0ZS5taW4uanNcIikuWmxpYjttb2R1bGUuZXhwb3J0cz17aW5mbGF0ZUJsb2I6aW5mbGF0ZUJsb2J9O1xufSx7XCIuLi8uLi9ub2RlX21vZHVsZXMvemxpYmpzL2Jpbi9pbmZsYXRlLm1pbi5qc1wiOjI4fV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5mdW5jdGlvbiByZWFkUEJGRWxlbWVudEZyb21CdWZmZXIoZSxyLGYpe3JldHVybiBmKG51bGwscihlKSl9bW9kdWxlLmV4cG9ydHM9e3JlYWRQQkZFbGVtZW50RnJvbUJ1ZmZlcjpyZWFkUEJGRWxlbWVudEZyb21CdWZmZXJ9O1xufSx7fV0sNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5mdW5jdGlvbiBieXRlc1JlYWRGYWlsKGUscixuKXtyZXR1cm4gZShuZXcgRXJyb3IoXCJFeHBlY3RlZCBcIityK1wiIGJ5dGVzIGJ1dCBnb3QgXCIrbikpfWZ1bmN0aW9uIHJlYWRCbG9iSGVhZGVyU2l6ZShlLHIsbix0KXt2YXIgZjtmPW5ldyBCdWZmZXIobiksZnMucmVhZChlLGYsMCxuLHIsZnVuY3Rpb24oZSxyLGYpe3JldHVybiByIT09bj9ieXRlc1JlYWRGYWlsKHQsbixyKTp0KG51bGwsZi5yZWFkSW50MzJCRSgwKSl9KX1mdW5jdGlvbiByZWFkUEJGRWxlbWVudChlLHIsbix0LGYpe3ZhciBvO2lmKG4+MzM1NTQ0MzIpcmV0dXJuIGYobmV3IEVycm9yKFwiUEJGIGVsZW1lbnQgdG9vIGJpZzogXCIrbitcIiBieXRlc1wiKSk7bz1uZXcgQnVmZmVyKG4pLGZzLnJlYWQoZSxvLDAsbixyLGZ1bmN0aW9uKGUscixvKXtyZXR1cm4gciE9PW4/Ynl0ZXNSZWFkRmFpbChmLG4scik6YnVmLnJlYWRQQkZFbGVtZW50RnJvbUJ1ZmZlcihvLHQsZil9KX1mdW5jdGlvbiBnZXRGaWxlU2l6ZShlLHIpe2ZzLmZzdGF0KGUsZnVuY3Rpb24oZSxuKXtyZXR1cm4gcihlLG4uc2l6ZSl9KX1mdW5jdGlvbiBvcGVuKGUscil7ZnMub3BlbihlLmZpbGVQYXRoLFwiclwiLHIpfWZ1bmN0aW9uIGNsb3NlKGUscil7cmV0dXJuIGZzLmNsb3NlKGUscnx8ZnVuY3Rpb24oKXt9KX12YXIgZnM9cmVxdWlyZShcImZzXCIpLGJ1Zj1yZXF1aXJlKFwiLi4vYnVmZmVyLmpzXCIpO21vZHVsZS5leHBvcnRzPXtyZWFkQmxvYkhlYWRlclNpemU6cmVhZEJsb2JIZWFkZXJTaXplLHJlYWRQQkZFbGVtZW50OnJlYWRQQkZFbGVtZW50LGdldEZpbGVTaXplOmdldEZpbGVTaXplLG9wZW46b3BlbixjbG9zZTpjbG9zZX07XG59LHtcIi4uL2J1ZmZlci5qc1wiOjQsXCJmc1wiOnVuZGVmaW5lZH1dLDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuZnVuY3Rpb24gaW5mbGF0ZUJsb2IobCxpKXt6bGliLmluZmxhdGUobC56bGliRGF0YSxpKX12YXIgemxpYj1yZXF1aXJlKFwiemxpYlwiKTttb2R1bGUuZXhwb3J0cz17aW5mbGF0ZUJsb2I6aW5mbGF0ZUJsb2J9O1xufSx7XCJ6bGliXCI6dW5kZWZpbmVkfV0sNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5mdW5jdGlvbiBwYXJzZShlKXtmdW5jdGlvbiByKCl7bj0hMH1mdW5jdGlvbiB0KCl7bj0hMSxpJiZpKCl9dmFyIG4saSxvO3JldHVybiBvPSExLG49ITEsaT1udWxsLGNyZWF0ZVBhdGhQYXJzZXIoe2ZpbGVQYXRoOmUuZmlsZVBhdGgsYnVmZmVyOmUuYnVmZmVyLGZpbGU6ZS5maWxlLGNhbGxiYWNrOmZ1bmN0aW9uKHIsdCl7ZnVuY3Rpb24gYShyKXtyZXR1cm4gdCYmdC5jbG9zZSgpLGUuZXJyb3Iocil9ZnVuY3Rpb24gcygpe3ZhciByO2lmKCFvJiYhbil7aWYodT49dC5maWxlQmxvY2tzLmxlbmd0aClyZXR1cm4gbz0hMCx0LmNsb3NlKCksdm9pZCBlLmVuZERvY3VtZW50KCk7cj10LmZpbGVCbG9ja3NbdV0sdC5yZWFkQmxvY2socixmdW5jdGlvbih0LG4pe2lmKHQpcmV0dXJuIGEodCk7dmlzaXRCbG9jayhyLG4sZSksdSs9MSxzKCl9KX19dmFyIHU7aWYocilyZXR1cm4gYShyKTt1PTAsaT1zLHMoKX19KSx7cGF1c2U6cixyZXN1bWU6dH19ZnVuY3Rpb24gY3JlYXRlUGF0aFBhcnNlcihlKXtyZWFkZXI9Z2V0UmVhZGVyKGUpLHJlYWRlci5vcGVuKGUsZnVuY3Rpb24ocix0KXtjcmVhdGVGaWxlUGFyc2VyKHQsZnVuY3Rpb24ocixuKXtyZXR1cm4gcj9lLmNhbGxiYWNrKHIpOihuLmNsb3NlPWZ1bmN0aW9uKGUpe3JldHVybiByZWFkZXIuY2xvc2UodCxlKX0sZS5jYWxsYmFjayhudWxsLG4pKX0pfSl9ZnVuY3Rpb24gZ2V0UmVhZGVyKGUpe3JldHVybiBhcnJheUJ1ZmZlclJlYWRlcj9lLmZpbGU/ZmlsZVJlYWRlcjphcnJheUJ1ZmZlclJlYWRlcjpyZWFkZXJ9ZnVuY3Rpb24gdmlzaXRCbG9jayhlLHIsdCl7QkxPQ0tfVklTSVRPUlNfQllfVFlQRVtlLmJsb2JIZWFkZXIudHlwZV0ocix0KX1mdW5jdGlvbiB2aXNpdE9TTUhlYWRlckJsb2NrKGUscil7fWZ1bmN0aW9uIHZpc2l0T1NNRGF0YUJsb2NrKGUscil7dmFyIHQ7Zm9yKHQ9MDt0PGUucHJpbWl0aXZlZ3JvdXAubGVuZ3RoOysrdCl2aXNpdFByaW1pdGl2ZUdyb3VwKGUucHJpbWl0aXZlZ3JvdXBbdF0scil9ZnVuY3Rpb24gdmlzaXRQcmltaXRpdmVHcm91cChlLHIpe3ZhciB0O2lmKHIubm9kZSlmb3IodD0wO3Q8ZS5ub2Rlc1ZpZXcubGVuZ3RoOysrdClyLm5vZGUoZS5ub2Rlc1ZpZXcuZ2V0KHQpKTtpZihyLndheSlmb3IodD0wO3Q8ZS53YXlzVmlldy5sZW5ndGg7Kyt0KXIud2F5KGUud2F5c1ZpZXcuZ2V0KHQpKTtpZihyLnJlbGF0aW9uKWZvcih0PTA7dDxlLnJlbGF0aW9uc1ZpZXcubGVuZ3RoOysrdClyLnJlbGF0aW9uKGUucmVsYXRpb25zVmlldy5nZXQodCkpfWZ1bmN0aW9uIHJlYWRCbG9iSGVhZGVyQ29udGVudChlLHIsdCxuKXtyZXR1cm4gcmVhZGVyLnJlYWRQQkZFbGVtZW50KGUscix0LHByb3RvLk9TTVBCRi5CbG9iSGVhZGVyLmRlY29kZSxuKX1mdW5jdGlvbiByZWFkRmlsZUJsb2NrKGUscix0KXtyZWFkZXIucmVhZEJsb2JIZWFkZXJTaXplKGUscixCTE9CX0hFQURFUl9TSVpFX1NJWkUsZnVuY3Rpb24obixpKXtyZXR1cm4gbj90KG4pOnJlYWRCbG9iSGVhZGVyQ29udGVudChlLHIrQkxPQl9IRUFERVJfU0laRV9TSVpFLGksZnVuY3Rpb24oZSxuKXtyZXR1cm4gZT90KGUpOihuLnBvc2l0aW9uPXIrQkxPQl9IRUFERVJfU0laRV9TSVpFK2ksdChlLHtwb3NpdGlvbjpyLHNpemU6QkxPQl9IRUFERVJfU0laRV9TSVpFK2krbi5kYXRhc2l6ZSxibG9iSGVhZGVyOm59KSl9KX0pfWZ1bmN0aW9uIHJlYWRGaWxlQmxvY2tzKGUscil7cmVhZGVyLmdldEZpbGVTaXplKGUsZnVuY3Rpb24odCxuKXtmdW5jdGlvbiBpKCl7cmVhZEZpbGVCbG9jayhlLG8sZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT9yKGUpOihhLnB1c2godCksKG89dC5wb3NpdGlvbit0LnNpemUpPG4/dm9pZCBpKCk6cihudWxsLGEpKX0pfXZhciBvLGE7bz0wLGE9W10saSgpfSl9ZnVuY3Rpb24gZ2V0U3RyaW5nVGFibGVFbnRyeShlKXt2YXIgcix0O3JldHVybiBlIGluIHRoaXMuY2FjaGU/dD10aGlzLmNhY2hlW2VdOihyPXRoaXMuc1tlXSx0PXByb3RvYnVmLnV0aWwudXRmOC5yZWFkKHIsMCxyLmxlbmd0aCksdGhpcy5jYWNoZVtlXT10KSx0fWZ1bmN0aW9uIGV4dGVuZFN0cmluZ1RhYmxlKGUpe2UuY2FjaGU9e30sZS5nZXRFbnRyeT1nZXRTdHJpbmdUYWJsZUVudHJ5fWZ1bmN0aW9uIGNyZWF0ZU5vZGVzVmlldyhlLHIpe2Z1bmN0aW9uIHQodCl7dmFyIG4sYTtyZXR1cm4gYT1vW3RdLG49e2lkOlwiXCIrYS5pZCxsYXQ6KHRvTnVtYmVyKGUubGF0T2Zmc2V0KStlLmdyYW51bGFyaXR5KmEubGF0KS8xZTksbG9uOih0b051bWJlcihlLmxvbk9mZnNldCkrZS5ncmFudWxhcml0eSphLmxvbikvMWU5LHRhZ3M6aVt0XX0sci5kZW5zZS5kZW5zZWluZm8mJihuLnZlcnNpb249ci5kZW5zZS5kZW5zZWluZm8udmVyc2lvblt0XSxuLnRpbWVzdGFtcD1hLnRpbWVzdGFtcCxuLmNoYW5nZXNldD1hLmNoYW5nZXNldCxuLnVpZD1cIlwiK2EudWlkLG4udXNlcj1lLnN0cmluZ3RhYmxlLmdldEVudHJ5KGEudXNlckluZGV4KSksbn12YXIgbixpLG87aWYoMCE9PXIubm9kZXMubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcInByaW1pdGl2ZWdyb3VwLm5vZGVzLmxlbmd0aCAhPT0gMCBub3Qgc3VwcG9ydGVkIHlldFwiKTtyZXR1cm4gbj0wLHIuZGVuc2UmJihuPXIuZGVuc2UuaWQubGVuZ3RoKSxpPWZ1bmN0aW9uKCl7dmFyIHQsbixpLG8sYSxzLHUsbDtpZighci5kZW5zZSlyZXR1cm4gbnVsbDtmb3IoYT1yLmRlbnNlLmtleXNWYWxzLGk9e30sdD1bXSxuPTA7bjxhLmxlbmd0aDspbz1hW24rK10sMCE9PW8/KHM9YVtuKytdLHU9ZS5zdHJpbmd0YWJsZS5nZXRFbnRyeShvKSxsPWUuc3RyaW5ndGFibGUuZ2V0RW50cnkocyksaVt1XT1sKToodC5wdXNoKGkpLGk9e30pO3JldHVybiB0fSgpLG89ZnVuY3Rpb24oKXt2YXIgdCxpLG8sYSxzLHUsbCxkLGYsYztpZighci5kZW5zZSlyZXR1cm4gbnVsbDtmb3IoaT0wLGY9MCxjPTAsci5kZW5zZS5kZW5zZWluZm8mJihvPTAsYT0wLHM9MCx1PTApLGw9W10sdD0wO3Q8bjsrK3QpaSs9dG9OdW1iZXIoci5kZW5zZS5pZFt0XSksZis9dG9OdW1iZXIoci5kZW5zZS5sYXRbdF0pLGMrPXRvTnVtYmVyKHIuZGVuc2UubG9uW3RdKSxkPXtpZDppLGxhdDpmLGxvbjpjfSxyLmRlbnNlLmRlbnNlaW5mbyYmKG8rPXRvTnVtYmVyKHIuZGVuc2UuZGVuc2VpbmZvLnRpbWVzdGFtcFt0XSksYSs9dG9OdW1iZXIoci5kZW5zZS5kZW5zZWluZm8uY2hhbmdlc2V0W3RdKSxzKz1yLmRlbnNlLmRlbnNlaW5mby51aWRbdF0sdSs9ci5kZW5zZS5kZW5zZWluZm8udXNlclNpZFt0XSxkLnRpbWVzdGFtcD1vKmUuZGF0ZUdyYW51bGFyaXR5LGQuY2hhbmdlc2V0PWEsZC51aWQ9cyxkLnVzZXJJbmRleD11KSxsLnB1c2goZCk7cmV0dXJuIGx9KCkse2xlbmd0aDpuLGdldDp0fX1mdW5jdGlvbiBjcmVhdGVUYWdzT2JqZWN0KGUscil7dmFyIHQsbixpLG8sYSxzLHU7Zm9yKHQ9e30sbj0wLGk9ci5rZXlzLmxlbmd0aDtuPGk7KytuKW89ci5rZXlzW25dLGE9ci52YWxzW25dLHM9ZS5zdHJpbmd0YWJsZS5nZXRFbnRyeShvKSx1PWUuc3RyaW5ndGFibGUuZ2V0RW50cnkoYSksdFtzXT11O3JldHVybiB0fWZ1bmN0aW9uIGFkZEluZm8oZSxyLHQpe3QmJih0LnZlcnNpb24mJihyLnZlcnNpb249dC52ZXJzaW9uKSx0LnRpbWVzdGFtcCYmKHIudGltZXN0YW1wPXRvTnVtYmVyKHQudGltZXN0YW1wKSplLmRhdGVHcmFudWxhcml0eSksdC5jaGFuZ2VzZXQmJihyLmNoYW5nZXNldD10b051bWJlcih0LmNoYW5nZXNldCkpLHQudWlkJiYoci51aWQ9XCJcIit0LnVpZCksdC51c2VyU2lkJiYoci51c2VyPWUuc3RyaW5ndGFibGUuZ2V0RW50cnkodC51c2VyU2lkKSkpfWZ1bmN0aW9uIGNyZWF0ZVdheXNWaWV3KGUscil7ZnVuY3Rpb24gdCh0KXt2YXIgbixpO3JldHVybiBuPXIud2F5c1t0XSxpPXtpZDpuLmlkLnRvU3RyaW5nKCksdGFnczpjcmVhdGVUYWdzT2JqZWN0KGUsbiksbm9kZVJlZnM6ZnVuY3Rpb24oKXt2YXIgZSxyLHQ7Zm9yKGU9W10scj0wLHQ9MDt0PG4ucmVmcy5sZW5ndGg7Kyt0KXIrPXRvTnVtYmVyKG4ucmVmc1t0XSksZS5wdXNoKFwiXCIrcik7cmV0dXJuIGV9KCl9LGFkZEluZm8oZSxpLG4uaW5mbyksaX12YXIgbjtyZXR1cm4gbj1yLndheXMubGVuZ3RoLHtsZW5ndGg6bixnZXQ6dH19ZnVuY3Rpb24gY3JlYXRlUmVsYXRpb25zVmlldyhlLHIpe2Z1bmN0aW9uIHQodCl7dmFyIG4saTtyZXR1cm4gbj1yLnJlbGF0aW9uc1t0XSxpPXtpZDpuLmlkLnRvU3RyaW5nKCksdGFnczpjcmVhdGVUYWdzT2JqZWN0KGUsbiksbWVtYmVyczpmdW5jdGlvbigpe3ZhciByLHQsaSxvLGEscztmb3IoYT1wcm90by5PU01QQkYuUmVsYXRpb24uTWVtYmVyVHlwZSxyPVtdLGk9MCxvPTA7bzxuLm1lbWlkcy5sZW5ndGg7KytvKXQ9e30saSs9dG9OdW1iZXIobi5tZW1pZHNbb10pLHQucmVmPVwiXCIraSx0LnJvbGU9ZS5zdHJpbmd0YWJsZS5nZXRFbnRyeShuLnJvbGVzU2lkW29dKSxzPW4udHlwZXNbb10sYS5OT0RFPT09cz90LnR5cGU9XCJub2RlXCI6YS5XQVk9PT1zP3QudHlwZT1cIndheVwiOmEuUkVMQVRJT049PT1zJiYodC50eXBlPVwicmVsYXRpb25cIiksci5wdXNoKHQpO3JldHVybiByfSgpfSxhZGRJbmZvKGUsaSxuLmluZm8pLGl9dmFyIG47cmV0dXJuIG49ci5yZWxhdGlvbnMubGVuZ3RoLHtsZW5ndGg6bixnZXQ6dH19ZnVuY3Rpb24gdG9OdW1iZXIoZSl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIGU/ZTplLnRvTnVtYmVyKCl9ZnVuY3Rpb24gZXh0ZW5kUHJpbWl0aXZlR3JvdXAoZSxyKXtyLm5vZGVzVmlldz1jcmVhdGVOb2Rlc1ZpZXcoZSxyKSxyLndheXNWaWV3PWNyZWF0ZVdheXNWaWV3KGUsciksci5yZWxhdGlvbnNWaWV3PWNyZWF0ZVJlbGF0aW9uc1ZpZXcoZSxyKX1mdW5jdGlvbiBkZWNvZGVQcmltaXRpdmVCbG9jayhlKXt2YXIgcix0O2ZvcihyPXByb3RvLk9TTVBCRi5QcmltaXRpdmVCbG9jay5kZWNvZGUoZSksZXh0ZW5kU3RyaW5nVGFibGUoci5zdHJpbmd0YWJsZSksdD0wO3Q8ci5wcmltaXRpdmVncm91cC5sZW5ndGg7Kyt0KWV4dGVuZFByaW1pdGl2ZUdyb3VwKHIsci5wcmltaXRpdmVncm91cFt0XSk7cmV0dXJuIHJ9ZnVuY3Rpb24gY3JlYXRlRmlsZVBhcnNlcihlLHIpe3JlYWRGaWxlQmxvY2tzKGUsZnVuY3Rpb24odCxuKXtmdW5jdGlvbiBpKGUpe3ZhciByLHQsaTtmb3Iocj1bXSx0PTA7dDxuLmxlbmd0aDsrK3QpaT1uW3RdLGkuYmxvYkhlYWRlci50eXBlPT09ZSYmci5wdXNoKGkpO3JldHVybiByfWZ1bmN0aW9uIG8ocix0KXtyZXR1cm4gcmVhZGVyLnJlYWRQQkZFbGVtZW50KGUsci5ibG9iSGVhZGVyLnBvc2l0aW9uLHIuYmxvYkhlYWRlci5kYXRhc2l6ZSxwcm90by5PU01QQkYuQmxvYi5kZWNvZGUsdCl9ZnVuY3Rpb24gYShlLHIpe3JldHVybiBvKGUsZnVuY3Rpb24odCxuKXtyZXR1cm4gdD9yKHQpOjA9PT1uLnJhd1NpemU/cihcIlVuY29tcHJlc3NlZCBwYmZzIGFyZSBjdXJyZW50bHkgbm90IHN1cHBvcnRlZC5cIik6dm9pZCB6bGliLmluZmxhdGVCbG9iKG4sZnVuY3Rpb24odCxuKXtyZXR1cm4gdD9yKHQpOmJ1Zi5yZWFkUEJGRWxlbWVudEZyb21CdWZmZXIobixPU01fQkxPQl9ERUNPREVSX0JZX1RZUEVbZS5ibG9iSGVhZGVyLnR5cGVdLHIpfSl9KX1yZXR1cm4gdD9yKHQpOnIobnVsbCx7ZmlsZUJsb2NrczpuLGZpbmRGaWxlQmxvY2tzQnlCbG9iVHlwZTppLHJlYWRCbG9jazphfSl9KX12YXIgcHJvdG9idWY9cmVxdWlyZShcInByb3RvYnVmanMvbWluaW1hbFwiKSxwcm90bz1yZXF1aXJlKFwiLi9wcm90b1wiKSxidWY9cmVxdWlyZShcIi4vYnVmZmVyLmpzXCIpLHpsaWIscmVhZGVyLGFycmF5QnVmZmVyUmVhZGVyLGZpbGVSZWFkZXI7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/KHpsaWI9cmVxdWlyZShcIi4vYnJvd3Nlci96bGliLmpzXCIpLGFycmF5QnVmZmVyUmVhZGVyPXJlcXVpcmUoXCIuL2Jyb3dzZXIvYXJyYXlCdWZmZXJSZWFkZXIuanNcIiksZmlsZVJlYWRlcj1yZXF1aXJlKFwiLi9icm93c2VyL2ZpbGVSZWFkZXIuanNcIikpOih6bGliPXJlcXVpcmUoXCIuL25vZGVqcy96bGliLmpzXCIpLHJlYWRlcj1yZXF1aXJlKFwiLi9ub2RlanMvZnNSZWFkZXIuanNcIikpO3ZhciBCTE9DS19WSVNJVE9SU19CWV9UWVBFPXtPU01IZWFkZXI6dmlzaXRPU01IZWFkZXJCbG9jayxPU01EYXRhOnZpc2l0T1NNRGF0YUJsb2NrfSxCTE9CX0hFQURFUl9TSVpFX1NJWkU9NCxPU01fQkxPQl9ERUNPREVSX0JZX1RZUEU9e09TTUhlYWRlcjpwcm90by5PU01QQkYuSGVhZGVyQmxvY2suZGVjb2RlLE9TTURhdGE6ZGVjb2RlUHJpbWl0aXZlQmxvY2t9O21vZHVsZS5leHBvcnRzPXtwYXJzZTpwYXJzZSxjcmVhdGVQYXJzZXI6Y3JlYXRlUGF0aFBhcnNlcn07XG59LHtcIi4vYnJvd3Nlci9hcnJheUJ1ZmZlclJlYWRlci5qc1wiOjEsXCIuL2Jyb3dzZXIvZmlsZVJlYWRlci5qc1wiOjIsXCIuL2Jyb3dzZXIvemxpYi5qc1wiOjMsXCIuL2J1ZmZlci5qc1wiOjQsXCIuL25vZGVqcy9mc1JlYWRlci5qc1wiOjUsXCIuL25vZGVqcy96bGliLmpzXCI6NixcIi4vcHJvdG9cIjo4LFwicHJvdG9idWZqcy9taW5pbWFsXCI6MTZ9XSw4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO3ZhciAkcHJvdG9idWY9cmVxdWlyZShcInByb3RvYnVmanMvbWluaW1hbFwiKSwkUmVhZGVyPSRwcm90b2J1Zi5SZWFkZXIsJFdyaXRlcj0kcHJvdG9idWYuV3JpdGVyLCR1dGlsPSRwcm90b2J1Zi51dGlsLCRyb290PSRwcm90b2J1Zi5yb290cy5kZWZhdWx0fHwoJHByb3RvYnVmLnJvb3RzLmRlZmF1bHQ9e30pOyRyb290Lk9TTVBCRj1mdW5jdGlvbigpe3ZhciBlPXt9O3JldHVybiBlLkJsb2I9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLHI9MDtyPHQubGVuZ3RoOysrciludWxsIT1lW3Rbcl1dJiYodGhpc1t0W3JdXT1lW3Rbcl1dKX1yZXR1cm4gZS5wcm90b3R5cGUucmF3PSR1dGlsLm5ld0J1ZmZlcihbXSksZS5wcm90b3R5cGUucmF3U2l6ZT0wLGUucHJvdG90eXBlLnpsaWJEYXRhPSR1dGlsLm5ld0J1ZmZlcihbXSksZS5wcm90b3R5cGUubHptYURhdGE9JHV0aWwubmV3QnVmZmVyKFtdKSxlLnByb3RvdHlwZS5PQlNPTEVURUJ6aXAyRGF0YT0kdXRpbC5uZXdCdWZmZXIoW10pLGUuY3JlYXRlPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgZSh0KX0sZS5lbmNvZGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8KHQ9JFdyaXRlci5jcmVhdGUoKSksbnVsbCE9ZS5yYXcmJmUuaGFzT3duUHJvcGVydHkoXCJyYXdcIikmJnQudWludDMyKDEwKS5ieXRlcyhlLnJhdyksbnVsbCE9ZS5yYXdTaXplJiZlLmhhc093blByb3BlcnR5KFwicmF3U2l6ZVwiKSYmdC51aW50MzIoMTYpLmludDMyKGUucmF3U2l6ZSksbnVsbCE9ZS56bGliRGF0YSYmZS5oYXNPd25Qcm9wZXJ0eShcInpsaWJEYXRhXCIpJiZ0LnVpbnQzMigyNikuYnl0ZXMoZS56bGliRGF0YSksbnVsbCE9ZS5sem1hRGF0YSYmZS5oYXNPd25Qcm9wZXJ0eShcImx6bWFEYXRhXCIpJiZ0LnVpbnQzMigzNCkuYnl0ZXMoZS5sem1hRGF0YSksbnVsbCE9ZS5PQlNPTEVURUJ6aXAyRGF0YSYmZS5oYXNPd25Qcm9wZXJ0eShcIk9CU09MRVRFQnppcDJEYXRhXCIpJiZ0LnVpbnQzMig0MikuYnl0ZXMoZS5PQlNPTEVURUJ6aXAyRGF0YSksdH0sZS5lbmNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lbmNvZGUoZSx0KS5sZGVsaW0oKX0sZS5kZWNvZGU9ZnVuY3Rpb24oZSx0KXtlIGluc3RhbmNlb2YgJFJlYWRlcnx8KGU9JFJlYWRlci5jcmVhdGUoZSkpO2Zvcih2YXIgcj12b2lkIDA9PT10P2UubGVuOmUucG9zK3QsaT1uZXcgJHJvb3QuT1NNUEJGLkJsb2I7ZS5wb3M8cjspe3ZhciBuPWUudWludDMyKCk7c3dpdGNoKG4+Pj4zKXtjYXNlIDE6aS5yYXc9ZS5ieXRlcygpO2JyZWFrO2Nhc2UgMjppLnJhd1NpemU9ZS5pbnQzMigpO2JyZWFrO2Nhc2UgMzppLnpsaWJEYXRhPWUuYnl0ZXMoKTticmVhaztjYXNlIDQ6aS5sem1hRGF0YT1lLmJ5dGVzKCk7YnJlYWs7Y2FzZSA1OmkuT0JTT0xFVEVCemlwMkRhdGE9ZS5ieXRlcygpO2JyZWFrO2RlZmF1bHQ6ZS5za2lwVHlwZSg3Jm4pfX1yZXR1cm4gaX0sZS5kZWNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiAkUmVhZGVyfHwoZT1uZXcgJFJlYWRlcihlKSksdGhpcy5kZWNvZGUoZSxlLnVpbnQzMigpKX0sZS52ZXJpZnk9ZnVuY3Rpb24oZSl7cmV0dXJuXCJvYmplY3RcIiE9dHlwZW9mIGV8fG51bGw9PT1lP1wib2JqZWN0IGV4cGVjdGVkXCI6bnVsbCE9ZS5yYXcmJmUuaGFzT3duUHJvcGVydHkoXCJyYXdcIikmJiEoZS5yYXcmJlwibnVtYmVyXCI9PXR5cGVvZiBlLnJhdy5sZW5ndGh8fCR1dGlsLmlzU3RyaW5nKGUucmF3KSk/XCJyYXc6IGJ1ZmZlciBleHBlY3RlZFwiOm51bGwhPWUucmF3U2l6ZSYmZS5oYXNPd25Qcm9wZXJ0eShcInJhd1NpemVcIikmJiEkdXRpbC5pc0ludGVnZXIoZS5yYXdTaXplKT9cInJhd1NpemU6IGludGVnZXIgZXhwZWN0ZWRcIjpudWxsIT1lLnpsaWJEYXRhJiZlLmhhc093blByb3BlcnR5KFwiemxpYkRhdGFcIikmJiEoZS56bGliRGF0YSYmXCJudW1iZXJcIj09dHlwZW9mIGUuemxpYkRhdGEubGVuZ3RofHwkdXRpbC5pc1N0cmluZyhlLnpsaWJEYXRhKSk/XCJ6bGliRGF0YTogYnVmZmVyIGV4cGVjdGVkXCI6bnVsbCE9ZS5sem1hRGF0YSYmZS5oYXNPd25Qcm9wZXJ0eShcImx6bWFEYXRhXCIpJiYhKGUubHptYURhdGEmJlwibnVtYmVyXCI9PXR5cGVvZiBlLmx6bWFEYXRhLmxlbmd0aHx8JHV0aWwuaXNTdHJpbmcoZS5sem1hRGF0YSkpP1wibHptYURhdGE6IGJ1ZmZlciBleHBlY3RlZFwiOm51bGwhPWUuT0JTT0xFVEVCemlwMkRhdGEmJmUuaGFzT3duUHJvcGVydHkoXCJPQlNPTEVURUJ6aXAyRGF0YVwiKSYmIShlLk9CU09MRVRFQnppcDJEYXRhJiZcIm51bWJlclwiPT10eXBlb2YgZS5PQlNPTEVURUJ6aXAyRGF0YS5sZW5ndGh8fCR1dGlsLmlzU3RyaW5nKGUuT0JTT0xFVEVCemlwMkRhdGEpKT9cIk9CU09MRVRFQnppcDJEYXRhOiBidWZmZXIgZXhwZWN0ZWRcIjpudWxsfSxlLmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mICRyb290Lk9TTVBCRi5CbG9iKXJldHVybiBlO3ZhciB0PW5ldyAkcm9vdC5PU01QQkYuQmxvYjtyZXR1cm4gbnVsbCE9ZS5yYXcmJihcInN0cmluZ1wiPT10eXBlb2YgZS5yYXc/JHV0aWwuYmFzZTY0LmRlY29kZShlLnJhdyx0LnJhdz0kdXRpbC5uZXdCdWZmZXIoJHV0aWwuYmFzZTY0Lmxlbmd0aChlLnJhdykpLDApOmUucmF3Lmxlbmd0aCYmKHQucmF3PWUucmF3KSksbnVsbCE9ZS5yYXdTaXplJiYodC5yYXdTaXplPTB8ZS5yYXdTaXplKSxudWxsIT1lLnpsaWJEYXRhJiYoXCJzdHJpbmdcIj09dHlwZW9mIGUuemxpYkRhdGE/JHV0aWwuYmFzZTY0LmRlY29kZShlLnpsaWJEYXRhLHQuemxpYkRhdGE9JHV0aWwubmV3QnVmZmVyKCR1dGlsLmJhc2U2NC5sZW5ndGgoZS56bGliRGF0YSkpLDApOmUuemxpYkRhdGEubGVuZ3RoJiYodC56bGliRGF0YT1lLnpsaWJEYXRhKSksbnVsbCE9ZS5sem1hRGF0YSYmKFwic3RyaW5nXCI9PXR5cGVvZiBlLmx6bWFEYXRhPyR1dGlsLmJhc2U2NC5kZWNvZGUoZS5sem1hRGF0YSx0Lmx6bWFEYXRhPSR1dGlsLm5ld0J1ZmZlcigkdXRpbC5iYXNlNjQubGVuZ3RoKGUubHptYURhdGEpKSwwKTplLmx6bWFEYXRhLmxlbmd0aCYmKHQubHptYURhdGE9ZS5sem1hRGF0YSkpLG51bGwhPWUuT0JTT0xFVEVCemlwMkRhdGEmJihcInN0cmluZ1wiPT10eXBlb2YgZS5PQlNPTEVURUJ6aXAyRGF0YT8kdXRpbC5iYXNlNjQuZGVjb2RlKGUuT0JTT0xFVEVCemlwMkRhdGEsdC5PQlNPTEVURUJ6aXAyRGF0YT0kdXRpbC5uZXdCdWZmZXIoJHV0aWwuYmFzZTY0Lmxlbmd0aChlLk9CU09MRVRFQnppcDJEYXRhKSksMCk6ZS5PQlNPTEVURUJ6aXAyRGF0YS5sZW5ndGgmJih0Lk9CU09MRVRFQnppcDJEYXRhPWUuT0JTT0xFVEVCemlwMkRhdGEpKSx0fSxlLnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dHx8KHQ9e30pO3ZhciByPXt9O3JldHVybiB0LmRlZmF1bHRzJiYodC5ieXRlcz09PVN0cmluZz9yLnJhdz1cIlwiOihyLnJhdz1bXSx0LmJ5dGVzIT09QXJyYXkmJihyLnJhdz0kdXRpbC5uZXdCdWZmZXIoci5yYXcpKSksci5yYXdTaXplPTAsdC5ieXRlcz09PVN0cmluZz9yLnpsaWJEYXRhPVwiXCI6KHIuemxpYkRhdGE9W10sdC5ieXRlcyE9PUFycmF5JiYoci56bGliRGF0YT0kdXRpbC5uZXdCdWZmZXIoci56bGliRGF0YSkpKSx0LmJ5dGVzPT09U3RyaW5nP3IubHptYURhdGE9XCJcIjooci5sem1hRGF0YT1bXSx0LmJ5dGVzIT09QXJyYXkmJihyLmx6bWFEYXRhPSR1dGlsLm5ld0J1ZmZlcihyLmx6bWFEYXRhKSkpLHQuYnl0ZXM9PT1TdHJpbmc/ci5PQlNPTEVURUJ6aXAyRGF0YT1cIlwiOihyLk9CU09MRVRFQnppcDJEYXRhPVtdLHQuYnl0ZXMhPT1BcnJheSYmKHIuT0JTT0xFVEVCemlwMkRhdGE9JHV0aWwubmV3QnVmZmVyKHIuT0JTT0xFVEVCemlwMkRhdGEpKSkpLG51bGwhPWUucmF3JiZlLmhhc093blByb3BlcnR5KFwicmF3XCIpJiYoci5yYXc9dC5ieXRlcz09PVN0cmluZz8kdXRpbC5iYXNlNjQuZW5jb2RlKGUucmF3LDAsZS5yYXcubGVuZ3RoKTp0LmJ5dGVzPT09QXJyYXk/QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZS5yYXcpOmUucmF3KSxudWxsIT1lLnJhd1NpemUmJmUuaGFzT3duUHJvcGVydHkoXCJyYXdTaXplXCIpJiYoci5yYXdTaXplPWUucmF3U2l6ZSksbnVsbCE9ZS56bGliRGF0YSYmZS5oYXNPd25Qcm9wZXJ0eShcInpsaWJEYXRhXCIpJiYoci56bGliRGF0YT10LmJ5dGVzPT09U3RyaW5nPyR1dGlsLmJhc2U2NC5lbmNvZGUoZS56bGliRGF0YSwwLGUuemxpYkRhdGEubGVuZ3RoKTp0LmJ5dGVzPT09QXJyYXk/QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZS56bGliRGF0YSk6ZS56bGliRGF0YSksbnVsbCE9ZS5sem1hRGF0YSYmZS5oYXNPd25Qcm9wZXJ0eShcImx6bWFEYXRhXCIpJiYoci5sem1hRGF0YT10LmJ5dGVzPT09U3RyaW5nPyR1dGlsLmJhc2U2NC5lbmNvZGUoZS5sem1hRGF0YSwwLGUubHptYURhdGEubGVuZ3RoKTp0LmJ5dGVzPT09QXJyYXk/QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZS5sem1hRGF0YSk6ZS5sem1hRGF0YSksbnVsbCE9ZS5PQlNPTEVURUJ6aXAyRGF0YSYmZS5oYXNPd25Qcm9wZXJ0eShcIk9CU09MRVRFQnppcDJEYXRhXCIpJiYoci5PQlNPTEVURUJ6aXAyRGF0YT10LmJ5dGVzPT09U3RyaW5nPyR1dGlsLmJhc2U2NC5lbmNvZGUoZS5PQlNPTEVURUJ6aXAyRGF0YSwwLGUuT0JTT0xFVEVCemlwMkRhdGEubGVuZ3RoKTp0LmJ5dGVzPT09QXJyYXk/QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZS5PQlNPTEVURUJ6aXAyRGF0YSk6ZS5PQlNPTEVURUJ6aXAyRGF0YSkscn0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKX0sZX0oKSxlLkJsb2JIZWFkZXI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLHI9MDtyPHQubGVuZ3RoOysrciludWxsIT1lW3Rbcl1dJiYodGhpc1t0W3JdXT1lW3Rbcl1dKX1yZXR1cm4gZS5wcm90b3R5cGUudHlwZT1cIlwiLGUucHJvdG90eXBlLmluZGV4ZGF0YT0kdXRpbC5uZXdCdWZmZXIoW10pLGUucHJvdG90eXBlLmRhdGFzaXplPTAsZS5jcmVhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBlKHQpfSxlLmVuY29kZT1mdW5jdGlvbihlLHQpe3JldHVybiB0fHwodD0kV3JpdGVyLmNyZWF0ZSgpKSx0LnVpbnQzMigxMCkuc3RyaW5nKGUudHlwZSksbnVsbCE9ZS5pbmRleGRhdGEmJmUuaGFzT3duUHJvcGVydHkoXCJpbmRleGRhdGFcIikmJnQudWludDMyKDE4KS5ieXRlcyhlLmluZGV4ZGF0YSksdC51aW50MzIoMjQpLmludDMyKGUuZGF0YXNpemUpLHR9LGUuZW5jb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZW5jb2RlKGUsdCkubGRlbGltKCl9LGUuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7ZSBpbnN0YW5jZW9mICRSZWFkZXJ8fChlPSRSZWFkZXIuY3JlYXRlKGUpKTtmb3IodmFyIHI9dm9pZCAwPT09dD9lLmxlbjplLnBvcyt0LGk9bmV3ICRyb290Lk9TTVBCRi5CbG9iSGVhZGVyO2UucG9zPHI7KXt2YXIgbj1lLnVpbnQzMigpO3N3aXRjaChuPj4+Myl7Y2FzZSAxOmkudHlwZT1lLnN0cmluZygpO2JyZWFrO2Nhc2UgMjppLmluZGV4ZGF0YT1lLmJ5dGVzKCk7YnJlYWs7Y2FzZSAzOmkuZGF0YXNpemU9ZS5pbnQzMigpO2JyZWFrO2RlZmF1bHQ6ZS5za2lwVHlwZSg3Jm4pfX1pZighaS5oYXNPd25Qcm9wZXJ0eShcInR5cGVcIikpdGhyb3cgJHV0aWwuUHJvdG9jb2xFcnJvcihcIm1pc3NpbmcgcmVxdWlyZWQgJ3R5cGUnXCIse2luc3RhbmNlOml9KTtpZighaS5oYXNPd25Qcm9wZXJ0eShcImRhdGFzaXplXCIpKXRocm93ICR1dGlsLlByb3RvY29sRXJyb3IoXCJtaXNzaW5nIHJlcXVpcmVkICdkYXRhc2l6ZSdcIix7aW5zdGFuY2U6aX0pO3JldHVybiBpfSxlLmRlY29kZURlbGltaXRlZD1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mICRSZWFkZXJ8fChlPW5ldyAkUmVhZGVyKGUpKSx0aGlzLmRlY29kZShlLGUudWludDMyKCkpfSxlLnZlcmlmeT1mdW5jdGlvbihlKXtyZXR1cm5cIm9iamVjdFwiIT10eXBlb2YgZXx8bnVsbD09PWU/XCJvYmplY3QgZXhwZWN0ZWRcIjokdXRpbC5pc1N0cmluZyhlLnR5cGUpP251bGwhPWUuaW5kZXhkYXRhJiZlLmhhc093blByb3BlcnR5KFwiaW5kZXhkYXRhXCIpJiYhKGUuaW5kZXhkYXRhJiZcIm51bWJlclwiPT10eXBlb2YgZS5pbmRleGRhdGEubGVuZ3RofHwkdXRpbC5pc1N0cmluZyhlLmluZGV4ZGF0YSkpP1wiaW5kZXhkYXRhOiBidWZmZXIgZXhwZWN0ZWRcIjokdXRpbC5pc0ludGVnZXIoZS5kYXRhc2l6ZSk/bnVsbDpcImRhdGFzaXplOiBpbnRlZ2VyIGV4cGVjdGVkXCI6XCJ0eXBlOiBzdHJpbmcgZXhwZWN0ZWRcIn0sZS5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiAkcm9vdC5PU01QQkYuQmxvYkhlYWRlcilyZXR1cm4gZTt2YXIgdD1uZXcgJHJvb3QuT1NNUEJGLkJsb2JIZWFkZXI7cmV0dXJuIG51bGwhPWUudHlwZSYmKHQudHlwZT1TdHJpbmcoZS50eXBlKSksbnVsbCE9ZS5pbmRleGRhdGEmJihcInN0cmluZ1wiPT10eXBlb2YgZS5pbmRleGRhdGE/JHV0aWwuYmFzZTY0LmRlY29kZShlLmluZGV4ZGF0YSx0LmluZGV4ZGF0YT0kdXRpbC5uZXdCdWZmZXIoJHV0aWwuYmFzZTY0Lmxlbmd0aChlLmluZGV4ZGF0YSkpLDApOmUuaW5kZXhkYXRhLmxlbmd0aCYmKHQuaW5kZXhkYXRhPWUuaW5kZXhkYXRhKSksbnVsbCE9ZS5kYXRhc2l6ZSYmKHQuZGF0YXNpemU9MHxlLmRhdGFzaXplKSx0fSxlLnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dHx8KHQ9e30pO3ZhciByPXt9O3JldHVybiB0LmRlZmF1bHRzJiYoci50eXBlPVwiXCIsdC5ieXRlcz09PVN0cmluZz9yLmluZGV4ZGF0YT1cIlwiOihyLmluZGV4ZGF0YT1bXSx0LmJ5dGVzIT09QXJyYXkmJihyLmluZGV4ZGF0YT0kdXRpbC5uZXdCdWZmZXIoci5pbmRleGRhdGEpKSksci5kYXRhc2l6ZT0wKSxudWxsIT1lLnR5cGUmJmUuaGFzT3duUHJvcGVydHkoXCJ0eXBlXCIpJiYoci50eXBlPWUudHlwZSksbnVsbCE9ZS5pbmRleGRhdGEmJmUuaGFzT3duUHJvcGVydHkoXCJpbmRleGRhdGFcIikmJihyLmluZGV4ZGF0YT10LmJ5dGVzPT09U3RyaW5nPyR1dGlsLmJhc2U2NC5lbmNvZGUoZS5pbmRleGRhdGEsMCxlLmluZGV4ZGF0YS5sZW5ndGgpOnQuYnl0ZXM9PT1BcnJheT9BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlLmluZGV4ZGF0YSk6ZS5pbmRleGRhdGEpLG51bGwhPWUuZGF0YXNpemUmJmUuaGFzT3duUHJvcGVydHkoXCJkYXRhc2l6ZVwiKSYmKHIuZGF0YXNpemU9ZS5kYXRhc2l6ZSkscn0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKX0sZX0oKSxlLkhlYWRlckJsb2NrPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtpZih0aGlzLnJlcXVpcmVkRmVhdHVyZXM9W10sdGhpcy5vcHRpb25hbEZlYXR1cmVzPVtdLGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLHI9MDtyPHQubGVuZ3RoOysrciludWxsIT1lW3Rbcl1dJiYodGhpc1t0W3JdXT1lW3Rbcl1dKX1yZXR1cm4gZS5wcm90b3R5cGUuYmJveD1udWxsLGUucHJvdG90eXBlLnJlcXVpcmVkRmVhdHVyZXM9JHV0aWwuZW1wdHlBcnJheSxlLnByb3RvdHlwZS5vcHRpb25hbEZlYXR1cmVzPSR1dGlsLmVtcHR5QXJyYXksZS5wcm90b3R5cGUud3JpdGluZ3Byb2dyYW09XCJcIixlLnByb3RvdHlwZS5zb3VyY2U9XCJcIixlLnByb3RvdHlwZS5vc21vc2lzUmVwbGljYXRpb25UaW1lc3RhbXA9JHV0aWwuTG9uZz8kdXRpbC5Mb25nLmZyb21CaXRzKDAsMCwhMSk6MCxlLnByb3RvdHlwZS5vc21vc2lzUmVwbGljYXRpb25TZXF1ZW5jZU51bWJlcj0kdXRpbC5Mb25nPyR1dGlsLkxvbmcuZnJvbUJpdHMoMCwwLCExKTowLGUucHJvdG90eXBlLm9zbW9zaXNSZXBsaWNhdGlvbkJhc2VVcmw9XCJcIixlLmNyZWF0ZT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGUodCl9LGUuZW5jb2RlPWZ1bmN0aW9uKGUsdCl7aWYodHx8KHQ9JFdyaXRlci5jcmVhdGUoKSksbnVsbCE9ZS5iYm94JiZlLmhhc093blByb3BlcnR5KFwiYmJveFwiKSYmJHJvb3QuT1NNUEJGLkhlYWRlckJCb3guZW5jb2RlKGUuYmJveCx0LnVpbnQzMigxMCkuZm9yaygpKS5sZGVsaW0oKSxudWxsIT1lLnJlcXVpcmVkRmVhdHVyZXMmJmUucmVxdWlyZWRGZWF0dXJlcy5sZW5ndGgpZm9yKHZhciByPTA7cjxlLnJlcXVpcmVkRmVhdHVyZXMubGVuZ3RoOysrcil0LnVpbnQzMigzNCkuc3RyaW5nKGUucmVxdWlyZWRGZWF0dXJlc1tyXSk7aWYobnVsbCE9ZS5vcHRpb25hbEZlYXR1cmVzJiZlLm9wdGlvbmFsRmVhdHVyZXMubGVuZ3RoKWZvcih2YXIgcj0wO3I8ZS5vcHRpb25hbEZlYXR1cmVzLmxlbmd0aDsrK3IpdC51aW50MzIoNDIpLnN0cmluZyhlLm9wdGlvbmFsRmVhdHVyZXNbcl0pO3JldHVybiBudWxsIT1lLndyaXRpbmdwcm9ncmFtJiZlLmhhc093blByb3BlcnR5KFwid3JpdGluZ3Byb2dyYW1cIikmJnQudWludDMyKDEzMCkuc3RyaW5nKGUud3JpdGluZ3Byb2dyYW0pLG51bGwhPWUuc291cmNlJiZlLmhhc093blByb3BlcnR5KFwic291cmNlXCIpJiZ0LnVpbnQzMigxMzgpLnN0cmluZyhlLnNvdXJjZSksbnVsbCE9ZS5vc21vc2lzUmVwbGljYXRpb25UaW1lc3RhbXAmJmUuaGFzT3duUHJvcGVydHkoXCJvc21vc2lzUmVwbGljYXRpb25UaW1lc3RhbXBcIikmJnQudWludDMyKDI1NikuaW50NjQoZS5vc21vc2lzUmVwbGljYXRpb25UaW1lc3RhbXApLG51bGwhPWUub3Ntb3Npc1JlcGxpY2F0aW9uU2VxdWVuY2VOdW1iZXImJmUuaGFzT3duUHJvcGVydHkoXCJvc21vc2lzUmVwbGljYXRpb25TZXF1ZW5jZU51bWJlclwiKSYmdC51aW50MzIoMjY0KS5pbnQ2NChlLm9zbW9zaXNSZXBsaWNhdGlvblNlcXVlbmNlTnVtYmVyKSxudWxsIT1lLm9zbW9zaXNSZXBsaWNhdGlvbkJhc2VVcmwmJmUuaGFzT3duUHJvcGVydHkoXCJvc21vc2lzUmVwbGljYXRpb25CYXNlVXJsXCIpJiZ0LnVpbnQzMigyNzQpLnN0cmluZyhlLm9zbW9zaXNSZXBsaWNhdGlvbkJhc2VVcmwpLHR9LGUuZW5jb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZW5jb2RlKGUsdCkubGRlbGltKCl9LGUuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7ZSBpbnN0YW5jZW9mICRSZWFkZXJ8fChlPSRSZWFkZXIuY3JlYXRlKGUpKTtmb3IodmFyIHI9dm9pZCAwPT09dD9lLmxlbjplLnBvcyt0LGk9bmV3ICRyb290Lk9TTVBCRi5IZWFkZXJCbG9jaztlLnBvczxyOyl7dmFyIG49ZS51aW50MzIoKTtzd2l0Y2gobj4+PjMpe2Nhc2UgMTppLmJib3g9JHJvb3QuT1NNUEJGLkhlYWRlckJCb3guZGVjb2RlKGUsZS51aW50MzIoKSk7YnJlYWs7Y2FzZSA0OmkucmVxdWlyZWRGZWF0dXJlcyYmaS5yZXF1aXJlZEZlYXR1cmVzLmxlbmd0aHx8KGkucmVxdWlyZWRGZWF0dXJlcz1bXSksaS5yZXF1aXJlZEZlYXR1cmVzLnB1c2goZS5zdHJpbmcoKSk7YnJlYWs7Y2FzZSA1Omkub3B0aW9uYWxGZWF0dXJlcyYmaS5vcHRpb25hbEZlYXR1cmVzLmxlbmd0aHx8KGkub3B0aW9uYWxGZWF0dXJlcz1bXSksaS5vcHRpb25hbEZlYXR1cmVzLnB1c2goZS5zdHJpbmcoKSk7YnJlYWs7Y2FzZSAxNjppLndyaXRpbmdwcm9ncmFtPWUuc3RyaW5nKCk7YnJlYWs7Y2FzZSAxNzppLnNvdXJjZT1lLnN0cmluZygpO2JyZWFrO2Nhc2UgMzI6aS5vc21vc2lzUmVwbGljYXRpb25UaW1lc3RhbXA9ZS5pbnQ2NCgpO2JyZWFrO2Nhc2UgMzM6aS5vc21vc2lzUmVwbGljYXRpb25TZXF1ZW5jZU51bWJlcj1lLmludDY0KCk7YnJlYWs7Y2FzZSAzNDppLm9zbW9zaXNSZXBsaWNhdGlvbkJhc2VVcmw9ZS5zdHJpbmcoKTticmVhaztkZWZhdWx0OmUuc2tpcFR5cGUoNyZuKX19cmV0dXJuIGl9LGUuZGVjb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2YgJFJlYWRlcnx8KGU9bmV3ICRSZWFkZXIoZSkpLHRoaXMuZGVjb2RlKGUsZS51aW50MzIoKSl9LGUudmVyaWZ5PWZ1bmN0aW9uKGUpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlfHxudWxsPT09ZSlyZXR1cm5cIm9iamVjdCBleHBlY3RlZFwiO2lmKG51bGwhPWUuYmJveCYmZS5oYXNPd25Qcm9wZXJ0eShcImJib3hcIikpe3ZhciB0PSRyb290Lk9TTVBCRi5IZWFkZXJCQm94LnZlcmlmeShlLmJib3gpO2lmKHQpcmV0dXJuXCJiYm94LlwiK3R9aWYobnVsbCE9ZS5yZXF1aXJlZEZlYXR1cmVzJiZlLmhhc093blByb3BlcnR5KFwicmVxdWlyZWRGZWF0dXJlc1wiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS5yZXF1aXJlZEZlYXR1cmVzKSlyZXR1cm5cInJlcXVpcmVkRmVhdHVyZXM6IGFycmF5IGV4cGVjdGVkXCI7Zm9yKHZhciByPTA7cjxlLnJlcXVpcmVkRmVhdHVyZXMubGVuZ3RoOysrcilpZighJHV0aWwuaXNTdHJpbmcoZS5yZXF1aXJlZEZlYXR1cmVzW3JdKSlyZXR1cm5cInJlcXVpcmVkRmVhdHVyZXM6IHN0cmluZ1tdIGV4cGVjdGVkXCJ9aWYobnVsbCE9ZS5vcHRpb25hbEZlYXR1cmVzJiZlLmhhc093blByb3BlcnR5KFwib3B0aW9uYWxGZWF0dXJlc1wiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS5vcHRpb25hbEZlYXR1cmVzKSlyZXR1cm5cIm9wdGlvbmFsRmVhdHVyZXM6IGFycmF5IGV4cGVjdGVkXCI7Zm9yKHZhciByPTA7cjxlLm9wdGlvbmFsRmVhdHVyZXMubGVuZ3RoOysrcilpZighJHV0aWwuaXNTdHJpbmcoZS5vcHRpb25hbEZlYXR1cmVzW3JdKSlyZXR1cm5cIm9wdGlvbmFsRmVhdHVyZXM6IHN0cmluZ1tdIGV4cGVjdGVkXCJ9cmV0dXJuIG51bGwhPWUud3JpdGluZ3Byb2dyYW0mJmUuaGFzT3duUHJvcGVydHkoXCJ3cml0aW5ncHJvZ3JhbVwiKSYmISR1dGlsLmlzU3RyaW5nKGUud3JpdGluZ3Byb2dyYW0pP1wid3JpdGluZ3Byb2dyYW06IHN0cmluZyBleHBlY3RlZFwiOm51bGwhPWUuc291cmNlJiZlLmhhc093blByb3BlcnR5KFwic291cmNlXCIpJiYhJHV0aWwuaXNTdHJpbmcoZS5zb3VyY2UpP1wic291cmNlOiBzdHJpbmcgZXhwZWN0ZWRcIjpudWxsIT1lLm9zbW9zaXNSZXBsaWNhdGlvblRpbWVzdGFtcCYmZS5oYXNPd25Qcm9wZXJ0eShcIm9zbW9zaXNSZXBsaWNhdGlvblRpbWVzdGFtcFwiKSYmISgkdXRpbC5pc0ludGVnZXIoZS5vc21vc2lzUmVwbGljYXRpb25UaW1lc3RhbXApfHxlLm9zbW9zaXNSZXBsaWNhdGlvblRpbWVzdGFtcCYmJHV0aWwuaXNJbnRlZ2VyKGUub3Ntb3Npc1JlcGxpY2F0aW9uVGltZXN0YW1wLmxvdykmJiR1dGlsLmlzSW50ZWdlcihlLm9zbW9zaXNSZXBsaWNhdGlvblRpbWVzdGFtcC5oaWdoKSk/XCJvc21vc2lzUmVwbGljYXRpb25UaW1lc3RhbXA6IGludGVnZXJ8TG9uZyBleHBlY3RlZFwiOm51bGwhPWUub3Ntb3Npc1JlcGxpY2F0aW9uU2VxdWVuY2VOdW1iZXImJmUuaGFzT3duUHJvcGVydHkoXCJvc21vc2lzUmVwbGljYXRpb25TZXF1ZW5jZU51bWJlclwiKSYmISgkdXRpbC5pc0ludGVnZXIoZS5vc21vc2lzUmVwbGljYXRpb25TZXF1ZW5jZU51bWJlcil8fGUub3Ntb3Npc1JlcGxpY2F0aW9uU2VxdWVuY2VOdW1iZXImJiR1dGlsLmlzSW50ZWdlcihlLm9zbW9zaXNSZXBsaWNhdGlvblNlcXVlbmNlTnVtYmVyLmxvdykmJiR1dGlsLmlzSW50ZWdlcihlLm9zbW9zaXNSZXBsaWNhdGlvblNlcXVlbmNlTnVtYmVyLmhpZ2gpKT9cIm9zbW9zaXNSZXBsaWNhdGlvblNlcXVlbmNlTnVtYmVyOiBpbnRlZ2VyfExvbmcgZXhwZWN0ZWRcIjpudWxsIT1lLm9zbW9zaXNSZXBsaWNhdGlvbkJhc2VVcmwmJmUuaGFzT3duUHJvcGVydHkoXCJvc21vc2lzUmVwbGljYXRpb25CYXNlVXJsXCIpJiYhJHV0aWwuaXNTdHJpbmcoZS5vc21vc2lzUmVwbGljYXRpb25CYXNlVXJsKT9cIm9zbW9zaXNSZXBsaWNhdGlvbkJhc2VVcmw6IHN0cmluZyBleHBlY3RlZFwiOm51bGx9LGUuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgJHJvb3QuT1NNUEJGLkhlYWRlckJsb2NrKXJldHVybiBlO3ZhciB0PW5ldyAkcm9vdC5PU01QQkYuSGVhZGVyQmxvY2s7aWYobnVsbCE9ZS5iYm94KXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5iYm94KXRocm93IFR5cGVFcnJvcihcIi5PU01QQkYuSGVhZGVyQmxvY2suYmJveDogb2JqZWN0IGV4cGVjdGVkXCIpO3QuYmJveD0kcm9vdC5PU01QQkYuSGVhZGVyQkJveC5mcm9tT2JqZWN0KGUuYmJveCl9aWYoZS5yZXF1aXJlZEZlYXR1cmVzKXtpZighQXJyYXkuaXNBcnJheShlLnJlcXVpcmVkRmVhdHVyZXMpKXRocm93IFR5cGVFcnJvcihcIi5PU01QQkYuSGVhZGVyQmxvY2sucmVxdWlyZWRGZWF0dXJlczogYXJyYXkgZXhwZWN0ZWRcIik7dC5yZXF1aXJlZEZlYXR1cmVzPVtdO2Zvcih2YXIgcj0wO3I8ZS5yZXF1aXJlZEZlYXR1cmVzLmxlbmd0aDsrK3IpdC5yZXF1aXJlZEZlYXR1cmVzW3JdPVN0cmluZyhlLnJlcXVpcmVkRmVhdHVyZXNbcl0pfWlmKGUub3B0aW9uYWxGZWF0dXJlcyl7aWYoIUFycmF5LmlzQXJyYXkoZS5vcHRpb25hbEZlYXR1cmVzKSl0aHJvdyBUeXBlRXJyb3IoXCIuT1NNUEJGLkhlYWRlckJsb2NrLm9wdGlvbmFsRmVhdHVyZXM6IGFycmF5IGV4cGVjdGVkXCIpO3Qub3B0aW9uYWxGZWF0dXJlcz1bXTtmb3IodmFyIHI9MDtyPGUub3B0aW9uYWxGZWF0dXJlcy5sZW5ndGg7KytyKXQub3B0aW9uYWxGZWF0dXJlc1tyXT1TdHJpbmcoZS5vcHRpb25hbEZlYXR1cmVzW3JdKX1yZXR1cm4gbnVsbCE9ZS53cml0aW5ncHJvZ3JhbSYmKHQud3JpdGluZ3Byb2dyYW09U3RyaW5nKGUud3JpdGluZ3Byb2dyYW0pKSxudWxsIT1lLnNvdXJjZSYmKHQuc291cmNlPVN0cmluZyhlLnNvdXJjZSkpLG51bGwhPWUub3Ntb3Npc1JlcGxpY2F0aW9uVGltZXN0YW1wJiYoJHV0aWwuTG9uZz8odC5vc21vc2lzUmVwbGljYXRpb25UaW1lc3RhbXA9JHV0aWwuTG9uZy5mcm9tVmFsdWUoZS5vc21vc2lzUmVwbGljYXRpb25UaW1lc3RhbXApKS51bnNpZ25lZD0hMTpcInN0cmluZ1wiPT10eXBlb2YgZS5vc21vc2lzUmVwbGljYXRpb25UaW1lc3RhbXA/dC5vc21vc2lzUmVwbGljYXRpb25UaW1lc3RhbXA9cGFyc2VJbnQoZS5vc21vc2lzUmVwbGljYXRpb25UaW1lc3RhbXAsMTApOlwibnVtYmVyXCI9PXR5cGVvZiBlLm9zbW9zaXNSZXBsaWNhdGlvblRpbWVzdGFtcD90Lm9zbW9zaXNSZXBsaWNhdGlvblRpbWVzdGFtcD1lLm9zbW9zaXNSZXBsaWNhdGlvblRpbWVzdGFtcDpcIm9iamVjdFwiPT10eXBlb2YgZS5vc21vc2lzUmVwbGljYXRpb25UaW1lc3RhbXAmJih0Lm9zbW9zaXNSZXBsaWNhdGlvblRpbWVzdGFtcD1uZXcgJHV0aWwuTG9uZ0JpdHMoZS5vc21vc2lzUmVwbGljYXRpb25UaW1lc3RhbXAubG93Pj4+MCxlLm9zbW9zaXNSZXBsaWNhdGlvblRpbWVzdGFtcC5oaWdoPj4+MCkudG9OdW1iZXIoKSkpLG51bGwhPWUub3Ntb3Npc1JlcGxpY2F0aW9uU2VxdWVuY2VOdW1iZXImJigkdXRpbC5Mb25nPyh0Lm9zbW9zaXNSZXBsaWNhdGlvblNlcXVlbmNlTnVtYmVyPSR1dGlsLkxvbmcuZnJvbVZhbHVlKGUub3Ntb3Npc1JlcGxpY2F0aW9uU2VxdWVuY2VOdW1iZXIpKS51bnNpZ25lZD0hMTpcInN0cmluZ1wiPT10eXBlb2YgZS5vc21vc2lzUmVwbGljYXRpb25TZXF1ZW5jZU51bWJlcj90Lm9zbW9zaXNSZXBsaWNhdGlvblNlcXVlbmNlTnVtYmVyPXBhcnNlSW50KGUub3Ntb3Npc1JlcGxpY2F0aW9uU2VxdWVuY2VOdW1iZXIsMTApOlwibnVtYmVyXCI9PXR5cGVvZiBlLm9zbW9zaXNSZXBsaWNhdGlvblNlcXVlbmNlTnVtYmVyP3Qub3Ntb3Npc1JlcGxpY2F0aW9uU2VxdWVuY2VOdW1iZXI9ZS5vc21vc2lzUmVwbGljYXRpb25TZXF1ZW5jZU51bWJlcjpcIm9iamVjdFwiPT10eXBlb2YgZS5vc21vc2lzUmVwbGljYXRpb25TZXF1ZW5jZU51bWJlciYmKHQub3Ntb3Npc1JlcGxpY2F0aW9uU2VxdWVuY2VOdW1iZXI9bmV3ICR1dGlsLkxvbmdCaXRzKGUub3Ntb3Npc1JlcGxpY2F0aW9uU2VxdWVuY2VOdW1iZXIubG93Pj4+MCxlLm9zbW9zaXNSZXBsaWNhdGlvblNlcXVlbmNlTnVtYmVyLmhpZ2g+Pj4wKS50b051bWJlcigpKSksbnVsbCE9ZS5vc21vc2lzUmVwbGljYXRpb25CYXNlVXJsJiYodC5vc21vc2lzUmVwbGljYXRpb25CYXNlVXJsPVN0cmluZyhlLm9zbW9zaXNSZXBsaWNhdGlvbkJhc2VVcmwpKSx0fSxlLnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dHx8KHQ9e30pO3ZhciByPXt9O2lmKCh0LmFycmF5c3x8dC5kZWZhdWx0cykmJihyLnJlcXVpcmVkRmVhdHVyZXM9W10sci5vcHRpb25hbEZlYXR1cmVzPVtdKSx0LmRlZmF1bHRzKXtpZihyLmJib3g9bnVsbCxyLndyaXRpbmdwcm9ncmFtPVwiXCIsci5zb3VyY2U9XCJcIiwkdXRpbC5Mb25nKXt2YXIgaT1uZXcgJHV0aWwuTG9uZygwLDAsITEpO3Iub3Ntb3Npc1JlcGxpY2F0aW9uVGltZXN0YW1wPXQubG9uZ3M9PT1TdHJpbmc/aS50b1N0cmluZygpOnQubG9uZ3M9PT1OdW1iZXI/aS50b051bWJlcigpOml9ZWxzZSByLm9zbW9zaXNSZXBsaWNhdGlvblRpbWVzdGFtcD10LmxvbmdzPT09U3RyaW5nP1wiMFwiOjA7aWYoJHV0aWwuTG9uZyl7dmFyIGk9bmV3ICR1dGlsLkxvbmcoMCwwLCExKTtyLm9zbW9zaXNSZXBsaWNhdGlvblNlcXVlbmNlTnVtYmVyPXQubG9uZ3M9PT1TdHJpbmc/aS50b1N0cmluZygpOnQubG9uZ3M9PT1OdW1iZXI/aS50b051bWJlcigpOml9ZWxzZSByLm9zbW9zaXNSZXBsaWNhdGlvblNlcXVlbmNlTnVtYmVyPXQubG9uZ3M9PT1TdHJpbmc/XCIwXCI6MDtyLm9zbW9zaXNSZXBsaWNhdGlvbkJhc2VVcmw9XCJcIn1pZihudWxsIT1lLmJib3gmJmUuaGFzT3duUHJvcGVydHkoXCJiYm94XCIpJiYoci5iYm94PSRyb290Lk9TTVBCRi5IZWFkZXJCQm94LnRvT2JqZWN0KGUuYmJveCx0KSksZS5yZXF1aXJlZEZlYXR1cmVzJiZlLnJlcXVpcmVkRmVhdHVyZXMubGVuZ3RoKXtyLnJlcXVpcmVkRmVhdHVyZXM9W107Zm9yKHZhciBuPTA7bjxlLnJlcXVpcmVkRmVhdHVyZXMubGVuZ3RoOysrbilyLnJlcXVpcmVkRmVhdHVyZXNbbl09ZS5yZXF1aXJlZEZlYXR1cmVzW25dfWlmKGUub3B0aW9uYWxGZWF0dXJlcyYmZS5vcHRpb25hbEZlYXR1cmVzLmxlbmd0aCl7ci5vcHRpb25hbEZlYXR1cmVzPVtdO2Zvcih2YXIgbj0wO248ZS5vcHRpb25hbEZlYXR1cmVzLmxlbmd0aDsrK24pci5vcHRpb25hbEZlYXR1cmVzW25dPWUub3B0aW9uYWxGZWF0dXJlc1tuXX1yZXR1cm4gbnVsbCE9ZS53cml0aW5ncHJvZ3JhbSYmZS5oYXNPd25Qcm9wZXJ0eShcIndyaXRpbmdwcm9ncmFtXCIpJiYoci53cml0aW5ncHJvZ3JhbT1lLndyaXRpbmdwcm9ncmFtKSxudWxsIT1lLnNvdXJjZSYmZS5oYXNPd25Qcm9wZXJ0eShcInNvdXJjZVwiKSYmKHIuc291cmNlPWUuc291cmNlKSxudWxsIT1lLm9zbW9zaXNSZXBsaWNhdGlvblRpbWVzdGFtcCYmZS5oYXNPd25Qcm9wZXJ0eShcIm9zbW9zaXNSZXBsaWNhdGlvblRpbWVzdGFtcFwiKSYmKFwibnVtYmVyXCI9PXR5cGVvZiBlLm9zbW9zaXNSZXBsaWNhdGlvblRpbWVzdGFtcD9yLm9zbW9zaXNSZXBsaWNhdGlvblRpbWVzdGFtcD10LmxvbmdzPT09U3RyaW5nP1N0cmluZyhlLm9zbW9zaXNSZXBsaWNhdGlvblRpbWVzdGFtcCk6ZS5vc21vc2lzUmVwbGljYXRpb25UaW1lc3RhbXA6ci5vc21vc2lzUmVwbGljYXRpb25UaW1lc3RhbXA9dC5sb25ncz09PVN0cmluZz8kdXRpbC5Mb25nLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUub3Ntb3Npc1JlcGxpY2F0aW9uVGltZXN0YW1wKTp0LmxvbmdzPT09TnVtYmVyP25ldyAkdXRpbC5Mb25nQml0cyhlLm9zbW9zaXNSZXBsaWNhdGlvblRpbWVzdGFtcC5sb3c+Pj4wLGUub3Ntb3Npc1JlcGxpY2F0aW9uVGltZXN0YW1wLmhpZ2g+Pj4wKS50b051bWJlcigpOmUub3Ntb3Npc1JlcGxpY2F0aW9uVGltZXN0YW1wKSxudWxsIT1lLm9zbW9zaXNSZXBsaWNhdGlvblNlcXVlbmNlTnVtYmVyJiZlLmhhc093blByb3BlcnR5KFwib3Ntb3Npc1JlcGxpY2F0aW9uU2VxdWVuY2VOdW1iZXJcIikmJihcIm51bWJlclwiPT10eXBlb2YgZS5vc21vc2lzUmVwbGljYXRpb25TZXF1ZW5jZU51bWJlcj9yLm9zbW9zaXNSZXBsaWNhdGlvblNlcXVlbmNlTnVtYmVyPXQubG9uZ3M9PT1TdHJpbmc/U3RyaW5nKGUub3Ntb3Npc1JlcGxpY2F0aW9uU2VxdWVuY2VOdW1iZXIpOmUub3Ntb3Npc1JlcGxpY2F0aW9uU2VxdWVuY2VOdW1iZXI6ci5vc21vc2lzUmVwbGljYXRpb25TZXF1ZW5jZU51bWJlcj10LmxvbmdzPT09U3RyaW5nPyR1dGlsLkxvbmcucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZS5vc21vc2lzUmVwbGljYXRpb25TZXF1ZW5jZU51bWJlcik6dC5sb25ncz09PU51bWJlcj9uZXcgJHV0aWwuTG9uZ0JpdHMoZS5vc21vc2lzUmVwbGljYXRpb25TZXF1ZW5jZU51bWJlci5sb3c+Pj4wLGUub3Ntb3Npc1JlcGxpY2F0aW9uU2VxdWVuY2VOdW1iZXIuaGlnaD4+PjApLnRvTnVtYmVyKCk6ZS5vc21vc2lzUmVwbGljYXRpb25TZXF1ZW5jZU51bWJlciksbnVsbCE9ZS5vc21vc2lzUmVwbGljYXRpb25CYXNlVXJsJiZlLmhhc093blByb3BlcnR5KFwib3Ntb3Npc1JlcGxpY2F0aW9uQmFzZVVybFwiKSYmKHIub3Ntb3Npc1JlcGxpY2F0aW9uQmFzZVVybD1lLm9zbW9zaXNSZXBsaWNhdGlvbkJhc2VVcmwpLHJ9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsJHByb3RvYnVmLnV0aWwudG9KU09OT3B0aW9ucyl9LGV9KCksZS5IZWFkZXJCQm94PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtpZihlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxyPTA7cjx0Lmxlbmd0aDsrK3IpbnVsbCE9ZVt0W3JdXSYmKHRoaXNbdFtyXV09ZVt0W3JdXSl9cmV0dXJuIGUucHJvdG90eXBlLmxlZnQ9JHV0aWwuTG9uZz8kdXRpbC5Mb25nLmZyb21CaXRzKDAsMCwhMSk6MCxlLnByb3RvdHlwZS5yaWdodD0kdXRpbC5Mb25nPyR1dGlsLkxvbmcuZnJvbUJpdHMoMCwwLCExKTowLGUucHJvdG90eXBlLnRvcD0kdXRpbC5Mb25nPyR1dGlsLkxvbmcuZnJvbUJpdHMoMCwwLCExKTowLGUucHJvdG90eXBlLmJvdHRvbT0kdXRpbC5Mb25nPyR1dGlsLkxvbmcuZnJvbUJpdHMoMCwwLCExKTowLGUuY3JlYXRlPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgZSh0KX0sZS5lbmNvZGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8KHQ9JFdyaXRlci5jcmVhdGUoKSksdC51aW50MzIoOCkuc2ludDY0KGUubGVmdCksdC51aW50MzIoMTYpLnNpbnQ2NChlLnJpZ2h0KSx0LnVpbnQzMigyNCkuc2ludDY0KGUudG9wKSx0LnVpbnQzMigzMikuc2ludDY0KGUuYm90dG9tKSx0fSxlLmVuY29kZURlbGltaXRlZD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVuY29kZShlLHQpLmxkZWxpbSgpfSxlLmRlY29kZT1mdW5jdGlvbihlLHQpe2UgaW5zdGFuY2VvZiAkUmVhZGVyfHwoZT0kUmVhZGVyLmNyZWF0ZShlKSk7Zm9yKHZhciByPXZvaWQgMD09PXQ/ZS5sZW46ZS5wb3MrdCxpPW5ldyAkcm9vdC5PU01QQkYuSGVhZGVyQkJveDtlLnBvczxyOyl7dmFyIG49ZS51aW50MzIoKTtzd2l0Y2gobj4+PjMpe2Nhc2UgMTppLmxlZnQ9ZS5zaW50NjQoKTticmVhaztjYXNlIDI6aS5yaWdodD1lLnNpbnQ2NCgpO2JyZWFrO2Nhc2UgMzppLnRvcD1lLnNpbnQ2NCgpO2JyZWFrO2Nhc2UgNDppLmJvdHRvbT1lLnNpbnQ2NCgpO2JyZWFrO2RlZmF1bHQ6ZS5za2lwVHlwZSg3Jm4pfX1pZighaS5oYXNPd25Qcm9wZXJ0eShcImxlZnRcIikpdGhyb3cgJHV0aWwuUHJvdG9jb2xFcnJvcihcIm1pc3NpbmcgcmVxdWlyZWQgJ2xlZnQnXCIse2luc3RhbmNlOml9KTtpZighaS5oYXNPd25Qcm9wZXJ0eShcInJpZ2h0XCIpKXRocm93ICR1dGlsLlByb3RvY29sRXJyb3IoXCJtaXNzaW5nIHJlcXVpcmVkICdyaWdodCdcIix7aW5zdGFuY2U6aX0pO2lmKCFpLmhhc093blByb3BlcnR5KFwidG9wXCIpKXRocm93ICR1dGlsLlByb3RvY29sRXJyb3IoXCJtaXNzaW5nIHJlcXVpcmVkICd0b3AnXCIse2luc3RhbmNlOml9KTtpZighaS5oYXNPd25Qcm9wZXJ0eShcImJvdHRvbVwiKSl0aHJvdyAkdXRpbC5Qcm90b2NvbEVycm9yKFwibWlzc2luZyByZXF1aXJlZCAnYm90dG9tJ1wiLHtpbnN0YW5jZTppfSk7cmV0dXJuIGl9LGUuZGVjb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2YgJFJlYWRlcnx8KGU9bmV3ICRSZWFkZXIoZSkpLHRoaXMuZGVjb2RlKGUsZS51aW50MzIoKSl9LGUudmVyaWZ5PWZ1bmN0aW9uKGUpe3JldHVyblwib2JqZWN0XCIhPXR5cGVvZiBlfHxudWxsPT09ZT9cIm9iamVjdCBleHBlY3RlZFwiOiR1dGlsLmlzSW50ZWdlcihlLmxlZnQpfHxlLmxlZnQmJiR1dGlsLmlzSW50ZWdlcihlLmxlZnQubG93KSYmJHV0aWwuaXNJbnRlZ2VyKGUubGVmdC5oaWdoKT8kdXRpbC5pc0ludGVnZXIoZS5yaWdodCl8fGUucmlnaHQmJiR1dGlsLmlzSW50ZWdlcihlLnJpZ2h0LmxvdykmJiR1dGlsLmlzSW50ZWdlcihlLnJpZ2h0LmhpZ2gpPyR1dGlsLmlzSW50ZWdlcihlLnRvcCl8fGUudG9wJiYkdXRpbC5pc0ludGVnZXIoZS50b3AubG93KSYmJHV0aWwuaXNJbnRlZ2VyKGUudG9wLmhpZ2gpPyR1dGlsLmlzSW50ZWdlcihlLmJvdHRvbSl8fGUuYm90dG9tJiYkdXRpbC5pc0ludGVnZXIoZS5ib3R0b20ubG93KSYmJHV0aWwuaXNJbnRlZ2VyKGUuYm90dG9tLmhpZ2gpP251bGw6XCJib3R0b206IGludGVnZXJ8TG9uZyBleHBlY3RlZFwiOlwidG9wOiBpbnRlZ2VyfExvbmcgZXhwZWN0ZWRcIjpcInJpZ2h0OiBpbnRlZ2VyfExvbmcgZXhwZWN0ZWRcIjpcImxlZnQ6IGludGVnZXJ8TG9uZyBleHBlY3RlZFwifSxlLmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mICRyb290Lk9TTVBCRi5IZWFkZXJCQm94KXJldHVybiBlO3ZhciB0PW5ldyAkcm9vdC5PU01QQkYuSGVhZGVyQkJveDtyZXR1cm4gbnVsbCE9ZS5sZWZ0JiYoJHV0aWwuTG9uZz8odC5sZWZ0PSR1dGlsLkxvbmcuZnJvbVZhbHVlKGUubGVmdCkpLnVuc2lnbmVkPSExOlwic3RyaW5nXCI9PXR5cGVvZiBlLmxlZnQ/dC5sZWZ0PXBhcnNlSW50KGUubGVmdCwxMCk6XCJudW1iZXJcIj09dHlwZW9mIGUubGVmdD90LmxlZnQ9ZS5sZWZ0Olwib2JqZWN0XCI9PXR5cGVvZiBlLmxlZnQmJih0LmxlZnQ9bmV3ICR1dGlsLkxvbmdCaXRzKGUubGVmdC5sb3c+Pj4wLGUubGVmdC5oaWdoPj4+MCkudG9OdW1iZXIoKSkpLG51bGwhPWUucmlnaHQmJigkdXRpbC5Mb25nPyh0LnJpZ2h0PSR1dGlsLkxvbmcuZnJvbVZhbHVlKGUucmlnaHQpKS51bnNpZ25lZD0hMTpcInN0cmluZ1wiPT10eXBlb2YgZS5yaWdodD90LnJpZ2h0PXBhcnNlSW50KGUucmlnaHQsMTApOlwibnVtYmVyXCI9PXR5cGVvZiBlLnJpZ2h0P3QucmlnaHQ9ZS5yaWdodDpcIm9iamVjdFwiPT10eXBlb2YgZS5yaWdodCYmKHQucmlnaHQ9bmV3ICR1dGlsLkxvbmdCaXRzKGUucmlnaHQubG93Pj4+MCxlLnJpZ2h0LmhpZ2g+Pj4wKS50b051bWJlcigpKSksbnVsbCE9ZS50b3AmJigkdXRpbC5Mb25nPyh0LnRvcD0kdXRpbC5Mb25nLmZyb21WYWx1ZShlLnRvcCkpLnVuc2lnbmVkPSExOlwic3RyaW5nXCI9PXR5cGVvZiBlLnRvcD90LnRvcD1wYXJzZUludChlLnRvcCwxMCk6XCJudW1iZXJcIj09dHlwZW9mIGUudG9wP3QudG9wPWUudG9wOlwib2JqZWN0XCI9PXR5cGVvZiBlLnRvcCYmKHQudG9wPW5ldyAkdXRpbC5Mb25nQml0cyhlLnRvcC5sb3c+Pj4wLGUudG9wLmhpZ2g+Pj4wKS50b051bWJlcigpKSksbnVsbCE9ZS5ib3R0b20mJigkdXRpbC5Mb25nPyh0LmJvdHRvbT0kdXRpbC5Mb25nLmZyb21WYWx1ZShlLmJvdHRvbSkpLnVuc2lnbmVkPSExOlwic3RyaW5nXCI9PXR5cGVvZiBlLmJvdHRvbT90LmJvdHRvbT1wYXJzZUludChlLmJvdHRvbSwxMCk6XCJudW1iZXJcIj09dHlwZW9mIGUuYm90dG9tP3QuYm90dG9tPWUuYm90dG9tOlwib2JqZWN0XCI9PXR5cGVvZiBlLmJvdHRvbSYmKHQuYm90dG9tPW5ldyAkdXRpbC5Mb25nQml0cyhlLmJvdHRvbS5sb3c+Pj4wLGUuYm90dG9tLmhpZ2g+Pj4wKS50b051bWJlcigpKSksdH0sZS50b09iamVjdD1mdW5jdGlvbihlLHQpe3R8fCh0PXt9KTt2YXIgcj17fTtpZih0LmRlZmF1bHRzKXtpZigkdXRpbC5Mb25nKXt2YXIgaT1uZXcgJHV0aWwuTG9uZygwLDAsITEpO3IubGVmdD10LmxvbmdzPT09U3RyaW5nP2kudG9TdHJpbmcoKTp0LmxvbmdzPT09TnVtYmVyP2kudG9OdW1iZXIoKTppfWVsc2Ugci5sZWZ0PXQubG9uZ3M9PT1TdHJpbmc/XCIwXCI6MDtpZigkdXRpbC5Mb25nKXt2YXIgaT1uZXcgJHV0aWwuTG9uZygwLDAsITEpO3IucmlnaHQ9dC5sb25ncz09PVN0cmluZz9pLnRvU3RyaW5nKCk6dC5sb25ncz09PU51bWJlcj9pLnRvTnVtYmVyKCk6aX1lbHNlIHIucmlnaHQ9dC5sb25ncz09PVN0cmluZz9cIjBcIjowO2lmKCR1dGlsLkxvbmcpe3ZhciBpPW5ldyAkdXRpbC5Mb25nKDAsMCwhMSk7ci50b3A9dC5sb25ncz09PVN0cmluZz9pLnRvU3RyaW5nKCk6dC5sb25ncz09PU51bWJlcj9pLnRvTnVtYmVyKCk6aX1lbHNlIHIudG9wPXQubG9uZ3M9PT1TdHJpbmc/XCIwXCI6MDtpZigkdXRpbC5Mb25nKXt2YXIgaT1uZXcgJHV0aWwuTG9uZygwLDAsITEpO3IuYm90dG9tPXQubG9uZ3M9PT1TdHJpbmc/aS50b1N0cmluZygpOnQubG9uZ3M9PT1OdW1iZXI/aS50b051bWJlcigpOml9ZWxzZSByLmJvdHRvbT10LmxvbmdzPT09U3RyaW5nP1wiMFwiOjB9cmV0dXJuIG51bGwhPWUubGVmdCYmZS5oYXNPd25Qcm9wZXJ0eShcImxlZnRcIikmJihcIm51bWJlclwiPT10eXBlb2YgZS5sZWZ0P3IubGVmdD10LmxvbmdzPT09U3RyaW5nP1N0cmluZyhlLmxlZnQpOmUubGVmdDpyLmxlZnQ9dC5sb25ncz09PVN0cmluZz8kdXRpbC5Mb25nLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUubGVmdCk6dC5sb25ncz09PU51bWJlcj9uZXcgJHV0aWwuTG9uZ0JpdHMoZS5sZWZ0Lmxvdz4+PjAsZS5sZWZ0LmhpZ2g+Pj4wKS50b051bWJlcigpOmUubGVmdCksbnVsbCE9ZS5yaWdodCYmZS5oYXNPd25Qcm9wZXJ0eShcInJpZ2h0XCIpJiYoXCJudW1iZXJcIj09dHlwZW9mIGUucmlnaHQ/ci5yaWdodD10LmxvbmdzPT09U3RyaW5nP1N0cmluZyhlLnJpZ2h0KTplLnJpZ2h0OnIucmlnaHQ9dC5sb25ncz09PVN0cmluZz8kdXRpbC5Mb25nLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUucmlnaHQpOnQubG9uZ3M9PT1OdW1iZXI/bmV3ICR1dGlsLkxvbmdCaXRzKGUucmlnaHQubG93Pj4+MCxlLnJpZ2h0LmhpZ2g+Pj4wKS50b051bWJlcigpOmUucmlnaHQpLG51bGwhPWUudG9wJiZlLmhhc093blByb3BlcnR5KFwidG9wXCIpJiYoXCJudW1iZXJcIj09dHlwZW9mIGUudG9wP3IudG9wPXQubG9uZ3M9PT1TdHJpbmc/U3RyaW5nKGUudG9wKTplLnRvcDpyLnRvcD10LmxvbmdzPT09U3RyaW5nPyR1dGlsLkxvbmcucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZS50b3ApOnQubG9uZ3M9PT1OdW1iZXI/bmV3ICR1dGlsLkxvbmdCaXRzKGUudG9wLmxvdz4+PjAsZS50b3AuaGlnaD4+PjApLnRvTnVtYmVyKCk6ZS50b3ApLG51bGwhPWUuYm90dG9tJiZlLmhhc093blByb3BlcnR5KFwiYm90dG9tXCIpJiYoXCJudW1iZXJcIj09dHlwZW9mIGUuYm90dG9tP3IuYm90dG9tPXQubG9uZ3M9PT1TdHJpbmc/U3RyaW5nKGUuYm90dG9tKTplLmJvdHRvbTpyLmJvdHRvbT10LmxvbmdzPT09U3RyaW5nPyR1dGlsLkxvbmcucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZS5ib3R0b20pOnQubG9uZ3M9PT1OdW1iZXI/bmV3ICR1dGlsLkxvbmdCaXRzKGUuYm90dG9tLmxvdz4+PjAsZS5ib3R0b20uaGlnaD4+PjApLnRvTnVtYmVyKCk6ZS5ib3R0b20pLHJ9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsJHByb3RvYnVmLnV0aWwudG9KU09OT3B0aW9ucyl9LGV9KCksZS5QcmltaXRpdmVCbG9jaz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7aWYodGhpcy5wcmltaXRpdmVncm91cD1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxyPTA7cjx0Lmxlbmd0aDsrK3IpbnVsbCE9ZVt0W3JdXSYmKHRoaXNbdFtyXV09ZVt0W3JdXSl9cmV0dXJuIGUucHJvdG90eXBlLnN0cmluZ3RhYmxlPW51bGwsZS5wcm90b3R5cGUucHJpbWl0aXZlZ3JvdXA9JHV0aWwuZW1wdHlBcnJheSxlLnByb3RvdHlwZS5ncmFudWxhcml0eT0xMDAsZS5wcm90b3R5cGUubGF0T2Zmc2V0PSR1dGlsLkxvbmc/JHV0aWwuTG9uZy5mcm9tQml0cygwLDAsITEpOjAsZS5wcm90b3R5cGUubG9uT2Zmc2V0PSR1dGlsLkxvbmc/JHV0aWwuTG9uZy5mcm9tQml0cygwLDAsITEpOjAsZS5wcm90b3R5cGUuZGF0ZUdyYW51bGFyaXR5PTFlMyxlLmNyZWF0ZT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGUodCl9LGUuZW5jb2RlPWZ1bmN0aW9uKGUsdCl7aWYodHx8KHQ9JFdyaXRlci5jcmVhdGUoKSksJHJvb3QuT1NNUEJGLlN0cmluZ1RhYmxlLmVuY29kZShlLnN0cmluZ3RhYmxlLHQudWludDMyKDEwKS5mb3JrKCkpLmxkZWxpbSgpLG51bGwhPWUucHJpbWl0aXZlZ3JvdXAmJmUucHJpbWl0aXZlZ3JvdXAubGVuZ3RoKWZvcih2YXIgcj0wO3I8ZS5wcmltaXRpdmVncm91cC5sZW5ndGg7KytyKSRyb290Lk9TTVBCRi5QcmltaXRpdmVHcm91cC5lbmNvZGUoZS5wcmltaXRpdmVncm91cFtyXSx0LnVpbnQzMigxOCkuZm9yaygpKS5sZGVsaW0oKTtyZXR1cm4gbnVsbCE9ZS5ncmFudWxhcml0eSYmZS5oYXNPd25Qcm9wZXJ0eShcImdyYW51bGFyaXR5XCIpJiZ0LnVpbnQzMigxMzYpLmludDMyKGUuZ3JhbnVsYXJpdHkpLG51bGwhPWUuZGF0ZUdyYW51bGFyaXR5JiZlLmhhc093blByb3BlcnR5KFwiZGF0ZUdyYW51bGFyaXR5XCIpJiZ0LnVpbnQzMigxNDQpLmludDMyKGUuZGF0ZUdyYW51bGFyaXR5KSxudWxsIT1lLmxhdE9mZnNldCYmZS5oYXNPd25Qcm9wZXJ0eShcImxhdE9mZnNldFwiKSYmdC51aW50MzIoMTUyKS5pbnQ2NChlLmxhdE9mZnNldCksbnVsbCE9ZS5sb25PZmZzZXQmJmUuaGFzT3duUHJvcGVydHkoXCJsb25PZmZzZXRcIikmJnQudWludDMyKDE2MCkuaW50NjQoZS5sb25PZmZzZXQpLHR9LGUuZW5jb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZW5jb2RlKGUsdCkubGRlbGltKCl9LGUuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7ZSBpbnN0YW5jZW9mICRSZWFkZXJ8fChlPSRSZWFkZXIuY3JlYXRlKGUpKTtmb3IodmFyIHI9dm9pZCAwPT09dD9lLmxlbjplLnBvcyt0LGk9bmV3ICRyb290Lk9TTVBCRi5QcmltaXRpdmVCbG9jaztlLnBvczxyOyl7dmFyIG49ZS51aW50MzIoKTtzd2l0Y2gobj4+PjMpe2Nhc2UgMTppLnN0cmluZ3RhYmxlPSRyb290Lk9TTVBCRi5TdHJpbmdUYWJsZS5kZWNvZGUoZSxlLnVpbnQzMigpKTticmVhaztjYXNlIDI6aS5wcmltaXRpdmVncm91cCYmaS5wcmltaXRpdmVncm91cC5sZW5ndGh8fChpLnByaW1pdGl2ZWdyb3VwPVtdKSxpLnByaW1pdGl2ZWdyb3VwLnB1c2goJHJvb3QuT1NNUEJGLlByaW1pdGl2ZUdyb3VwLmRlY29kZShlLGUudWludDMyKCkpKTticmVhaztjYXNlIDE3OmkuZ3JhbnVsYXJpdHk9ZS5pbnQzMigpO2JyZWFrO2Nhc2UgMTk6aS5sYXRPZmZzZXQ9ZS5pbnQ2NCgpO2JyZWFrO2Nhc2UgMjA6aS5sb25PZmZzZXQ9ZS5pbnQ2NCgpO2JyZWFrO2Nhc2UgMTg6aS5kYXRlR3JhbnVsYXJpdHk9ZS5pbnQzMigpO2JyZWFrO2RlZmF1bHQ6ZS5za2lwVHlwZSg3Jm4pfX1pZighaS5oYXNPd25Qcm9wZXJ0eShcInN0cmluZ3RhYmxlXCIpKXRocm93ICR1dGlsLlByb3RvY29sRXJyb3IoXCJtaXNzaW5nIHJlcXVpcmVkICdzdHJpbmd0YWJsZSdcIix7aW5zdGFuY2U6aX0pO3JldHVybiBpfSxlLmRlY29kZURlbGltaXRlZD1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mICRSZWFkZXJ8fChlPW5ldyAkUmVhZGVyKGUpKSx0aGlzLmRlY29kZShlLGUudWludDMyKCkpfSxlLnZlcmlmeT1mdW5jdGlvbihlKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZXx8bnVsbD09PWUpcmV0dXJuXCJvYmplY3QgZXhwZWN0ZWRcIjt2YXIgdD0kcm9vdC5PU01QQkYuU3RyaW5nVGFibGUudmVyaWZ5KGUuc3RyaW5ndGFibGUpO2lmKHQpcmV0dXJuXCJzdHJpbmd0YWJsZS5cIit0O2lmKG51bGwhPWUucHJpbWl0aXZlZ3JvdXAmJmUuaGFzT3duUHJvcGVydHkoXCJwcmltaXRpdmVncm91cFwiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS5wcmltaXRpdmVncm91cCkpcmV0dXJuXCJwcmltaXRpdmVncm91cDogYXJyYXkgZXhwZWN0ZWRcIjtmb3IodmFyIHI9MDtyPGUucHJpbWl0aXZlZ3JvdXAubGVuZ3RoOysrcil7dmFyIHQ9JHJvb3QuT1NNUEJGLlByaW1pdGl2ZUdyb3VwLnZlcmlmeShlLnByaW1pdGl2ZWdyb3VwW3JdKTtpZih0KXJldHVyblwicHJpbWl0aXZlZ3JvdXAuXCIrdH19cmV0dXJuIG51bGwhPWUuZ3JhbnVsYXJpdHkmJmUuaGFzT3duUHJvcGVydHkoXCJncmFudWxhcml0eVwiKSYmISR1dGlsLmlzSW50ZWdlcihlLmdyYW51bGFyaXR5KT9cImdyYW51bGFyaXR5OiBpbnRlZ2VyIGV4cGVjdGVkXCI6bnVsbCE9ZS5sYXRPZmZzZXQmJmUuaGFzT3duUHJvcGVydHkoXCJsYXRPZmZzZXRcIikmJiEoJHV0aWwuaXNJbnRlZ2VyKGUubGF0T2Zmc2V0KXx8ZS5sYXRPZmZzZXQmJiR1dGlsLmlzSW50ZWdlcihlLmxhdE9mZnNldC5sb3cpJiYkdXRpbC5pc0ludGVnZXIoZS5sYXRPZmZzZXQuaGlnaCkpP1wibGF0T2Zmc2V0OiBpbnRlZ2VyfExvbmcgZXhwZWN0ZWRcIjpudWxsIT1lLmxvbk9mZnNldCYmZS5oYXNPd25Qcm9wZXJ0eShcImxvbk9mZnNldFwiKSYmISgkdXRpbC5pc0ludGVnZXIoZS5sb25PZmZzZXQpfHxlLmxvbk9mZnNldCYmJHV0aWwuaXNJbnRlZ2VyKGUubG9uT2Zmc2V0LmxvdykmJiR1dGlsLmlzSW50ZWdlcihlLmxvbk9mZnNldC5oaWdoKSk/XCJsb25PZmZzZXQ6IGludGVnZXJ8TG9uZyBleHBlY3RlZFwiOm51bGwhPWUuZGF0ZUdyYW51bGFyaXR5JiZlLmhhc093blByb3BlcnR5KFwiZGF0ZUdyYW51bGFyaXR5XCIpJiYhJHV0aWwuaXNJbnRlZ2VyKGUuZGF0ZUdyYW51bGFyaXR5KT9cImRhdGVHcmFudWxhcml0eTogaW50ZWdlciBleHBlY3RlZFwiOm51bGx9LGUuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgJHJvb3QuT1NNUEJGLlByaW1pdGl2ZUJsb2NrKXJldHVybiBlO3ZhciB0PW5ldyAkcm9vdC5PU01QQkYuUHJpbWl0aXZlQmxvY2s7aWYobnVsbCE9ZS5zdHJpbmd0YWJsZSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuc3RyaW5ndGFibGUpdGhyb3cgVHlwZUVycm9yKFwiLk9TTVBCRi5QcmltaXRpdmVCbG9jay5zdHJpbmd0YWJsZTogb2JqZWN0IGV4cGVjdGVkXCIpO3Quc3RyaW5ndGFibGU9JHJvb3QuT1NNUEJGLlN0cmluZ1RhYmxlLmZyb21PYmplY3QoZS5zdHJpbmd0YWJsZSl9aWYoZS5wcmltaXRpdmVncm91cCl7aWYoIUFycmF5LmlzQXJyYXkoZS5wcmltaXRpdmVncm91cCkpdGhyb3cgVHlwZUVycm9yKFwiLk9TTVBCRi5QcmltaXRpdmVCbG9jay5wcmltaXRpdmVncm91cDogYXJyYXkgZXhwZWN0ZWRcIik7dC5wcmltaXRpdmVncm91cD1bXTtmb3IodmFyIHI9MDtyPGUucHJpbWl0aXZlZ3JvdXAubGVuZ3RoOysrcil7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUucHJpbWl0aXZlZ3JvdXBbcl0pdGhyb3cgVHlwZUVycm9yKFwiLk9TTVBCRi5QcmltaXRpdmVCbG9jay5wcmltaXRpdmVncm91cDogb2JqZWN0IGV4cGVjdGVkXCIpO3QucHJpbWl0aXZlZ3JvdXBbcl09JHJvb3QuT1NNUEJGLlByaW1pdGl2ZUdyb3VwLmZyb21PYmplY3QoZS5wcmltaXRpdmVncm91cFtyXSl9fXJldHVybiBudWxsIT1lLmdyYW51bGFyaXR5JiYodC5ncmFudWxhcml0eT0wfGUuZ3JhbnVsYXJpdHkpLG51bGwhPWUubGF0T2Zmc2V0JiYoJHV0aWwuTG9uZz8odC5sYXRPZmZzZXQ9JHV0aWwuTG9uZy5mcm9tVmFsdWUoZS5sYXRPZmZzZXQpKS51bnNpZ25lZD0hMTpcInN0cmluZ1wiPT10eXBlb2YgZS5sYXRPZmZzZXQ/dC5sYXRPZmZzZXQ9cGFyc2VJbnQoZS5sYXRPZmZzZXQsMTApOlwibnVtYmVyXCI9PXR5cGVvZiBlLmxhdE9mZnNldD90LmxhdE9mZnNldD1lLmxhdE9mZnNldDpcIm9iamVjdFwiPT10eXBlb2YgZS5sYXRPZmZzZXQmJih0LmxhdE9mZnNldD1uZXcgJHV0aWwuTG9uZ0JpdHMoZS5sYXRPZmZzZXQubG93Pj4+MCxlLmxhdE9mZnNldC5oaWdoPj4+MCkudG9OdW1iZXIoKSkpLG51bGwhPWUubG9uT2Zmc2V0JiYoJHV0aWwuTG9uZz8odC5sb25PZmZzZXQ9JHV0aWwuTG9uZy5mcm9tVmFsdWUoZS5sb25PZmZzZXQpKS51bnNpZ25lZD0hMTpcInN0cmluZ1wiPT10eXBlb2YgZS5sb25PZmZzZXQ/dC5sb25PZmZzZXQ9cGFyc2VJbnQoZS5sb25PZmZzZXQsMTApOlwibnVtYmVyXCI9PXR5cGVvZiBlLmxvbk9mZnNldD90Lmxvbk9mZnNldD1lLmxvbk9mZnNldDpcIm9iamVjdFwiPT10eXBlb2YgZS5sb25PZmZzZXQmJih0Lmxvbk9mZnNldD1uZXcgJHV0aWwuTG9uZ0JpdHMoZS5sb25PZmZzZXQubG93Pj4+MCxlLmxvbk9mZnNldC5oaWdoPj4+MCkudG9OdW1iZXIoKSkpLG51bGwhPWUuZGF0ZUdyYW51bGFyaXR5JiYodC5kYXRlR3JhbnVsYXJpdHk9MHxlLmRhdGVHcmFudWxhcml0eSksdH0sZS50b09iamVjdD1mdW5jdGlvbihlLHQpe3R8fCh0PXt9KTt2YXIgcj17fTtpZigodC5hcnJheXN8fHQuZGVmYXVsdHMpJiYoci5wcmltaXRpdmVncm91cD1bXSksdC5kZWZhdWx0cyl7aWYoci5zdHJpbmd0YWJsZT1udWxsLHIuZ3JhbnVsYXJpdHk9MTAwLHIuZGF0ZUdyYW51bGFyaXR5PTFlMywkdXRpbC5Mb25nKXt2YXIgaT1uZXcgJHV0aWwuTG9uZygwLDAsITEpO3IubGF0T2Zmc2V0PXQubG9uZ3M9PT1TdHJpbmc/aS50b1N0cmluZygpOnQubG9uZ3M9PT1OdW1iZXI/aS50b051bWJlcigpOml9ZWxzZSByLmxhdE9mZnNldD10LmxvbmdzPT09U3RyaW5nP1wiMFwiOjA7aWYoJHV0aWwuTG9uZyl7dmFyIGk9bmV3ICR1dGlsLkxvbmcoMCwwLCExKTtyLmxvbk9mZnNldD10LmxvbmdzPT09U3RyaW5nP2kudG9TdHJpbmcoKTp0LmxvbmdzPT09TnVtYmVyP2kudG9OdW1iZXIoKTppfWVsc2Ugci5sb25PZmZzZXQ9dC5sb25ncz09PVN0cmluZz9cIjBcIjowfWlmKG51bGwhPWUuc3RyaW5ndGFibGUmJmUuaGFzT3duUHJvcGVydHkoXCJzdHJpbmd0YWJsZVwiKSYmKHIuc3RyaW5ndGFibGU9JHJvb3QuT1NNUEJGLlN0cmluZ1RhYmxlLnRvT2JqZWN0KGUuc3RyaW5ndGFibGUsdCkpLGUucHJpbWl0aXZlZ3JvdXAmJmUucHJpbWl0aXZlZ3JvdXAubGVuZ3RoKXtyLnByaW1pdGl2ZWdyb3VwPVtdO2Zvcih2YXIgbj0wO248ZS5wcmltaXRpdmVncm91cC5sZW5ndGg7KytuKXIucHJpbWl0aXZlZ3JvdXBbbl09JHJvb3QuT1NNUEJGLlByaW1pdGl2ZUdyb3VwLnRvT2JqZWN0KGUucHJpbWl0aXZlZ3JvdXBbbl0sdCl9cmV0dXJuIG51bGwhPWUuZ3JhbnVsYXJpdHkmJmUuaGFzT3duUHJvcGVydHkoXCJncmFudWxhcml0eVwiKSYmKHIuZ3JhbnVsYXJpdHk9ZS5ncmFudWxhcml0eSksbnVsbCE9ZS5kYXRlR3JhbnVsYXJpdHkmJmUuaGFzT3duUHJvcGVydHkoXCJkYXRlR3JhbnVsYXJpdHlcIikmJihyLmRhdGVHcmFudWxhcml0eT1lLmRhdGVHcmFudWxhcml0eSksbnVsbCE9ZS5sYXRPZmZzZXQmJmUuaGFzT3duUHJvcGVydHkoXCJsYXRPZmZzZXRcIikmJihcIm51bWJlclwiPT10eXBlb2YgZS5sYXRPZmZzZXQ/ci5sYXRPZmZzZXQ9dC5sb25ncz09PVN0cmluZz9TdHJpbmcoZS5sYXRPZmZzZXQpOmUubGF0T2Zmc2V0OnIubGF0T2Zmc2V0PXQubG9uZ3M9PT1TdHJpbmc/JHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlLmxhdE9mZnNldCk6dC5sb25ncz09PU51bWJlcj9uZXcgJHV0aWwuTG9uZ0JpdHMoZS5sYXRPZmZzZXQubG93Pj4+MCxlLmxhdE9mZnNldC5oaWdoPj4+MCkudG9OdW1iZXIoKTplLmxhdE9mZnNldCksbnVsbCE9ZS5sb25PZmZzZXQmJmUuaGFzT3duUHJvcGVydHkoXCJsb25PZmZzZXRcIikmJihcIm51bWJlclwiPT10eXBlb2YgZS5sb25PZmZzZXQ/ci5sb25PZmZzZXQ9dC5sb25ncz09PVN0cmluZz9TdHJpbmcoZS5sb25PZmZzZXQpOmUubG9uT2Zmc2V0OnIubG9uT2Zmc2V0PXQubG9uZ3M9PT1TdHJpbmc/JHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlLmxvbk9mZnNldCk6dC5sb25ncz09PU51bWJlcj9uZXcgJHV0aWwuTG9uZ0JpdHMoZS5sb25PZmZzZXQubG93Pj4+MCxlLmxvbk9mZnNldC5oaWdoPj4+MCkudG9OdW1iZXIoKTplLmxvbk9mZnNldCkscn0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKX0sZX0oKSxlLlByaW1pdGl2ZUdyb3VwPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtpZih0aGlzLm5vZGVzPVtdLHRoaXMud2F5cz1bXSx0aGlzLnJlbGF0aW9ucz1bXSx0aGlzLmNoYW5nZXNldHM9W10sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSkscj0wO3I8dC5sZW5ndGg7KytyKW51bGwhPWVbdFtyXV0mJih0aGlzW3Rbcl1dPWVbdFtyXV0pfXJldHVybiBlLnByb3RvdHlwZS5ub2Rlcz0kdXRpbC5lbXB0eUFycmF5LGUucHJvdG90eXBlLmRlbnNlPW51bGwsZS5wcm90b3R5cGUud2F5cz0kdXRpbC5lbXB0eUFycmF5LGUucHJvdG90eXBlLnJlbGF0aW9ucz0kdXRpbC5lbXB0eUFycmF5LGUucHJvdG90eXBlLmNoYW5nZXNldHM9JHV0aWwuZW1wdHlBcnJheSxlLmNyZWF0ZT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGUodCl9LGUuZW5jb2RlPWZ1bmN0aW9uKGUsdCl7aWYodHx8KHQ9JFdyaXRlci5jcmVhdGUoKSksbnVsbCE9ZS5ub2RlcyYmZS5ub2Rlcy5sZW5ndGgpZm9yKHZhciByPTA7cjxlLm5vZGVzLmxlbmd0aDsrK3IpJHJvb3QuT1NNUEJGLk5vZGUuZW5jb2RlKGUubm9kZXNbcl0sdC51aW50MzIoMTApLmZvcmsoKSkubGRlbGltKCk7aWYobnVsbCE9ZS5kZW5zZSYmZS5oYXNPd25Qcm9wZXJ0eShcImRlbnNlXCIpJiYkcm9vdC5PU01QQkYuRGVuc2VOb2Rlcy5lbmNvZGUoZS5kZW5zZSx0LnVpbnQzMigxOCkuZm9yaygpKS5sZGVsaW0oKSxudWxsIT1lLndheXMmJmUud2F5cy5sZW5ndGgpZm9yKHZhciByPTA7cjxlLndheXMubGVuZ3RoOysrcikkcm9vdC5PU01QQkYuV2F5LmVuY29kZShlLndheXNbcl0sdC51aW50MzIoMjYpLmZvcmsoKSkubGRlbGltKCk7aWYobnVsbCE9ZS5yZWxhdGlvbnMmJmUucmVsYXRpb25zLmxlbmd0aClmb3IodmFyIHI9MDtyPGUucmVsYXRpb25zLmxlbmd0aDsrK3IpJHJvb3QuT1NNUEJGLlJlbGF0aW9uLmVuY29kZShlLnJlbGF0aW9uc1tyXSx0LnVpbnQzMigzNCkuZm9yaygpKS5sZGVsaW0oKTtpZihudWxsIT1lLmNoYW5nZXNldHMmJmUuY2hhbmdlc2V0cy5sZW5ndGgpZm9yKHZhciByPTA7cjxlLmNoYW5nZXNldHMubGVuZ3RoOysrcikkcm9vdC5PU01QQkYuQ2hhbmdlU2V0LmVuY29kZShlLmNoYW5nZXNldHNbcl0sdC51aW50MzIoNDIpLmZvcmsoKSkubGRlbGltKCk7cmV0dXJuIHR9LGUuZW5jb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZW5jb2RlKGUsdCkubGRlbGltKCl9LGUuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7ZSBpbnN0YW5jZW9mICRSZWFkZXJ8fChlPSRSZWFkZXIuY3JlYXRlKGUpKTtmb3IodmFyIHI9dm9pZCAwPT09dD9lLmxlbjplLnBvcyt0LGk9bmV3ICRyb290Lk9TTVBCRi5QcmltaXRpdmVHcm91cDtlLnBvczxyOyl7dmFyIG49ZS51aW50MzIoKTtzd2l0Y2gobj4+PjMpe2Nhc2UgMTppLm5vZGVzJiZpLm5vZGVzLmxlbmd0aHx8KGkubm9kZXM9W10pLGkubm9kZXMucHVzaCgkcm9vdC5PU01QQkYuTm9kZS5kZWNvZGUoZSxlLnVpbnQzMigpKSk7YnJlYWs7Y2FzZSAyOmkuZGVuc2U9JHJvb3QuT1NNUEJGLkRlbnNlTm9kZXMuZGVjb2RlKGUsZS51aW50MzIoKSk7YnJlYWs7Y2FzZSAzOmkud2F5cyYmaS53YXlzLmxlbmd0aHx8KGkud2F5cz1bXSksaS53YXlzLnB1c2goJHJvb3QuT1NNUEJGLldheS5kZWNvZGUoZSxlLnVpbnQzMigpKSk7YnJlYWs7Y2FzZSA0OmkucmVsYXRpb25zJiZpLnJlbGF0aW9ucy5sZW5ndGh8fChpLnJlbGF0aW9ucz1bXSksaS5yZWxhdGlvbnMucHVzaCgkcm9vdC5PU01QQkYuUmVsYXRpb24uZGVjb2RlKGUsZS51aW50MzIoKSkpO2JyZWFrO2Nhc2UgNTppLmNoYW5nZXNldHMmJmkuY2hhbmdlc2V0cy5sZW5ndGh8fChpLmNoYW5nZXNldHM9W10pLGkuY2hhbmdlc2V0cy5wdXNoKCRyb290Lk9TTVBCRi5DaGFuZ2VTZXQuZGVjb2RlKGUsZS51aW50MzIoKSkpO2JyZWFrO2RlZmF1bHQ6ZS5za2lwVHlwZSg3Jm4pfX1yZXR1cm4gaX0sZS5kZWNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiAkUmVhZGVyfHwoZT1uZXcgJFJlYWRlcihlKSksdGhpcy5kZWNvZGUoZSxlLnVpbnQzMigpKX0sZS52ZXJpZnk9ZnVuY3Rpb24oZSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGV8fG51bGw9PT1lKXJldHVyblwib2JqZWN0IGV4cGVjdGVkXCI7aWYobnVsbCE9ZS5ub2RlcyYmZS5oYXNPd25Qcm9wZXJ0eShcIm5vZGVzXCIpKXtpZighQXJyYXkuaXNBcnJheShlLm5vZGVzKSlyZXR1cm5cIm5vZGVzOiBhcnJheSBleHBlY3RlZFwiO2Zvcih2YXIgdD0wO3Q8ZS5ub2Rlcy5sZW5ndGg7Kyt0KXt2YXIgcj0kcm9vdC5PU01QQkYuTm9kZS52ZXJpZnkoZS5ub2Rlc1t0XSk7aWYocilyZXR1cm5cIm5vZGVzLlwiK3J9fWlmKG51bGwhPWUuZGVuc2UmJmUuaGFzT3duUHJvcGVydHkoXCJkZW5zZVwiKSl7dmFyIHI9JHJvb3QuT1NNUEJGLkRlbnNlTm9kZXMudmVyaWZ5KGUuZGVuc2UpO2lmKHIpcmV0dXJuXCJkZW5zZS5cIityfWlmKG51bGwhPWUud2F5cyYmZS5oYXNPd25Qcm9wZXJ0eShcIndheXNcIikpe2lmKCFBcnJheS5pc0FycmF5KGUud2F5cykpcmV0dXJuXCJ3YXlzOiBhcnJheSBleHBlY3RlZFwiO2Zvcih2YXIgdD0wO3Q8ZS53YXlzLmxlbmd0aDsrK3Qpe3ZhciByPSRyb290Lk9TTVBCRi5XYXkudmVyaWZ5KGUud2F5c1t0XSk7aWYocilyZXR1cm5cIndheXMuXCIrcn19aWYobnVsbCE9ZS5yZWxhdGlvbnMmJmUuaGFzT3duUHJvcGVydHkoXCJyZWxhdGlvbnNcIikpe2lmKCFBcnJheS5pc0FycmF5KGUucmVsYXRpb25zKSlyZXR1cm5cInJlbGF0aW9uczogYXJyYXkgZXhwZWN0ZWRcIjtmb3IodmFyIHQ9MDt0PGUucmVsYXRpb25zLmxlbmd0aDsrK3Qpe3ZhciByPSRyb290Lk9TTVBCRi5SZWxhdGlvbi52ZXJpZnkoZS5yZWxhdGlvbnNbdF0pO2lmKHIpcmV0dXJuXCJyZWxhdGlvbnMuXCIrcn19aWYobnVsbCE9ZS5jaGFuZ2VzZXRzJiZlLmhhc093blByb3BlcnR5KFwiY2hhbmdlc2V0c1wiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS5jaGFuZ2VzZXRzKSlyZXR1cm5cImNoYW5nZXNldHM6IGFycmF5IGV4cGVjdGVkXCI7Zm9yKHZhciB0PTA7dDxlLmNoYW5nZXNldHMubGVuZ3RoOysrdCl7dmFyIHI9JHJvb3QuT1NNUEJGLkNoYW5nZVNldC52ZXJpZnkoZS5jaGFuZ2VzZXRzW3RdKTtpZihyKXJldHVyblwiY2hhbmdlc2V0cy5cIityfX1yZXR1cm4gbnVsbH0sZS5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiAkcm9vdC5PU01QQkYuUHJpbWl0aXZlR3JvdXApcmV0dXJuIGU7dmFyIHQ9bmV3ICRyb290Lk9TTVBCRi5QcmltaXRpdmVHcm91cDtpZihlLm5vZGVzKXtpZighQXJyYXkuaXNBcnJheShlLm5vZGVzKSl0aHJvdyBUeXBlRXJyb3IoXCIuT1NNUEJGLlByaW1pdGl2ZUdyb3VwLm5vZGVzOiBhcnJheSBleHBlY3RlZFwiKTt0Lm5vZGVzPVtdO2Zvcih2YXIgcj0wO3I8ZS5ub2Rlcy5sZW5ndGg7KytyKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5ub2Rlc1tyXSl0aHJvdyBUeXBlRXJyb3IoXCIuT1NNUEJGLlByaW1pdGl2ZUdyb3VwLm5vZGVzOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5ub2Rlc1tyXT0kcm9vdC5PU01QQkYuTm9kZS5mcm9tT2JqZWN0KGUubm9kZXNbcl0pfX1pZihudWxsIT1lLmRlbnNlKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5kZW5zZSl0aHJvdyBUeXBlRXJyb3IoXCIuT1NNUEJGLlByaW1pdGl2ZUdyb3VwLmRlbnNlOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5kZW5zZT0kcm9vdC5PU01QQkYuRGVuc2VOb2Rlcy5mcm9tT2JqZWN0KGUuZGVuc2UpfWlmKGUud2F5cyl7aWYoIUFycmF5LmlzQXJyYXkoZS53YXlzKSl0aHJvdyBUeXBlRXJyb3IoXCIuT1NNUEJGLlByaW1pdGl2ZUdyb3VwLndheXM6IGFycmF5IGV4cGVjdGVkXCIpO3Qud2F5cz1bXTtmb3IodmFyIHI9MDtyPGUud2F5cy5sZW5ndGg7KytyKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS53YXlzW3JdKXRocm93IFR5cGVFcnJvcihcIi5PU01QQkYuUHJpbWl0aXZlR3JvdXAud2F5czogb2JqZWN0IGV4cGVjdGVkXCIpO3Qud2F5c1tyXT0kcm9vdC5PU01QQkYuV2F5LmZyb21PYmplY3QoZS53YXlzW3JdKX19aWYoZS5yZWxhdGlvbnMpe2lmKCFBcnJheS5pc0FycmF5KGUucmVsYXRpb25zKSl0aHJvdyBUeXBlRXJyb3IoXCIuT1NNUEJGLlByaW1pdGl2ZUdyb3VwLnJlbGF0aW9uczogYXJyYXkgZXhwZWN0ZWRcIik7dC5yZWxhdGlvbnM9W107Zm9yKHZhciByPTA7cjxlLnJlbGF0aW9ucy5sZW5ndGg7KytyKXtcbmlmKFwib2JqZWN0XCIhPXR5cGVvZiBlLnJlbGF0aW9uc1tyXSl0aHJvdyBUeXBlRXJyb3IoXCIuT1NNUEJGLlByaW1pdGl2ZUdyb3VwLnJlbGF0aW9uczogb2JqZWN0IGV4cGVjdGVkXCIpO3QucmVsYXRpb25zW3JdPSRyb290Lk9TTVBCRi5SZWxhdGlvbi5mcm9tT2JqZWN0KGUucmVsYXRpb25zW3JdKX19aWYoZS5jaGFuZ2VzZXRzKXtpZighQXJyYXkuaXNBcnJheShlLmNoYW5nZXNldHMpKXRocm93IFR5cGVFcnJvcihcIi5PU01QQkYuUHJpbWl0aXZlR3JvdXAuY2hhbmdlc2V0czogYXJyYXkgZXhwZWN0ZWRcIik7dC5jaGFuZ2VzZXRzPVtdO2Zvcih2YXIgcj0wO3I8ZS5jaGFuZ2VzZXRzLmxlbmd0aDsrK3Ipe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmNoYW5nZXNldHNbcl0pdGhyb3cgVHlwZUVycm9yKFwiLk9TTVBCRi5QcmltaXRpdmVHcm91cC5jaGFuZ2VzZXRzOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5jaGFuZ2VzZXRzW3JdPSRyb290Lk9TTVBCRi5DaGFuZ2VTZXQuZnJvbU9iamVjdChlLmNoYW5nZXNldHNbcl0pfX1yZXR1cm4gdH0sZS50b09iamVjdD1mdW5jdGlvbihlLHQpe3R8fCh0PXt9KTt2YXIgcj17fTtpZigodC5hcnJheXN8fHQuZGVmYXVsdHMpJiYoci5ub2Rlcz1bXSxyLndheXM9W10sci5yZWxhdGlvbnM9W10sci5jaGFuZ2VzZXRzPVtdKSx0LmRlZmF1bHRzJiYoci5kZW5zZT1udWxsKSxlLm5vZGVzJiZlLm5vZGVzLmxlbmd0aCl7ci5ub2Rlcz1bXTtmb3IodmFyIGk9MDtpPGUubm9kZXMubGVuZ3RoOysraSlyLm5vZGVzW2ldPSRyb290Lk9TTVBCRi5Ob2RlLnRvT2JqZWN0KGUubm9kZXNbaV0sdCl9aWYobnVsbCE9ZS5kZW5zZSYmZS5oYXNPd25Qcm9wZXJ0eShcImRlbnNlXCIpJiYoci5kZW5zZT0kcm9vdC5PU01QQkYuRGVuc2VOb2Rlcy50b09iamVjdChlLmRlbnNlLHQpKSxlLndheXMmJmUud2F5cy5sZW5ndGgpe3Iud2F5cz1bXTtmb3IodmFyIGk9MDtpPGUud2F5cy5sZW5ndGg7KytpKXIud2F5c1tpXT0kcm9vdC5PU01QQkYuV2F5LnRvT2JqZWN0KGUud2F5c1tpXSx0KX1pZihlLnJlbGF0aW9ucyYmZS5yZWxhdGlvbnMubGVuZ3RoKXtyLnJlbGF0aW9ucz1bXTtmb3IodmFyIGk9MDtpPGUucmVsYXRpb25zLmxlbmd0aDsrK2kpci5yZWxhdGlvbnNbaV09JHJvb3QuT1NNUEJGLlJlbGF0aW9uLnRvT2JqZWN0KGUucmVsYXRpb25zW2ldLHQpfWlmKGUuY2hhbmdlc2V0cyYmZS5jaGFuZ2VzZXRzLmxlbmd0aCl7ci5jaGFuZ2VzZXRzPVtdO2Zvcih2YXIgaT0wO2k8ZS5jaGFuZ2VzZXRzLmxlbmd0aDsrK2kpci5jaGFuZ2VzZXRzW2ldPSRyb290Lk9TTVBCRi5DaGFuZ2VTZXQudG9PYmplY3QoZS5jaGFuZ2VzZXRzW2ldLHQpfXJldHVybiByfSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpfSxlfSgpLGUuU3RyaW5nVGFibGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe2lmKHRoaXMucz1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxyPTA7cjx0Lmxlbmd0aDsrK3IpbnVsbCE9ZVt0W3JdXSYmKHRoaXNbdFtyXV09ZVt0W3JdXSl9cmV0dXJuIGUucHJvdG90eXBlLnM9JHV0aWwuZW1wdHlBcnJheSxlLmNyZWF0ZT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGUodCl9LGUuZW5jb2RlPWZ1bmN0aW9uKGUsdCl7aWYodHx8KHQ9JFdyaXRlci5jcmVhdGUoKSksbnVsbCE9ZS5zJiZlLnMubGVuZ3RoKWZvcih2YXIgcj0wO3I8ZS5zLmxlbmd0aDsrK3IpdC51aW50MzIoMTApLmJ5dGVzKGUuc1tyXSk7cmV0dXJuIHR9LGUuZW5jb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZW5jb2RlKGUsdCkubGRlbGltKCl9LGUuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7ZSBpbnN0YW5jZW9mICRSZWFkZXJ8fChlPSRSZWFkZXIuY3JlYXRlKGUpKTtmb3IodmFyIHI9dm9pZCAwPT09dD9lLmxlbjplLnBvcyt0LGk9bmV3ICRyb290Lk9TTVBCRi5TdHJpbmdUYWJsZTtlLnBvczxyOyl7dmFyIG49ZS51aW50MzIoKTtzd2l0Y2gobj4+PjMpe2Nhc2UgMTppLnMmJmkucy5sZW5ndGh8fChpLnM9W10pLGkucy5wdXNoKGUuYnl0ZXMoKSk7YnJlYWs7ZGVmYXVsdDplLnNraXBUeXBlKDcmbil9fXJldHVybiBpfSxlLmRlY29kZURlbGltaXRlZD1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mICRSZWFkZXJ8fChlPW5ldyAkUmVhZGVyKGUpKSx0aGlzLmRlY29kZShlLGUudWludDMyKCkpfSxlLnZlcmlmeT1mdW5jdGlvbihlKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZXx8bnVsbD09PWUpcmV0dXJuXCJvYmplY3QgZXhwZWN0ZWRcIjtpZihudWxsIT1lLnMmJmUuaGFzT3duUHJvcGVydHkoXCJzXCIpKXtpZighQXJyYXkuaXNBcnJheShlLnMpKXJldHVyblwiczogYXJyYXkgZXhwZWN0ZWRcIjtmb3IodmFyIHQ9MDt0PGUucy5sZW5ndGg7Kyt0KWlmKCEoZS5zW3RdJiZcIm51bWJlclwiPT10eXBlb2YgZS5zW3RdLmxlbmd0aHx8JHV0aWwuaXNTdHJpbmcoZS5zW3RdKSkpcmV0dXJuXCJzOiBidWZmZXJbXSBleHBlY3RlZFwifXJldHVybiBudWxsfSxlLmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mICRyb290Lk9TTVBCRi5TdHJpbmdUYWJsZSlyZXR1cm4gZTt2YXIgdD1uZXcgJHJvb3QuT1NNUEJGLlN0cmluZ1RhYmxlO2lmKGUucyl7aWYoIUFycmF5LmlzQXJyYXkoZS5zKSl0aHJvdyBUeXBlRXJyb3IoXCIuT1NNUEJGLlN0cmluZ1RhYmxlLnM6IGFycmF5IGV4cGVjdGVkXCIpO3Qucz1bXTtmb3IodmFyIHI9MDtyPGUucy5sZW5ndGg7KytyKVwic3RyaW5nXCI9PXR5cGVvZiBlLnNbcl0/JHV0aWwuYmFzZTY0LmRlY29kZShlLnNbcl0sdC5zW3JdPSR1dGlsLm5ld0J1ZmZlcigkdXRpbC5iYXNlNjQubGVuZ3RoKGUuc1tyXSkpLDApOmUuc1tyXS5sZW5ndGgmJih0LnNbcl09ZS5zW3JdKX1yZXR1cm4gdH0sZS50b09iamVjdD1mdW5jdGlvbihlLHQpe3R8fCh0PXt9KTt2YXIgcj17fTtpZigodC5hcnJheXN8fHQuZGVmYXVsdHMpJiYoci5zPVtdKSxlLnMmJmUucy5sZW5ndGgpe3Iucz1bXTtmb3IodmFyIGk9MDtpPGUucy5sZW5ndGg7KytpKXIuc1tpXT10LmJ5dGVzPT09U3RyaW5nPyR1dGlsLmJhc2U2NC5lbmNvZGUoZS5zW2ldLDAsZS5zW2ldLmxlbmd0aCk6dC5ieXRlcz09PUFycmF5P0FycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGUuc1tpXSk6ZS5zW2ldfXJldHVybiByfSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpfSxlfSgpLGUuSW5mbz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSkscj0wO3I8dC5sZW5ndGg7KytyKW51bGwhPWVbdFtyXV0mJih0aGlzW3Rbcl1dPWVbdFtyXV0pfXJldHVybiBlLnByb3RvdHlwZS52ZXJzaW9uPS0xLGUucHJvdG90eXBlLnRpbWVzdGFtcD0kdXRpbC5Mb25nPyR1dGlsLkxvbmcuZnJvbUJpdHMoMCwwLCExKTowLGUucHJvdG90eXBlLmNoYW5nZXNldD0kdXRpbC5Mb25nPyR1dGlsLkxvbmcuZnJvbUJpdHMoMCwwLCExKTowLGUucHJvdG90eXBlLnVpZD0wLGUucHJvdG90eXBlLnVzZXJTaWQ9MCxlLnByb3RvdHlwZS52aXNpYmxlPSExLGUuY3JlYXRlPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgZSh0KX0sZS5lbmNvZGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8KHQ9JFdyaXRlci5jcmVhdGUoKSksbnVsbCE9ZS52ZXJzaW9uJiZlLmhhc093blByb3BlcnR5KFwidmVyc2lvblwiKSYmdC51aW50MzIoOCkuaW50MzIoZS52ZXJzaW9uKSxudWxsIT1lLnRpbWVzdGFtcCYmZS5oYXNPd25Qcm9wZXJ0eShcInRpbWVzdGFtcFwiKSYmdC51aW50MzIoMTYpLmludDY0KGUudGltZXN0YW1wKSxudWxsIT1lLmNoYW5nZXNldCYmZS5oYXNPd25Qcm9wZXJ0eShcImNoYW5nZXNldFwiKSYmdC51aW50MzIoMjQpLmludDY0KGUuY2hhbmdlc2V0KSxudWxsIT1lLnVpZCYmZS5oYXNPd25Qcm9wZXJ0eShcInVpZFwiKSYmdC51aW50MzIoMzIpLmludDMyKGUudWlkKSxudWxsIT1lLnVzZXJTaWQmJmUuaGFzT3duUHJvcGVydHkoXCJ1c2VyU2lkXCIpJiZ0LnVpbnQzMig0MCkudWludDMyKGUudXNlclNpZCksbnVsbCE9ZS52aXNpYmxlJiZlLmhhc093blByb3BlcnR5KFwidmlzaWJsZVwiKSYmdC51aW50MzIoNDgpLmJvb2woZS52aXNpYmxlKSx0fSxlLmVuY29kZURlbGltaXRlZD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVuY29kZShlLHQpLmxkZWxpbSgpfSxlLmRlY29kZT1mdW5jdGlvbihlLHQpe2UgaW5zdGFuY2VvZiAkUmVhZGVyfHwoZT0kUmVhZGVyLmNyZWF0ZShlKSk7Zm9yKHZhciByPXZvaWQgMD09PXQ/ZS5sZW46ZS5wb3MrdCxpPW5ldyAkcm9vdC5PU01QQkYuSW5mbztlLnBvczxyOyl7dmFyIG49ZS51aW50MzIoKTtzd2l0Y2gobj4+PjMpe2Nhc2UgMTppLnZlcnNpb249ZS5pbnQzMigpO2JyZWFrO2Nhc2UgMjppLnRpbWVzdGFtcD1lLmludDY0KCk7YnJlYWs7Y2FzZSAzOmkuY2hhbmdlc2V0PWUuaW50NjQoKTticmVhaztjYXNlIDQ6aS51aWQ9ZS5pbnQzMigpO2JyZWFrO2Nhc2UgNTppLnVzZXJTaWQ9ZS51aW50MzIoKTticmVhaztjYXNlIDY6aS52aXNpYmxlPWUuYm9vbCgpO2JyZWFrO2RlZmF1bHQ6ZS5za2lwVHlwZSg3Jm4pfX1yZXR1cm4gaX0sZS5kZWNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiAkUmVhZGVyfHwoZT1uZXcgJFJlYWRlcihlKSksdGhpcy5kZWNvZGUoZSxlLnVpbnQzMigpKX0sZS52ZXJpZnk9ZnVuY3Rpb24oZSl7cmV0dXJuXCJvYmplY3RcIiE9dHlwZW9mIGV8fG51bGw9PT1lP1wib2JqZWN0IGV4cGVjdGVkXCI6bnVsbCE9ZS52ZXJzaW9uJiZlLmhhc093blByb3BlcnR5KFwidmVyc2lvblwiKSYmISR1dGlsLmlzSW50ZWdlcihlLnZlcnNpb24pP1widmVyc2lvbjogaW50ZWdlciBleHBlY3RlZFwiOm51bGwhPWUudGltZXN0YW1wJiZlLmhhc093blByb3BlcnR5KFwidGltZXN0YW1wXCIpJiYhKCR1dGlsLmlzSW50ZWdlcihlLnRpbWVzdGFtcCl8fGUudGltZXN0YW1wJiYkdXRpbC5pc0ludGVnZXIoZS50aW1lc3RhbXAubG93KSYmJHV0aWwuaXNJbnRlZ2VyKGUudGltZXN0YW1wLmhpZ2gpKT9cInRpbWVzdGFtcDogaW50ZWdlcnxMb25nIGV4cGVjdGVkXCI6bnVsbCE9ZS5jaGFuZ2VzZXQmJmUuaGFzT3duUHJvcGVydHkoXCJjaGFuZ2VzZXRcIikmJiEoJHV0aWwuaXNJbnRlZ2VyKGUuY2hhbmdlc2V0KXx8ZS5jaGFuZ2VzZXQmJiR1dGlsLmlzSW50ZWdlcihlLmNoYW5nZXNldC5sb3cpJiYkdXRpbC5pc0ludGVnZXIoZS5jaGFuZ2VzZXQuaGlnaCkpP1wiY2hhbmdlc2V0OiBpbnRlZ2VyfExvbmcgZXhwZWN0ZWRcIjpudWxsIT1lLnVpZCYmZS5oYXNPd25Qcm9wZXJ0eShcInVpZFwiKSYmISR1dGlsLmlzSW50ZWdlcihlLnVpZCk/XCJ1aWQ6IGludGVnZXIgZXhwZWN0ZWRcIjpudWxsIT1lLnVzZXJTaWQmJmUuaGFzT3duUHJvcGVydHkoXCJ1c2VyU2lkXCIpJiYhJHV0aWwuaXNJbnRlZ2VyKGUudXNlclNpZCk/XCJ1c2VyU2lkOiBpbnRlZ2VyIGV4cGVjdGVkXCI6bnVsbCE9ZS52aXNpYmxlJiZlLmhhc093blByb3BlcnR5KFwidmlzaWJsZVwiKSYmXCJib29sZWFuXCIhPXR5cGVvZiBlLnZpc2libGU/XCJ2aXNpYmxlOiBib29sZWFuIGV4cGVjdGVkXCI6bnVsbH0sZS5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiAkcm9vdC5PU01QQkYuSW5mbylyZXR1cm4gZTt2YXIgdD1uZXcgJHJvb3QuT1NNUEJGLkluZm87cmV0dXJuIG51bGwhPWUudmVyc2lvbiYmKHQudmVyc2lvbj0wfGUudmVyc2lvbiksbnVsbCE9ZS50aW1lc3RhbXAmJigkdXRpbC5Mb25nPyh0LnRpbWVzdGFtcD0kdXRpbC5Mb25nLmZyb21WYWx1ZShlLnRpbWVzdGFtcCkpLnVuc2lnbmVkPSExOlwic3RyaW5nXCI9PXR5cGVvZiBlLnRpbWVzdGFtcD90LnRpbWVzdGFtcD1wYXJzZUludChlLnRpbWVzdGFtcCwxMCk6XCJudW1iZXJcIj09dHlwZW9mIGUudGltZXN0YW1wP3QudGltZXN0YW1wPWUudGltZXN0YW1wOlwib2JqZWN0XCI9PXR5cGVvZiBlLnRpbWVzdGFtcCYmKHQudGltZXN0YW1wPW5ldyAkdXRpbC5Mb25nQml0cyhlLnRpbWVzdGFtcC5sb3c+Pj4wLGUudGltZXN0YW1wLmhpZ2g+Pj4wKS50b051bWJlcigpKSksbnVsbCE9ZS5jaGFuZ2VzZXQmJigkdXRpbC5Mb25nPyh0LmNoYW5nZXNldD0kdXRpbC5Mb25nLmZyb21WYWx1ZShlLmNoYW5nZXNldCkpLnVuc2lnbmVkPSExOlwic3RyaW5nXCI9PXR5cGVvZiBlLmNoYW5nZXNldD90LmNoYW5nZXNldD1wYXJzZUludChlLmNoYW5nZXNldCwxMCk6XCJudW1iZXJcIj09dHlwZW9mIGUuY2hhbmdlc2V0P3QuY2hhbmdlc2V0PWUuY2hhbmdlc2V0Olwib2JqZWN0XCI9PXR5cGVvZiBlLmNoYW5nZXNldCYmKHQuY2hhbmdlc2V0PW5ldyAkdXRpbC5Mb25nQml0cyhlLmNoYW5nZXNldC5sb3c+Pj4wLGUuY2hhbmdlc2V0LmhpZ2g+Pj4wKS50b051bWJlcigpKSksbnVsbCE9ZS51aWQmJih0LnVpZD0wfGUudWlkKSxudWxsIT1lLnVzZXJTaWQmJih0LnVzZXJTaWQ9ZS51c2VyU2lkPj4+MCksbnVsbCE9ZS52aXNpYmxlJiYodC52aXNpYmxlPUJvb2xlYW4oZS52aXNpYmxlKSksdH0sZS50b09iamVjdD1mdW5jdGlvbihlLHQpe3R8fCh0PXt9KTt2YXIgcj17fTtpZih0LmRlZmF1bHRzKXtpZihyLnZlcnNpb249LTEsJHV0aWwuTG9uZyl7dmFyIGk9bmV3ICR1dGlsLkxvbmcoMCwwLCExKTtyLnRpbWVzdGFtcD10LmxvbmdzPT09U3RyaW5nP2kudG9TdHJpbmcoKTp0LmxvbmdzPT09TnVtYmVyP2kudG9OdW1iZXIoKTppfWVsc2Ugci50aW1lc3RhbXA9dC5sb25ncz09PVN0cmluZz9cIjBcIjowO2lmKCR1dGlsLkxvbmcpe3ZhciBpPW5ldyAkdXRpbC5Mb25nKDAsMCwhMSk7ci5jaGFuZ2VzZXQ9dC5sb25ncz09PVN0cmluZz9pLnRvU3RyaW5nKCk6dC5sb25ncz09PU51bWJlcj9pLnRvTnVtYmVyKCk6aX1lbHNlIHIuY2hhbmdlc2V0PXQubG9uZ3M9PT1TdHJpbmc/XCIwXCI6MDtyLnVpZD0wLHIudXNlclNpZD0wLHIudmlzaWJsZT0hMX1yZXR1cm4gbnVsbCE9ZS52ZXJzaW9uJiZlLmhhc093blByb3BlcnR5KFwidmVyc2lvblwiKSYmKHIudmVyc2lvbj1lLnZlcnNpb24pLG51bGwhPWUudGltZXN0YW1wJiZlLmhhc093blByb3BlcnR5KFwidGltZXN0YW1wXCIpJiYoXCJudW1iZXJcIj09dHlwZW9mIGUudGltZXN0YW1wP3IudGltZXN0YW1wPXQubG9uZ3M9PT1TdHJpbmc/U3RyaW5nKGUudGltZXN0YW1wKTplLnRpbWVzdGFtcDpyLnRpbWVzdGFtcD10LmxvbmdzPT09U3RyaW5nPyR1dGlsLkxvbmcucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZS50aW1lc3RhbXApOnQubG9uZ3M9PT1OdW1iZXI/bmV3ICR1dGlsLkxvbmdCaXRzKGUudGltZXN0YW1wLmxvdz4+PjAsZS50aW1lc3RhbXAuaGlnaD4+PjApLnRvTnVtYmVyKCk6ZS50aW1lc3RhbXApLG51bGwhPWUuY2hhbmdlc2V0JiZlLmhhc093blByb3BlcnR5KFwiY2hhbmdlc2V0XCIpJiYoXCJudW1iZXJcIj09dHlwZW9mIGUuY2hhbmdlc2V0P3IuY2hhbmdlc2V0PXQubG9uZ3M9PT1TdHJpbmc/U3RyaW5nKGUuY2hhbmdlc2V0KTplLmNoYW5nZXNldDpyLmNoYW5nZXNldD10LmxvbmdzPT09U3RyaW5nPyR1dGlsLkxvbmcucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZS5jaGFuZ2VzZXQpOnQubG9uZ3M9PT1OdW1iZXI/bmV3ICR1dGlsLkxvbmdCaXRzKGUuY2hhbmdlc2V0Lmxvdz4+PjAsZS5jaGFuZ2VzZXQuaGlnaD4+PjApLnRvTnVtYmVyKCk6ZS5jaGFuZ2VzZXQpLG51bGwhPWUudWlkJiZlLmhhc093blByb3BlcnR5KFwidWlkXCIpJiYoci51aWQ9ZS51aWQpLG51bGwhPWUudXNlclNpZCYmZS5oYXNPd25Qcm9wZXJ0eShcInVzZXJTaWRcIikmJihyLnVzZXJTaWQ9ZS51c2VyU2lkKSxudWxsIT1lLnZpc2libGUmJmUuaGFzT3duUHJvcGVydHkoXCJ2aXNpYmxlXCIpJiYoci52aXNpYmxlPWUudmlzaWJsZSkscn0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKX0sZX0oKSxlLkRlbnNlSW5mbz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7aWYodGhpcy52ZXJzaW9uPVtdLHRoaXMudGltZXN0YW1wPVtdLHRoaXMuY2hhbmdlc2V0PVtdLHRoaXMudWlkPVtdLHRoaXMudXNlclNpZD1bXSx0aGlzLnZpc2libGU9W10sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSkscj0wO3I8dC5sZW5ndGg7KytyKW51bGwhPWVbdFtyXV0mJih0aGlzW3Rbcl1dPWVbdFtyXV0pfXJldHVybiBlLnByb3RvdHlwZS52ZXJzaW9uPSR1dGlsLmVtcHR5QXJyYXksZS5wcm90b3R5cGUudGltZXN0YW1wPSR1dGlsLmVtcHR5QXJyYXksZS5wcm90b3R5cGUuY2hhbmdlc2V0PSR1dGlsLmVtcHR5QXJyYXksZS5wcm90b3R5cGUudWlkPSR1dGlsLmVtcHR5QXJyYXksZS5wcm90b3R5cGUudXNlclNpZD0kdXRpbC5lbXB0eUFycmF5LGUucHJvdG90eXBlLnZpc2libGU9JHV0aWwuZW1wdHlBcnJheSxlLmNyZWF0ZT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGUodCl9LGUuZW5jb2RlPWZ1bmN0aW9uKGUsdCl7aWYodHx8KHQ9JFdyaXRlci5jcmVhdGUoKSksbnVsbCE9ZS52ZXJzaW9uJiZlLnZlcnNpb24ubGVuZ3RoKXt0LnVpbnQzMigxMCkuZm9yaygpO2Zvcih2YXIgcj0wO3I8ZS52ZXJzaW9uLmxlbmd0aDsrK3IpdC5pbnQzMihlLnZlcnNpb25bcl0pO3QubGRlbGltKCl9aWYobnVsbCE9ZS50aW1lc3RhbXAmJmUudGltZXN0YW1wLmxlbmd0aCl7dC51aW50MzIoMTgpLmZvcmsoKTtmb3IodmFyIHI9MDtyPGUudGltZXN0YW1wLmxlbmd0aDsrK3IpdC5zaW50NjQoZS50aW1lc3RhbXBbcl0pO3QubGRlbGltKCl9aWYobnVsbCE9ZS5jaGFuZ2VzZXQmJmUuY2hhbmdlc2V0Lmxlbmd0aCl7dC51aW50MzIoMjYpLmZvcmsoKTtmb3IodmFyIHI9MDtyPGUuY2hhbmdlc2V0Lmxlbmd0aDsrK3IpdC5zaW50NjQoZS5jaGFuZ2VzZXRbcl0pO3QubGRlbGltKCl9aWYobnVsbCE9ZS51aWQmJmUudWlkLmxlbmd0aCl7dC51aW50MzIoMzQpLmZvcmsoKTtmb3IodmFyIHI9MDtyPGUudWlkLmxlbmd0aDsrK3IpdC5zaW50MzIoZS51aWRbcl0pO3QubGRlbGltKCl9aWYobnVsbCE9ZS51c2VyU2lkJiZlLnVzZXJTaWQubGVuZ3RoKXt0LnVpbnQzMig0MikuZm9yaygpO2Zvcih2YXIgcj0wO3I8ZS51c2VyU2lkLmxlbmd0aDsrK3IpdC5zaW50MzIoZS51c2VyU2lkW3JdKTt0LmxkZWxpbSgpfWlmKG51bGwhPWUudmlzaWJsZSYmZS52aXNpYmxlLmxlbmd0aCl7dC51aW50MzIoNTApLmZvcmsoKTtmb3IodmFyIHI9MDtyPGUudmlzaWJsZS5sZW5ndGg7KytyKXQuYm9vbChlLnZpc2libGVbcl0pO3QubGRlbGltKCl9cmV0dXJuIHR9LGUuZW5jb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZW5jb2RlKGUsdCkubGRlbGltKCl9LGUuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7ZSBpbnN0YW5jZW9mICRSZWFkZXJ8fChlPSRSZWFkZXIuY3JlYXRlKGUpKTtmb3IodmFyIHI9dm9pZCAwPT09dD9lLmxlbjplLnBvcyt0LGk9bmV3ICRyb290Lk9TTVBCRi5EZW5zZUluZm87ZS5wb3M8cjspe3ZhciBuPWUudWludDMyKCk7c3dpdGNoKG4+Pj4zKXtjYXNlIDE6aWYoaS52ZXJzaW9uJiZpLnZlcnNpb24ubGVuZ3RofHwoaS52ZXJzaW9uPVtdKSwyPT0oNyZuKSlmb3IodmFyIG89ZS51aW50MzIoKStlLnBvcztlLnBvczxvOylpLnZlcnNpb24ucHVzaChlLmludDMyKCkpO2Vsc2UgaS52ZXJzaW9uLnB1c2goZS5pbnQzMigpKTticmVhaztjYXNlIDI6aWYoaS50aW1lc3RhbXAmJmkudGltZXN0YW1wLmxlbmd0aHx8KGkudGltZXN0YW1wPVtdKSwyPT0oNyZuKSlmb3IodmFyIG89ZS51aW50MzIoKStlLnBvcztlLnBvczxvOylpLnRpbWVzdGFtcC5wdXNoKGUuc2ludDY0KCkpO2Vsc2UgaS50aW1lc3RhbXAucHVzaChlLnNpbnQ2NCgpKTticmVhaztjYXNlIDM6aWYoaS5jaGFuZ2VzZXQmJmkuY2hhbmdlc2V0Lmxlbmd0aHx8KGkuY2hhbmdlc2V0PVtdKSwyPT0oNyZuKSlmb3IodmFyIG89ZS51aW50MzIoKStlLnBvcztlLnBvczxvOylpLmNoYW5nZXNldC5wdXNoKGUuc2ludDY0KCkpO2Vsc2UgaS5jaGFuZ2VzZXQucHVzaChlLnNpbnQ2NCgpKTticmVhaztjYXNlIDQ6aWYoaS51aWQmJmkudWlkLmxlbmd0aHx8KGkudWlkPVtdKSwyPT0oNyZuKSlmb3IodmFyIG89ZS51aW50MzIoKStlLnBvcztlLnBvczxvOylpLnVpZC5wdXNoKGUuc2ludDMyKCkpO2Vsc2UgaS51aWQucHVzaChlLnNpbnQzMigpKTticmVhaztjYXNlIDU6aWYoaS51c2VyU2lkJiZpLnVzZXJTaWQubGVuZ3RofHwoaS51c2VyU2lkPVtdKSwyPT0oNyZuKSlmb3IodmFyIG89ZS51aW50MzIoKStlLnBvcztlLnBvczxvOylpLnVzZXJTaWQucHVzaChlLnNpbnQzMigpKTtlbHNlIGkudXNlclNpZC5wdXNoKGUuc2ludDMyKCkpO2JyZWFrO2Nhc2UgNjppZihpLnZpc2libGUmJmkudmlzaWJsZS5sZW5ndGh8fChpLnZpc2libGU9W10pLDI9PSg3Jm4pKWZvcih2YXIgbz1lLnVpbnQzMigpK2UucG9zO2UucG9zPG87KWkudmlzaWJsZS5wdXNoKGUuYm9vbCgpKTtlbHNlIGkudmlzaWJsZS5wdXNoKGUuYm9vbCgpKTticmVhaztkZWZhdWx0OmUuc2tpcFR5cGUoNyZuKX19cmV0dXJuIGl9LGUuZGVjb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2YgJFJlYWRlcnx8KGU9bmV3ICRSZWFkZXIoZSkpLHRoaXMuZGVjb2RlKGUsZS51aW50MzIoKSl9LGUudmVyaWZ5PWZ1bmN0aW9uKGUpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlfHxudWxsPT09ZSlyZXR1cm5cIm9iamVjdCBleHBlY3RlZFwiO2lmKG51bGwhPWUudmVyc2lvbiYmZS5oYXNPd25Qcm9wZXJ0eShcInZlcnNpb25cIikpe2lmKCFBcnJheS5pc0FycmF5KGUudmVyc2lvbikpcmV0dXJuXCJ2ZXJzaW9uOiBhcnJheSBleHBlY3RlZFwiO2Zvcih2YXIgdD0wO3Q8ZS52ZXJzaW9uLmxlbmd0aDsrK3QpaWYoISR1dGlsLmlzSW50ZWdlcihlLnZlcnNpb25bdF0pKXJldHVyblwidmVyc2lvbjogaW50ZWdlcltdIGV4cGVjdGVkXCJ9aWYobnVsbCE9ZS50aW1lc3RhbXAmJmUuaGFzT3duUHJvcGVydHkoXCJ0aW1lc3RhbXBcIikpe2lmKCFBcnJheS5pc0FycmF5KGUudGltZXN0YW1wKSlyZXR1cm5cInRpbWVzdGFtcDogYXJyYXkgZXhwZWN0ZWRcIjtmb3IodmFyIHQ9MDt0PGUudGltZXN0YW1wLmxlbmd0aDsrK3QpaWYoISgkdXRpbC5pc0ludGVnZXIoZS50aW1lc3RhbXBbdF0pfHxlLnRpbWVzdGFtcFt0XSYmJHV0aWwuaXNJbnRlZ2VyKGUudGltZXN0YW1wW3RdLmxvdykmJiR1dGlsLmlzSW50ZWdlcihlLnRpbWVzdGFtcFt0XS5oaWdoKSkpcmV0dXJuXCJ0aW1lc3RhbXA6IGludGVnZXJ8TG9uZ1tdIGV4cGVjdGVkXCJ9aWYobnVsbCE9ZS5jaGFuZ2VzZXQmJmUuaGFzT3duUHJvcGVydHkoXCJjaGFuZ2VzZXRcIikpe2lmKCFBcnJheS5pc0FycmF5KGUuY2hhbmdlc2V0KSlyZXR1cm5cImNoYW5nZXNldDogYXJyYXkgZXhwZWN0ZWRcIjtmb3IodmFyIHQ9MDt0PGUuY2hhbmdlc2V0Lmxlbmd0aDsrK3QpaWYoISgkdXRpbC5pc0ludGVnZXIoZS5jaGFuZ2VzZXRbdF0pfHxlLmNoYW5nZXNldFt0XSYmJHV0aWwuaXNJbnRlZ2VyKGUuY2hhbmdlc2V0W3RdLmxvdykmJiR1dGlsLmlzSW50ZWdlcihlLmNoYW5nZXNldFt0XS5oaWdoKSkpcmV0dXJuXCJjaGFuZ2VzZXQ6IGludGVnZXJ8TG9uZ1tdIGV4cGVjdGVkXCJ9aWYobnVsbCE9ZS51aWQmJmUuaGFzT3duUHJvcGVydHkoXCJ1aWRcIikpe2lmKCFBcnJheS5pc0FycmF5KGUudWlkKSlyZXR1cm5cInVpZDogYXJyYXkgZXhwZWN0ZWRcIjtmb3IodmFyIHQ9MDt0PGUudWlkLmxlbmd0aDsrK3QpaWYoISR1dGlsLmlzSW50ZWdlcihlLnVpZFt0XSkpcmV0dXJuXCJ1aWQ6IGludGVnZXJbXSBleHBlY3RlZFwifWlmKG51bGwhPWUudXNlclNpZCYmZS5oYXNPd25Qcm9wZXJ0eShcInVzZXJTaWRcIikpe2lmKCFBcnJheS5pc0FycmF5KGUudXNlclNpZCkpcmV0dXJuXCJ1c2VyU2lkOiBhcnJheSBleHBlY3RlZFwiO2Zvcih2YXIgdD0wO3Q8ZS51c2VyU2lkLmxlbmd0aDsrK3QpaWYoISR1dGlsLmlzSW50ZWdlcihlLnVzZXJTaWRbdF0pKXJldHVyblwidXNlclNpZDogaW50ZWdlcltdIGV4cGVjdGVkXCJ9aWYobnVsbCE9ZS52aXNpYmxlJiZlLmhhc093blByb3BlcnR5KFwidmlzaWJsZVwiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS52aXNpYmxlKSlyZXR1cm5cInZpc2libGU6IGFycmF5IGV4cGVjdGVkXCI7Zm9yKHZhciB0PTA7dDxlLnZpc2libGUubGVuZ3RoOysrdClpZihcImJvb2xlYW5cIiE9dHlwZW9mIGUudmlzaWJsZVt0XSlyZXR1cm5cInZpc2libGU6IGJvb2xlYW5bXSBleHBlY3RlZFwifXJldHVybiBudWxsfSxlLmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mICRyb290Lk9TTVBCRi5EZW5zZUluZm8pcmV0dXJuIGU7dmFyIHQ9bmV3ICRyb290Lk9TTVBCRi5EZW5zZUluZm87aWYoZS52ZXJzaW9uKXtpZighQXJyYXkuaXNBcnJheShlLnZlcnNpb24pKXRocm93IFR5cGVFcnJvcihcIi5PU01QQkYuRGVuc2VJbmZvLnZlcnNpb246IGFycmF5IGV4cGVjdGVkXCIpO3QudmVyc2lvbj1bXTtmb3IodmFyIHI9MDtyPGUudmVyc2lvbi5sZW5ndGg7KytyKXQudmVyc2lvbltyXT0wfGUudmVyc2lvbltyXX1pZihlLnRpbWVzdGFtcCl7aWYoIUFycmF5LmlzQXJyYXkoZS50aW1lc3RhbXApKXRocm93IFR5cGVFcnJvcihcIi5PU01QQkYuRGVuc2VJbmZvLnRpbWVzdGFtcDogYXJyYXkgZXhwZWN0ZWRcIik7dC50aW1lc3RhbXA9W107Zm9yKHZhciByPTA7cjxlLnRpbWVzdGFtcC5sZW5ndGg7KytyKSR1dGlsLkxvbmc/KHQudGltZXN0YW1wW3JdPSR1dGlsLkxvbmcuZnJvbVZhbHVlKGUudGltZXN0YW1wW3JdKSkudW5zaWduZWQ9ITE6XCJzdHJpbmdcIj09dHlwZW9mIGUudGltZXN0YW1wW3JdP3QudGltZXN0YW1wW3JdPXBhcnNlSW50KGUudGltZXN0YW1wW3JdLDEwKTpcIm51bWJlclwiPT10eXBlb2YgZS50aW1lc3RhbXBbcl0/dC50aW1lc3RhbXBbcl09ZS50aW1lc3RhbXBbcl06XCJvYmplY3RcIj09dHlwZW9mIGUudGltZXN0YW1wW3JdJiYodC50aW1lc3RhbXBbcl09bmV3ICR1dGlsLkxvbmdCaXRzKGUudGltZXN0YW1wW3JdLmxvdz4+PjAsZS50aW1lc3RhbXBbcl0uaGlnaD4+PjApLnRvTnVtYmVyKCkpfWlmKGUuY2hhbmdlc2V0KXtpZighQXJyYXkuaXNBcnJheShlLmNoYW5nZXNldCkpdGhyb3cgVHlwZUVycm9yKFwiLk9TTVBCRi5EZW5zZUluZm8uY2hhbmdlc2V0OiBhcnJheSBleHBlY3RlZFwiKTt0LmNoYW5nZXNldD1bXTtmb3IodmFyIHI9MDtyPGUuY2hhbmdlc2V0Lmxlbmd0aDsrK3IpJHV0aWwuTG9uZz8odC5jaGFuZ2VzZXRbcl09JHV0aWwuTG9uZy5mcm9tVmFsdWUoZS5jaGFuZ2VzZXRbcl0pKS51bnNpZ25lZD0hMTpcInN0cmluZ1wiPT10eXBlb2YgZS5jaGFuZ2VzZXRbcl0/dC5jaGFuZ2VzZXRbcl09cGFyc2VJbnQoZS5jaGFuZ2VzZXRbcl0sMTApOlwibnVtYmVyXCI9PXR5cGVvZiBlLmNoYW5nZXNldFtyXT90LmNoYW5nZXNldFtyXT1lLmNoYW5nZXNldFtyXTpcIm9iamVjdFwiPT10eXBlb2YgZS5jaGFuZ2VzZXRbcl0mJih0LmNoYW5nZXNldFtyXT1uZXcgJHV0aWwuTG9uZ0JpdHMoZS5jaGFuZ2VzZXRbcl0ubG93Pj4+MCxlLmNoYW5nZXNldFtyXS5oaWdoPj4+MCkudG9OdW1iZXIoKSl9aWYoZS51aWQpe2lmKCFBcnJheS5pc0FycmF5KGUudWlkKSl0aHJvdyBUeXBlRXJyb3IoXCIuT1NNUEJGLkRlbnNlSW5mby51aWQ6IGFycmF5IGV4cGVjdGVkXCIpO3QudWlkPVtdO2Zvcih2YXIgcj0wO3I8ZS51aWQubGVuZ3RoOysrcil0LnVpZFtyXT0wfGUudWlkW3JdfWlmKGUudXNlclNpZCl7aWYoIUFycmF5LmlzQXJyYXkoZS51c2VyU2lkKSl0aHJvdyBUeXBlRXJyb3IoXCIuT1NNUEJGLkRlbnNlSW5mby51c2VyU2lkOiBhcnJheSBleHBlY3RlZFwiKTt0LnVzZXJTaWQ9W107Zm9yKHZhciByPTA7cjxlLnVzZXJTaWQubGVuZ3RoOysrcil0LnVzZXJTaWRbcl09MHxlLnVzZXJTaWRbcl19aWYoZS52aXNpYmxlKXtpZighQXJyYXkuaXNBcnJheShlLnZpc2libGUpKXRocm93IFR5cGVFcnJvcihcIi5PU01QQkYuRGVuc2VJbmZvLnZpc2libGU6IGFycmF5IGV4cGVjdGVkXCIpO3QudmlzaWJsZT1bXTtmb3IodmFyIHI9MDtyPGUudmlzaWJsZS5sZW5ndGg7KytyKXQudmlzaWJsZVtyXT1Cb29sZWFuKGUudmlzaWJsZVtyXSl9cmV0dXJuIHR9LGUudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt0fHwodD17fSk7dmFyIHI9e307aWYoKHQuYXJyYXlzfHx0LmRlZmF1bHRzKSYmKHIudmVyc2lvbj1bXSxyLnRpbWVzdGFtcD1bXSxyLmNoYW5nZXNldD1bXSxyLnVpZD1bXSxyLnVzZXJTaWQ9W10sci52aXNpYmxlPVtdKSxlLnZlcnNpb24mJmUudmVyc2lvbi5sZW5ndGgpe3IudmVyc2lvbj1bXTtmb3IodmFyIGk9MDtpPGUudmVyc2lvbi5sZW5ndGg7KytpKXIudmVyc2lvbltpXT1lLnZlcnNpb25baV19aWYoZS50aW1lc3RhbXAmJmUudGltZXN0YW1wLmxlbmd0aCl7ci50aW1lc3RhbXA9W107Zm9yKHZhciBpPTA7aTxlLnRpbWVzdGFtcC5sZW5ndGg7KytpKVwibnVtYmVyXCI9PXR5cGVvZiBlLnRpbWVzdGFtcFtpXT9yLnRpbWVzdGFtcFtpXT10LmxvbmdzPT09U3RyaW5nP1N0cmluZyhlLnRpbWVzdGFtcFtpXSk6ZS50aW1lc3RhbXBbaV06ci50aW1lc3RhbXBbaV09dC5sb25ncz09PVN0cmluZz8kdXRpbC5Mb25nLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUudGltZXN0YW1wW2ldKTp0LmxvbmdzPT09TnVtYmVyP25ldyAkdXRpbC5Mb25nQml0cyhlLnRpbWVzdGFtcFtpXS5sb3c+Pj4wLGUudGltZXN0YW1wW2ldLmhpZ2g+Pj4wKS50b051bWJlcigpOmUudGltZXN0YW1wW2ldfWlmKGUuY2hhbmdlc2V0JiZlLmNoYW5nZXNldC5sZW5ndGgpe3IuY2hhbmdlc2V0PVtdO2Zvcih2YXIgaT0wO2k8ZS5jaGFuZ2VzZXQubGVuZ3RoOysraSlcIm51bWJlclwiPT10eXBlb2YgZS5jaGFuZ2VzZXRbaV0/ci5jaGFuZ2VzZXRbaV09dC5sb25ncz09PVN0cmluZz9TdHJpbmcoZS5jaGFuZ2VzZXRbaV0pOmUuY2hhbmdlc2V0W2ldOnIuY2hhbmdlc2V0W2ldPXQubG9uZ3M9PT1TdHJpbmc/JHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlLmNoYW5nZXNldFtpXSk6dC5sb25ncz09PU51bWJlcj9uZXcgJHV0aWwuTG9uZ0JpdHMoZS5jaGFuZ2VzZXRbaV0ubG93Pj4+MCxlLmNoYW5nZXNldFtpXS5oaWdoPj4+MCkudG9OdW1iZXIoKTplLmNoYW5nZXNldFtpXX1pZihlLnVpZCYmZS51aWQubGVuZ3RoKXtyLnVpZD1bXTtmb3IodmFyIGk9MDtpPGUudWlkLmxlbmd0aDsrK2kpci51aWRbaV09ZS51aWRbaV19aWYoZS51c2VyU2lkJiZlLnVzZXJTaWQubGVuZ3RoKXtyLnVzZXJTaWQ9W107Zm9yKHZhciBpPTA7aTxlLnVzZXJTaWQubGVuZ3RoOysraSlyLnVzZXJTaWRbaV09ZS51c2VyU2lkW2ldfWlmKGUudmlzaWJsZSYmZS52aXNpYmxlLmxlbmd0aCl7ci52aXNpYmxlPVtdO2Zvcih2YXIgaT0wO2k8ZS52aXNpYmxlLmxlbmd0aDsrK2kpci52aXNpYmxlW2ldPWUudmlzaWJsZVtpXX1yZXR1cm4gcn0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKX0sZX0oKSxlLkNoYW5nZVNldD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSkscj0wO3I8dC5sZW5ndGg7KytyKW51bGwhPWVbdFtyXV0mJih0aGlzW3Rbcl1dPWVbdFtyXV0pfXJldHVybiBlLnByb3RvdHlwZS5pZD0kdXRpbC5Mb25nPyR1dGlsLkxvbmcuZnJvbUJpdHMoMCwwLCExKTowLGUuY3JlYXRlPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgZSh0KX0sZS5lbmNvZGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8KHQ9JFdyaXRlci5jcmVhdGUoKSksdC51aW50MzIoOCkuaW50NjQoZS5pZCksdH0sZS5lbmNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lbmNvZGUoZSx0KS5sZGVsaW0oKX0sZS5kZWNvZGU9ZnVuY3Rpb24oZSx0KXtlIGluc3RhbmNlb2YgJFJlYWRlcnx8KGU9JFJlYWRlci5jcmVhdGUoZSkpO2Zvcih2YXIgcj12b2lkIDA9PT10P2UubGVuOmUucG9zK3QsaT1uZXcgJHJvb3QuT1NNUEJGLkNoYW5nZVNldDtlLnBvczxyOyl7dmFyIG49ZS51aW50MzIoKTtzd2l0Y2gobj4+PjMpe2Nhc2UgMTppLmlkPWUuaW50NjQoKTticmVhaztkZWZhdWx0OmUuc2tpcFR5cGUoNyZuKX19aWYoIWkuaGFzT3duUHJvcGVydHkoXCJpZFwiKSl0aHJvdyAkdXRpbC5Qcm90b2NvbEVycm9yKFwibWlzc2luZyByZXF1aXJlZCAnaWQnXCIse2luc3RhbmNlOml9KTtyZXR1cm4gaX0sZS5kZWNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiAkUmVhZGVyfHwoZT1uZXcgJFJlYWRlcihlKSksdGhpcy5kZWNvZGUoZSxlLnVpbnQzMigpKX0sZS52ZXJpZnk9ZnVuY3Rpb24oZSl7cmV0dXJuXCJvYmplY3RcIiE9dHlwZW9mIGV8fG51bGw9PT1lP1wib2JqZWN0IGV4cGVjdGVkXCI6JHV0aWwuaXNJbnRlZ2VyKGUuaWQpfHxlLmlkJiYkdXRpbC5pc0ludGVnZXIoZS5pZC5sb3cpJiYkdXRpbC5pc0ludGVnZXIoZS5pZC5oaWdoKT9udWxsOlwiaWQ6IGludGVnZXJ8TG9uZyBleHBlY3RlZFwifSxlLmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mICRyb290Lk9TTVBCRi5DaGFuZ2VTZXQpcmV0dXJuIGU7dmFyIHQ9bmV3ICRyb290Lk9TTVBCRi5DaGFuZ2VTZXQ7cmV0dXJuIG51bGwhPWUuaWQmJigkdXRpbC5Mb25nPyh0LmlkPSR1dGlsLkxvbmcuZnJvbVZhbHVlKGUuaWQpKS51bnNpZ25lZD0hMTpcInN0cmluZ1wiPT10eXBlb2YgZS5pZD90LmlkPXBhcnNlSW50KGUuaWQsMTApOlwibnVtYmVyXCI9PXR5cGVvZiBlLmlkP3QuaWQ9ZS5pZDpcIm9iamVjdFwiPT10eXBlb2YgZS5pZCYmKHQuaWQ9bmV3ICR1dGlsLkxvbmdCaXRzKGUuaWQubG93Pj4+MCxlLmlkLmhpZ2g+Pj4wKS50b051bWJlcigpKSksdH0sZS50b09iamVjdD1mdW5jdGlvbihlLHQpe3R8fCh0PXt9KTt2YXIgcj17fTtpZih0LmRlZmF1bHRzKWlmKCR1dGlsLkxvbmcpe3ZhciBpPW5ldyAkdXRpbC5Mb25nKDAsMCwhMSk7ci5pZD10LmxvbmdzPT09U3RyaW5nP2kudG9TdHJpbmcoKTp0LmxvbmdzPT09TnVtYmVyP2kudG9OdW1iZXIoKTppfWVsc2Ugci5pZD10LmxvbmdzPT09U3RyaW5nP1wiMFwiOjA7cmV0dXJuIG51bGwhPWUuaWQmJmUuaGFzT3duUHJvcGVydHkoXCJpZFwiKSYmKFwibnVtYmVyXCI9PXR5cGVvZiBlLmlkP3IuaWQ9dC5sb25ncz09PVN0cmluZz9TdHJpbmcoZS5pZCk6ZS5pZDpyLmlkPXQubG9uZ3M9PT1TdHJpbmc/JHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlLmlkKTp0LmxvbmdzPT09TnVtYmVyP25ldyAkdXRpbC5Mb25nQml0cyhlLmlkLmxvdz4+PjAsZS5pZC5oaWdoPj4+MCkudG9OdW1iZXIoKTplLmlkKSxyfSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpfSxlfSgpLGUuTm9kZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7aWYodGhpcy5rZXlzPVtdLHRoaXMudmFscz1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxyPTA7cjx0Lmxlbmd0aDsrK3IpbnVsbCE9ZVt0W3JdXSYmKHRoaXNbdFtyXV09ZVt0W3JdXSl9cmV0dXJuIGUucHJvdG90eXBlLmlkPSR1dGlsLkxvbmc/JHV0aWwuTG9uZy5mcm9tQml0cygwLDAsITEpOjAsZS5wcm90b3R5cGUua2V5cz0kdXRpbC5lbXB0eUFycmF5LGUucHJvdG90eXBlLnZhbHM9JHV0aWwuZW1wdHlBcnJheSxlLnByb3RvdHlwZS5pbmZvPW51bGwsZS5wcm90b3R5cGUubGF0PSR1dGlsLkxvbmc/JHV0aWwuTG9uZy5mcm9tQml0cygwLDAsITEpOjAsZS5wcm90b3R5cGUubG9uPSR1dGlsLkxvbmc/JHV0aWwuTG9uZy5mcm9tQml0cygwLDAsITEpOjAsZS5jcmVhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBlKHQpfSxlLmVuY29kZT1mdW5jdGlvbihlLHQpe2lmKHR8fCh0PSRXcml0ZXIuY3JlYXRlKCkpLHQudWludDMyKDgpLnNpbnQ2NChlLmlkKSxudWxsIT1lLmtleXMmJmUua2V5cy5sZW5ndGgpe3QudWludDMyKDE4KS5mb3JrKCk7Zm9yKHZhciByPTA7cjxlLmtleXMubGVuZ3RoOysrcil0LnVpbnQzMihlLmtleXNbcl0pO3QubGRlbGltKCl9aWYobnVsbCE9ZS52YWxzJiZlLnZhbHMubGVuZ3RoKXt0LnVpbnQzMigyNikuZm9yaygpO2Zvcih2YXIgcj0wO3I8ZS52YWxzLmxlbmd0aDsrK3IpdC51aW50MzIoZS52YWxzW3JdKTt0LmxkZWxpbSgpfXJldHVybiBudWxsIT1lLmluZm8mJmUuaGFzT3duUHJvcGVydHkoXCJpbmZvXCIpJiYkcm9vdC5PU01QQkYuSW5mby5lbmNvZGUoZS5pbmZvLHQudWludDMyKDM0KS5mb3JrKCkpLmxkZWxpbSgpLHQudWludDMyKDY0KS5zaW50NjQoZS5sYXQpLHQudWludDMyKDcyKS5zaW50NjQoZS5sb24pLHR9LGUuZW5jb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZW5jb2RlKGUsdCkubGRlbGltKCl9LGUuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7ZSBpbnN0YW5jZW9mICRSZWFkZXJ8fChlPSRSZWFkZXIuY3JlYXRlKGUpKTtmb3IodmFyIHI9dm9pZCAwPT09dD9lLmxlbjplLnBvcyt0LGk9bmV3ICRyb290Lk9TTVBCRi5Ob2RlO2UucG9zPHI7KXt2YXIgbj1lLnVpbnQzMigpO3N3aXRjaChuPj4+Myl7Y2FzZSAxOmkuaWQ9ZS5zaW50NjQoKTticmVhaztjYXNlIDI6aWYoaS5rZXlzJiZpLmtleXMubGVuZ3RofHwoaS5rZXlzPVtdKSwyPT0oNyZuKSlmb3IodmFyIG89ZS51aW50MzIoKStlLnBvcztlLnBvczxvOylpLmtleXMucHVzaChlLnVpbnQzMigpKTtlbHNlIGkua2V5cy5wdXNoKGUudWludDMyKCkpO2JyZWFrO2Nhc2UgMzppZihpLnZhbHMmJmkudmFscy5sZW5ndGh8fChpLnZhbHM9W10pLDI9PSg3Jm4pKWZvcih2YXIgbz1lLnVpbnQzMigpK2UucG9zO2UucG9zPG87KWkudmFscy5wdXNoKGUudWludDMyKCkpO2Vsc2UgaS52YWxzLnB1c2goZS51aW50MzIoKSk7YnJlYWs7Y2FzZSA0OmkuaW5mbz0kcm9vdC5PU01QQkYuSW5mby5kZWNvZGUoZSxlLnVpbnQzMigpKTticmVhaztjYXNlIDg6aS5sYXQ9ZS5zaW50NjQoKTticmVhaztjYXNlIDk6aS5sb249ZS5zaW50NjQoKTticmVhaztkZWZhdWx0OmUuc2tpcFR5cGUoNyZuKX19aWYoIWkuaGFzT3duUHJvcGVydHkoXCJpZFwiKSl0aHJvdyAkdXRpbC5Qcm90b2NvbEVycm9yKFwibWlzc2luZyByZXF1aXJlZCAnaWQnXCIse2luc3RhbmNlOml9KTtpZighaS5oYXNPd25Qcm9wZXJ0eShcImxhdFwiKSl0aHJvdyAkdXRpbC5Qcm90b2NvbEVycm9yKFwibWlzc2luZyByZXF1aXJlZCAnbGF0J1wiLHtpbnN0YW5jZTppfSk7aWYoIWkuaGFzT3duUHJvcGVydHkoXCJsb25cIikpdGhyb3cgJHV0aWwuUHJvdG9jb2xFcnJvcihcIm1pc3NpbmcgcmVxdWlyZWQgJ2xvbidcIix7aW5zdGFuY2U6aX0pO3JldHVybiBpfSxlLmRlY29kZURlbGltaXRlZD1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mICRSZWFkZXJ8fChlPW5ldyAkUmVhZGVyKGUpKSx0aGlzLmRlY29kZShlLGUudWludDMyKCkpfSxlLnZlcmlmeT1mdW5jdGlvbihlKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZXx8bnVsbD09PWUpcmV0dXJuXCJvYmplY3QgZXhwZWN0ZWRcIjtpZighKCR1dGlsLmlzSW50ZWdlcihlLmlkKXx8ZS5pZCYmJHV0aWwuaXNJbnRlZ2VyKGUuaWQubG93KSYmJHV0aWwuaXNJbnRlZ2VyKGUuaWQuaGlnaCkpKXJldHVyblwiaWQ6IGludGVnZXJ8TG9uZyBleHBlY3RlZFwiO2lmKG51bGwhPWUua2V5cyYmZS5oYXNPd25Qcm9wZXJ0eShcImtleXNcIikpe2lmKCFBcnJheS5pc0FycmF5KGUua2V5cykpcmV0dXJuXCJrZXlzOiBhcnJheSBleHBlY3RlZFwiO2Zvcih2YXIgdD0wO3Q8ZS5rZXlzLmxlbmd0aDsrK3QpaWYoISR1dGlsLmlzSW50ZWdlcihlLmtleXNbdF0pKXJldHVyblwia2V5czogaW50ZWdlcltdIGV4cGVjdGVkXCJ9aWYobnVsbCE9ZS52YWxzJiZlLmhhc093blByb3BlcnR5KFwidmFsc1wiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS52YWxzKSlyZXR1cm5cInZhbHM6IGFycmF5IGV4cGVjdGVkXCI7Zm9yKHZhciB0PTA7dDxlLnZhbHMubGVuZ3RoOysrdClpZighJHV0aWwuaXNJbnRlZ2VyKGUudmFsc1t0XSkpcmV0dXJuXCJ2YWxzOiBpbnRlZ2VyW10gZXhwZWN0ZWRcIn1pZihudWxsIT1lLmluZm8mJmUuaGFzT3duUHJvcGVydHkoXCJpbmZvXCIpKXt2YXIgcj0kcm9vdC5PU01QQkYuSW5mby52ZXJpZnkoZS5pbmZvKTtpZihyKXJldHVyblwiaW5mby5cIityfXJldHVybiAkdXRpbC5pc0ludGVnZXIoZS5sYXQpfHxlLmxhdCYmJHV0aWwuaXNJbnRlZ2VyKGUubGF0LmxvdykmJiR1dGlsLmlzSW50ZWdlcihlLmxhdC5oaWdoKT8kdXRpbC5pc0ludGVnZXIoZS5sb24pfHxlLmxvbiYmJHV0aWwuaXNJbnRlZ2VyKGUubG9uLmxvdykmJiR1dGlsLmlzSW50ZWdlcihlLmxvbi5oaWdoKT9udWxsOlwibG9uOiBpbnRlZ2VyfExvbmcgZXhwZWN0ZWRcIjpcImxhdDogaW50ZWdlcnxMb25nIGV4cGVjdGVkXCJ9LGUuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgJHJvb3QuT1NNUEJGLk5vZGUpcmV0dXJuIGU7dmFyIHQ9bmV3ICRyb290Lk9TTVBCRi5Ob2RlO2lmKG51bGwhPWUuaWQmJigkdXRpbC5Mb25nPyh0LmlkPSR1dGlsLkxvbmcuZnJvbVZhbHVlKGUuaWQpKS51bnNpZ25lZD0hMTpcInN0cmluZ1wiPT10eXBlb2YgZS5pZD90LmlkPXBhcnNlSW50KGUuaWQsMTApOlwibnVtYmVyXCI9PXR5cGVvZiBlLmlkP3QuaWQ9ZS5pZDpcIm9iamVjdFwiPT10eXBlb2YgZS5pZCYmKHQuaWQ9bmV3ICR1dGlsLkxvbmdCaXRzKGUuaWQubG93Pj4+MCxlLmlkLmhpZ2g+Pj4wKS50b051bWJlcigpKSksZS5rZXlzKXtpZighQXJyYXkuaXNBcnJheShlLmtleXMpKXRocm93IFR5cGVFcnJvcihcIi5PU01QQkYuTm9kZS5rZXlzOiBhcnJheSBleHBlY3RlZFwiKTt0LmtleXM9W107Zm9yKHZhciByPTA7cjxlLmtleXMubGVuZ3RoOysrcil0LmtleXNbcl09ZS5rZXlzW3JdPj4+MH1pZihlLnZhbHMpe2lmKCFBcnJheS5pc0FycmF5KGUudmFscykpdGhyb3cgVHlwZUVycm9yKFwiLk9TTVBCRi5Ob2RlLnZhbHM6IGFycmF5IGV4cGVjdGVkXCIpO3QudmFscz1bXTtmb3IodmFyIHI9MDtyPGUudmFscy5sZW5ndGg7KytyKXQudmFsc1tyXT1lLnZhbHNbcl0+Pj4wfWlmKG51bGwhPWUuaW5mbyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuaW5mbyl0aHJvdyBUeXBlRXJyb3IoXCIuT1NNUEJGLk5vZGUuaW5mbzogb2JqZWN0IGV4cGVjdGVkXCIpO3QuaW5mbz0kcm9vdC5PU01QQkYuSW5mby5mcm9tT2JqZWN0KGUuaW5mbyl9cmV0dXJuIG51bGwhPWUubGF0JiYoJHV0aWwuTG9uZz8odC5sYXQ9JHV0aWwuTG9uZy5mcm9tVmFsdWUoZS5sYXQpKS51bnNpZ25lZD0hMTpcInN0cmluZ1wiPT10eXBlb2YgZS5sYXQ/dC5sYXQ9cGFyc2VJbnQoZS5sYXQsMTApOlwibnVtYmVyXCI9PXR5cGVvZiBlLmxhdD90LmxhdD1lLmxhdDpcIm9iamVjdFwiPT10eXBlb2YgZS5sYXQmJih0LmxhdD1uZXcgJHV0aWwuTG9uZ0JpdHMoZS5sYXQubG93Pj4+MCxlLmxhdC5oaWdoPj4+MCkudG9OdW1iZXIoKSkpLG51bGwhPWUubG9uJiYoJHV0aWwuTG9uZz8odC5sb249JHV0aWwuTG9uZy5mcm9tVmFsdWUoZS5sb24pKS51bnNpZ25lZD0hMTpcInN0cmluZ1wiPT10eXBlb2YgZS5sb24/dC5sb249cGFyc2VJbnQoZS5sb24sMTApOlwibnVtYmVyXCI9PXR5cGVvZiBlLmxvbj90Lmxvbj1lLmxvbjpcIm9iamVjdFwiPT10eXBlb2YgZS5sb24mJih0Lmxvbj1uZXcgJHV0aWwuTG9uZ0JpdHMoZS5sb24ubG93Pj4+MCxlLmxvbi5oaWdoPj4+MCkudG9OdW1iZXIoKSkpLHR9LGUudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt0fHwodD17fSk7dmFyIHI9e307aWYoKHQuYXJyYXlzfHx0LmRlZmF1bHRzKSYmKHIua2V5cz1bXSxyLnZhbHM9W10pLHQuZGVmYXVsdHMpe2lmKCR1dGlsLkxvbmcpe3ZhciBpPW5ldyAkdXRpbC5Mb25nKDAsMCwhMSk7ci5pZD10LmxvbmdzPT09U3RyaW5nP2kudG9TdHJpbmcoKTp0LmxvbmdzPT09TnVtYmVyP2kudG9OdW1iZXIoKTppfWVsc2Ugci5pZD10LmxvbmdzPT09U3RyaW5nP1wiMFwiOjA7aWYoci5pbmZvPW51bGwsJHV0aWwuTG9uZyl7dmFyIGk9bmV3ICR1dGlsLkxvbmcoMCwwLCExKTtyLmxhdD10LmxvbmdzPT09U3RyaW5nP2kudG9TdHJpbmcoKTp0LmxvbmdzPT09TnVtYmVyP2kudG9OdW1iZXIoKTppfWVsc2Ugci5sYXQ9dC5sb25ncz09PVN0cmluZz9cIjBcIjowO2lmKCR1dGlsLkxvbmcpe3ZhciBpPW5ldyAkdXRpbC5Mb25nKDAsMCwhMSk7ci5sb249dC5sb25ncz09PVN0cmluZz9pLnRvU3RyaW5nKCk6dC5sb25ncz09PU51bWJlcj9pLnRvTnVtYmVyKCk6aX1lbHNlIHIubG9uPXQubG9uZ3M9PT1TdHJpbmc/XCIwXCI6MH1pZihudWxsIT1lLmlkJiZlLmhhc093blByb3BlcnR5KFwiaWRcIikmJihcIm51bWJlclwiPT10eXBlb2YgZS5pZD9yLmlkPXQubG9uZ3M9PT1TdHJpbmc/U3RyaW5nKGUuaWQpOmUuaWQ6ci5pZD10LmxvbmdzPT09U3RyaW5nPyR1dGlsLkxvbmcucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZS5pZCk6dC5sb25ncz09PU51bWJlcj9uZXcgJHV0aWwuTG9uZ0JpdHMoZS5pZC5sb3c+Pj4wLGUuaWQuaGlnaD4+PjApLnRvTnVtYmVyKCk6ZS5pZCksZS5rZXlzJiZlLmtleXMubGVuZ3RoKXtyLmtleXM9W107Zm9yKHZhciBuPTA7bjxlLmtleXMubGVuZ3RoOysrbilyLmtleXNbbl09ZS5rZXlzW25dfWlmKGUudmFscyYmZS52YWxzLmxlbmd0aCl7ci52YWxzPVtdO2Zvcih2YXIgbj0wO248ZS52YWxzLmxlbmd0aDsrK24pci52YWxzW25dPWUudmFsc1tuXX1yZXR1cm4gbnVsbCE9ZS5pbmZvJiZlLmhhc093blByb3BlcnR5KFwiaW5mb1wiKSYmKHIuaW5mbz0kcm9vdC5PU01QQkYuSW5mby50b09iamVjdChlLmluZm8sdCkpLG51bGwhPWUubGF0JiZlLmhhc093blByb3BlcnR5KFwibGF0XCIpJiYoXCJudW1iZXJcIj09dHlwZW9mIGUubGF0P3IubGF0PXQubG9uZ3M9PT1TdHJpbmc/U3RyaW5nKGUubGF0KTplLmxhdDpyLmxhdD10LmxvbmdzPT09U3RyaW5nPyR1dGlsLkxvbmcucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZS5sYXQpOnQubG9uZ3M9PT1OdW1iZXI/bmV3ICR1dGlsLkxvbmdCaXRzKGUubGF0Lmxvdz4+PjAsZS5sYXQuaGlnaD4+PjApLnRvTnVtYmVyKCk6ZS5sYXQpLG51bGwhPWUubG9uJiZlLmhhc093blByb3BlcnR5KFwibG9uXCIpJiYoXCJudW1iZXJcIj09dHlwZW9mIGUubG9uP3IubG9uPXQubG9uZ3M9PT1TdHJpbmc/U3RyaW5nKGUubG9uKTplLmxvbjpyLmxvbj10LmxvbmdzPT09U3RyaW5nPyR1dGlsLkxvbmcucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZS5sb24pOnQubG9uZ3M9PT1OdW1iZXI/bmV3ICR1dGlsLkxvbmdCaXRzKGUubG9uLmxvdz4+PjAsZS5sb24uaGlnaD4+PjApLnRvTnVtYmVyKCk6ZS5sb24pLHJ9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsJHByb3RvYnVmLnV0aWwudG9KU09OT3B0aW9ucyl9LGV9KCksZS5EZW5zZU5vZGVzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtpZih0aGlzLmlkPVtdLHRoaXMubGF0PVtdLHRoaXMubG9uPVtdLHRoaXMua2V5c1ZhbHM9W10sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSkscj0wO3I8dC5sZW5ndGg7KytyKW51bGwhPWVbdFtyXV0mJih0aGlzW3Rbcl1dPWVbdFtyXV0pfXJldHVybiBlLnByb3RvdHlwZS5pZD0kdXRpbC5lbXB0eUFycmF5LGUucHJvdG90eXBlLmRlbnNlaW5mbz1udWxsLGUucHJvdG90eXBlLmxhdD0kdXRpbC5lbXB0eUFycmF5LGUucHJvdG90eXBlLmxvbj0kdXRpbC5lbXB0eUFycmF5LGUucHJvdG90eXBlLmtleXNWYWxzPSR1dGlsLmVtcHR5QXJyYXksZS5jcmVhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBlKHQpfSxlLmVuY29kZT1mdW5jdGlvbihlLHQpe2lmKHR8fCh0PSRXcml0ZXIuY3JlYXRlKCkpLG51bGwhPWUuaWQmJmUuaWQubGVuZ3RoKXt0LnVpbnQzMigxMCkuZm9yaygpO2Zvcih2YXIgcj0wO3I8ZS5pZC5sZW5ndGg7KytyKXQuc2ludDY0KGUuaWRbcl0pO3QubGRlbGltKCl9aWYobnVsbCE9ZS5kZW5zZWluZm8mJmUuaGFzT3duUHJvcGVydHkoXCJkZW5zZWluZm9cIikmJiRyb290Lk9TTVBCRi5EZW5zZUluZm8uZW5jb2RlKGUuZGVuc2VpbmZvLHQudWludDMyKDQyKS5mb3JrKCkpLmxkZWxpbSgpLG51bGwhPWUubGF0JiZlLmxhdC5sZW5ndGgpe3QudWludDMyKDY2KS5mb3JrKCk7Zm9yKHZhciByPTA7cjxlLmxhdC5sZW5ndGg7KytyKXQuc2ludDY0KGUubGF0W3JdKTt0LmxkZWxpbSgpfWlmKG51bGwhPWUubG9uJiZlLmxvbi5sZW5ndGgpe3QudWludDMyKDc0KS5mb3JrKCk7Zm9yKHZhciByPTA7cjxlLmxvbi5sZW5ndGg7KytyKXQuc2ludDY0KGUubG9uW3JdKTt0LmxkZWxpbSgpfWlmKG51bGwhPWUua2V5c1ZhbHMmJmUua2V5c1ZhbHMubGVuZ3RoKXt0LnVpbnQzMig4MikuZm9yaygpO2Zvcih2YXIgcj0wO3I8ZS5rZXlzVmFscy5sZW5ndGg7KytyKXQuaW50MzIoZS5rZXlzVmFsc1tyXSk7dC5sZGVsaW0oKX1yZXR1cm4gdH0sZS5lbmNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lbmNvZGUoZSx0KS5sZGVsaW0oKX0sZS5kZWNvZGU9ZnVuY3Rpb24oZSx0KXtlIGluc3RhbmNlb2YgJFJlYWRlcnx8KGU9JFJlYWRlci5jcmVhdGUoZSkpO2Zvcih2YXIgcj12b2lkIDA9PT10P2UubGVuOmUucG9zK3QsaT1uZXcgJHJvb3QuT1NNUEJGLkRlbnNlTm9kZXM7ZS5wb3M8cjspe3ZhciBuPWUudWludDMyKCk7c3dpdGNoKG4+Pj4zKXtjYXNlIDE6aWYoaS5pZCYmaS5pZC5sZW5ndGh8fChpLmlkPVtdKSwyPT0oNyZuKSlmb3IodmFyIG89ZS51aW50MzIoKStlLnBvcztlLnBvczxvOylpLmlkLnB1c2goZS5zaW50NjQoKSk7ZWxzZSBpLmlkLnB1c2goZS5zaW50NjQoKSk7YnJlYWs7Y2FzZSA1OmkuZGVuc2VpbmZvPSRyb290Lk9TTVBCRi5EZW5zZUluZm8uZGVjb2RlKGUsZS51aW50MzIoKSk7YnJlYWs7Y2FzZSA4OmlmKGkubGF0JiZpLmxhdC5sZW5ndGh8fChpLmxhdD1bXSksMj09KDcmbikpZm9yKHZhciBvPWUudWludDMyKCkrZS5wb3M7ZS5wb3M8bzspaS5sYXQucHVzaChlLnNpbnQ2NCgpKTtlbHNlIGkubGF0LnB1c2goZS5zaW50NjQoKSk7YnJlYWs7Y2FzZSA5OmlmKGkubG9uJiZpLmxvbi5sZW5ndGh8fChpLmxvbj1bXSksMj09KDcmbikpZm9yKHZhciBvPWUudWludDMyKCkrZS5wb3M7ZS5wb3M8bzspaS5sb24ucHVzaChlLnNpbnQ2NCgpKTtlbHNlIGkubG9uLnB1c2goZS5zaW50NjQoKSk7YnJlYWs7Y2FzZSAxMDppZihpLmtleXNWYWxzJiZpLmtleXNWYWxzLmxlbmd0aHx8KGkua2V5c1ZhbHM9W10pLDI9PSg3Jm4pKWZvcih2YXIgbz1lLnVpbnQzMigpK2UucG9zO2UucG9zPG87KWkua2V5c1ZhbHMucHVzaChlLmludDMyKCkpO2Vsc2UgaS5rZXlzVmFscy5wdXNoKGUuaW50MzIoKSk7YnJlYWs7ZGVmYXVsdDplLnNraXBUeXBlKDcmbil9fXJldHVybiBpfSxlLmRlY29kZURlbGltaXRlZD1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mICRSZWFkZXJ8fChlPW5ldyAkUmVhZGVyKGUpKSx0aGlzLmRlY29kZShlLGUudWludDMyKCkpfSxlLnZlcmlmeT1mdW5jdGlvbihlKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZXx8bnVsbD09PWUpcmV0dXJuXCJvYmplY3QgZXhwZWN0ZWRcIjtpZihudWxsIT1lLmlkJiZlLmhhc093blByb3BlcnR5KFwiaWRcIikpe2lmKCFBcnJheS5pc0FycmF5KGUuaWQpKXJldHVyblwiaWQ6IGFycmF5IGV4cGVjdGVkXCI7Zm9yKHZhciB0PTA7dDxlLmlkLmxlbmd0aDsrK3QpaWYoISgkdXRpbC5pc0ludGVnZXIoZS5pZFt0XSl8fGUuaWRbdF0mJiR1dGlsLmlzSW50ZWdlcihlLmlkW3RdLmxvdykmJiR1dGlsLmlzSW50ZWdlcihlLmlkW3RdLmhpZ2gpKSlyZXR1cm5cImlkOiBpbnRlZ2VyfExvbmdbXSBleHBlY3RlZFwifWlmKG51bGwhPWUuZGVuc2VpbmZvJiZlLmhhc093blByb3BlcnR5KFwiZGVuc2VpbmZvXCIpKXt2YXIgcj0kcm9vdC5PU01QQkYuRGVuc2VJbmZvLnZlcmlmeShlLmRlbnNlaW5mbyk7aWYocilyZXR1cm5cImRlbnNlaW5mby5cIityfWlmKG51bGwhPWUubGF0JiZlLmhhc093blByb3BlcnR5KFwibGF0XCIpKXtpZighQXJyYXkuaXNBcnJheShlLmxhdCkpcmV0dXJuXCJsYXQ6IGFycmF5IGV4cGVjdGVkXCI7Zm9yKHZhciB0PTA7dDxlLmxhdC5sZW5ndGg7Kyt0KWlmKCEoJHV0aWwuaXNJbnRlZ2VyKGUubGF0W3RdKXx8ZS5sYXRbdF0mJiR1dGlsLmlzSW50ZWdlcihlLmxhdFt0XS5sb3cpJiYkdXRpbC5pc0ludGVnZXIoZS5sYXRbdF0uaGlnaCkpKXJldHVyblwibGF0OiBpbnRlZ2VyfExvbmdbXSBleHBlY3RlZFwifWlmKG51bGwhPWUubG9uJiZlLmhhc093blByb3BlcnR5KFwibG9uXCIpKXtpZighQXJyYXkuaXNBcnJheShlLmxvbikpcmV0dXJuXCJsb246IGFycmF5IGV4cGVjdGVkXCI7Zm9yKHZhciB0PTA7dDxlLmxvbi5sZW5ndGg7Kyt0KWlmKCEoJHV0aWwuaXNJbnRlZ2VyKGUubG9uW3RdKXx8ZS5sb25bdF0mJiR1dGlsLmlzSW50ZWdlcihlLmxvblt0XS5sb3cpJiYkdXRpbC5pc0ludGVnZXIoZS5sb25bdF0uaGlnaCkpKXJldHVyblwibG9uOiBpbnRlZ2VyfExvbmdbXSBleHBlY3RlZFwifWlmKG51bGwhPWUua2V5c1ZhbHMmJmUuaGFzT3duUHJvcGVydHkoXCJrZXlzVmFsc1wiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS5rZXlzVmFscykpcmV0dXJuXCJrZXlzVmFsczogYXJyYXkgZXhwZWN0ZWRcIjtmb3IodmFyIHQ9MDt0PGUua2V5c1ZhbHMubGVuZ3RoOysrdClpZighJHV0aWwuaXNJbnRlZ2VyKGUua2V5c1ZhbHNbdF0pKXJldHVyblwia2V5c1ZhbHM6IGludGVnZXJbXSBleHBlY3RlZFwifXJldHVybiBudWxsfSxlLmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mICRyb290Lk9TTVBCRi5EZW5zZU5vZGVzKXJldHVybiBlO3ZhciB0PW5ldyAkcm9vdC5PU01QQkYuRGVuc2VOb2RlcztpZihlLmlkKXtpZighQXJyYXkuaXNBcnJheShlLmlkKSl0aHJvdyBUeXBlRXJyb3IoXCIuT1NNUEJGLkRlbnNlTm9kZXMuaWQ6IGFycmF5IGV4cGVjdGVkXCIpO3QuaWQ9W107Zm9yKHZhciByPTA7cjxlLmlkLmxlbmd0aDsrK3IpJHV0aWwuTG9uZz8odC5pZFtyXT0kdXRpbC5Mb25nLmZyb21WYWx1ZShlLmlkW3JdKSkudW5zaWduZWQ9ITE6XCJzdHJpbmdcIj09dHlwZW9mIGUuaWRbcl0/dC5pZFtyXT1wYXJzZUludChlLmlkW3JdLDEwKTpcIm51bWJlclwiPT10eXBlb2YgZS5pZFtyXT90LmlkW3JdPWUuaWRbcl06XCJvYmplY3RcIj09dHlwZW9mIGUuaWRbcl0mJih0LmlkW3JdPW5ldyAkdXRpbC5Mb25nQml0cyhlLmlkW3JdLmxvdz4+PjAsZS5pZFtyXS5oaWdoPj4+MCkudG9OdW1iZXIoKSl9aWYobnVsbCE9ZS5kZW5zZWluZm8pe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmRlbnNlaW5mbyl0aHJvdyBUeXBlRXJyb3IoXCIuT1NNUEJGLkRlbnNlTm9kZXMuZGVuc2VpbmZvOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5kZW5zZWluZm89JHJvb3QuT1NNUEJGLkRlbnNlSW5mby5mcm9tT2JqZWN0KGUuZGVuc2VpbmZvKX1pZihlLmxhdCl7aWYoIUFycmF5LmlzQXJyYXkoZS5sYXQpKXRocm93IFR5cGVFcnJvcihcIi5PU01QQkYuRGVuc2VOb2Rlcy5sYXQ6IGFycmF5IGV4cGVjdGVkXCIpO3QubGF0PVtdO2Zvcih2YXIgcj0wO3I8ZS5sYXQubGVuZ3RoOysrcikkdXRpbC5Mb25nPyh0LmxhdFtyXT0kdXRpbC5Mb25nLmZyb21WYWx1ZShlLmxhdFtyXSkpLnVuc2lnbmVkPSExOlwic3RyaW5nXCI9PXR5cGVvZiBlLmxhdFtyXT90LmxhdFtyXT1wYXJzZUludChlLmxhdFtyXSwxMCk6XCJudW1iZXJcIj09dHlwZW9mIGUubGF0W3JdP3QubGF0W3JdPWUubGF0W3JdOlwib2JqZWN0XCI9PXR5cGVvZiBlLmxhdFtyXSYmKHQubGF0W3JdPW5ldyAkdXRpbC5Mb25nQml0cyhlLmxhdFtyXS5sb3c+Pj4wLGUubGF0W3JdLmhpZ2g+Pj4wKS50b051bWJlcigpKX1pZihlLmxvbil7aWYoIUFycmF5LmlzQXJyYXkoZS5sb24pKXRocm93IFR5cGVFcnJvcihcIi5PU01QQkYuRGVuc2VOb2Rlcy5sb246IGFycmF5IGV4cGVjdGVkXCIpO3QubG9uPVtdO2Zvcih2YXIgcj0wO3I8ZS5sb24ubGVuZ3RoOysrcikkdXRpbC5Mb25nPyh0LmxvbltyXT0kdXRpbC5Mb25nLmZyb21WYWx1ZShlLmxvbltyXSkpLnVuc2lnbmVkPSExOlwic3RyaW5nXCI9PXR5cGVvZiBlLmxvbltyXT90LmxvbltyXT1wYXJzZUludChlLmxvbltyXSwxMCk6XCJudW1iZXJcIj09dHlwZW9mIGUubG9uW3JdP3QubG9uW3JdPWUubG9uW3JdOlwib2JqZWN0XCI9PXR5cGVvZiBlLmxvbltyXSYmKHQubG9uW3JdPW5ldyAkdXRpbC5Mb25nQml0cyhlLmxvbltyXS5sb3c+Pj4wLGUubG9uW3JdLmhpZ2g+Pj4wKS50b051bWJlcigpKX1pZihlLmtleXNWYWxzKXtpZighQXJyYXkuaXNBcnJheShlLmtleXNWYWxzKSl0aHJvdyBUeXBlRXJyb3IoXCIuT1NNUEJGLkRlbnNlTm9kZXMua2V5c1ZhbHM6IGFycmF5IGV4cGVjdGVkXCIpO3Qua2V5c1ZhbHM9W107Zm9yKHZhciByPTA7cjxlLmtleXNWYWxzLmxlbmd0aDsrK3IpdC5rZXlzVmFsc1tyXT0wfGUua2V5c1ZhbHNbcl19cmV0dXJuIHR9LGUudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt0fHwodD17fSk7dmFyIHI9e307aWYoKHQuYXJyYXlzfHx0LmRlZmF1bHRzKSYmKHIuaWQ9W10sci5sYXQ9W10sci5sb249W10sci5rZXlzVmFscz1bXSksdC5kZWZhdWx0cyYmKHIuZGVuc2VpbmZvPW51bGwpLGUuaWQmJmUuaWQubGVuZ3RoKXtyLmlkPVtdO2Zvcih2YXIgaT0wO2k8ZS5pZC5sZW5ndGg7KytpKVwibnVtYmVyXCI9PXR5cGVvZiBlLmlkW2ldP3IuaWRbaV09dC5sb25ncz09PVN0cmluZz9TdHJpbmcoZS5pZFtpXSk6ZS5pZFtpXTpyLmlkW2ldPXQubG9uZ3M9PT1TdHJpbmc/JHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlLmlkW2ldKTp0LmxvbmdzPT09TnVtYmVyP25ldyAkdXRpbC5Mb25nQml0cyhlLmlkW2ldLmxvdz4+PjAsZS5pZFtpXS5oaWdoPj4+MCkudG9OdW1iZXIoKTplLmlkW2ldfWlmKG51bGwhPWUuZGVuc2VpbmZvJiZlLmhhc093blByb3BlcnR5KFwiZGVuc2VpbmZvXCIpJiYoci5kZW5zZWluZm89JHJvb3QuT1NNUEJGLkRlbnNlSW5mby50b09iamVjdChlLmRlbnNlaW5mbyx0KSksZS5sYXQmJmUubGF0Lmxlbmd0aCl7ci5sYXQ9W107Zm9yKHZhciBpPTA7aTxlLmxhdC5sZW5ndGg7KytpKVwibnVtYmVyXCI9PXR5cGVvZiBlLmxhdFtpXT9yLmxhdFtpXT10LmxvbmdzPT09U3RyaW5nP1N0cmluZyhlLmxhdFtpXSk6ZS5sYXRbaV06ci5sYXRbaV09dC5sb25ncz09PVN0cmluZz8kdXRpbC5Mb25nLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUubGF0W2ldKTp0LmxvbmdzPT09TnVtYmVyP25ldyAkdXRpbC5Mb25nQml0cyhlLmxhdFtpXS5sb3c+Pj4wLGUubGF0W2ldLmhpZ2g+Pj4wKS50b051bWJlcigpOmUubGF0W2ldfWlmKGUubG9uJiZlLmxvbi5sZW5ndGgpe3IubG9uPVtdO2Zvcih2YXIgaT0wO2k8ZS5sb24ubGVuZ3RoOysraSlcIm51bWJlclwiPT10eXBlb2YgZS5sb25baV0/ci5sb25baV09dC5sb25ncz09PVN0cmluZz9TdHJpbmcoZS5sb25baV0pOmUubG9uW2ldOnIubG9uW2ldPXQubG9uZ3M9PT1TdHJpbmc/JHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlLmxvbltpXSk6dC5sb25ncz09PU51bWJlcj9uZXcgJHV0aWwuTG9uZ0JpdHMoZS5sb25baV0ubG93Pj4+MCxlLmxvbltpXS5oaWdoPj4+MCkudG9OdW1iZXIoKTplLmxvbltpXX1pZihlLmtleXNWYWxzJiZlLmtleXNWYWxzLmxlbmd0aCl7ci5rZXlzVmFscz1bXTtmb3IodmFyIGk9MDtpPGUua2V5c1ZhbHMubGVuZ3RoOysraSlyLmtleXNWYWxzW2ldPWUua2V5c1ZhbHNbaV19cmV0dXJuIHJ9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsJHByb3RvYnVmLnV0aWwudG9KU09OT3B0aW9ucyl9LGV9KCksZS5XYXk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe2lmKHRoaXMua2V5cz1bXSx0aGlzLnZhbHM9W10sdGhpcy5yZWZzPVtdLGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLHI9MDtyPHQubGVuZ3RoOysrciludWxsIT1lW3Rbcl1dJiYodGhpc1t0W3JdXT1lW3Rbcl1dKX1yZXR1cm4gZS5wcm90b3R5cGUuaWQ9JHV0aWwuTG9uZz8kdXRpbC5Mb25nLmZyb21CaXRzKDAsMCwhMSk6MCxlLnByb3RvdHlwZS5rZXlzPSR1dGlsLmVtcHR5QXJyYXksZS5wcm90b3R5cGUudmFscz0kdXRpbC5lbXB0eUFycmF5LGUucHJvdG90eXBlLmluZm89bnVsbCxlLnByb3RvdHlwZS5yZWZzPSR1dGlsLmVtcHR5QXJyYXksZS5jcmVhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBlKHQpfSxlLmVuY29kZT1mdW5jdGlvbihlLHQpe2lmKHR8fCh0PSRXcml0ZXIuY3JlYXRlKCkpLHQudWludDMyKDgpLmludDY0KGUuaWQpLG51bGwhPWUua2V5cyYmZS5rZXlzLmxlbmd0aCl7dC51aW50MzIoMTgpLmZvcmsoKTtmb3IodmFyIHI9MDtyPGUua2V5cy5sZW5ndGg7KytyKXQudWludDMyKGUua2V5c1tyXSk7dC5sZGVsaW0oKX1pZihudWxsIT1lLnZhbHMmJmUudmFscy5sZW5ndGgpe3QudWludDMyKDI2KS5mb3JrKCk7Zm9yKHZhciByPTA7cjxlLnZhbHMubGVuZ3RoOysrcil0LnVpbnQzMihlLnZhbHNbcl0pO3QubGRlbGltKCl9aWYobnVsbCE9ZS5pbmZvJiZlLmhhc093blByb3BlcnR5KFwiaW5mb1wiKSYmJHJvb3QuT1NNUEJGLkluZm8uZW5jb2RlKGUuaW5mbyx0LnVpbnQzMigzNCkuZm9yaygpKS5sZGVsaW0oKSxudWxsIT1lLnJlZnMmJmUucmVmcy5sZW5ndGgpe3QudWludDMyKDY2KS5mb3JrKCk7Zm9yKHZhciByPTA7cjxlLnJlZnMubGVuZ3RoOysrcil0LnNpbnQ2NChlLnJlZnNbcl0pO3QubGRlbGltKCl9cmV0dXJuIHR9LGUuZW5jb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZW5jb2RlKGUsdCkubGRlbGltKCl9LGUuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7ZSBpbnN0YW5jZW9mICRSZWFkZXJ8fChlPSRSZWFkZXIuY3JlYXRlKGUpKTtmb3IodmFyIHI9dm9pZCAwPT09dD9lLmxlbjplLnBvcyt0LGk9bmV3ICRyb290Lk9TTVBCRi5XYXk7ZS5wb3M8cjspe3ZhciBuPWUudWludDMyKCk7c3dpdGNoKG4+Pj4zKXtjYXNlIDE6aS5pZD1lLmludDY0KCk7YnJlYWs7Y2FzZSAyOmlmKGkua2V5cyYmaS5rZXlzLmxlbmd0aHx8KGkua2V5cz1bXSksMj09KDcmbikpZm9yKHZhciBvPWUudWludDMyKCkrZS5wb3M7ZS5wb3M8bzspaS5rZXlzLnB1c2goZS51aW50MzIoKSk7ZWxzZSBpLmtleXMucHVzaChlLnVpbnQzMigpKTticmVhaztjYXNlIDM6aWYoaS52YWxzJiZpLnZhbHMubGVuZ3RofHwoaS52YWxzPVtdKSwyPT0oNyZuKSlmb3IodmFyIG89ZS51aW50MzIoKStlLnBvcztlLnBvczxvOylpLnZhbHMucHVzaChlLnVpbnQzMigpKTtlbHNlIGkudmFscy5wdXNoKGUudWludDMyKCkpO2JyZWFrO2Nhc2UgNDppLmluZm89JHJvb3QuT1NNUEJGLkluZm8uZGVjb2RlKGUsZS51aW50MzIoKSk7YnJlYWs7Y2FzZSA4OmlmKGkucmVmcyYmaS5yZWZzLmxlbmd0aHx8KGkucmVmcz1bXSksMj09KDcmbikpZm9yKHZhciBvPWUudWludDMyKCkrZS5wb3M7ZS5wb3M8bzspaS5yZWZzLnB1c2goZS5zaW50NjQoKSk7ZWxzZSBpLnJlZnMucHVzaChlLnNpbnQ2NCgpKTticmVhaztkZWZhdWx0OmUuc2tpcFR5cGUoNyZuKX19aWYoIWkuaGFzT3duUHJvcGVydHkoXCJpZFwiKSl0aHJvdyAkdXRpbC5Qcm90b2NvbEVycm9yKFwibWlzc2luZyByZXF1aXJlZCAnaWQnXCIse2luc3RhbmNlOml9KTtyZXR1cm4gaX0sZS5kZWNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiAkUmVhZGVyfHwoZT1uZXcgJFJlYWRlcihlKSksdGhpcy5kZWNvZGUoZSxlLnVpbnQzMigpKX0sZS52ZXJpZnk9ZnVuY3Rpb24oZSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGV8fG51bGw9PT1lKXJldHVyblwib2JqZWN0IGV4cGVjdGVkXCI7aWYoISgkdXRpbC5pc0ludGVnZXIoZS5pZCl8fGUuaWQmJiR1dGlsLmlzSW50ZWdlcihlLmlkLmxvdykmJiR1dGlsLmlzSW50ZWdlcihlLmlkLmhpZ2gpKSlyZXR1cm5cImlkOiBpbnRlZ2VyfExvbmcgZXhwZWN0ZWRcIjtpZihudWxsIT1lLmtleXMmJmUuaGFzT3duUHJvcGVydHkoXCJrZXlzXCIpKXtpZighQXJyYXkuaXNBcnJheShlLmtleXMpKXJldHVyblwia2V5czogYXJyYXkgZXhwZWN0ZWRcIjtmb3IodmFyIHQ9MDt0PGUua2V5cy5sZW5ndGg7Kyt0KWlmKCEkdXRpbC5pc0ludGVnZXIoZS5rZXlzW3RdKSlyZXR1cm5cImtleXM6IGludGVnZXJbXSBleHBlY3RlZFwifWlmKG51bGwhPWUudmFscyYmZS5oYXNPd25Qcm9wZXJ0eShcInZhbHNcIikpe1xuaWYoIUFycmF5LmlzQXJyYXkoZS52YWxzKSlyZXR1cm5cInZhbHM6IGFycmF5IGV4cGVjdGVkXCI7Zm9yKHZhciB0PTA7dDxlLnZhbHMubGVuZ3RoOysrdClpZighJHV0aWwuaXNJbnRlZ2VyKGUudmFsc1t0XSkpcmV0dXJuXCJ2YWxzOiBpbnRlZ2VyW10gZXhwZWN0ZWRcIn1pZihudWxsIT1lLmluZm8mJmUuaGFzT3duUHJvcGVydHkoXCJpbmZvXCIpKXt2YXIgcj0kcm9vdC5PU01QQkYuSW5mby52ZXJpZnkoZS5pbmZvKTtpZihyKXJldHVyblwiaW5mby5cIityfWlmKG51bGwhPWUucmVmcyYmZS5oYXNPd25Qcm9wZXJ0eShcInJlZnNcIikpe2lmKCFBcnJheS5pc0FycmF5KGUucmVmcykpcmV0dXJuXCJyZWZzOiBhcnJheSBleHBlY3RlZFwiO2Zvcih2YXIgdD0wO3Q8ZS5yZWZzLmxlbmd0aDsrK3QpaWYoISgkdXRpbC5pc0ludGVnZXIoZS5yZWZzW3RdKXx8ZS5yZWZzW3RdJiYkdXRpbC5pc0ludGVnZXIoZS5yZWZzW3RdLmxvdykmJiR1dGlsLmlzSW50ZWdlcihlLnJlZnNbdF0uaGlnaCkpKXJldHVyblwicmVmczogaW50ZWdlcnxMb25nW10gZXhwZWN0ZWRcIn1yZXR1cm4gbnVsbH0sZS5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiAkcm9vdC5PU01QQkYuV2F5KXJldHVybiBlO3ZhciB0PW5ldyAkcm9vdC5PU01QQkYuV2F5O2lmKG51bGwhPWUuaWQmJigkdXRpbC5Mb25nPyh0LmlkPSR1dGlsLkxvbmcuZnJvbVZhbHVlKGUuaWQpKS51bnNpZ25lZD0hMTpcInN0cmluZ1wiPT10eXBlb2YgZS5pZD90LmlkPXBhcnNlSW50KGUuaWQsMTApOlwibnVtYmVyXCI9PXR5cGVvZiBlLmlkP3QuaWQ9ZS5pZDpcIm9iamVjdFwiPT10eXBlb2YgZS5pZCYmKHQuaWQ9bmV3ICR1dGlsLkxvbmdCaXRzKGUuaWQubG93Pj4+MCxlLmlkLmhpZ2g+Pj4wKS50b051bWJlcigpKSksZS5rZXlzKXtpZighQXJyYXkuaXNBcnJheShlLmtleXMpKXRocm93IFR5cGVFcnJvcihcIi5PU01QQkYuV2F5LmtleXM6IGFycmF5IGV4cGVjdGVkXCIpO3Qua2V5cz1bXTtmb3IodmFyIHI9MDtyPGUua2V5cy5sZW5ndGg7KytyKXQua2V5c1tyXT1lLmtleXNbcl0+Pj4wfWlmKGUudmFscyl7aWYoIUFycmF5LmlzQXJyYXkoZS52YWxzKSl0aHJvdyBUeXBlRXJyb3IoXCIuT1NNUEJGLldheS52YWxzOiBhcnJheSBleHBlY3RlZFwiKTt0LnZhbHM9W107Zm9yKHZhciByPTA7cjxlLnZhbHMubGVuZ3RoOysrcil0LnZhbHNbcl09ZS52YWxzW3JdPj4+MH1pZihudWxsIT1lLmluZm8pe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmluZm8pdGhyb3cgVHlwZUVycm9yKFwiLk9TTVBCRi5XYXkuaW5mbzogb2JqZWN0IGV4cGVjdGVkXCIpO3QuaW5mbz0kcm9vdC5PU01QQkYuSW5mby5mcm9tT2JqZWN0KGUuaW5mbyl9aWYoZS5yZWZzKXtpZighQXJyYXkuaXNBcnJheShlLnJlZnMpKXRocm93IFR5cGVFcnJvcihcIi5PU01QQkYuV2F5LnJlZnM6IGFycmF5IGV4cGVjdGVkXCIpO3QucmVmcz1bXTtmb3IodmFyIHI9MDtyPGUucmVmcy5sZW5ndGg7KytyKSR1dGlsLkxvbmc/KHQucmVmc1tyXT0kdXRpbC5Mb25nLmZyb21WYWx1ZShlLnJlZnNbcl0pKS51bnNpZ25lZD0hMTpcInN0cmluZ1wiPT10eXBlb2YgZS5yZWZzW3JdP3QucmVmc1tyXT1wYXJzZUludChlLnJlZnNbcl0sMTApOlwibnVtYmVyXCI9PXR5cGVvZiBlLnJlZnNbcl0/dC5yZWZzW3JdPWUucmVmc1tyXTpcIm9iamVjdFwiPT10eXBlb2YgZS5yZWZzW3JdJiYodC5yZWZzW3JdPW5ldyAkdXRpbC5Mb25nQml0cyhlLnJlZnNbcl0ubG93Pj4+MCxlLnJlZnNbcl0uaGlnaD4+PjApLnRvTnVtYmVyKCkpfXJldHVybiB0fSxlLnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dHx8KHQ9e30pO3ZhciByPXt9O2lmKCh0LmFycmF5c3x8dC5kZWZhdWx0cykmJihyLmtleXM9W10sci52YWxzPVtdLHIucmVmcz1bXSksdC5kZWZhdWx0cyl7aWYoJHV0aWwuTG9uZyl7dmFyIGk9bmV3ICR1dGlsLkxvbmcoMCwwLCExKTtyLmlkPXQubG9uZ3M9PT1TdHJpbmc/aS50b1N0cmluZygpOnQubG9uZ3M9PT1OdW1iZXI/aS50b051bWJlcigpOml9ZWxzZSByLmlkPXQubG9uZ3M9PT1TdHJpbmc/XCIwXCI6MDtyLmluZm89bnVsbH1pZihudWxsIT1lLmlkJiZlLmhhc093blByb3BlcnR5KFwiaWRcIikmJihcIm51bWJlclwiPT10eXBlb2YgZS5pZD9yLmlkPXQubG9uZ3M9PT1TdHJpbmc/U3RyaW5nKGUuaWQpOmUuaWQ6ci5pZD10LmxvbmdzPT09U3RyaW5nPyR1dGlsLkxvbmcucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZS5pZCk6dC5sb25ncz09PU51bWJlcj9uZXcgJHV0aWwuTG9uZ0JpdHMoZS5pZC5sb3c+Pj4wLGUuaWQuaGlnaD4+PjApLnRvTnVtYmVyKCk6ZS5pZCksZS5rZXlzJiZlLmtleXMubGVuZ3RoKXtyLmtleXM9W107Zm9yKHZhciBuPTA7bjxlLmtleXMubGVuZ3RoOysrbilyLmtleXNbbl09ZS5rZXlzW25dfWlmKGUudmFscyYmZS52YWxzLmxlbmd0aCl7ci52YWxzPVtdO2Zvcih2YXIgbj0wO248ZS52YWxzLmxlbmd0aDsrK24pci52YWxzW25dPWUudmFsc1tuXX1pZihudWxsIT1lLmluZm8mJmUuaGFzT3duUHJvcGVydHkoXCJpbmZvXCIpJiYoci5pbmZvPSRyb290Lk9TTVBCRi5JbmZvLnRvT2JqZWN0KGUuaW5mbyx0KSksZS5yZWZzJiZlLnJlZnMubGVuZ3RoKXtyLnJlZnM9W107Zm9yKHZhciBuPTA7bjxlLnJlZnMubGVuZ3RoOysrbilcIm51bWJlclwiPT10eXBlb2YgZS5yZWZzW25dP3IucmVmc1tuXT10LmxvbmdzPT09U3RyaW5nP1N0cmluZyhlLnJlZnNbbl0pOmUucmVmc1tuXTpyLnJlZnNbbl09dC5sb25ncz09PVN0cmluZz8kdXRpbC5Mb25nLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUucmVmc1tuXSk6dC5sb25ncz09PU51bWJlcj9uZXcgJHV0aWwuTG9uZ0JpdHMoZS5yZWZzW25dLmxvdz4+PjAsZS5yZWZzW25dLmhpZ2g+Pj4wKS50b051bWJlcigpOmUucmVmc1tuXX1yZXR1cm4gcn0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKX0sZX0oKSxlLlJlbGF0aW9uPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtpZih0aGlzLmtleXM9W10sdGhpcy52YWxzPVtdLHRoaXMucm9sZXNTaWQ9W10sdGhpcy5tZW1pZHM9W10sdGhpcy50eXBlcz1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxyPTA7cjx0Lmxlbmd0aDsrK3IpbnVsbCE9ZVt0W3JdXSYmKHRoaXNbdFtyXV09ZVt0W3JdXSl9cmV0dXJuIGUucHJvdG90eXBlLmlkPSR1dGlsLkxvbmc/JHV0aWwuTG9uZy5mcm9tQml0cygwLDAsITEpOjAsZS5wcm90b3R5cGUua2V5cz0kdXRpbC5lbXB0eUFycmF5LGUucHJvdG90eXBlLnZhbHM9JHV0aWwuZW1wdHlBcnJheSxlLnByb3RvdHlwZS5pbmZvPW51bGwsZS5wcm90b3R5cGUucm9sZXNTaWQ9JHV0aWwuZW1wdHlBcnJheSxlLnByb3RvdHlwZS5tZW1pZHM9JHV0aWwuZW1wdHlBcnJheSxlLnByb3RvdHlwZS50eXBlcz0kdXRpbC5lbXB0eUFycmF5LGUuY3JlYXRlPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgZSh0KX0sZS5lbmNvZGU9ZnVuY3Rpb24oZSx0KXtpZih0fHwodD0kV3JpdGVyLmNyZWF0ZSgpKSx0LnVpbnQzMig4KS5pbnQ2NChlLmlkKSxudWxsIT1lLmtleXMmJmUua2V5cy5sZW5ndGgpe3QudWludDMyKDE4KS5mb3JrKCk7Zm9yKHZhciByPTA7cjxlLmtleXMubGVuZ3RoOysrcil0LnVpbnQzMihlLmtleXNbcl0pO3QubGRlbGltKCl9aWYobnVsbCE9ZS52YWxzJiZlLnZhbHMubGVuZ3RoKXt0LnVpbnQzMigyNikuZm9yaygpO2Zvcih2YXIgcj0wO3I8ZS52YWxzLmxlbmd0aDsrK3IpdC51aW50MzIoZS52YWxzW3JdKTt0LmxkZWxpbSgpfWlmKG51bGwhPWUuaW5mbyYmZS5oYXNPd25Qcm9wZXJ0eShcImluZm9cIikmJiRyb290Lk9TTVBCRi5JbmZvLmVuY29kZShlLmluZm8sdC51aW50MzIoMzQpLmZvcmsoKSkubGRlbGltKCksbnVsbCE9ZS5yb2xlc1NpZCYmZS5yb2xlc1NpZC5sZW5ndGgpe3QudWludDMyKDY2KS5mb3JrKCk7Zm9yKHZhciByPTA7cjxlLnJvbGVzU2lkLmxlbmd0aDsrK3IpdC5pbnQzMihlLnJvbGVzU2lkW3JdKTt0LmxkZWxpbSgpfWlmKG51bGwhPWUubWVtaWRzJiZlLm1lbWlkcy5sZW5ndGgpe3QudWludDMyKDc0KS5mb3JrKCk7Zm9yKHZhciByPTA7cjxlLm1lbWlkcy5sZW5ndGg7KytyKXQuc2ludDY0KGUubWVtaWRzW3JdKTt0LmxkZWxpbSgpfWlmKG51bGwhPWUudHlwZXMmJmUudHlwZXMubGVuZ3RoKXt0LnVpbnQzMig4MikuZm9yaygpO2Zvcih2YXIgcj0wO3I8ZS50eXBlcy5sZW5ndGg7KytyKXQuaW50MzIoZS50eXBlc1tyXSk7dC5sZGVsaW0oKX1yZXR1cm4gdH0sZS5lbmNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lbmNvZGUoZSx0KS5sZGVsaW0oKX0sZS5kZWNvZGU9ZnVuY3Rpb24oZSx0KXtlIGluc3RhbmNlb2YgJFJlYWRlcnx8KGU9JFJlYWRlci5jcmVhdGUoZSkpO2Zvcih2YXIgcj12b2lkIDA9PT10P2UubGVuOmUucG9zK3QsaT1uZXcgJHJvb3QuT1NNUEJGLlJlbGF0aW9uO2UucG9zPHI7KXt2YXIgbj1lLnVpbnQzMigpO3N3aXRjaChuPj4+Myl7Y2FzZSAxOmkuaWQ9ZS5pbnQ2NCgpO2JyZWFrO2Nhc2UgMjppZihpLmtleXMmJmkua2V5cy5sZW5ndGh8fChpLmtleXM9W10pLDI9PSg3Jm4pKWZvcih2YXIgbz1lLnVpbnQzMigpK2UucG9zO2UucG9zPG87KWkua2V5cy5wdXNoKGUudWludDMyKCkpO2Vsc2UgaS5rZXlzLnB1c2goZS51aW50MzIoKSk7YnJlYWs7Y2FzZSAzOmlmKGkudmFscyYmaS52YWxzLmxlbmd0aHx8KGkudmFscz1bXSksMj09KDcmbikpZm9yKHZhciBvPWUudWludDMyKCkrZS5wb3M7ZS5wb3M8bzspaS52YWxzLnB1c2goZS51aW50MzIoKSk7ZWxzZSBpLnZhbHMucHVzaChlLnVpbnQzMigpKTticmVhaztjYXNlIDQ6aS5pbmZvPSRyb290Lk9TTVBCRi5JbmZvLmRlY29kZShlLGUudWludDMyKCkpO2JyZWFrO2Nhc2UgODppZihpLnJvbGVzU2lkJiZpLnJvbGVzU2lkLmxlbmd0aHx8KGkucm9sZXNTaWQ9W10pLDI9PSg3Jm4pKWZvcih2YXIgbz1lLnVpbnQzMigpK2UucG9zO2UucG9zPG87KWkucm9sZXNTaWQucHVzaChlLmludDMyKCkpO2Vsc2UgaS5yb2xlc1NpZC5wdXNoKGUuaW50MzIoKSk7YnJlYWs7Y2FzZSA5OmlmKGkubWVtaWRzJiZpLm1lbWlkcy5sZW5ndGh8fChpLm1lbWlkcz1bXSksMj09KDcmbikpZm9yKHZhciBvPWUudWludDMyKCkrZS5wb3M7ZS5wb3M8bzspaS5tZW1pZHMucHVzaChlLnNpbnQ2NCgpKTtlbHNlIGkubWVtaWRzLnB1c2goZS5zaW50NjQoKSk7YnJlYWs7Y2FzZSAxMDppZihpLnR5cGVzJiZpLnR5cGVzLmxlbmd0aHx8KGkudHlwZXM9W10pLDI9PSg3Jm4pKWZvcih2YXIgbz1lLnVpbnQzMigpK2UucG9zO2UucG9zPG87KWkudHlwZXMucHVzaChlLmludDMyKCkpO2Vsc2UgaS50eXBlcy5wdXNoKGUuaW50MzIoKSk7YnJlYWs7ZGVmYXVsdDplLnNraXBUeXBlKDcmbil9fWlmKCFpLmhhc093blByb3BlcnR5KFwiaWRcIikpdGhyb3cgJHV0aWwuUHJvdG9jb2xFcnJvcihcIm1pc3NpbmcgcmVxdWlyZWQgJ2lkJ1wiLHtpbnN0YW5jZTppfSk7cmV0dXJuIGl9LGUuZGVjb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2YgJFJlYWRlcnx8KGU9bmV3ICRSZWFkZXIoZSkpLHRoaXMuZGVjb2RlKGUsZS51aW50MzIoKSl9LGUudmVyaWZ5PWZ1bmN0aW9uKGUpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlfHxudWxsPT09ZSlyZXR1cm5cIm9iamVjdCBleHBlY3RlZFwiO2lmKCEoJHV0aWwuaXNJbnRlZ2VyKGUuaWQpfHxlLmlkJiYkdXRpbC5pc0ludGVnZXIoZS5pZC5sb3cpJiYkdXRpbC5pc0ludGVnZXIoZS5pZC5oaWdoKSkpcmV0dXJuXCJpZDogaW50ZWdlcnxMb25nIGV4cGVjdGVkXCI7aWYobnVsbCE9ZS5rZXlzJiZlLmhhc093blByb3BlcnR5KFwia2V5c1wiKSl7aWYoIUFycmF5LmlzQXJyYXkoZS5rZXlzKSlyZXR1cm5cImtleXM6IGFycmF5IGV4cGVjdGVkXCI7Zm9yKHZhciB0PTA7dDxlLmtleXMubGVuZ3RoOysrdClpZighJHV0aWwuaXNJbnRlZ2VyKGUua2V5c1t0XSkpcmV0dXJuXCJrZXlzOiBpbnRlZ2VyW10gZXhwZWN0ZWRcIn1pZihudWxsIT1lLnZhbHMmJmUuaGFzT3duUHJvcGVydHkoXCJ2YWxzXCIpKXtpZighQXJyYXkuaXNBcnJheShlLnZhbHMpKXJldHVyblwidmFsczogYXJyYXkgZXhwZWN0ZWRcIjtmb3IodmFyIHQ9MDt0PGUudmFscy5sZW5ndGg7Kyt0KWlmKCEkdXRpbC5pc0ludGVnZXIoZS52YWxzW3RdKSlyZXR1cm5cInZhbHM6IGludGVnZXJbXSBleHBlY3RlZFwifWlmKG51bGwhPWUuaW5mbyYmZS5oYXNPd25Qcm9wZXJ0eShcImluZm9cIikpe3ZhciByPSRyb290Lk9TTVBCRi5JbmZvLnZlcmlmeShlLmluZm8pO2lmKHIpcmV0dXJuXCJpbmZvLlwiK3J9aWYobnVsbCE9ZS5yb2xlc1NpZCYmZS5oYXNPd25Qcm9wZXJ0eShcInJvbGVzU2lkXCIpKXtpZighQXJyYXkuaXNBcnJheShlLnJvbGVzU2lkKSlyZXR1cm5cInJvbGVzU2lkOiBhcnJheSBleHBlY3RlZFwiO2Zvcih2YXIgdD0wO3Q8ZS5yb2xlc1NpZC5sZW5ndGg7Kyt0KWlmKCEkdXRpbC5pc0ludGVnZXIoZS5yb2xlc1NpZFt0XSkpcmV0dXJuXCJyb2xlc1NpZDogaW50ZWdlcltdIGV4cGVjdGVkXCJ9aWYobnVsbCE9ZS5tZW1pZHMmJmUuaGFzT3duUHJvcGVydHkoXCJtZW1pZHNcIikpe2lmKCFBcnJheS5pc0FycmF5KGUubWVtaWRzKSlyZXR1cm5cIm1lbWlkczogYXJyYXkgZXhwZWN0ZWRcIjtmb3IodmFyIHQ9MDt0PGUubWVtaWRzLmxlbmd0aDsrK3QpaWYoISgkdXRpbC5pc0ludGVnZXIoZS5tZW1pZHNbdF0pfHxlLm1lbWlkc1t0XSYmJHV0aWwuaXNJbnRlZ2VyKGUubWVtaWRzW3RdLmxvdykmJiR1dGlsLmlzSW50ZWdlcihlLm1lbWlkc1t0XS5oaWdoKSkpcmV0dXJuXCJtZW1pZHM6IGludGVnZXJ8TG9uZ1tdIGV4cGVjdGVkXCJ9aWYobnVsbCE9ZS50eXBlcyYmZS5oYXNPd25Qcm9wZXJ0eShcInR5cGVzXCIpKXtpZighQXJyYXkuaXNBcnJheShlLnR5cGVzKSlyZXR1cm5cInR5cGVzOiBhcnJheSBleHBlY3RlZFwiO2Zvcih2YXIgdD0wO3Q8ZS50eXBlcy5sZW5ndGg7Kyt0KXN3aXRjaChlLnR5cGVzW3RdKXtkZWZhdWx0OnJldHVyblwidHlwZXM6IGVudW0gdmFsdWVbXSBleHBlY3RlZFwiO2Nhc2UgMDpjYXNlIDE6Y2FzZSAyOn19cmV0dXJuIG51bGx9LGUuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgJHJvb3QuT1NNUEJGLlJlbGF0aW9uKXJldHVybiBlO3ZhciB0PW5ldyAkcm9vdC5PU01QQkYuUmVsYXRpb247aWYobnVsbCE9ZS5pZCYmKCR1dGlsLkxvbmc/KHQuaWQ9JHV0aWwuTG9uZy5mcm9tVmFsdWUoZS5pZCkpLnVuc2lnbmVkPSExOlwic3RyaW5nXCI9PXR5cGVvZiBlLmlkP3QuaWQ9cGFyc2VJbnQoZS5pZCwxMCk6XCJudW1iZXJcIj09dHlwZW9mIGUuaWQ/dC5pZD1lLmlkOlwib2JqZWN0XCI9PXR5cGVvZiBlLmlkJiYodC5pZD1uZXcgJHV0aWwuTG9uZ0JpdHMoZS5pZC5sb3c+Pj4wLGUuaWQuaGlnaD4+PjApLnRvTnVtYmVyKCkpKSxlLmtleXMpe2lmKCFBcnJheS5pc0FycmF5KGUua2V5cykpdGhyb3cgVHlwZUVycm9yKFwiLk9TTVBCRi5SZWxhdGlvbi5rZXlzOiBhcnJheSBleHBlY3RlZFwiKTt0LmtleXM9W107Zm9yKHZhciByPTA7cjxlLmtleXMubGVuZ3RoOysrcil0LmtleXNbcl09ZS5rZXlzW3JdPj4+MH1pZihlLnZhbHMpe2lmKCFBcnJheS5pc0FycmF5KGUudmFscykpdGhyb3cgVHlwZUVycm9yKFwiLk9TTVBCRi5SZWxhdGlvbi52YWxzOiBhcnJheSBleHBlY3RlZFwiKTt0LnZhbHM9W107Zm9yKHZhciByPTA7cjxlLnZhbHMubGVuZ3RoOysrcil0LnZhbHNbcl09ZS52YWxzW3JdPj4+MH1pZihudWxsIT1lLmluZm8pe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmluZm8pdGhyb3cgVHlwZUVycm9yKFwiLk9TTVBCRi5SZWxhdGlvbi5pbmZvOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5pbmZvPSRyb290Lk9TTVBCRi5JbmZvLmZyb21PYmplY3QoZS5pbmZvKX1pZihlLnJvbGVzU2lkKXtpZighQXJyYXkuaXNBcnJheShlLnJvbGVzU2lkKSl0aHJvdyBUeXBlRXJyb3IoXCIuT1NNUEJGLlJlbGF0aW9uLnJvbGVzU2lkOiBhcnJheSBleHBlY3RlZFwiKTt0LnJvbGVzU2lkPVtdO2Zvcih2YXIgcj0wO3I8ZS5yb2xlc1NpZC5sZW5ndGg7KytyKXQucm9sZXNTaWRbcl09MHxlLnJvbGVzU2lkW3JdfWlmKGUubWVtaWRzKXtpZighQXJyYXkuaXNBcnJheShlLm1lbWlkcykpdGhyb3cgVHlwZUVycm9yKFwiLk9TTVBCRi5SZWxhdGlvbi5tZW1pZHM6IGFycmF5IGV4cGVjdGVkXCIpO3QubWVtaWRzPVtdO2Zvcih2YXIgcj0wO3I8ZS5tZW1pZHMubGVuZ3RoOysrcikkdXRpbC5Mb25nPyh0Lm1lbWlkc1tyXT0kdXRpbC5Mb25nLmZyb21WYWx1ZShlLm1lbWlkc1tyXSkpLnVuc2lnbmVkPSExOlwic3RyaW5nXCI9PXR5cGVvZiBlLm1lbWlkc1tyXT90Lm1lbWlkc1tyXT1wYXJzZUludChlLm1lbWlkc1tyXSwxMCk6XCJudW1iZXJcIj09dHlwZW9mIGUubWVtaWRzW3JdP3QubWVtaWRzW3JdPWUubWVtaWRzW3JdOlwib2JqZWN0XCI9PXR5cGVvZiBlLm1lbWlkc1tyXSYmKHQubWVtaWRzW3JdPW5ldyAkdXRpbC5Mb25nQml0cyhlLm1lbWlkc1tyXS5sb3c+Pj4wLGUubWVtaWRzW3JdLmhpZ2g+Pj4wKS50b051bWJlcigpKX1pZihlLnR5cGVzKXtpZighQXJyYXkuaXNBcnJheShlLnR5cGVzKSl0aHJvdyBUeXBlRXJyb3IoXCIuT1NNUEJGLlJlbGF0aW9uLnR5cGVzOiBhcnJheSBleHBlY3RlZFwiKTt0LnR5cGVzPVtdO2Zvcih2YXIgcj0wO3I8ZS50eXBlcy5sZW5ndGg7KytyKXN3aXRjaChlLnR5cGVzW3JdKXtkZWZhdWx0OmNhc2VcIk5PREVcIjpjYXNlIDA6dC50eXBlc1tyXT0wO2JyZWFrO2Nhc2VcIldBWVwiOmNhc2UgMTp0LnR5cGVzW3JdPTE7YnJlYWs7Y2FzZVwiUkVMQVRJT05cIjpjYXNlIDI6dC50eXBlc1tyXT0yfX1yZXR1cm4gdH0sZS50b09iamVjdD1mdW5jdGlvbihlLHQpe3R8fCh0PXt9KTt2YXIgcj17fTtpZigodC5hcnJheXN8fHQuZGVmYXVsdHMpJiYoci5rZXlzPVtdLHIudmFscz1bXSxyLnJvbGVzU2lkPVtdLHIubWVtaWRzPVtdLHIudHlwZXM9W10pLHQuZGVmYXVsdHMpe2lmKCR1dGlsLkxvbmcpe3ZhciBpPW5ldyAkdXRpbC5Mb25nKDAsMCwhMSk7ci5pZD10LmxvbmdzPT09U3RyaW5nP2kudG9TdHJpbmcoKTp0LmxvbmdzPT09TnVtYmVyP2kudG9OdW1iZXIoKTppfWVsc2Ugci5pZD10LmxvbmdzPT09U3RyaW5nP1wiMFwiOjA7ci5pbmZvPW51bGx9aWYobnVsbCE9ZS5pZCYmZS5oYXNPd25Qcm9wZXJ0eShcImlkXCIpJiYoXCJudW1iZXJcIj09dHlwZW9mIGUuaWQ/ci5pZD10LmxvbmdzPT09U3RyaW5nP1N0cmluZyhlLmlkKTplLmlkOnIuaWQ9dC5sb25ncz09PVN0cmluZz8kdXRpbC5Mb25nLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUuaWQpOnQubG9uZ3M9PT1OdW1iZXI/bmV3ICR1dGlsLkxvbmdCaXRzKGUuaWQubG93Pj4+MCxlLmlkLmhpZ2g+Pj4wKS50b051bWJlcigpOmUuaWQpLGUua2V5cyYmZS5rZXlzLmxlbmd0aCl7ci5rZXlzPVtdO2Zvcih2YXIgbj0wO248ZS5rZXlzLmxlbmd0aDsrK24pci5rZXlzW25dPWUua2V5c1tuXX1pZihlLnZhbHMmJmUudmFscy5sZW5ndGgpe3IudmFscz1bXTtmb3IodmFyIG49MDtuPGUudmFscy5sZW5ndGg7KytuKXIudmFsc1tuXT1lLnZhbHNbbl19aWYobnVsbCE9ZS5pbmZvJiZlLmhhc093blByb3BlcnR5KFwiaW5mb1wiKSYmKHIuaW5mbz0kcm9vdC5PU01QQkYuSW5mby50b09iamVjdChlLmluZm8sdCkpLGUucm9sZXNTaWQmJmUucm9sZXNTaWQubGVuZ3RoKXtyLnJvbGVzU2lkPVtdO2Zvcih2YXIgbj0wO248ZS5yb2xlc1NpZC5sZW5ndGg7KytuKXIucm9sZXNTaWRbbl09ZS5yb2xlc1NpZFtuXX1pZihlLm1lbWlkcyYmZS5tZW1pZHMubGVuZ3RoKXtyLm1lbWlkcz1bXTtmb3IodmFyIG49MDtuPGUubWVtaWRzLmxlbmd0aDsrK24pXCJudW1iZXJcIj09dHlwZW9mIGUubWVtaWRzW25dP3IubWVtaWRzW25dPXQubG9uZ3M9PT1TdHJpbmc/U3RyaW5nKGUubWVtaWRzW25dKTplLm1lbWlkc1tuXTpyLm1lbWlkc1tuXT10LmxvbmdzPT09U3RyaW5nPyR1dGlsLkxvbmcucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZS5tZW1pZHNbbl0pOnQubG9uZ3M9PT1OdW1iZXI/bmV3ICR1dGlsLkxvbmdCaXRzKGUubWVtaWRzW25dLmxvdz4+PjAsZS5tZW1pZHNbbl0uaGlnaD4+PjApLnRvTnVtYmVyKCk6ZS5tZW1pZHNbbl19aWYoZS50eXBlcyYmZS50eXBlcy5sZW5ndGgpe3IudHlwZXM9W107Zm9yKHZhciBuPTA7bjxlLnR5cGVzLmxlbmd0aDsrK24pci50eXBlc1tuXT10LmVudW1zPT09U3RyaW5nPyRyb290Lk9TTVBCRi5SZWxhdGlvbi5NZW1iZXJUeXBlW2UudHlwZXNbbl1dOmUudHlwZXNbbl19cmV0dXJuIHJ9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsJHByb3RvYnVmLnV0aWwudG9KU09OT3B0aW9ucyl9LGUuTWVtYmVyVHlwZT1mdW5jdGlvbigpe3ZhciBlPXt9LHQ9T2JqZWN0LmNyZWF0ZShlKTtyZXR1cm4gdFtlWzBdPVwiTk9ERVwiXT0wLHRbZVsxXT1cIldBWVwiXT0xLHRbZVsyXT1cIlJFTEFUSU9OXCJdPTIsdH0oKSxlfSgpLGV9KCksbW9kdWxlLmV4cG9ydHM9JHJvb3Q7XG59LHtcInByb3RvYnVmanMvbWluaW1hbFwiOjE2fV0sOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBhc1Byb21pc2UoZSxuKXtmb3IodmFyIHI9bmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgtMSksdD0wLGw9MixvPSEwO2w8YXJndW1lbnRzLmxlbmd0aDspclt0KytdPWFyZ3VtZW50c1tsKytdO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihsLGEpe3JbdF09ZnVuY3Rpb24oZSl7aWYobylpZihvPSExLGUpYShlKTtlbHNle2Zvcih2YXIgbj1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aC0xKSxyPTA7cjxuLmxlbmd0aDspbltyKytdPWFyZ3VtZW50c1tyXTtsLmFwcGx5KG51bGwsbil9fTt0cnl7ZS5hcHBseShufHxudWxsLHIpfWNhdGNoKGUpe28mJihvPSExLGEoZSkpfX0pfW1vZHVsZS5leHBvcnRzPWFzUHJvbWlzZTtcbn0se31dLDEwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO3ZhciBiYXNlNjQ9ZXhwb3J0cztiYXNlNjQubGVuZ3RoPWZ1bmN0aW9uKHIpe3ZhciBhPXIubGVuZ3RoO2lmKCFhKXJldHVybiAwO2Zvcih2YXIgZT0wOy0tYSU0PjEmJlwiPVwiPT09ci5jaGFyQXQoYSk7KSsrZTtyZXR1cm4gTWF0aC5jZWlsKDMqci5sZW5ndGgpLzQtZX07Zm9yKHZhciBiNjQ9bmV3IEFycmF5KDY0KSxzNjQ9bmV3IEFycmF5KDEyMyksaT0wO2k8NjQ7KXM2NFtiNjRbaV09aTwyNj9pKzY1Omk8NTI/aSs3MTppPDYyP2ktNDppLTU5fDQzXT1pKys7YmFzZTY0LmVuY29kZT1mdW5jdGlvbihyLGEsZSl7Zm9yKHZhciBpLG49bnVsbCx0PVtdLG89MCxzPTA7YTxlOyl7dmFyIGM9clthKytdO3N3aXRjaChzKXtjYXNlIDA6dFtvKytdPWI2NFtjPj4yXSxpPSgzJmMpPDw0LHM9MTticmVhaztjYXNlIDE6dFtvKytdPWI2NFtpfGM+PjRdLGk9KDE1JmMpPDwyLHM9MjticmVhaztjYXNlIDI6dFtvKytdPWI2NFtpfGM+PjZdLHRbbysrXT1iNjRbNjMmY10scz0wfW8+ODE5MSYmKChufHwobj1bXSkpLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsdCkpLG89MCl9cmV0dXJuIHMmJih0W28rK109YjY0W2ldLHRbbysrXT02MSwxPT09cyYmKHRbbysrXT02MSkpLG4/KG8mJm4ucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyx0LnNsaWNlKDAsbykpKSxuLmpvaW4oXCJcIikpOlN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLHQuc2xpY2UoMCxvKSl9O3ZhciBpbnZhbGlkRW5jb2Rpbmc9XCJpbnZhbGlkIGVuY29kaW5nXCI7YmFzZTY0LmRlY29kZT1mdW5jdGlvbihyLGEsZSl7Zm9yKHZhciBpLG49ZSx0PTAsbz0wO288ci5sZW5ndGg7KXt2YXIgcz1yLmNoYXJDb2RlQXQobysrKTtpZig2MT09PXMmJnQ+MSlicmVhaztpZih2b2lkIDA9PT0ocz1zNjRbc10pKXRocm93IEVycm9yKGludmFsaWRFbmNvZGluZyk7c3dpdGNoKHQpe2Nhc2UgMDppPXMsdD0xO2JyZWFrO2Nhc2UgMTphW2UrK109aTw8MnwoNDgmcyk+PjQsaT1zLHQ9MjticmVhaztjYXNlIDI6YVtlKytdPSgxNSZpKTw8NHwoNjAmcyk+PjIsaT1zLHQ9MzticmVhaztjYXNlIDM6YVtlKytdPSgzJmkpPDw2fHMsdD0wfX1pZigxPT09dCl0aHJvdyBFcnJvcihpbnZhbGlkRW5jb2RpbmcpO3JldHVybiBlLW59LGJhc2U2NC50ZXN0PWZ1bmN0aW9uKHIpe3JldHVybi9eKD86W0EtWmEtejAtOStcXC9dezR9KSooPzpbQS1aYS16MC05K1xcL117Mn09PXxbQS1aYS16MC05K1xcL117M309KT8kLy50ZXN0KHIpfTtcbn0se31dLDExOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO2Z1bmN0aW9uIEV2ZW50RW1pdHRlcigpe3RoaXMuX2xpc3RlbmVycz17fX1tb2R1bGUuZXhwb3J0cz1FdmVudEVtaXR0ZXIsRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbj1mdW5jdGlvbih0LGUsaSl7cmV0dXJuKHRoaXMuX2xpc3RlbmVyc1t0XXx8KHRoaXMuX2xpc3RlbmVyc1t0XT1bXSkpLnB1c2goe2ZuOmUsY3R4Oml8fHRoaXN9KSx0aGlzfSxFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9mZj1mdW5jdGlvbih0LGUpe2lmKHZvaWQgMD09PXQpdGhpcy5fbGlzdGVuZXJzPXt9O2Vsc2UgaWYodm9pZCAwPT09ZSl0aGlzLl9saXN0ZW5lcnNbdF09W107ZWxzZSBmb3IodmFyIGk9dGhpcy5fbGlzdGVuZXJzW3RdLHM9MDtzPGkubGVuZ3RoOylpW3NdLmZuPT09ZT9pLnNwbGljZShzLDEpOisrcztyZXR1cm4gdGhpc30sRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2xpc3RlbmVyc1t0XTtpZihlKXtmb3IodmFyIGk9W10scz0xO3M8YXJndW1lbnRzLmxlbmd0aDspaS5wdXNoKGFyZ3VtZW50c1tzKytdKTtmb3Iocz0wO3M8ZS5sZW5ndGg7KWVbc10uZm4uYXBwbHkoZVtzKytdLmN0eCxpKX1yZXR1cm4gdGhpc307XG59LHt9XSwxMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBmYWN0b3J5KG4pe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBGbG9hdDMyQXJyYXk/ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KG4sdCxlKXthWzBdPW4sdFtlXT1vWzBdLHRbZSsxXT1vWzFdLHRbZSsyXT1vWzJdLHRbZSszXT1vWzNdfWZ1bmN0aW9uIGUobix0LGUpe2FbMF09bix0W2VdPW9bM10sdFtlKzFdPW9bMl0sdFtlKzJdPW9bMV0sdFtlKzNdPW9bMF19ZnVuY3Rpb24gcihuLHQpe3JldHVybiBvWzBdPW5bdF0sb1sxXT1uW3QrMV0sb1syXT1uW3QrMl0sb1szXT1uW3QrM10sYVswXX1mdW5jdGlvbiBpKG4sdCl7cmV0dXJuIG9bM109blt0XSxvWzJdPW5bdCsxXSxvWzFdPW5bdCsyXSxvWzBdPW5bdCszXSxhWzBdfXZhciBhPW5ldyBGbG9hdDMyQXJyYXkoWy0wXSksbz1uZXcgVWludDhBcnJheShhLmJ1ZmZlciksdT0xMjg9PT1vWzNdO24ud3JpdGVGbG9hdExFPXU/dDplLG4ud3JpdGVGbG9hdEJFPXU/ZTp0LG4ucmVhZEZsb2F0TEU9dT9yOmksbi5yZWFkRmxvYXRCRT11P2k6cn0oKTpmdW5jdGlvbigpe2Z1bmN0aW9uIHQobix0LGUscil7dmFyIGk9dDwwPzE6MDtpZihpJiYodD0tdCksMD09PXQpbigxL3Q+MD8wOjIxNDc0ODM2NDgsZSxyKTtlbHNlIGlmKGlzTmFOKHQpKW4oMjE0MzI4OTM0NCxlLHIpO2Vsc2UgaWYodD4zLjQwMjgyMzQ2NjM4NTI4ODZlMzgpbigoaTw8MzF8MjEzOTA5NTA0MCk+Pj4wLGUscik7ZWxzZSBpZih0PDEuMTc1NDk0MzUwODIyMjg3NWUtMzgpbigoaTw8MzF8TWF0aC5yb3VuZCh0LzEuNDAxMjk4NDY0MzI0ODE3ZS00NSkpPj4+MCxlLHIpO2Vsc2V7dmFyIGE9TWF0aC5mbG9vcihNYXRoLmxvZyh0KS9NYXRoLkxOMiksbz04Mzg4NjA3Jk1hdGgucm91bmQodCpNYXRoLnBvdygyLC1hKSo4Mzg4NjA4KTtuKChpPDwzMXxhKzEyNzw8MjN8byk+Pj4wLGUscil9fWZ1bmN0aW9uIGUobix0LGUpe3ZhciByPW4odCxlKSxpPTIqKHI+PjMxKSsxLGE9cj4+PjIzJjI1NSxvPTgzODg2MDcmcjtyZXR1cm4gMjU1PT09YT9vP05hTjppKigxLzApOjA9PT1hPzEuNDAxMjk4NDY0MzI0ODE3ZS00NSppKm86aSpNYXRoLnBvdygyLGEtMTUwKSoobys4Mzg4NjA4KX1uLndyaXRlRmxvYXRMRT10LmJpbmQobnVsbCx3cml0ZVVpbnRMRSksbi53cml0ZUZsb2F0QkU9dC5iaW5kKG51bGwsd3JpdGVVaW50QkUpLG4ucmVhZEZsb2F0TEU9ZS5iaW5kKG51bGwscmVhZFVpbnRMRSksbi5yZWFkRmxvYXRCRT1lLmJpbmQobnVsbCxyZWFkVWludEJFKX0oKSxcInVuZGVmaW5lZFwiIT10eXBlb2YgRmxvYXQ2NEFycmF5P2Z1bmN0aW9uKCl7ZnVuY3Rpb24gdChuLHQsZSl7YVswXT1uLHRbZV09b1swXSx0W2UrMV09b1sxXSx0W2UrMl09b1syXSx0W2UrM109b1szXSx0W2UrNF09b1s0XSx0W2UrNV09b1s1XSx0W2UrNl09b1s2XSx0W2UrN109b1s3XX1mdW5jdGlvbiBlKG4sdCxlKXthWzBdPW4sdFtlXT1vWzddLHRbZSsxXT1vWzZdLHRbZSsyXT1vWzVdLHRbZSszXT1vWzRdLHRbZSs0XT1vWzNdLHRbZSs1XT1vWzJdLHRbZSs2XT1vWzFdLHRbZSs3XT1vWzBdfWZ1bmN0aW9uIHIobix0KXtyZXR1cm4gb1swXT1uW3RdLG9bMV09blt0KzFdLG9bMl09blt0KzJdLG9bM109blt0KzNdLG9bNF09blt0KzRdLG9bNV09blt0KzVdLG9bNl09blt0KzZdLG9bN109blt0KzddLGFbMF19ZnVuY3Rpb24gaShuLHQpe3JldHVybiBvWzddPW5bdF0sb1s2XT1uW3QrMV0sb1s1XT1uW3QrMl0sb1s0XT1uW3QrM10sb1szXT1uW3QrNF0sb1syXT1uW3QrNV0sb1sxXT1uW3QrNl0sb1swXT1uW3QrN10sYVswXX12YXIgYT1uZXcgRmxvYXQ2NEFycmF5KFstMF0pLG89bmV3IFVpbnQ4QXJyYXkoYS5idWZmZXIpLHU9MTI4PT09b1s3XTtuLndyaXRlRG91YmxlTEU9dT90OmUsbi53cml0ZURvdWJsZUJFPXU/ZTp0LG4ucmVhZERvdWJsZUxFPXU/cjppLG4ucmVhZERvdWJsZUJFPXU/aTpyfSgpOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChuLHQsZSxyLGksYSl7dmFyIG89cjwwPzE6MDtpZihvJiYocj0tciksMD09PXIpbigwLGksYSt0KSxuKDEvcj4wPzA6MjE0NzQ4MzY0OCxpLGErZSk7ZWxzZSBpZihpc05hTihyKSluKDAsaSxhK3QpLG4oMjE0Njk1OTM2MCxpLGErZSk7ZWxzZSBpZihyPjEuNzk3NjkzMTM0ODYyMzE1N2UzMDgpbigwLGksYSt0KSxuKChvPDwzMXwyMTQ2NDM1MDcyKT4+PjAsaSxhK2UpO2Vsc2V7dmFyIHU7aWYocjwyLjIyNTA3Mzg1ODUwNzIwMTRlLTMwOCl1PXIvNWUtMzI0LG4odT4+PjAsaSxhK3QpLG4oKG88PDMxfHUvNDI5NDk2NzI5Nik+Pj4wLGksYStlKTtlbHNle3ZhciBsPU1hdGguZmxvb3IoTWF0aC5sb2cocikvTWF0aC5MTjIpOzEwMjQ9PT1sJiYobD0xMDIzKSx1PXIqTWF0aC5wb3coMiwtbCksbig0NTAzNTk5NjI3MzcwNDk2KnU+Pj4wLGksYSt0KSxuKChvPDwzMXxsKzEwMjM8PDIwfDEwNDg1NzYqdSYxMDQ4NTc1KT4+PjAsaSxhK2UpfX19ZnVuY3Rpb24gZShuLHQsZSxyLGkpe3ZhciBhPW4ocixpK3QpLG89bihyLGkrZSksdT0yKihvPj4zMSkrMSxsPW8+Pj4yMCYyMDQ3LGY9NDI5NDk2NzI5NiooMTA0ODU3NSZvKSthO3JldHVybiAyMDQ3PT09bD9mP05hTjp1KigxLzApOjA9PT1sPzVlLTMyNCp1KmY6dSpNYXRoLnBvdygyLGwtMTA3NSkqKGYrNDUwMzU5OTYyNzM3MDQ5Nil9bi53cml0ZURvdWJsZUxFPXQuYmluZChudWxsLHdyaXRlVWludExFLDAsNCksbi53cml0ZURvdWJsZUJFPXQuYmluZChudWxsLHdyaXRlVWludEJFLDQsMCksbi5yZWFkRG91YmxlTEU9ZS5iaW5kKG51bGwscmVhZFVpbnRMRSwwLDQpLG4ucmVhZERvdWJsZUJFPWUuYmluZChudWxsLHJlYWRVaW50QkUsNCwwKX0oKSxufWZ1bmN0aW9uIHdyaXRlVWludExFKG4sdCxlKXt0W2VdPTI1NSZuLHRbZSsxXT1uPj4+OCYyNTUsdFtlKzJdPW4+Pj4xNiYyNTUsdFtlKzNdPW4+Pj4yNH1mdW5jdGlvbiB3cml0ZVVpbnRCRShuLHQsZSl7dFtlXT1uPj4+MjQsdFtlKzFdPW4+Pj4xNiYyNTUsdFtlKzJdPW4+Pj44JjI1NSx0W2UrM109MjU1Jm59ZnVuY3Rpb24gcmVhZFVpbnRMRShuLHQpe3JldHVybihuW3RdfG5bdCsxXTw8OHxuW3QrMl08PDE2fG5bdCszXTw8MjQpPj4+MH1mdW5jdGlvbiByZWFkVWludEJFKG4sdCl7cmV0dXJuKG5bdF08PDI0fG5bdCsxXTw8MTZ8blt0KzJdPDw4fG5bdCszXSk+Pj4wfW1vZHVsZS5leHBvcnRzPWZhY3RvcnkoZmFjdG9yeSk7XG59LHt9XSwxMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpbnF1aXJlKG1vZHVsZU5hbWUpe3RyeXt2YXIgbW9kPWV2YWwoXCJxdWlyZVwiLnJlcGxhY2UoL14vLFwicmVcIikpKG1vZHVsZU5hbWUpO2lmKG1vZCYmKG1vZC5sZW5ndGh8fE9iamVjdC5rZXlzKG1vZCkubGVuZ3RoKSlyZXR1cm4gbW9kfWNhdGNoKGUpe31yZXR1cm4gbnVsbH1tb2R1bGUuZXhwb3J0cz1pbnF1aXJlO1xufSx7fV0sMTQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcG9vbChyLG4sbyl7dmFyIHQ9b3x8ODE5Mix1PXQ+Pj4xLGw9bnVsbCxlPXQ7cmV0dXJuIGZ1bmN0aW9uKG8pe2lmKG88MXx8bz51KXJldHVybiByKG8pO2Urbz50JiYobD1yKHQpLGU9MCk7dmFyIGM9bi5jYWxsKGwsZSxlKz1vKTtyZXR1cm4gNyZlJiYoZT0xKyg3fGUpKSxjfX1tb2R1bGUuZXhwb3J0cz1wb29sO1xufSx7fV0sMTU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7dmFyIHV0Zjg9ZXhwb3J0czt1dGY4Lmxlbmd0aD1mdW5jdGlvbihyKXtmb3IodmFyIHQ9MCxuPTAsZT0wO2U8ci5sZW5ndGg7KytlKW49ci5jaGFyQ29kZUF0KGUpLG48MTI4P3QrPTE6bjwyMDQ4P3QrPTI6NTUyOTY9PSg2NDUxMiZuKSYmNTYzMjA9PSg2NDUxMiZyLmNoYXJDb2RlQXQoZSsxKSk/KCsrZSx0Kz00KTp0Kz0zO3JldHVybiB0fSx1dGY4LnJlYWQ9ZnVuY3Rpb24ocix0LG4pe2lmKG4tdDwxKXJldHVyblwiXCI7Zm9yKHZhciBlLG89bnVsbCxhPVtdLGk9MDt0PG47KWU9clt0KytdLGU8MTI4P2FbaSsrXT1lOmU+MTkxJiZlPDIyND9hW2krK109KDMxJmUpPDw2fDYzJnJbdCsrXTplPjIzOSYmZTwzNjU/KGU9KCg3JmUpPDwxOHwoNjMmclt0KytdKTw8MTJ8KDYzJnJbdCsrXSk8PDZ8NjMmclt0KytdKS02NTUzNixhW2krK109NTUyOTYrKGU+PjEwKSxhW2krK109NTYzMjArKDEwMjMmZSkpOmFbaSsrXT0oMTUmZSk8PDEyfCg2MyZyW3QrK10pPDw2fDYzJnJbdCsrXSxpPjgxOTEmJigob3x8KG89W10pKS5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLGEpKSxpPTApO3JldHVybiBvPyhpJiZvLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsYS5zbGljZSgwLGkpKSksby5qb2luKFwiXCIpKTpTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxhLnNsaWNlKDAsaSkpfSx1dGY4LndyaXRlPWZ1bmN0aW9uKHIsdCxuKXtmb3IodmFyIGUsbyxhPW4saT0wO2k8ci5sZW5ndGg7KytpKWU9ci5jaGFyQ29kZUF0KGkpLGU8MTI4P3RbbisrXT1lOmU8MjA0OD8odFtuKytdPWU+PjZ8MTkyLHRbbisrXT02MyZlfDEyOCk6NTUyOTY9PSg2NDUxMiZlKSYmNTYzMjA9PSg2NDUxMiYobz1yLmNoYXJDb2RlQXQoaSsxKSkpPyhlPTY1NTM2KygoMTAyMyZlKTw8MTApKygxMDIzJm8pLCsraSx0W24rK109ZT4+MTh8MjQwLHRbbisrXT1lPj4xMiY2M3wxMjgsdFtuKytdPWU+PjYmNjN8MTI4LHRbbisrXT02MyZlfDEyOCk6KHRbbisrXT1lPj4xMnwyMjQsdFtuKytdPWU+PjYmNjN8MTI4LHRbbisrXT02MyZlfDEyOCk7cmV0dXJuIG4tYX07XG59LHt9XSwxNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjttb2R1bGUuZXhwb3J0cz1yZXF1aXJlKFwiLi9zcmMvaW5kZXgtbWluaW1hbFwiKTtcbn0se1wiLi9zcmMvaW5kZXgtbWluaW1hbFwiOjE3fV0sMTc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gY29uZmlndXJlKCl7cHJvdG9idWYuUmVhZGVyLl9jb25maWd1cmUocHJvdG9idWYuQnVmZmVyUmVhZGVyKSxwcm90b2J1Zi51dGlsLl9jb25maWd1cmUoKX12YXIgcHJvdG9idWY9ZXhwb3J0cztwcm90b2J1Zi5idWlsZD1cIm1pbmltYWxcIixwcm90b2J1Zi5Xcml0ZXI9cmVxdWlyZShcIi4vd3JpdGVyXCIpLHByb3RvYnVmLkJ1ZmZlcldyaXRlcj1yZXF1aXJlKFwiLi93cml0ZXJfYnVmZmVyXCIpLHByb3RvYnVmLlJlYWRlcj1yZXF1aXJlKFwiLi9yZWFkZXJcIikscHJvdG9idWYuQnVmZmVyUmVhZGVyPXJlcXVpcmUoXCIuL3JlYWRlcl9idWZmZXJcIikscHJvdG9idWYudXRpbD1yZXF1aXJlKFwiLi91dGlsL21pbmltYWxcIikscHJvdG9idWYucnBjPXJlcXVpcmUoXCIuL3JwY1wiKSxwcm90b2J1Zi5yb290cz1yZXF1aXJlKFwiLi9yb290c1wiKSxwcm90b2J1Zi5jb25maWd1cmU9Y29uZmlndXJlLHByb3RvYnVmLldyaXRlci5fY29uZmlndXJlKHByb3RvYnVmLkJ1ZmZlcldyaXRlciksY29uZmlndXJlKCk7XG59LHtcIi4vcmVhZGVyXCI6MTgsXCIuL3JlYWRlcl9idWZmZXJcIjoxOSxcIi4vcm9vdHNcIjoyMCxcIi4vcnBjXCI6MjEsXCIuL3V0aWwvbWluaW1hbFwiOjI0LFwiLi93cml0ZXJcIjoyNSxcIi4vd3JpdGVyX2J1ZmZlclwiOjI2fV0sMTg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaW5kZXhPdXRPZlJhbmdlKHQsaSl7cmV0dXJuIFJhbmdlRXJyb3IoXCJpbmRleCBvdXQgb2YgcmFuZ2U6IFwiK3QucG9zK1wiICsgXCIrKGl8fDEpK1wiID4gXCIrdC5sZW4pfWZ1bmN0aW9uIFJlYWRlcih0KXt0aGlzLmJ1Zj10LHRoaXMucG9zPTAsdGhpcy5sZW49dC5sZW5ndGh9ZnVuY3Rpb24gcmVhZExvbmdWYXJpbnQoKXt2YXIgdD1uZXcgTG9uZ0JpdHMoMCwwKSxpPTA7aWYoISh0aGlzLmxlbi10aGlzLnBvcz40KSl7Zm9yKDtpPDM7KytpKXtpZih0aGlzLnBvcz49dGhpcy5sZW4pdGhyb3cgaW5kZXhPdXRPZlJhbmdlKHRoaXMpO2lmKHQubG89KHQubG98KDEyNyZ0aGlzLmJ1Zlt0aGlzLnBvc10pPDw3KmkpPj4+MCx0aGlzLmJ1Zlt0aGlzLnBvcysrXTwxMjgpcmV0dXJuIHR9cmV0dXJuIHQubG89KHQubG98KDEyNyZ0aGlzLmJ1Zlt0aGlzLnBvcysrXSk8PDcqaSk+Pj4wLHR9Zm9yKDtpPDQ7KytpKWlmKHQubG89KHQubG98KDEyNyZ0aGlzLmJ1Zlt0aGlzLnBvc10pPDw3KmkpPj4+MCx0aGlzLmJ1Zlt0aGlzLnBvcysrXTwxMjgpcmV0dXJuIHQ7aWYodC5sbz0odC5sb3woMTI3JnRoaXMuYnVmW3RoaXMucG9zXSk8PDI4KT4+PjAsdC5oaT0odC5oaXwoMTI3JnRoaXMuYnVmW3RoaXMucG9zXSk+PjQpPj4+MCx0aGlzLmJ1Zlt0aGlzLnBvcysrXTwxMjgpcmV0dXJuIHQ7aWYoaT0wLHRoaXMubGVuLXRoaXMucG9zPjQpe2Zvcig7aTw1OysraSlpZih0LmhpPSh0LmhpfCgxMjcmdGhpcy5idWZbdGhpcy5wb3NdKTw8NyppKzMpPj4+MCx0aGlzLmJ1Zlt0aGlzLnBvcysrXTwxMjgpcmV0dXJuIHR9ZWxzZSBmb3IoO2k8NTsrK2kpe2lmKHRoaXMucG9zPj10aGlzLmxlbil0aHJvdyBpbmRleE91dE9mUmFuZ2UodGhpcyk7aWYodC5oaT0odC5oaXwoMTI3JnRoaXMuYnVmW3RoaXMucG9zXSk8PDcqaSszKT4+PjAsdGhpcy5idWZbdGhpcy5wb3MrK108MTI4KXJldHVybiB0fXRocm93IEVycm9yKFwiaW52YWxpZCB2YXJpbnQgZW5jb2RpbmdcIil9ZnVuY3Rpb24gcmVhZEZpeGVkMzJfZW5kKHQsaSl7cmV0dXJuKHRbaS00XXx0W2ktM108PDh8dFtpLTJdPDwxNnx0W2ktMV08PDI0KT4+PjB9ZnVuY3Rpb24gcmVhZEZpeGVkNjQoKXtpZih0aGlzLnBvcys4PnRoaXMubGVuKXRocm93IGluZGV4T3V0T2ZSYW5nZSh0aGlzLDgpO3JldHVybiBuZXcgTG9uZ0JpdHMocmVhZEZpeGVkMzJfZW5kKHRoaXMuYnVmLHRoaXMucG9zKz00KSxyZWFkRml4ZWQzMl9lbmQodGhpcy5idWYsdGhpcy5wb3MrPTQpKX1tb2R1bGUuZXhwb3J0cz1SZWFkZXI7dmFyIHV0aWw9cmVxdWlyZShcIi4vdXRpbC9taW5pbWFsXCIpLEJ1ZmZlclJlYWRlcixMb25nQml0cz11dGlsLkxvbmdCaXRzLHV0Zjg9dXRpbC51dGY4LGNyZWF0ZV9hcnJheT1cInVuZGVmaW5lZFwiIT10eXBlb2YgVWludDhBcnJheT9mdW5jdGlvbih0KXtpZih0IGluc3RhbmNlb2YgVWludDhBcnJheXx8QXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gbmV3IFJlYWRlcih0KTt0aHJvdyBFcnJvcihcImlsbGVnYWwgYnVmZmVyXCIpfTpmdW5jdGlvbih0KXtpZihBcnJheS5pc0FycmF5KHQpKXJldHVybiBuZXcgUmVhZGVyKHQpO3Rocm93IEVycm9yKFwiaWxsZWdhbCBidWZmZXJcIil9O1JlYWRlci5jcmVhdGU9dXRpbC5CdWZmZXI/ZnVuY3Rpb24odCl7cmV0dXJuKFJlYWRlci5jcmVhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIHV0aWwuQnVmZmVyLmlzQnVmZmVyKHQpP25ldyBCdWZmZXJSZWFkZXIodCk6Y3JlYXRlX2FycmF5KHQpfSkodCl9OmNyZWF0ZV9hcnJheSxSZWFkZXIucHJvdG90eXBlLl9zbGljZT11dGlsLkFycmF5LnByb3RvdHlwZS5zdWJhcnJheXx8dXRpbC5BcnJheS5wcm90b3R5cGUuc2xpY2UsUmVhZGVyLnByb3RvdHlwZS51aW50MzI9ZnVuY3Rpb24oKXt2YXIgdD00Mjk0OTY3Mjk1O3JldHVybiBmdW5jdGlvbigpe2lmKHQ9KDEyNyZ0aGlzLmJ1Zlt0aGlzLnBvc10pPj4+MCx0aGlzLmJ1Zlt0aGlzLnBvcysrXTwxMjgpcmV0dXJuIHQ7aWYodD0odHwoMTI3JnRoaXMuYnVmW3RoaXMucG9zXSk8PDcpPj4+MCx0aGlzLmJ1Zlt0aGlzLnBvcysrXTwxMjgpcmV0dXJuIHQ7aWYodD0odHwoMTI3JnRoaXMuYnVmW3RoaXMucG9zXSk8PDE0KT4+PjAsdGhpcy5idWZbdGhpcy5wb3MrK108MTI4KXJldHVybiB0O2lmKHQ9KHR8KDEyNyZ0aGlzLmJ1Zlt0aGlzLnBvc10pPDwyMSk+Pj4wLHRoaXMuYnVmW3RoaXMucG9zKytdPDEyOClyZXR1cm4gdDtpZih0PSh0fCgxNSZ0aGlzLmJ1Zlt0aGlzLnBvc10pPDwyOCk+Pj4wLHRoaXMuYnVmW3RoaXMucG9zKytdPDEyOClyZXR1cm4gdDtpZigodGhpcy5wb3MrPTUpPnRoaXMubGVuKXRocm93IHRoaXMucG9zPXRoaXMubGVuLGluZGV4T3V0T2ZSYW5nZSh0aGlzLDEwKTtyZXR1cm4gdH19KCksUmVhZGVyLnByb3RvdHlwZS5pbnQzMj1mdW5jdGlvbigpe3JldHVybiAwfHRoaXMudWludDMyKCl9LFJlYWRlci5wcm90b3R5cGUuc2ludDMyPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy51aW50MzIoKTtyZXR1cm4gdD4+PjFeLSgxJnQpfDB9LFJlYWRlci5wcm90b3R5cGUuYm9vbD1mdW5jdGlvbigpe3JldHVybiAwIT09dGhpcy51aW50MzIoKX0sUmVhZGVyLnByb3RvdHlwZS5maXhlZDMyPWZ1bmN0aW9uKCl7aWYodGhpcy5wb3MrND50aGlzLmxlbil0aHJvdyBpbmRleE91dE9mUmFuZ2UodGhpcyw0KTtyZXR1cm4gcmVhZEZpeGVkMzJfZW5kKHRoaXMuYnVmLHRoaXMucG9zKz00KX0sUmVhZGVyLnByb3RvdHlwZS5zZml4ZWQzMj1mdW5jdGlvbigpe2lmKHRoaXMucG9zKzQ+dGhpcy5sZW4pdGhyb3cgaW5kZXhPdXRPZlJhbmdlKHRoaXMsNCk7cmV0dXJuIDB8cmVhZEZpeGVkMzJfZW5kKHRoaXMuYnVmLHRoaXMucG9zKz00KX0sUmVhZGVyLnByb3RvdHlwZS5mbG9hdD1mdW5jdGlvbigpe2lmKHRoaXMucG9zKzQ+dGhpcy5sZW4pdGhyb3cgaW5kZXhPdXRPZlJhbmdlKHRoaXMsNCk7dmFyIHQ9dXRpbC5mbG9hdC5yZWFkRmxvYXRMRSh0aGlzLmJ1Zix0aGlzLnBvcyk7cmV0dXJuIHRoaXMucG9zKz00LHR9LFJlYWRlci5wcm90b3R5cGUuZG91YmxlPWZ1bmN0aW9uKCl7aWYodGhpcy5wb3MrOD50aGlzLmxlbil0aHJvdyBpbmRleE91dE9mUmFuZ2UodGhpcyw0KTt2YXIgdD11dGlsLmZsb2F0LnJlYWREb3VibGVMRSh0aGlzLmJ1Zix0aGlzLnBvcyk7cmV0dXJuIHRoaXMucG9zKz04LHR9LFJlYWRlci5wcm90b3R5cGUuYnl0ZXM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnVpbnQzMigpLGk9dGhpcy5wb3MsZT10aGlzLnBvcyt0O2lmKGU+dGhpcy5sZW4pdGhyb3cgaW5kZXhPdXRPZlJhbmdlKHRoaXMsdCk7cmV0dXJuIHRoaXMucG9zKz10LEFycmF5LmlzQXJyYXkodGhpcy5idWYpP3RoaXMuYnVmLnNsaWNlKGksZSk6aT09PWU/bmV3IHRoaXMuYnVmLmNvbnN0cnVjdG9yKDApOnRoaXMuX3NsaWNlLmNhbGwodGhpcy5idWYsaSxlKX0sUmVhZGVyLnByb3RvdHlwZS5zdHJpbmc9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmJ5dGVzKCk7cmV0dXJuIHV0ZjgucmVhZCh0LDAsdC5sZW5ndGgpfSxSZWFkZXIucHJvdG90eXBlLnNraXA9ZnVuY3Rpb24odCl7aWYoXCJudW1iZXJcIj09dHlwZW9mIHQpe2lmKHRoaXMucG9zK3Q+dGhpcy5sZW4pdGhyb3cgaW5kZXhPdXRPZlJhbmdlKHRoaXMsdCk7dGhpcy5wb3MrPXR9ZWxzZSBkb3tpZih0aGlzLnBvcz49dGhpcy5sZW4pdGhyb3cgaW5kZXhPdXRPZlJhbmdlKHRoaXMpfXdoaWxlKDEyOCZ0aGlzLmJ1Zlt0aGlzLnBvcysrXSk7cmV0dXJuIHRoaXN9LFJlYWRlci5wcm90b3R5cGUuc2tpcFR5cGU9ZnVuY3Rpb24odCl7c3dpdGNoKHQpe2Nhc2UgMDp0aGlzLnNraXAoKTticmVhaztjYXNlIDE6dGhpcy5za2lwKDgpO2JyZWFrO2Nhc2UgMjp0aGlzLnNraXAodGhpcy51aW50MzIoKSk7YnJlYWs7Y2FzZSAzOmZvcig7NCE9KHQ9NyZ0aGlzLnVpbnQzMigpKTspdGhpcy5za2lwVHlwZSh0KTticmVhaztjYXNlIDU6dGhpcy5za2lwKDQpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJpbnZhbGlkIHdpcmUgdHlwZSBcIit0K1wiIGF0IG9mZnNldCBcIit0aGlzLnBvcyl9cmV0dXJuIHRoaXN9LFJlYWRlci5fY29uZmlndXJlPWZ1bmN0aW9uKHQpe0J1ZmZlclJlYWRlcj10O3ZhciBpPXV0aWwuTG9uZz9cInRvTG9uZ1wiOlwidG9OdW1iZXJcIjt1dGlsLm1lcmdlKFJlYWRlci5wcm90b3R5cGUse2ludDY0OmZ1bmN0aW9uKCl7cmV0dXJuIHJlYWRMb25nVmFyaW50LmNhbGwodGhpcylbaV0oITEpfSx1aW50NjQ6ZnVuY3Rpb24oKXtyZXR1cm4gcmVhZExvbmdWYXJpbnQuY2FsbCh0aGlzKVtpXSghMCl9LHNpbnQ2NDpmdW5jdGlvbigpe3JldHVybiByZWFkTG9uZ1ZhcmludC5jYWxsKHRoaXMpLnp6RGVjb2RlKClbaV0oITEpfSxmaXhlZDY0OmZ1bmN0aW9uKCl7cmV0dXJuIHJlYWRGaXhlZDY0LmNhbGwodGhpcylbaV0oITApfSxzZml4ZWQ2NDpmdW5jdGlvbigpe3JldHVybiByZWFkRml4ZWQ2NC5jYWxsKHRoaXMpW2ldKCExKX19KX07XG59LHtcIi4vdXRpbC9taW5pbWFsXCI6MjR9XSwxOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBCdWZmZXJSZWFkZXIoZSl7UmVhZGVyLmNhbGwodGhpcyxlKX1tb2R1bGUuZXhwb3J0cz1CdWZmZXJSZWFkZXI7dmFyIFJlYWRlcj1yZXF1aXJlKFwiLi9yZWFkZXJcIik7KEJ1ZmZlclJlYWRlci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShSZWFkZXIucHJvdG90eXBlKSkuY29uc3RydWN0b3I9QnVmZmVyUmVhZGVyO3ZhciB1dGlsPXJlcXVpcmUoXCIuL3V0aWwvbWluaW1hbFwiKTt1dGlsLkJ1ZmZlciYmKEJ1ZmZlclJlYWRlci5wcm90b3R5cGUuX3NsaWNlPXV0aWwuQnVmZmVyLnByb3RvdHlwZS5zbGljZSksQnVmZmVyUmVhZGVyLnByb3RvdHlwZS5zdHJpbmc9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnVpbnQzMigpO3JldHVybiB0aGlzLmJ1Zi51dGY4U2xpY2UodGhpcy5wb3MsdGhpcy5wb3M9TWF0aC5taW4odGhpcy5wb3MrZSx0aGlzLmxlbikpfTtcbn0se1wiLi9yZWFkZXJcIjoxOCxcIi4vdXRpbC9taW5pbWFsXCI6MjR9XSwyMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjttb2R1bGUuZXhwb3J0cz17fTtcbn0se31dLDIxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO3ZhciBycGM9ZXhwb3J0cztycGMuU2VydmljZT1yZXF1aXJlKFwiLi9ycGMvc2VydmljZVwiKTtcbn0se1wiLi9ycGMvc2VydmljZVwiOjIyfV0sMjI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gU2VydmljZShlLHQscil7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoXCJycGNJbXBsIG11c3QgYmUgYSBmdW5jdGlvblwiKTt1dGlsLkV2ZW50RW1pdHRlci5jYWxsKHRoaXMpLHRoaXMucnBjSW1wbD1lLHRoaXMucmVxdWVzdERlbGltaXRlZD1Cb29sZWFuKHQpLHRoaXMucmVzcG9uc2VEZWxpbWl0ZWQ9Qm9vbGVhbihyKX1tb2R1bGUuZXhwb3J0cz1TZXJ2aWNlO3ZhciB1dGlsPXJlcXVpcmUoXCIuLi91dGlsL21pbmltYWxcIik7KFNlcnZpY2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodXRpbC5FdmVudEVtaXR0ZXIucHJvdG90eXBlKSkuY29uc3RydWN0b3I9U2VydmljZSxTZXJ2aWNlLnByb3RvdHlwZS5ycGNDYWxsPWZ1bmN0aW9uIGUodCxyLGksbixvKXtpZighbil0aHJvdyBUeXBlRXJyb3IoXCJyZXF1ZXN0IG11c3QgYmUgc3BlY2lmaWVkXCIpO3ZhciBsPXRoaXM7aWYoIW8pcmV0dXJuIHV0aWwuYXNQcm9taXNlKGUsbCx0LHIsaSxuKTtpZighbC5ycGNJbXBsKXJldHVybiB2b2lkIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtvKEVycm9yKFwiYWxyZWFkeSBlbmRlZFwiKSl9LDApO3RyeXtyZXR1cm4gbC5ycGNJbXBsKHQscltsLnJlcXVlc3REZWxpbWl0ZWQ/XCJlbmNvZGVEZWxpbWl0ZWRcIjpcImVuY29kZVwiXShuKS5maW5pc2goKSxmdW5jdGlvbihlLHIpe2lmKGUpcmV0dXJuIGwuZW1pdChcImVycm9yXCIsZSx0KSxvKGUpO2lmKG51bGw9PT1yKXJldHVybiB2b2lkIGwuZW5kKCEwKTtpZighKHIgaW5zdGFuY2VvZiBpKSl0cnl7cj1pW2wucmVzcG9uc2VEZWxpbWl0ZWQ/XCJkZWNvZGVEZWxpbWl0ZWRcIjpcImRlY29kZVwiXShyKX1jYXRjaChlKXtyZXR1cm4gbC5lbWl0KFwiZXJyb3JcIixlLHQpLG8oZSl9cmV0dXJuIGwuZW1pdChcImRhdGFcIixyLHQpLG8obnVsbCxyKX0pfWNhdGNoKGUpe3JldHVybiBsLmVtaXQoXCJlcnJvclwiLGUsdCksdm9pZCBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7byhlKX0sMCl9fSxTZXJ2aWNlLnByb3RvdHlwZS5lbmQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucnBjSW1wbCYmKGV8fHRoaXMucnBjSW1wbChudWxsLG51bGwsbnVsbCksdGhpcy5ycGNJbXBsPW51bGwsdGhpcy5lbWl0KFwiZW5kXCIpLm9mZigpKSx0aGlzfTtcbn0se1wiLi4vdXRpbC9taW5pbWFsXCI6MjR9XSwyMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBMb25nQml0cyh0LG8pe3RoaXMubG89dD4+PjAsdGhpcy5oaT1vPj4+MH1tb2R1bGUuZXhwb3J0cz1Mb25nQml0czt2YXIgdXRpbD1yZXF1aXJlKFwiLi4vdXRpbC9taW5pbWFsXCIpLHplcm89TG9uZ0JpdHMuemVybz1uZXcgTG9uZ0JpdHMoMCwwKTt6ZXJvLnRvTnVtYmVyPWZ1bmN0aW9uKCl7cmV0dXJuIDB9LHplcm8uenpFbmNvZGU9emVyby56ekRlY29kZT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSx6ZXJvLmxlbmd0aD1mdW5jdGlvbigpe3JldHVybiAxfTt2YXIgemVyb0hhc2g9TG9uZ0JpdHMuemVyb0hhc2g9XCJcXDBcXDBcXDBcXDBcXDBcXDBcXDBcXDBcIjtMb25nQml0cy5mcm9tTnVtYmVyPWZ1bmN0aW9uKHQpe2lmKDA9PT10KXJldHVybiB6ZXJvO3ZhciBvPXQ8MDtvJiYodD0tdCk7dmFyIGk9dD4+PjAscj0odC1pKS80Mjk0OTY3Mjk2Pj4+MDtyZXR1cm4gbyYmKHI9fnI+Pj4wLGk9fmk+Pj4wLCsraT40Mjk0OTY3Mjk1JiYoaT0wLCsrcj40Mjk0OTY3Mjk1JiYocj0wKSkpLG5ldyBMb25nQml0cyhpLHIpfSxMb25nQml0cy5mcm9tPWZ1bmN0aW9uKHQpe2lmKFwibnVtYmVyXCI9PXR5cGVvZiB0KXJldHVybiBMb25nQml0cy5mcm9tTnVtYmVyKHQpO2lmKHV0aWwuaXNTdHJpbmcodCkpe2lmKCF1dGlsLkxvbmcpcmV0dXJuIExvbmdCaXRzLmZyb21OdW1iZXIocGFyc2VJbnQodCwxMCkpO3Q9dXRpbC5Mb25nLmZyb21TdHJpbmcodCl9cmV0dXJuIHQubG93fHx0LmhpZ2g/bmV3IExvbmdCaXRzKHQubG93Pj4+MCx0LmhpZ2g+Pj4wKTp6ZXJvfSxMb25nQml0cy5wcm90b3R5cGUudG9OdW1iZXI9ZnVuY3Rpb24odCl7aWYoIXQmJnRoaXMuaGk+Pj4zMSl7dmFyIG89MSt+dGhpcy5sbz4+PjAsaT1+dGhpcy5oaT4+PjA7cmV0dXJuIG98fChpPWkrMT4+PjApLC0obys0Mjk0OTY3Mjk2KmkpfXJldHVybiB0aGlzLmxvKzQyOTQ5NjcyOTYqdGhpcy5oaX0sTG9uZ0JpdHMucHJvdG90eXBlLnRvTG9uZz1mdW5jdGlvbih0KXtyZXR1cm4gdXRpbC5Mb25nP25ldyB1dGlsLkxvbmcoMHx0aGlzLmxvLDB8dGhpcy5oaSxCb29sZWFuKHQpKTp7bG93OjB8dGhpcy5sbyxoaWdoOjB8dGhpcy5oaSx1bnNpZ25lZDpCb29sZWFuKHQpfX07dmFyIGNoYXJDb2RlQXQ9U3RyaW5nLnByb3RvdHlwZS5jaGFyQ29kZUF0O0xvbmdCaXRzLmZyb21IYXNoPWZ1bmN0aW9uKHQpe3JldHVybiB0PT09emVyb0hhc2g/emVybzpuZXcgTG9uZ0JpdHMoKGNoYXJDb2RlQXQuY2FsbCh0LDApfGNoYXJDb2RlQXQuY2FsbCh0LDEpPDw4fGNoYXJDb2RlQXQuY2FsbCh0LDIpPDwxNnxjaGFyQ29kZUF0LmNhbGwodCwzKTw8MjQpPj4+MCwoY2hhckNvZGVBdC5jYWxsKHQsNCl8Y2hhckNvZGVBdC5jYWxsKHQsNSk8PDh8Y2hhckNvZGVBdC5jYWxsKHQsNik8PDE2fGNoYXJDb2RlQXQuY2FsbCh0LDcpPDwyNCk+Pj4wKX0sTG9uZ0JpdHMucHJvdG90eXBlLnRvSGFzaD1mdW5jdGlvbigpe3JldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKDI1NSZ0aGlzLmxvLHRoaXMubG8+Pj44JjI1NSx0aGlzLmxvPj4+MTYmMjU1LHRoaXMubG8+Pj4yNCwyNTUmdGhpcy5oaSx0aGlzLmhpPj4+OCYyNTUsdGhpcy5oaT4+PjE2JjI1NSx0aGlzLmhpPj4+MjQpfSxMb25nQml0cy5wcm90b3R5cGUuenpFbmNvZGU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmhpPj4zMTtyZXR1cm4gdGhpcy5oaT0oKHRoaXMuaGk8PDF8dGhpcy5sbz4+PjMxKV50KT4+PjAsdGhpcy5sbz0odGhpcy5sbzw8MV50KT4+PjAsdGhpc30sTG9uZ0JpdHMucHJvdG90eXBlLnp6RGVjb2RlPWZ1bmN0aW9uKCl7dmFyIHQ9LSgxJnRoaXMubG8pO3JldHVybiB0aGlzLmxvPSgodGhpcy5sbz4+PjF8dGhpcy5oaTw8MzEpXnQpPj4+MCx0aGlzLmhpPSh0aGlzLmhpPj4+MV50KT4+PjAsdGhpc30sTG9uZ0JpdHMucHJvdG90eXBlLmxlbmd0aD1mdW5jdGlvbigpe3ZhciB0PXRoaXMubG8sbz0odGhpcy5sbz4+PjI4fHRoaXMuaGk8PDQpPj4+MCxpPXRoaXMuaGk+Pj4yNDtyZXR1cm4gMD09PWk/MD09PW8/dDwxNjM4ND90PDEyOD8xOjI6dDwyMDk3MTUyPzM6NDpvPDE2Mzg0P288MTI4PzU6NjpvPDIwOTcxNTI/Nzo4Omk8MTI4Pzk6MTB9O1xufSx7XCIuLi91dGlsL21pbmltYWxcIjoyNH1dLDI0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO2Z1bmN0aW9uIG1lcmdlKHQsZSxyKXtmb3IodmFyIGk9T2JqZWN0LmtleXMoZSksbz0wO288aS5sZW5ndGg7KytvKXZvaWQgMCE9PXRbaVtvXV0mJnJ8fCh0W2lbb11dPWVbaVtvXV0pO3JldHVybiB0fWZ1bmN0aW9uIG5ld0Vycm9yKHQpe2Z1bmN0aW9uIGUodCxyKXtpZighKHRoaXMgaW5zdGFuY2VvZiBlKSlyZXR1cm4gbmV3IGUodCxyKTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcIm1lc3NhZ2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHR9fSksRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2U/RXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcyxlKTpPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInN0YWNrXCIse3ZhbHVlOihuZXcgRXJyb3IpLnN0YWNrfHxcIlwifSksciYmbWVyZ2UodGhpcyxyKX1yZXR1cm4oZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpKS5jb25zdHJ1Y3Rvcj1lLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIm5hbWVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHR9fSksZS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uYW1lK1wiOiBcIit0aGlzLm1lc3NhZ2V9LGV9dmFyIHV0aWw9ZXhwb3J0czt1dGlsLmFzUHJvbWlzZT1yZXF1aXJlKFwiQHByb3RvYnVmanMvYXNwcm9taXNlXCIpLHV0aWwuYmFzZTY0PXJlcXVpcmUoXCJAcHJvdG9idWZqcy9iYXNlNjRcIiksdXRpbC5FdmVudEVtaXR0ZXI9cmVxdWlyZShcIkBwcm90b2J1ZmpzL2V2ZW50ZW1pdHRlclwiKSx1dGlsLmZsb2F0PXJlcXVpcmUoXCJAcHJvdG9idWZqcy9mbG9hdFwiKSx1dGlsLmlucXVpcmU9cmVxdWlyZShcIkBwcm90b2J1ZmpzL2lucXVpcmVcIiksdXRpbC51dGY4PXJlcXVpcmUoXCJAcHJvdG9idWZqcy91dGY4XCIpLHV0aWwucG9vbD1yZXF1aXJlKFwiQHByb3RvYnVmanMvcG9vbFwiKSx1dGlsLkxvbmdCaXRzPXJlcXVpcmUoXCIuL2xvbmdiaXRzXCIpLHV0aWwuZ2xvYmFsPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvd3x8XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbCYmZ2xvYmFsfHxcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZiYmc2VsZnx8dGhpcyx1dGlsLmVtcHR5QXJyYXk9T2JqZWN0LmZyZWV6ZT9PYmplY3QuZnJlZXplKFtdKTpbXSx1dGlsLmVtcHR5T2JqZWN0PU9iamVjdC5mcmVlemU/T2JqZWN0LmZyZWV6ZSh7fSk6e30sdXRpbC5pc05vZGU9Qm9vbGVhbih1dGlsLmdsb2JhbC5wcm9jZXNzJiZ1dGlsLmdsb2JhbC5wcm9jZXNzLnZlcnNpb25zJiZ1dGlsLmdsb2JhbC5wcm9jZXNzLnZlcnNpb25zLm5vZGUpLHV0aWwuaXNJbnRlZ2VyPU51bWJlci5pc0ludGVnZXJ8fGZ1bmN0aW9uKHQpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0JiZpc0Zpbml0ZSh0KSYmTWF0aC5mbG9vcih0KT09PXR9LHV0aWwuaXNTdHJpbmc9ZnVuY3Rpb24odCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHR8fHQgaW5zdGFuY2VvZiBTdHJpbmd9LHV0aWwuaXNPYmplY3Q9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJlwib2JqZWN0XCI9PXR5cGVvZiB0fSx1dGlsLmlzc2V0PXV0aWwuaXNTZXQ9ZnVuY3Rpb24odCxlKXt2YXIgcj10W2VdO3JldHVybiEobnVsbD09cnx8IXQuaGFzT3duUHJvcGVydHkoZSkpJiYoXCJvYmplY3RcIiE9dHlwZW9mIHJ8fChBcnJheS5pc0FycmF5KHIpP3IubGVuZ3RoOk9iamVjdC5rZXlzKHIpLmxlbmd0aCk+MCl9LHV0aWwuQnVmZmVyPWZ1bmN0aW9uKCl7dHJ5e3ZhciB0PXV0aWwuaW5xdWlyZShcImJ1ZmZlclwiKS5CdWZmZXI7cmV0dXJuIHQucHJvdG90eXBlLnV0ZjhXcml0ZT90Om51bGx9Y2F0Y2godCl7cmV0dXJuIG51bGx9fSgpLHV0aWwuX0J1ZmZlcl9mcm9tPW51bGwsdXRpbC5fQnVmZmVyX2FsbG9jVW5zYWZlPW51bGwsdXRpbC5uZXdCdWZmZXI9ZnVuY3Rpb24odCl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHQ/dXRpbC5CdWZmZXI/dXRpbC5fQnVmZmVyX2FsbG9jVW5zYWZlKHQpOm5ldyB1dGlsLkFycmF5KHQpOnV0aWwuQnVmZmVyP3V0aWwuX0J1ZmZlcl9mcm9tKHQpOlwidW5kZWZpbmVkXCI9PXR5cGVvZiBVaW50OEFycmF5P3Q6bmV3IFVpbnQ4QXJyYXkodCl9LHV0aWwuQXJyYXk9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFVpbnQ4QXJyYXk/VWludDhBcnJheTpBcnJheSx1dGlsLkxvbmc9dXRpbC5nbG9iYWwuZGNvZGVJTyYmdXRpbC5nbG9iYWwuZGNvZGVJTy5Mb25nfHx1dGlsLmdsb2JhbC5Mb25nfHx1dGlsLmlucXVpcmUoXCJsb25nXCIpLHV0aWwua2V5MlJlPS9edHJ1ZXxmYWxzZXwwfDEkLyx1dGlsLmtleTMyUmU9L14tPyg/OjB8WzEtOV1bMC05XSopJC8sdXRpbC5rZXk2NFJlPS9eKD86W1xcXFx4MDAtXFxcXHhmZl17OH18LT8oPzowfFsxLTldWzAtOV0qKSkkLyx1dGlsLmxvbmdUb0hhc2g9ZnVuY3Rpb24odCl7cmV0dXJuIHQ/dXRpbC5Mb25nQml0cy5mcm9tKHQpLnRvSGFzaCgpOnV0aWwuTG9uZ0JpdHMuemVyb0hhc2h9LHV0aWwubG9uZ0Zyb21IYXNoPWZ1bmN0aW9uKHQsZSl7dmFyIHI9dXRpbC5Mb25nQml0cy5mcm9tSGFzaCh0KTtyZXR1cm4gdXRpbC5Mb25nP3V0aWwuTG9uZy5mcm9tQml0cyhyLmxvLHIuaGksZSk6ci50b051bWJlcihCb29sZWFuKGUpKX0sdXRpbC5tZXJnZT1tZXJnZSx1dGlsLmxjRmlyc3Q9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkrdC5zdWJzdHJpbmcoMSl9LHV0aWwubmV3RXJyb3I9bmV3RXJyb3IsdXRpbC5Qcm90b2NvbEVycm9yPW5ld0Vycm9yKFwiUHJvdG9jb2xFcnJvclwiKSx1dGlsLm9uZU9mR2V0dGVyPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT17fSxyPTA7cjx0Lmxlbmd0aDsrK3IpZVt0W3JdXT0xO3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgdD1PYmplY3Qua2V5cyh0aGlzKSxyPXQubGVuZ3RoLTE7cj4tMTstLXIpaWYoMT09PWVbdFtyXV0mJnZvaWQgMCE9PXRoaXNbdFtyXV0mJm51bGwhPT10aGlzW3Rbcl1dKXJldHVybiB0W3JdfX0sdXRpbC5vbmVPZlNldHRlcj1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDsrK3IpdFtyXSE9PWUmJmRlbGV0ZSB0aGlzW3Rbcl1dfX0sdXRpbC50b0pTT05PcHRpb25zPXtsb25nczpTdHJpbmcsZW51bXM6U3RyaW5nLGJ5dGVzOlN0cmluZyxqc29uOiEwfSx1dGlsLl9jb25maWd1cmU9ZnVuY3Rpb24oKXt2YXIgdD11dGlsLkJ1ZmZlcjtpZighdClyZXR1cm4gdm9pZCh1dGlsLl9CdWZmZXJfZnJvbT11dGlsLl9CdWZmZXJfYWxsb2NVbnNhZmU9bnVsbCk7dXRpbC5fQnVmZmVyX2Zyb209dC5mcm9tIT09VWludDhBcnJheS5mcm9tJiZ0LmZyb218fGZ1bmN0aW9uKGUscil7cmV0dXJuIG5ldyB0KGUscil9LHV0aWwuX0J1ZmZlcl9hbGxvY1Vuc2FmZT10LmFsbG9jVW5zYWZlfHxmdW5jdGlvbihlKXtyZXR1cm4gbmV3IHQoZSl9fTtcbn0se1wiLi9sb25nYml0c1wiOjIzLFwiQHByb3RvYnVmanMvYXNwcm9taXNlXCI6OSxcIkBwcm90b2J1ZmpzL2Jhc2U2NFwiOjEwLFwiQHByb3RvYnVmanMvZXZlbnRlbWl0dGVyXCI6MTEsXCJAcHJvdG9idWZqcy9mbG9hdFwiOjEyLFwiQHByb3RvYnVmanMvaW5xdWlyZVwiOjEzLFwiQHByb3RvYnVmanMvcG9vbFwiOjE0LFwiQHByb3RvYnVmanMvdXRmOFwiOjE1fV0sMjU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gT3AodCxpLHIpe3RoaXMuZm49dCx0aGlzLmxlbj1pLHRoaXMubmV4dD12b2lkIDAsdGhpcy52YWw9cn1mdW5jdGlvbiBub29wKCl7fWZ1bmN0aW9uIFN0YXRlKHQpe3RoaXMuaGVhZD10LmhlYWQsdGhpcy50YWlsPXQudGFpbCx0aGlzLmxlbj10Lmxlbix0aGlzLm5leHQ9dC5zdGF0ZXN9ZnVuY3Rpb24gV3JpdGVyKCl7dGhpcy5sZW49MCx0aGlzLmhlYWQ9bmV3IE9wKG5vb3AsMCwwKSx0aGlzLnRhaWw9dGhpcy5oZWFkLHRoaXMuc3RhdGVzPW51bGx9ZnVuY3Rpb24gd3JpdGVCeXRlKHQsaSxyKXtpW3JdPTI1NSZ0fWZ1bmN0aW9uIHdyaXRlVmFyaW50MzIodCxpLHIpe2Zvcig7dD4xMjc7KWlbcisrXT0xMjcmdHwxMjgsdD4+Pj03O2lbcl09dH1mdW5jdGlvbiBWYXJpbnRPcCh0LGkpe3RoaXMubGVuPXQsdGhpcy5uZXh0PXZvaWQgMCx0aGlzLnZhbD1pfWZ1bmN0aW9uIHdyaXRlVmFyaW50NjQodCxpLHIpe2Zvcig7dC5oaTspaVtyKytdPTEyNyZ0LmxvfDEyOCx0LmxvPSh0LmxvPj4+N3x0LmhpPDwyNSk+Pj4wLHQuaGk+Pj49Nztmb3IoO3QubG8+MTI3OylpW3IrK109MTI3JnQubG98MTI4LHQubG89dC5sbz4+Pjc7aVtyKytdPXQubG99ZnVuY3Rpb24gd3JpdGVGaXhlZDMyKHQsaSxyKXtpW3JdPTI1NSZ0LGlbcisxXT10Pj4+OCYyNTUsaVtyKzJdPXQ+Pj4xNiYyNTUsaVtyKzNdPXQ+Pj4yNH1tb2R1bGUuZXhwb3J0cz1Xcml0ZXI7dmFyIHV0aWw9cmVxdWlyZShcIi4vdXRpbC9taW5pbWFsXCIpLEJ1ZmZlcldyaXRlcixMb25nQml0cz11dGlsLkxvbmdCaXRzLGJhc2U2ND11dGlsLmJhc2U2NCx1dGY4PXV0aWwudXRmODtXcml0ZXIuY3JlYXRlPXV0aWwuQnVmZmVyP2Z1bmN0aW9uKCl7cmV0dXJuKFdyaXRlci5jcmVhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEJ1ZmZlcldyaXRlcn0pKCl9OmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBXcml0ZXJ9LFdyaXRlci5hbGxvYz1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHV0aWwuQXJyYXkodCl9LHV0aWwuQXJyYXkhPT1BcnJheSYmKFdyaXRlci5hbGxvYz11dGlsLnBvb2woV3JpdGVyLmFsbG9jLHV0aWwuQXJyYXkucHJvdG90eXBlLnN1YmFycmF5KSksV3JpdGVyLnByb3RvdHlwZS5fcHVzaD1mdW5jdGlvbih0LGkscil7cmV0dXJuIHRoaXMudGFpbD10aGlzLnRhaWwubmV4dD1uZXcgT3AodCxpLHIpLHRoaXMubGVuKz1pLHRoaXN9LFZhcmludE9wLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKE9wLnByb3RvdHlwZSksVmFyaW50T3AucHJvdG90eXBlLmZuPXdyaXRlVmFyaW50MzIsV3JpdGVyLnByb3RvdHlwZS51aW50MzI9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubGVuKz0odGhpcy50YWlsPXRoaXMudGFpbC5uZXh0PW5ldyBWYXJpbnRPcCgodD4+Pj0wKTwxMjg/MTp0PDE2Mzg0PzI6dDwyMDk3MTUyPzM6dDwyNjg0MzU0NTY/NDo1LHQpKS5sZW4sdGhpc30sV3JpdGVyLnByb3RvdHlwZS5pbnQzMj1mdW5jdGlvbih0KXtyZXR1cm4gdDwwP3RoaXMuX3B1c2god3JpdGVWYXJpbnQ2NCwxMCxMb25nQml0cy5mcm9tTnVtYmVyKHQpKTp0aGlzLnVpbnQzMih0KX0sV3JpdGVyLnByb3RvdHlwZS5zaW50MzI9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudWludDMyKCh0PDwxXnQ+PjMxKT4+PjApfSxXcml0ZXIucHJvdG90eXBlLnVpbnQ2ND1mdW5jdGlvbih0KXt2YXIgaT1Mb25nQml0cy5mcm9tKHQpO3JldHVybiB0aGlzLl9wdXNoKHdyaXRlVmFyaW50NjQsaS5sZW5ndGgoKSxpKX0sV3JpdGVyLnByb3RvdHlwZS5pbnQ2ND1Xcml0ZXIucHJvdG90eXBlLnVpbnQ2NCxXcml0ZXIucHJvdG90eXBlLnNpbnQ2ND1mdW5jdGlvbih0KXt2YXIgaT1Mb25nQml0cy5mcm9tKHQpLnp6RW5jb2RlKCk7cmV0dXJuIHRoaXMuX3B1c2god3JpdGVWYXJpbnQ2NCxpLmxlbmd0aCgpLGkpfSxXcml0ZXIucHJvdG90eXBlLmJvb2w9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3B1c2god3JpdGVCeXRlLDEsdD8xOjApfSxXcml0ZXIucHJvdG90eXBlLmZpeGVkMzI9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3B1c2god3JpdGVGaXhlZDMyLDQsdD4+PjApfSxXcml0ZXIucHJvdG90eXBlLnNmaXhlZDMyPVdyaXRlci5wcm90b3R5cGUuZml4ZWQzMixXcml0ZXIucHJvdG90eXBlLmZpeGVkNjQ9ZnVuY3Rpb24odCl7dmFyIGk9TG9uZ0JpdHMuZnJvbSh0KTtyZXR1cm4gdGhpcy5fcHVzaCh3cml0ZUZpeGVkMzIsNCxpLmxvKS5fcHVzaCh3cml0ZUZpeGVkMzIsNCxpLmhpKX0sV3JpdGVyLnByb3RvdHlwZS5zZml4ZWQ2ND1Xcml0ZXIucHJvdG90eXBlLmZpeGVkNjQsV3JpdGVyLnByb3RvdHlwZS5mbG9hdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fcHVzaCh1dGlsLmZsb2F0LndyaXRlRmxvYXRMRSw0LHQpfSxXcml0ZXIucHJvdG90eXBlLmRvdWJsZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fcHVzaCh1dGlsLmZsb2F0LndyaXRlRG91YmxlTEUsOCx0KX07dmFyIHdyaXRlQnl0ZXM9dXRpbC5BcnJheS5wcm90b3R5cGUuc2V0P2Z1bmN0aW9uKHQsaSxyKXtpLnNldCh0LHIpfTpmdW5jdGlvbih0LGkscil7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDsrK2UpaVtyK2VdPXRbZV19O1dyaXRlci5wcm90b3R5cGUuYnl0ZXM9ZnVuY3Rpb24odCl7dmFyIGk9dC5sZW5ndGg+Pj4wO2lmKCFpKXJldHVybiB0aGlzLl9wdXNoKHdyaXRlQnl0ZSwxLDApO2lmKHV0aWwuaXNTdHJpbmcodCkpe3ZhciByPVdyaXRlci5hbGxvYyhpPWJhc2U2NC5sZW5ndGgodCkpO2Jhc2U2NC5kZWNvZGUodCxyLDApLHQ9cn1yZXR1cm4gdGhpcy51aW50MzIoaSkuX3B1c2god3JpdGVCeXRlcyxpLHQpfSxXcml0ZXIucHJvdG90eXBlLnN0cmluZz1mdW5jdGlvbih0KXt2YXIgaT11dGY4Lmxlbmd0aCh0KTtyZXR1cm4gaT90aGlzLnVpbnQzMihpKS5fcHVzaCh1dGY4LndyaXRlLGksdCk6dGhpcy5fcHVzaCh3cml0ZUJ5dGUsMSwwKX0sV3JpdGVyLnByb3RvdHlwZS5mb3JrPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhdGVzPW5ldyBTdGF0ZSh0aGlzKSx0aGlzLmhlYWQ9dGhpcy50YWlsPW5ldyBPcChub29wLDAsMCksdGhpcy5sZW49MCx0aGlzfSxXcml0ZXIucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhdGVzPyh0aGlzLmhlYWQ9dGhpcy5zdGF0ZXMuaGVhZCx0aGlzLnRhaWw9dGhpcy5zdGF0ZXMudGFpbCx0aGlzLmxlbj10aGlzLnN0YXRlcy5sZW4sdGhpcy5zdGF0ZXM9dGhpcy5zdGF0ZXMubmV4dCk6KHRoaXMuaGVhZD10aGlzLnRhaWw9bmV3IE9wKG5vb3AsMCwwKSx0aGlzLmxlbj0wKSx0aGlzfSxXcml0ZXIucHJvdG90eXBlLmxkZWxpbT1mdW5jdGlvbigpe3ZhciB0PXRoaXMuaGVhZCxpPXRoaXMudGFpbCxyPXRoaXMubGVuO3JldHVybiB0aGlzLnJlc2V0KCkudWludDMyKHIpLHImJih0aGlzLnRhaWwubmV4dD10Lm5leHQsdGhpcy50YWlsPWksdGhpcy5sZW4rPXIpLHRoaXN9LFdyaXRlci5wcm90b3R5cGUuZmluaXNoPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuaGVhZC5uZXh0LGk9dGhpcy5jb25zdHJ1Y3Rvci5hbGxvYyh0aGlzLmxlbikscj0wO3Q7KXQuZm4odC52YWwsaSxyKSxyKz10Lmxlbix0PXQubmV4dDtyZXR1cm4gaX0sV3JpdGVyLl9jb25maWd1cmU9ZnVuY3Rpb24odCl7QnVmZmVyV3JpdGVyPXR9O1xufSx7XCIuL3V0aWwvbWluaW1hbFwiOjI0fV0sMjY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gQnVmZmVyV3JpdGVyKCl7V3JpdGVyLmNhbGwodGhpcyl9ZnVuY3Rpb24gd3JpdGVTdHJpbmdCdWZmZXIocix0LGUpe3IubGVuZ3RoPDQwP3V0aWwudXRmOC53cml0ZShyLHQsZSk6dC51dGY4V3JpdGUocixlKX1tb2R1bGUuZXhwb3J0cz1CdWZmZXJXcml0ZXI7dmFyIFdyaXRlcj1yZXF1aXJlKFwiLi93cml0ZXJcIik7KEJ1ZmZlcldyaXRlci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShXcml0ZXIucHJvdG90eXBlKSkuY29uc3RydWN0b3I9QnVmZmVyV3JpdGVyO3ZhciB1dGlsPXJlcXVpcmUoXCIuL3V0aWwvbWluaW1hbFwiKSxCdWZmZXI9dXRpbC5CdWZmZXI7QnVmZmVyV3JpdGVyLmFsbG9jPWZ1bmN0aW9uKHIpe3JldHVybihCdWZmZXJXcml0ZXIuYWxsb2M9dXRpbC5fQnVmZmVyX2FsbG9jVW5zYWZlKShyKX07dmFyIHdyaXRlQnl0ZXNCdWZmZXI9QnVmZmVyJiZCdWZmZXIucHJvdG90eXBlIGluc3RhbmNlb2YgVWludDhBcnJheSYmXCJzZXRcIj09PUJ1ZmZlci5wcm90b3R5cGUuc2V0Lm5hbWU/ZnVuY3Rpb24ocix0LGUpe3Quc2V0KHIsZSl9OmZ1bmN0aW9uKHIsdCxlKXtpZihyLmNvcHkpci5jb3B5KHQsZSwwLHIubGVuZ3RoKTtlbHNlIGZvcih2YXIgZj0wO2Y8ci5sZW5ndGg7KXRbZSsrXT1yW2YrK119O0J1ZmZlcldyaXRlci5wcm90b3R5cGUuYnl0ZXM9ZnVuY3Rpb24ocil7dXRpbC5pc1N0cmluZyhyKSYmKHI9dXRpbC5fQnVmZmVyX2Zyb20ocixcImJhc2U2NFwiKSk7dmFyIHQ9ci5sZW5ndGg+Pj4wO3JldHVybiB0aGlzLnVpbnQzMih0KSx0JiZ0aGlzLl9wdXNoKHdyaXRlQnl0ZXNCdWZmZXIsdCxyKSx0aGlzfSxCdWZmZXJXcml0ZXIucHJvdG90eXBlLnN0cmluZz1mdW5jdGlvbihyKXt2YXIgdD1CdWZmZXIuYnl0ZUxlbmd0aChyKTtyZXR1cm4gdGhpcy51aW50MzIodCksdCYmdGhpcy5fcHVzaCh3cml0ZVN0cmluZ0J1ZmZlcix0LHIpLHRoaXN9O1xufSx7XCIuL3V0aWwvbWluaW1hbFwiOjI0LFwiLi93cml0ZXJcIjoyNX1dLDI3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbiFmdW5jdGlvbihlLHQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGNbaV09YS5hcHBseSh0LGUpLGkrK31mdW5jdGlvbiBhKGUpe3ZhciBuPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiBmdW5jdGlvbigpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGU/ZS5hcHBseSh0LG4pOm5ldyBGdW5jdGlvbihcIlwiK2UpKCl9fWZ1bmN0aW9uIG8oZSl7aWYodSlzZXRUaW1lb3V0KGEobyxlKSwwKTtlbHNle3ZhciB0PWNbZV07aWYodCl7dT0hMDt0cnl7dCgpfWZpbmFsbHl7cihlKSx1PSExfX19fWZ1bmN0aW9uIHIoZSl7ZGVsZXRlIGNbZV19aWYoIWUuc2V0SW1tZWRpYXRlKXt2YXIgcyxpPTEsYz17fSx1PSExLGY9ZS5kb2N1bWVudCxsPU9iamVjdC5nZXRQcm90b3R5cGVPZiYmT2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO2w9bCYmbC5zZXRUaW1lb3V0P2w6ZSxcIltvYmplY3QgcHJvY2Vzc11cIj09PXt9LnRvU3RyaW5nLmNhbGwoZS5wcm9jZXNzKT9mdW5jdGlvbigpe3M9ZnVuY3Rpb24oKXt2YXIgZT1uKGFyZ3VtZW50cyk7cmV0dXJuIHByb2Nlc3MubmV4dFRpY2soYShvLGUpKSxlfX0oKTpmdW5jdGlvbigpe2lmKGUucG9zdE1lc3NhZ2UmJiFlLmltcG9ydFNjcmlwdHMpe3ZhciB0PSEwLG49ZS5vbm1lc3NhZ2U7cmV0dXJuIGUub25tZXNzYWdlPWZ1bmN0aW9uKCl7dD0hMX0sZS5wb3N0TWVzc2FnZShcIlwiLFwiKlwiKSxlLm9ubWVzc2FnZT1uLHR9fSgpP2Z1bmN0aW9uKCl7dmFyIHQ9XCJzZXRJbW1lZGlhdGUkXCIrTWF0aC5yYW5kb20oKStcIiRcIixhPWZ1bmN0aW9uKG4pe24uc291cmNlPT09ZSYmXCJzdHJpbmdcIj09dHlwZW9mIG4uZGF0YSYmMD09PW4uZGF0YS5pbmRleE9mKHQpJiZvKCtuLmRhdGEuc2xpY2UodC5sZW5ndGgpKX07ZS5hZGRFdmVudExpc3RlbmVyP2UuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIixhLCExKTplLmF0dGFjaEV2ZW50KFwib25tZXNzYWdlXCIsYSkscz1mdW5jdGlvbigpe3ZhciBhPW4oYXJndW1lbnRzKTtyZXR1cm4gZS5wb3N0TWVzc2FnZSh0K2EsXCIqXCIpLGF9fSgpOmUuTWVzc2FnZUNoYW5uZWw/ZnVuY3Rpb24oKXt2YXIgZT1uZXcgTWVzc2FnZUNoYW5uZWw7ZS5wb3J0MS5vbm1lc3NhZ2U9ZnVuY3Rpb24oZSl7byhlLmRhdGEpfSxzPWZ1bmN0aW9uKCl7dmFyIHQ9bihhcmd1bWVudHMpO3JldHVybiBlLnBvcnQyLnBvc3RNZXNzYWdlKHQpLHR9fSgpOmYmJlwib25yZWFkeXN0YXRlY2hhbmdlXCJpbiBmLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik/ZnVuY3Rpb24oKXt2YXIgZT1mLmRvY3VtZW50RWxlbWVudDtzPWZ1bmN0aW9uKCl7dmFyIHQ9bihhcmd1bWVudHMpLGE9Zi5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO3JldHVybiBhLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe28odCksYS5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbCxlLnJlbW92ZUNoaWxkKGEpLGE9bnVsbH0sZS5hcHBlbmRDaGlsZChhKSx0fX0oKTpmdW5jdGlvbigpe3M9ZnVuY3Rpb24oKXt2YXIgZT1uKGFyZ3VtZW50cyk7cmV0dXJuIHNldFRpbWVvdXQoYShvLGUpLDApLGV9fSgpLGwuc2V0SW1tZWRpYXRlPXMsbC5jbGVhckltbWVkaWF0ZT1yfX0obmV3IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKSk7XG59LHt9XSwyODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KHQscil7dmFyIGk9dC5zcGxpdChcIi5cIiksZT1hOyEoaVswXWluIGUpJiZlLmV4ZWNTY3JpcHQmJmUuZXhlY1NjcmlwdChcInZhciBcIitpWzBdKTtmb3IodmFyIHM7aS5sZW5ndGgmJihzPWkuc2hpZnQoKSk7KWkubGVuZ3RofHx2b2lkIDA9PT1yP2U9ZVtzXT9lW3NdOmVbc109e306ZVtzXT1yfWZ1bmN0aW9uIHIodCl7dmFyIHIsaSxlLHMsaCxuLGEsbyxsLHUsYz10Lmxlbmd0aCxiPTAseT1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7Zm9yKG89MDtvPGM7KytvKXRbb10+YiYmKGI9dFtvXSksdFtvXTx5JiYoeT10W29dKTtmb3Iocj0xPDxiLGk9bmV3KGY/VWludDMyQXJyYXk6QXJyYXkpKHIpLGU9MSxzPTAsaD0yO2U8PWI7KXtmb3Iobz0wO288YzsrK28paWYodFtvXT09PWUpe2ZvcihuPTAsYT1zLGw9MDtsPGU7KytsKW49bjw8MXwxJmEsYT4+PTE7Zm9yKHU9ZTw8MTZ8byxsPW47bDxyO2wrPWgpaVtsXT11Oysrc30rK2Usczw8PTEsaDw8PTF9cmV0dXJuW2ksYix5XX1mdW5jdGlvbiBpKHQscil7c3dpdGNoKHRoaXMuZz1bXSx0aGlzLmg9MzI3NjgsdGhpcy5kPXRoaXMuZj10aGlzLmE9dGhpcy5sPTAsdGhpcy5pbnB1dD1mP25ldyBVaW50OEFycmF5KHQpOnQsdGhpcy5tPSExLHRoaXMuaT1sLHRoaXMucz0hMSwhciYmKHI9e30pfHwoci5pbmRleCYmKHRoaXMuYT1yLmluZGV4KSxyLmJ1ZmZlclNpemUmJih0aGlzLmg9ci5idWZmZXJTaXplKSxyLmJ1ZmZlclR5cGUmJih0aGlzLmk9ci5idWZmZXJUeXBlKSxyLnJlc2l6ZSYmKHRoaXMucz1yLnJlc2l6ZSkpLHRoaXMuaSl7Y2FzZSBvOnRoaXMuYj0zMjc2OCx0aGlzLmM9bmV3KGY/VWludDhBcnJheTpBcnJheSkoMzI3NjgrdGhpcy5oKzI1OCk7YnJlYWs7Y2FzZSBsOnRoaXMuYj0wLHRoaXMuYz1uZXcoZj9VaW50OEFycmF5OkFycmF5KSh0aGlzLmgpLHRoaXMuZT10aGlzLkEsdGhpcy5uPXRoaXMudyx0aGlzLmo9dGhpcy56O2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJpbnZhbGlkIGluZmxhdGUgbW9kZVwiKX19ZnVuY3Rpb24gZSh0LHIpe2Zvcih2YXIgaSxlPXQuZixzPXQuZCxoPXQuaW5wdXQsbj10LmEsYT1oLmxlbmd0aDtzPHI7KXtpZihuPj1hKXRocm93IEVycm9yKFwiaW5wdXQgYnVmZmVyIGlzIGJyb2tlblwiKTtlfD1oW24rK108PHMscys9OH1yZXR1cm4gaT1lJigxPDxyKS0xLHQuZj1lPj4+cix0LmQ9cy1yLHQuYT1uLGl9ZnVuY3Rpb24gcyh0LHIpe2Zvcih2YXIgaSxlLHM9dC5mLGg9dC5kLG49dC5pbnB1dCxhPXQuYSxmPW4ubGVuZ3RoLG89clswXSxsPXJbMV07aDxsJiYhKGE+PWYpOylzfD1uW2ErK108PGgsaCs9ODtyZXR1cm4gaT1vW3MmKDE8PGwpLTFdLGU9aT4+PjE2LHQuZj1zPj5lLHQuZD1oLWUsdC5hPWEsNjU1MzUmaX1mdW5jdGlvbiBoKHQpe2Z1bmN0aW9uIGkodCxyLGkpe3ZhciBoLG4sYSxmPXRoaXMucTtmb3IoYT0wO2E8dDspc3dpdGNoKGg9cyh0aGlzLHIpKXtjYXNlIDE2OmZvcihuPTMrZSh0aGlzLDIpO24tLTspaVthKytdPWY7YnJlYWs7Y2FzZSAxNzpmb3Iobj0zK2UodGhpcywzKTtuLS07KWlbYSsrXT0wO2Y9MDticmVhaztjYXNlIDE4OmZvcihuPTExK2UodGhpcyw3KTtuLS07KWlbYSsrXT0wO2Y9MDticmVhaztkZWZhdWx0OmY9aVthKytdPWh9cmV0dXJuIHRoaXMucT1mLGl9dmFyIGgsbixhLG8sbD1lKHQsNSkrMjU3LHU9ZSh0LDUpKzEsYz1lKHQsNCkrNCxiPW5ldyhmP1VpbnQ4QXJyYXk6QXJyYXkpKHAubGVuZ3RoKTtmb3Iobz0wO288YzsrK28pYltwW29dXT1lKHQsMyk7aWYoIWYpZm9yKG89YyxjPWIubGVuZ3RoO288YzsrK28pYltwW29dXT0wO2g9cihiKSxuPW5ldyhmP1VpbnQ4QXJyYXk6QXJyYXkpKGwpLGE9bmV3KGY/VWludDhBcnJheTpBcnJheSkodSksdC5xPTAsdC5qKHIoaS5jYWxsKHQsbCxoLG4pKSxyKGkuY2FsbCh0LHUsaCxhKSkpfWZ1bmN0aW9uIG4odCxyKXt2YXIgZSxzO3N3aXRjaCh0aGlzLmlucHV0PXQsdGhpcy5hPTAsIXImJihyPXt9KXx8KHIuaW5kZXgmJih0aGlzLmE9ci5pbmRleCksci52ZXJpZnkmJih0aGlzLkI9ci52ZXJpZnkpKSxlPXRbdGhpcy5hKytdLHM9dFt0aGlzLmErK10sMTUmZSl7Y2FzZSBqOnRoaXMubWV0aG9kPWo7YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcihcInVuc3VwcG9ydGVkIGNvbXByZXNzaW9uIG1ldGhvZFwiKX1pZigwIT0oKGU8PDgpK3MpJTMxKXRocm93IEVycm9yKFwiaW52YWxpZCBmY2hlY2sgZmxhZzpcIisoKGU8PDgpK3MpJTMxKTtpZigzMiZzKXRocm93IEVycm9yKFwiZmRpY3QgZmxhZyBpcyBub3Qgc3VwcG9ydGVkXCIpO3RoaXMucj1uZXcgaSh0LHtpbmRleDp0aGlzLmEsYnVmZmVyU2l6ZTpyLmJ1ZmZlclNpemUsYnVmZmVyVHlwZTpyLmJ1ZmZlclR5cGUscmVzaXplOnIucmVzaXplfSl9dmFyIGE9dGhpcyxmPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBVaW50OEFycmF5JiZcInVuZGVmaW5lZFwiIT10eXBlb2YgVWludDE2QXJyYXkmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBVaW50MzJBcnJheSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIERhdGFWaWV3LG89MCxsPTEsdT17dTpvLHQ6bH07aS5wcm90b3R5cGUuaz1mdW5jdGlvbigpe2Zvcig7IXRoaXMubTspe3ZhciB0PWUodGhpcywzKTtzd2l0Y2goMSZ0JiYodGhpcy5tPSEwKSx0Pj4+PTEpe2Nhc2UgMDp2YXIgcj10aGlzLmlucHV0LGk9dGhpcy5hLHM9dGhpcy5jLG49dGhpcy5iLGE9ci5sZW5ndGgsdT12b2lkIDAsYz12b2lkIDAsYj1zLmxlbmd0aCx5PXZvaWQgMDtpZih0aGlzLmQ9dGhpcy5mPTAsaSsxPj1hKXRocm93IEVycm9yKFwiaW52YWxpZCB1bmNvbXByZXNzZWQgYmxvY2sgaGVhZGVyOiBMRU5cIik7aWYodT1yW2krK118cltpKytdPDw4LGkrMT49YSl0aHJvdyBFcnJvcihcImludmFsaWQgdW5jb21wcmVzc2VkIGJsb2NrIGhlYWRlcjogTkxFTlwiKTtpZihjPXJbaSsrXXxyW2krK108PDgsdT09PX5jKXRocm93IEVycm9yKFwiaW52YWxpZCB1bmNvbXByZXNzZWQgYmxvY2sgaGVhZGVyOiBsZW5ndGggdmVyaWZ5XCIpO2lmKGkrdT5yLmxlbmd0aCl0aHJvdyBFcnJvcihcImlucHV0IGJ1ZmZlciBpcyBicm9rZW5cIik7c3dpdGNoKHRoaXMuaSl7Y2FzZSBvOmZvcig7bit1PnMubGVuZ3RoOyl7aWYoeT1iLW4sdS09eSxmKXMuc2V0KHIuc3ViYXJyYXkoaSxpK3kpLG4pLG4rPXksaSs9eTtlbHNlIGZvcig7eS0tOylzW24rK109cltpKytdO3RoaXMuYj1uLHM9dGhpcy5lKCksbj10aGlzLmJ9YnJlYWs7Y2FzZSBsOmZvcig7bit1PnMubGVuZ3RoOylzPXRoaXMuZSh7cDoyfSk7YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcihcImludmFsaWQgaW5mbGF0ZSBtb2RlXCIpfWlmKGYpcy5zZXQoci5zdWJhcnJheShpLGkrdSksbiksbis9dSxpKz11O2Vsc2UgZm9yKDt1LS07KXNbbisrXT1yW2krK107dGhpcy5hPWksdGhpcy5iPW4sdGhpcy5jPXM7YnJlYWs7Y2FzZSAxOnRoaXMuaihULFMpO2JyZWFrO2Nhc2UgMjpoKHRoaXMpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJ1bmtub3duIEJUWVBFOiBcIit0KX19cmV0dXJuIHRoaXMubigpfTt2YXIgYyxiLHk9WzE2LDE3LDE4LDAsOCw3LDksNiwxMCw1LDExLDQsMTIsMywxMywyLDE0LDEsMTVdLHA9Zj9uZXcgVWludDE2QXJyYXkoeSk6eSxkPVszLDQsNSw2LDcsOCw5LDEwLDExLDEzLDE1LDE3LDE5LDIzLDI3LDMxLDM1LDQzLDUxLDU5LDY3LDgzLDk5LDExNSwxMzEsMTYzLDE5NSwyMjcsMjU4LDI1OCwyNThdLHY9Zj9uZXcgVWludDE2QXJyYXkoZCk6ZCxnPVswLDAsMCwwLDAsMCwwLDAsMSwxLDEsMSwyLDIsMiwyLDMsMywzLDMsNCw0LDQsNCw1LDUsNSw1LDAsMCwwXSx3PWY/bmV3IFVpbnQ4QXJyYXkoZyk6ZyxBPVsxLDIsMyw0LDUsNyw5LDEzLDE3LDI1LDMzLDQ5LDY1LDk3LDEyOSwxOTMsMjU3LDM4NSw1MTMsNzY5LDEwMjUsMTUzNywyMDQ5LDMwNzMsNDA5Nyw2MTQ1LDgxOTMsMTIyODksMTYzODUsMjQ1NzddLGs9Zj9uZXcgVWludDE2QXJyYXkoQSk6QSxVPVswLDAsMCwwLDEsMSwyLDIsMywzLDQsNCw1LDUsNiw2LDcsNyw4LDgsOSw5LDEwLDEwLDExLDExLDEyLDEyLDEzLDEzXSxFPWY/bmV3IFVpbnQ4QXJyYXkoVSk6VSxtPW5ldyhmP1VpbnQ4QXJyYXk6QXJyYXkpKDI4OCk7Zm9yKGM9MCxiPW0ubGVuZ3RoO2M8YjsrK2MpbVtjXT0xNDM+PWM/ODoyNTU+PWM/OToyNzk+PWM/Nzo4O3ZhciB6LEksVD1yKG0pLHg9bmV3KGY/VWludDhBcnJheTpBcnJheSkoMzApO2Zvcih6PTAsST14Lmxlbmd0aDt6PEk7Kyt6KXhbel09NTt2YXIgUz1yKHgpO2kucHJvdG90eXBlLmo9ZnVuY3Rpb24odCxyKXt2YXIgaT10aGlzLmMsaD10aGlzLmI7dGhpcy5vPXQ7Zm9yKHZhciBuLGEsZixvLGw9aS5sZW5ndGgtMjU4OzI1NiE9PShuPXModGhpcyx0KSk7KWlmKDI1Nj5uKWg+PWwmJih0aGlzLmI9aCxpPXRoaXMuZSgpLGg9dGhpcy5iKSxpW2grK109bjtlbHNlIGZvcihhPW4tMjU3LG89dlthXSwwPHdbYV0mJihvKz1lKHRoaXMsd1thXSkpLG49cyh0aGlzLHIpLGY9a1tuXSwwPEVbbl0mJihmKz1lKHRoaXMsRVtuXSkpLGg+PWwmJih0aGlzLmI9aCxpPXRoaXMuZSgpLGg9dGhpcy5iKTtvLS07KWlbaF09aVtoKystZl07Zm9yKDs4PD10aGlzLmQ7KXRoaXMuZC09OCx0aGlzLmEtLTt0aGlzLmI9aH0saS5wcm90b3R5cGUuej1mdW5jdGlvbih0LHIpe3ZhciBpPXRoaXMuYyxoPXRoaXMuYjt0aGlzLm89dDtmb3IodmFyIG4sYSxmLG8sbD1pLmxlbmd0aDsyNTYhPT0obj1zKHRoaXMsdCkpOylpZigyNTY+biloPj1sJiYoaT10aGlzLmUoKSxsPWkubGVuZ3RoKSxpW2grK109bjtlbHNlIGZvcihhPW4tMjU3LG89dlthXSwwPHdbYV0mJihvKz1lKHRoaXMsd1thXSkpLG49cyh0aGlzLHIpLGY9a1tuXSwwPEVbbl0mJihmKz1lKHRoaXMsRVtuXSkpLGgrbz5sJiYoaT10aGlzLmUoKSxsPWkubGVuZ3RoKTtvLS07KWlbaF09aVtoKystZl07Zm9yKDs4PD10aGlzLmQ7KXRoaXMuZC09OCx0aGlzLmEtLTt0aGlzLmI9aH0saS5wcm90b3R5cGUuZT1mdW5jdGlvbigpe3ZhciB0LHIsaT1uZXcoZj9VaW50OEFycmF5OkFycmF5KSh0aGlzLmItMzI3NjgpLGU9dGhpcy5iLTMyNzY4LHM9dGhpcy5jO2lmKGYpaS5zZXQocy5zdWJhcnJheSgzMjc2OCxpLmxlbmd0aCkpO2Vsc2UgZm9yKHQ9MCxyPWkubGVuZ3RoO3Q8cjsrK3QpaVt0XT1zW3QrMzI3NjhdO2lmKHRoaXMuZy5wdXNoKGkpLHRoaXMubCs9aS5sZW5ndGgsZilzLnNldChzLnN1YmFycmF5KGUsZSszMjc2OCkpO2Vsc2UgZm9yKHQ9MDszMjc2OD50OysrdClzW3RdPXNbZSt0XTtyZXR1cm4gdGhpcy5iPTMyNzY4LHN9LGkucHJvdG90eXBlLkE9ZnVuY3Rpb24odCl7dmFyIHIsaSxlLHMsaD10aGlzLmlucHV0Lmxlbmd0aC90aGlzLmErMXwwLG49dGhpcy5pbnB1dCxhPXRoaXMuYztyZXR1cm4gdCYmKFwibnVtYmVyXCI9PXR5cGVvZiB0LnAmJihoPXQucCksXCJudW1iZXJcIj09dHlwZW9mIHQudiYmKGgrPXQudikpLDI+aD8oaT0obi5sZW5ndGgtdGhpcy5hKS90aGlzLm9bMl0scz1pLzIqMjU4fDAsZT1zPGEubGVuZ3RoP2EubGVuZ3RoK3M6YS5sZW5ndGg8PDEpOmU9YS5sZW5ndGgqaCxmPyhyPW5ldyBVaW50OEFycmF5KGUpLHIuc2V0KGEpKTpyPWEsdGhpcy5jPXJ9LGkucHJvdG90eXBlLm49ZnVuY3Rpb24oKXt2YXIgdCxyLGksZSxzLGg9MCxuPXRoaXMuYyxhPXRoaXMuZyxvPW5ldyhmP1VpbnQ4QXJyYXk6QXJyYXkpKHRoaXMubCsodGhpcy5iLTMyNzY4KSk7aWYoMD09PWEubGVuZ3RoKXJldHVybiBmP3RoaXMuYy5zdWJhcnJheSgzMjc2OCx0aGlzLmIpOnRoaXMuYy5zbGljZSgzMjc2OCx0aGlzLmIpO2ZvcihyPTAsaT1hLmxlbmd0aDtyPGk7KytyKWZvcih0PWFbcl0sZT0wLHM9dC5sZW5ndGg7ZTxzOysrZSlvW2grK109dFtlXTtmb3Iocj0zMjc2OCxpPXRoaXMuYjtyPGk7KytyKW9baCsrXT1uW3JdO3JldHVybiB0aGlzLmc9W10sdGhpcy5idWZmZXI9b30saS5wcm90b3R5cGUudz1mdW5jdGlvbigpe3ZhciB0LHI9dGhpcy5iO3JldHVybiBmP3RoaXMucz8odD1uZXcgVWludDhBcnJheShyKSx0LnNldCh0aGlzLmMuc3ViYXJyYXkoMCxyKSkpOnQ9dGhpcy5jLnN1YmFycmF5KDAscik6KHRoaXMuYy5sZW5ndGg+ciYmKHRoaXMuYy5sZW5ndGg9ciksdD10aGlzLmMpLHRoaXMuYnVmZmVyPXR9LG4ucHJvdG90eXBlLms9ZnVuY3Rpb24oKXt2YXIgdCxyLGk9dGhpcy5pbnB1dDtpZih0PXRoaXMuci5rKCksdGhpcy5hPXRoaXMuci5hLHRoaXMuQil7cj0oaVt0aGlzLmErK108PDI0fGlbdGhpcy5hKytdPDwxNnxpW3RoaXMuYSsrXTw8OHxpW3RoaXMuYSsrXSk+Pj4wO3ZhciBlPXQ7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpe3ZhciBzLGgsbj1lLnNwbGl0KFwiXCIpO2ZvcihzPTAsaD1uLmxlbmd0aDtzPGg7cysrKW5bc109KDI1NSZuW3NdLmNoYXJDb2RlQXQoMCkpPj4+MDtlPW59Zm9yKHZhciBhLGY9MSxvPTAsbD1lLmxlbmd0aCx1PTA7MDxsOyl7YT0xMDI0PGw/MTAyNDpsLGwtPWE7ZG97Zis9ZVt1KytdLG8rPWZ9d2hpbGUoLS1hKTtmJT02NTUyMSxvJT02NTUyMX1pZihyIT09KG88PDE2fGYpPj4+MCl0aHJvdyBFcnJvcihcImludmFsaWQgYWRsZXItMzIgY2hlY2tzdW1cIil9cmV0dXJuIHR9O3ZhciBqPTg7dChcIlpsaWIuSW5mbGF0ZVwiLG4pLHQoXCJabGliLkluZmxhdGUucHJvdG90eXBlLmRlY29tcHJlc3NcIixuLnByb3RvdHlwZS5rKTt2YXIgTixCLE8scSxMPXtBREFQVElWRTp1LnQsQkxPQ0s6dS51fTtpZihPYmplY3Qua2V5cylOPU9iamVjdC5rZXlzKEwpO2Vsc2UgZm9yKEIgaW4gTj1bXSxPPTAsTClOW08rK109Qjtmb3IoTz0wLHE9Ti5sZW5ndGg7TzxxOysrTylCPU5bT10sdChcIlpsaWIuSW5mbGF0ZS5CdWZmZXJUeXBlLlwiK0IsTFtCXSl9KS5jYWxsKHRoaXMpO1xufSx7fV19LHt9LFs3XSkoNylcbn0pO1xuXG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9zbS1yZWFkLXBiZi5tYXAuanNvbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/external/osm-read-pbf.js\n");

/***/ }),

/***/ "./src/external/priorityqueue.js":
/*!***************************************!*\
  !*** ./src/external/priorityqueue.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/**\n * FastPriorityQueue.js : a fast heap-based priority queue  in JavaScript.\n * (c) the authors\n * Licensed under the Apache License, Version 2.0.\n *\n * Speed-optimized heap-based priority queue for modern browsers and JavaScript engines.\n *\n * Usage :\n         Installation (in shell, if you use node):\n         $ npm install fastpriorityqueue\n\n         Running test program (in JavaScript):\n\n         // var FastPriorityQueue = require(\"fastpriorityqueue\");// in node\n         var x = new FastPriorityQueue();\n         x.add(1);\n         x.add(0);\n         x.add(5);\n         x.add(4);\n         x.add(3);\n         x.peek(); // should return 0, leaves x unchanged\n         x.size; // should return 5, leaves x unchanged\n         while(!x.isEmpty()) {\n           console.log(x.poll());\n         } // will print 0 1 3 4 5\n         x.trim(); // (optional) optimizes memory usage\n */\n\n\nvar defaultcomparator = function (a, b) {\n    return a < b;\n};\n\n// the provided comparator function should take a, b and return *true* when a < b\nfunction FastPriorityQueue(comparator) {\n    if (!(this instanceof FastPriorityQueue)) return new FastPriorityQueue(comparator);\n    this.array = [];\n    this.size = 0;\n    this.compare = comparator || defaultcomparator;\n}\n\n// copy the priority queue into another, and return it. Queue items are shallow-copied.\n// Runs in `O(n)` time.\nFastPriorityQueue.prototype.clone = function () {\n    var fpq = new FastPriorityQueue(this.compare);\n    fpq.size = this.size;\n    fpq.array = this.array.slice(0, this.size);\n    return fpq;\n};\n\n// Add an element into the queue\n// runs in O(log n) time\nFastPriorityQueue.prototype.add = function (myval) {\n    var i = this.size;\n    this.array[this.size] = myval;\n    this.size += 1;\n    var p;\n    var ap;\n    while (i > 0) {\n        p = (i - 1) >> 1;\n        ap = this.array[p];\n        if (!this.compare(myval, ap)) {\n            break;\n        }\n        this.array[i] = ap;\n        i = p;\n    }\n    this.array[i] = myval;\n};\n\n// replace the content of the heap by provided array and \"heapify it\"\nFastPriorityQueue.prototype.heapify = function (arr) {\n    this.array = arr;\n    this.size = arr.length;\n    var i;\n    for (i = this.size >> 1; i >= 0; i--) {\n        this._percolateDown(i);\n    }\n};\n\n// for internal use\nFastPriorityQueue.prototype._percolateUp = function (i, force) {\n    var myval = this.array[i];\n    var p;\n    var ap;\n    while (i > 0) {\n        p = (i - 1) >> 1;\n        ap = this.array[p];\n        // force will skip the compare\n        if (!force && !this.compare(myval, ap)) {\n            break;\n        }\n        this.array[i] = ap;\n        i = p;\n    }\n    this.array[i] = myval;\n};\n\n// for internal use\nFastPriorityQueue.prototype._percolateDown = function (i) {\n    var size = this.size;\n    var hsize = this.size >>> 1;\n    var ai = this.array[i];\n    var l;\n    var r;\n    var bestc;\n    while (i < hsize) {\n        l = (i << 1) + 1;\n        r = l + 1;\n        bestc = this.array[l];\n        if (r < size) {\n            if (this.compare(this.array[r], bestc)) {\n                l = r;\n                bestc = this.array[r];\n            }\n        }\n        if (!this.compare(bestc, ai)) {\n            break;\n        }\n        this.array[i] = bestc;\n        i = l;\n    }\n    this.array[i] = ai;\n};\n\n// internal\n// _removeAt(index) will remove the item at the given index from the queue,\n// retaining balance. returns the removed item, or undefined if nothing is removed.\nFastPriorityQueue.prototype._removeAt = function (index) {\n    if (index > this.size - 1 || index < 0) return undefined;\n\n    // impl1:\n    //this.array.splice(index, 1);\n    //this.heapify(this.array);\n    // impl2:\n    this._percolateUp(index, true);\n    return this.poll();\n};\n\n// remove(myval) will remove an item matching the provided value from the\n// queue, checked for equality by using the queue's comparator.\n// return true if removed, false otherwise.\nFastPriorityQueue.prototype.remove = function (myval) {\n    for (var i = 0; i < this.size; i++) {\n        if (!this.compare(this.array[i], myval) && !this.compare(myval, this.array[i])) {\n            // items match, comparator returns false both ways, remove item\n            this._removeAt(i);\n            return true;\n        }\n    }\n    return false;\n};\n\n// removeOne(callback) will execute the callback function for each item of the queue\n// and will remove the first item for which the callback will return true.\n// return the removed item, or undefined if nothing is removed.\nFastPriorityQueue.prototype.removeOne = function (callback) {\n    if (typeof callback !== \"function\") {\n        return undefined;\n    }\n    for (var i = 0; i < this.size; i++) {\n        if (callback(this.array[i])) {\n            return this._removeAt(i);\n        }\n    }\n};\n\n// remove(callback[, limit]) will execute the callback function for each item of\n// the queue and will remove each item for which the callback returns true, up to\n// a max limit of removed items if specified or no limit if unspecified.\n// return an array containing the removed items.\n// The callback function should be a pure function.\nFastPriorityQueue.prototype.removeMany = function (callback, limit) {\n    // Skip unnecessary processing for edge cases\n    if (typeof callback !== \"function\" || this.size < 1) {\n        return [];\n    }\n    limit = limit ? Math.min(limit, this.size) : this.size;\n\n    // Prepare the results container to hold up to the results limit\n    var resultSize = 0;\n    var result = new Array(limit);\n\n    // Prepare a temporary array to hold items we'll traverse through and need to keep\n    var tmpSize = 0;\n    var tmp = new Array(this.size);\n\n    while (resultSize < limit && !this.isEmpty()) {\n        // Dequeue items into either the results or our temporary array\n        var item = this.poll();\n        if (callback(item)) {\n            result[resultSize++] = item;\n        } else {\n            tmp[tmpSize++] = item;\n        }\n    }\n    // Update the result array with the exact number of results\n    result.length = resultSize;\n\n    // Re-add all the items we can keep\n    var i = 0;\n    while (i < tmpSize) {\n        this.add(tmp[i++]);\n    }\n\n    return result;\n};\n\n// Look at the top of the queue (one of the smallest elements) without removing it\n// executes in constant time\n//\n// Calling peek on an empty priority queue returns\n// the \"undefined\" value.\n// https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/undefined\n//\nFastPriorityQueue.prototype.peek = function () {\n    if (this.size == 0) return undefined;\n    return this.array[0];\n};\n\n// remove the element on top of the heap (one of the smallest elements)\n// runs in logarithmic time\n//\n// If the priority queue is empty, the function returns the\n// \"undefined\" value.\n// https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/undefined\n//\n// For long-running and large priority queues, or priority queues\n// storing large objects, you may  want to call the trim function\n// at strategic times to recover allocated memory.\nFastPriorityQueue.prototype.poll = function () {\n    if (this.size == 0) return undefined;\n    var ans = this.array[0];\n    if (this.size > 1) {\n        this.array[0] = this.array[--this.size];\n        this._percolateDown(0);\n    } else {\n        this.size -= 1;\n    }\n    return ans;\n};\n\n// This function adds the provided value to the heap, while removing\n// and returning one of the smallest elements (like poll). The size of the queue\n// thus remains unchanged.\nFastPriorityQueue.prototype.replaceTop = function (myval) {\n    if (this.size == 0) return undefined;\n    var ans = this.array[0];\n    this.array[0] = myval;\n    this._percolateDown(0);\n    return ans;\n};\n\n// recover unused memory (for long-running priority queues)\nFastPriorityQueue.prototype.trim = function () {\n    this.array = this.array.slice(0, this.size);\n};\n\n// Check whether the heap is empty\nFastPriorityQueue.prototype.isEmpty = function () {\n    return this.size === 0;\n};\n\n// iterate over the items in order, pass a callback that receives (item, index) as args.\n// TODO once we transpile, uncomment\n// if (Symbol && Symbol.iterator) {\n//   FastPriorityQueue.prototype[Symbol.iterator] = function*() {\n//     if (this.isEmpty()) return;\n//     var fpq = this.clone();\n//     while (!fpq.isEmpty()) {\n//       yield fpq.poll();\n//     }\n//   };\n// }\nFastPriorityQueue.prototype.forEach = function (callback) {\n    if (this.isEmpty() || typeof callback != 'function') return;\n    var i = 0;\n    var fpq = this.clone();\n    while (!fpq.isEmpty()) {\n        callback(fpq.poll(), i++);\n    }\n};\n\n// return the k 'smallest' elements of the queue as an array,\n// runs in O(k log k) time, the elements are not removed\n// from the priority queue.\nFastPriorityQueue.prototype.kSmallest = function (k) {\n    if ((this.size == 0) || (k <= 0)) return [];\n    k = Math.min(this.size, k);\n    const newSize = Math.min(this.size, (2 ** (k - 1)) + 1);\n    if (newSize < 2) { return [this.peek()] }\n\n    const fpq = new FastPriorityQueue(this.compare);\n    fpq.size = newSize;\n    fpq.array = this.array.slice(0, newSize);\n\n    const smallest = new Array(k);\n    for (let i = 0; i < k; i++) {\n        smallest[i] = fpq.poll();\n    }\n    return smallest;\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (FastPriorityQueue);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZXh0ZXJuYWwvcHJpb3JpdHlxdWV1ZS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsaUVBQWlFO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQixpQkFBaUI7QUFDakI7QUFDQTtBQUNBLFdBQVc7QUFDWCxtQkFBbUI7QUFDbkI7QUFDYTs7QUFFYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLFFBQVE7QUFDckM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGVBQWU7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixlQUFlO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qjs7QUFFdkI7QUFDQTtBQUNBOztBQUVBO0FBQ0Esb0JBQW9CLE9BQU87QUFDM0I7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUVBQWUsaUJBQWlCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJnbC1wcm9iZS0yLy4vc3JjL2V4dGVybmFsL3ByaW9yaXR5cXVldWUuanM/ZjY2NCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEZhc3RQcmlvcml0eVF1ZXVlLmpzIDogYSBmYXN0IGhlYXAtYmFzZWQgcHJpb3JpdHkgcXVldWUgIGluIEphdmFTY3JpcHQuXG4gKiAoYykgdGhlIGF1dGhvcnNcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAuXG4gKlxuICogU3BlZWQtb3B0aW1pemVkIGhlYXAtYmFzZWQgcHJpb3JpdHkgcXVldWUgZm9yIG1vZGVybiBicm93c2VycyBhbmQgSmF2YVNjcmlwdCBlbmdpbmVzLlxuICpcbiAqIFVzYWdlIDpcbiAgICAgICAgIEluc3RhbGxhdGlvbiAoaW4gc2hlbGwsIGlmIHlvdSB1c2Ugbm9kZSk6XG4gICAgICAgICAkIG5wbSBpbnN0YWxsIGZhc3Rwcmlvcml0eXF1ZXVlXG5cbiAgICAgICAgIFJ1bm5pbmcgdGVzdCBwcm9ncmFtIChpbiBKYXZhU2NyaXB0KTpcblxuICAgICAgICAgLy8gdmFyIEZhc3RQcmlvcml0eVF1ZXVlID0gcmVxdWlyZShcImZhc3Rwcmlvcml0eXF1ZXVlXCIpOy8vIGluIG5vZGVcbiAgICAgICAgIHZhciB4ID0gbmV3IEZhc3RQcmlvcml0eVF1ZXVlKCk7XG4gICAgICAgICB4LmFkZCgxKTtcbiAgICAgICAgIHguYWRkKDApO1xuICAgICAgICAgeC5hZGQoNSk7XG4gICAgICAgICB4LmFkZCg0KTtcbiAgICAgICAgIHguYWRkKDMpO1xuICAgICAgICAgeC5wZWVrKCk7IC8vIHNob3VsZCByZXR1cm4gMCwgbGVhdmVzIHggdW5jaGFuZ2VkXG4gICAgICAgICB4LnNpemU7IC8vIHNob3VsZCByZXR1cm4gNSwgbGVhdmVzIHggdW5jaGFuZ2VkXG4gICAgICAgICB3aGlsZSgheC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgY29uc29sZS5sb2coeC5wb2xsKCkpO1xuICAgICAgICAgfSAvLyB3aWxsIHByaW50IDAgMSAzIDQgNVxuICAgICAgICAgeC50cmltKCk7IC8vIChvcHRpb25hbCkgb3B0aW1pemVzIG1lbW9yeSB1c2FnZVxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBkZWZhdWx0Y29tcGFyYXRvciA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgcmV0dXJuIGEgPCBiO1xufTtcblxuLy8gdGhlIHByb3ZpZGVkIGNvbXBhcmF0b3IgZnVuY3Rpb24gc2hvdWxkIHRha2UgYSwgYiBhbmQgcmV0dXJuICp0cnVlKiB3aGVuIGEgPCBiXG5mdW5jdGlvbiBGYXN0UHJpb3JpdHlRdWV1ZShjb21wYXJhdG9yKSB7XG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEZhc3RQcmlvcml0eVF1ZXVlKSkgcmV0dXJuIG5ldyBGYXN0UHJpb3JpdHlRdWV1ZShjb21wYXJhdG9yKTtcbiAgICB0aGlzLmFycmF5ID0gW107XG4gICAgdGhpcy5zaXplID0gMDtcbiAgICB0aGlzLmNvbXBhcmUgPSBjb21wYXJhdG9yIHx8IGRlZmF1bHRjb21wYXJhdG9yO1xufVxuXG4vLyBjb3B5IHRoZSBwcmlvcml0eSBxdWV1ZSBpbnRvIGFub3RoZXIsIGFuZCByZXR1cm4gaXQuIFF1ZXVlIGl0ZW1zIGFyZSBzaGFsbG93LWNvcGllZC5cbi8vIFJ1bnMgaW4gYE8obilgIHRpbWUuXG5GYXN0UHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGZwcSA9IG5ldyBGYXN0UHJpb3JpdHlRdWV1ZSh0aGlzLmNvbXBhcmUpO1xuICAgIGZwcS5zaXplID0gdGhpcy5zaXplO1xuICAgIGZwcS5hcnJheSA9IHRoaXMuYXJyYXkuc2xpY2UoMCwgdGhpcy5zaXplKTtcbiAgICByZXR1cm4gZnBxO1xufTtcblxuLy8gQWRkIGFuIGVsZW1lbnQgaW50byB0aGUgcXVldWVcbi8vIHJ1bnMgaW4gTyhsb2cgbikgdGltZVxuRmFzdFByaW9yaXR5UXVldWUucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChteXZhbCkge1xuICAgIHZhciBpID0gdGhpcy5zaXplO1xuICAgIHRoaXMuYXJyYXlbdGhpcy5zaXplXSA9IG15dmFsO1xuICAgIHRoaXMuc2l6ZSArPSAxO1xuICAgIHZhciBwO1xuICAgIHZhciBhcDtcbiAgICB3aGlsZSAoaSA+IDApIHtcbiAgICAgICAgcCA9IChpIC0gMSkgPj4gMTtcbiAgICAgICAgYXAgPSB0aGlzLmFycmF5W3BdO1xuICAgICAgICBpZiAoIXRoaXMuY29tcGFyZShteXZhbCwgYXApKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFycmF5W2ldID0gYXA7XG4gICAgICAgIGkgPSBwO1xuICAgIH1cbiAgICB0aGlzLmFycmF5W2ldID0gbXl2YWw7XG59O1xuXG4vLyByZXBsYWNlIHRoZSBjb250ZW50IG9mIHRoZSBoZWFwIGJ5IHByb3ZpZGVkIGFycmF5IGFuZCBcImhlYXBpZnkgaXRcIlxuRmFzdFByaW9yaXR5UXVldWUucHJvdG90eXBlLmhlYXBpZnkgPSBmdW5jdGlvbiAoYXJyKSB7XG4gICAgdGhpcy5hcnJheSA9IGFycjtcbiAgICB0aGlzLnNpemUgPSBhcnIubGVuZ3RoO1xuICAgIHZhciBpO1xuICAgIGZvciAoaSA9IHRoaXMuc2l6ZSA+PiAxOyBpID49IDA7IGktLSkge1xuICAgICAgICB0aGlzLl9wZXJjb2xhdGVEb3duKGkpO1xuICAgIH1cbn07XG5cbi8vIGZvciBpbnRlcm5hbCB1c2VcbkZhc3RQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5fcGVyY29sYXRlVXAgPSBmdW5jdGlvbiAoaSwgZm9yY2UpIHtcbiAgICB2YXIgbXl2YWwgPSB0aGlzLmFycmF5W2ldO1xuICAgIHZhciBwO1xuICAgIHZhciBhcDtcbiAgICB3aGlsZSAoaSA+IDApIHtcbiAgICAgICAgcCA9IChpIC0gMSkgPj4gMTtcbiAgICAgICAgYXAgPSB0aGlzLmFycmF5W3BdO1xuICAgICAgICAvLyBmb3JjZSB3aWxsIHNraXAgdGhlIGNvbXBhcmVcbiAgICAgICAgaWYgKCFmb3JjZSAmJiAhdGhpcy5jb21wYXJlKG15dmFsLCBhcCkpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYXJyYXlbaV0gPSBhcDtcbiAgICAgICAgaSA9IHA7XG4gICAgfVxuICAgIHRoaXMuYXJyYXlbaV0gPSBteXZhbDtcbn07XG5cbi8vIGZvciBpbnRlcm5hbCB1c2VcbkZhc3RQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5fcGVyY29sYXRlRG93biA9IGZ1bmN0aW9uIChpKSB7XG4gICAgdmFyIHNpemUgPSB0aGlzLnNpemU7XG4gICAgdmFyIGhzaXplID0gdGhpcy5zaXplID4+PiAxO1xuICAgIHZhciBhaSA9IHRoaXMuYXJyYXlbaV07XG4gICAgdmFyIGw7XG4gICAgdmFyIHI7XG4gICAgdmFyIGJlc3RjO1xuICAgIHdoaWxlIChpIDwgaHNpemUpIHtcbiAgICAgICAgbCA9IChpIDw8IDEpICsgMTtcbiAgICAgICAgciA9IGwgKyAxO1xuICAgICAgICBiZXN0YyA9IHRoaXMuYXJyYXlbbF07XG4gICAgICAgIGlmIChyIDwgc2l6ZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY29tcGFyZSh0aGlzLmFycmF5W3JdLCBiZXN0YykpIHtcbiAgICAgICAgICAgICAgICBsID0gcjtcbiAgICAgICAgICAgICAgICBiZXN0YyA9IHRoaXMuYXJyYXlbcl07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmNvbXBhcmUoYmVzdGMsIGFpKSkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hcnJheVtpXSA9IGJlc3RjO1xuICAgICAgICBpID0gbDtcbiAgICB9XG4gICAgdGhpcy5hcnJheVtpXSA9IGFpO1xufTtcblxuLy8gaW50ZXJuYWxcbi8vIF9yZW1vdmVBdChpbmRleCkgd2lsbCByZW1vdmUgdGhlIGl0ZW0gYXQgdGhlIGdpdmVuIGluZGV4IGZyb20gdGhlIHF1ZXVlLFxuLy8gcmV0YWluaW5nIGJhbGFuY2UuIHJldHVybnMgdGhlIHJlbW92ZWQgaXRlbSwgb3IgdW5kZWZpbmVkIGlmIG5vdGhpbmcgaXMgcmVtb3ZlZC5cbkZhc3RQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5fcmVtb3ZlQXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICBpZiAoaW5kZXggPiB0aGlzLnNpemUgLSAxIHx8IGluZGV4IDwgMCkgcmV0dXJuIHVuZGVmaW5lZDtcblxuICAgIC8vIGltcGwxOlxuICAgIC8vdGhpcy5hcnJheS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIC8vdGhpcy5oZWFwaWZ5KHRoaXMuYXJyYXkpO1xuICAgIC8vIGltcGwyOlxuICAgIHRoaXMuX3BlcmNvbGF0ZVVwKGluZGV4LCB0cnVlKTtcbiAgICByZXR1cm4gdGhpcy5wb2xsKCk7XG59O1xuXG4vLyByZW1vdmUobXl2YWwpIHdpbGwgcmVtb3ZlIGFuIGl0ZW0gbWF0Y2hpbmcgdGhlIHByb3ZpZGVkIHZhbHVlIGZyb20gdGhlXG4vLyBxdWV1ZSwgY2hlY2tlZCBmb3IgZXF1YWxpdHkgYnkgdXNpbmcgdGhlIHF1ZXVlJ3MgY29tcGFyYXRvci5cbi8vIHJldHVybiB0cnVlIGlmIHJlbW92ZWQsIGZhbHNlIG90aGVyd2lzZS5cbkZhc3RQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAobXl2YWwpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc2l6ZTsgaSsrKSB7XG4gICAgICAgIGlmICghdGhpcy5jb21wYXJlKHRoaXMuYXJyYXlbaV0sIG15dmFsKSAmJiAhdGhpcy5jb21wYXJlKG15dmFsLCB0aGlzLmFycmF5W2ldKSkge1xuICAgICAgICAgICAgLy8gaXRlbXMgbWF0Y2gsIGNvbXBhcmF0b3IgcmV0dXJucyBmYWxzZSBib3RoIHdheXMsIHJlbW92ZSBpdGVtXG4gICAgICAgICAgICB0aGlzLl9yZW1vdmVBdChpKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG5cbi8vIHJlbW92ZU9uZShjYWxsYmFjaykgd2lsbCBleGVjdXRlIHRoZSBjYWxsYmFjayBmdW5jdGlvbiBmb3IgZWFjaCBpdGVtIG9mIHRoZSBxdWV1ZVxuLy8gYW5kIHdpbGwgcmVtb3ZlIHRoZSBmaXJzdCBpdGVtIGZvciB3aGljaCB0aGUgY2FsbGJhY2sgd2lsbCByZXR1cm4gdHJ1ZS5cbi8vIHJldHVybiB0aGUgcmVtb3ZlZCBpdGVtLCBvciB1bmRlZmluZWQgaWYgbm90aGluZyBpcyByZW1vdmVkLlxuRmFzdFByaW9yaXR5UXVldWUucHJvdG90eXBlLnJlbW92ZU9uZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc2l6ZTsgaSsrKSB7XG4gICAgICAgIGlmIChjYWxsYmFjayh0aGlzLmFycmF5W2ldKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlbW92ZUF0KGkpO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuLy8gcmVtb3ZlKGNhbGxiYWNrWywgbGltaXRdKSB3aWxsIGV4ZWN1dGUgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIGZvciBlYWNoIGl0ZW0gb2Zcbi8vIHRoZSBxdWV1ZSBhbmQgd2lsbCByZW1vdmUgZWFjaCBpdGVtIGZvciB3aGljaCB0aGUgY2FsbGJhY2sgcmV0dXJucyB0cnVlLCB1cCB0b1xuLy8gYSBtYXggbGltaXQgb2YgcmVtb3ZlZCBpdGVtcyBpZiBzcGVjaWZpZWQgb3Igbm8gbGltaXQgaWYgdW5zcGVjaWZpZWQuXG4vLyByZXR1cm4gYW4gYXJyYXkgY29udGFpbmluZyB0aGUgcmVtb3ZlZCBpdGVtcy5cbi8vIFRoZSBjYWxsYmFjayBmdW5jdGlvbiBzaG91bGQgYmUgYSBwdXJlIGZ1bmN0aW9uLlxuRmFzdFByaW9yaXR5UXVldWUucHJvdG90eXBlLnJlbW92ZU1hbnkgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIGxpbWl0KSB7XG4gICAgLy8gU2tpcCB1bm5lY2Vzc2FyeSBwcm9jZXNzaW5nIGZvciBlZGdlIGNhc2VzXG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiIHx8IHRoaXMuc2l6ZSA8IDEpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBsaW1pdCA9IGxpbWl0ID8gTWF0aC5taW4obGltaXQsIHRoaXMuc2l6ZSkgOiB0aGlzLnNpemU7XG5cbiAgICAvLyBQcmVwYXJlIHRoZSByZXN1bHRzIGNvbnRhaW5lciB0byBob2xkIHVwIHRvIHRoZSByZXN1bHRzIGxpbWl0XG4gICAgdmFyIHJlc3VsdFNpemUgPSAwO1xuICAgIHZhciByZXN1bHQgPSBuZXcgQXJyYXkobGltaXQpO1xuXG4gICAgLy8gUHJlcGFyZSBhIHRlbXBvcmFyeSBhcnJheSB0byBob2xkIGl0ZW1zIHdlJ2xsIHRyYXZlcnNlIHRocm91Z2ggYW5kIG5lZWQgdG8ga2VlcFxuICAgIHZhciB0bXBTaXplID0gMDtcbiAgICB2YXIgdG1wID0gbmV3IEFycmF5KHRoaXMuc2l6ZSk7XG5cbiAgICB3aGlsZSAocmVzdWx0U2l6ZSA8IGxpbWl0ICYmICF0aGlzLmlzRW1wdHkoKSkge1xuICAgICAgICAvLyBEZXF1ZXVlIGl0ZW1zIGludG8gZWl0aGVyIHRoZSByZXN1bHRzIG9yIG91ciB0ZW1wb3JhcnkgYXJyYXlcbiAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLnBvbGwoKTtcbiAgICAgICAgaWYgKGNhbGxiYWNrKGl0ZW0pKSB7XG4gICAgICAgICAgICByZXN1bHRbcmVzdWx0U2l6ZSsrXSA9IGl0ZW07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0bXBbdG1wU2l6ZSsrXSA9IGl0ZW07XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gVXBkYXRlIHRoZSByZXN1bHQgYXJyYXkgd2l0aCB0aGUgZXhhY3QgbnVtYmVyIG9mIHJlc3VsdHNcbiAgICByZXN1bHQubGVuZ3RoID0gcmVzdWx0U2l6ZTtcblxuICAgIC8vIFJlLWFkZCBhbGwgdGhlIGl0ZW1zIHdlIGNhbiBrZWVwXG4gICAgdmFyIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgdG1wU2l6ZSkge1xuICAgICAgICB0aGlzLmFkZCh0bXBbaSsrXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbi8vIExvb2sgYXQgdGhlIHRvcCBvZiB0aGUgcXVldWUgKG9uZSBvZiB0aGUgc21hbGxlc3QgZWxlbWVudHMpIHdpdGhvdXQgcmVtb3ZpbmcgaXRcbi8vIGV4ZWN1dGVzIGluIGNvbnN0YW50IHRpbWVcbi8vXG4vLyBDYWxsaW5nIHBlZWsgb24gYW4gZW1wdHkgcHJpb3JpdHkgcXVldWUgcmV0dXJuc1xuLy8gdGhlIFwidW5kZWZpbmVkXCIgdmFsdWUuXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy91bmRlZmluZWRcbi8vXG5GYXN0UHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUucGVlayA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5zaXplID09IDApIHJldHVybiB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHRoaXMuYXJyYXlbMF07XG59O1xuXG4vLyByZW1vdmUgdGhlIGVsZW1lbnQgb24gdG9wIG9mIHRoZSBoZWFwIChvbmUgb2YgdGhlIHNtYWxsZXN0IGVsZW1lbnRzKVxuLy8gcnVucyBpbiBsb2dhcml0aG1pYyB0aW1lXG4vL1xuLy8gSWYgdGhlIHByaW9yaXR5IHF1ZXVlIGlzIGVtcHR5LCB0aGUgZnVuY3Rpb24gcmV0dXJucyB0aGVcbi8vIFwidW5kZWZpbmVkXCIgdmFsdWUuXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy91bmRlZmluZWRcbi8vXG4vLyBGb3IgbG9uZy1ydW5uaW5nIGFuZCBsYXJnZSBwcmlvcml0eSBxdWV1ZXMsIG9yIHByaW9yaXR5IHF1ZXVlc1xuLy8gc3RvcmluZyBsYXJnZSBvYmplY3RzLCB5b3UgbWF5ICB3YW50IHRvIGNhbGwgdGhlIHRyaW0gZnVuY3Rpb25cbi8vIGF0IHN0cmF0ZWdpYyB0aW1lcyB0byByZWNvdmVyIGFsbG9jYXRlZCBtZW1vcnkuXG5GYXN0UHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUucG9sbCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5zaXplID09IDApIHJldHVybiB1bmRlZmluZWQ7XG4gICAgdmFyIGFucyA9IHRoaXMuYXJyYXlbMF07XG4gICAgaWYgKHRoaXMuc2l6ZSA+IDEpIHtcbiAgICAgICAgdGhpcy5hcnJheVswXSA9IHRoaXMuYXJyYXlbLS10aGlzLnNpemVdO1xuICAgICAgICB0aGlzLl9wZXJjb2xhdGVEb3duKDApO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2l6ZSAtPSAxO1xuICAgIH1cbiAgICByZXR1cm4gYW5zO1xufTtcblxuLy8gVGhpcyBmdW5jdGlvbiBhZGRzIHRoZSBwcm92aWRlZCB2YWx1ZSB0byB0aGUgaGVhcCwgd2hpbGUgcmVtb3Zpbmdcbi8vIGFuZCByZXR1cm5pbmcgb25lIG9mIHRoZSBzbWFsbGVzdCBlbGVtZW50cyAobGlrZSBwb2xsKS4gVGhlIHNpemUgb2YgdGhlIHF1ZXVlXG4vLyB0aHVzIHJlbWFpbnMgdW5jaGFuZ2VkLlxuRmFzdFByaW9yaXR5UXVldWUucHJvdG90eXBlLnJlcGxhY2VUb3AgPSBmdW5jdGlvbiAobXl2YWwpIHtcbiAgICBpZiAodGhpcy5zaXplID09IDApIHJldHVybiB1bmRlZmluZWQ7XG4gICAgdmFyIGFucyA9IHRoaXMuYXJyYXlbMF07XG4gICAgdGhpcy5hcnJheVswXSA9IG15dmFsO1xuICAgIHRoaXMuX3BlcmNvbGF0ZURvd24oMCk7XG4gICAgcmV0dXJuIGFucztcbn07XG5cbi8vIHJlY292ZXIgdW51c2VkIG1lbW9yeSAoZm9yIGxvbmctcnVubmluZyBwcmlvcml0eSBxdWV1ZXMpXG5GYXN0UHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUudHJpbSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmFycmF5ID0gdGhpcy5hcnJheS5zbGljZSgwLCB0aGlzLnNpemUpO1xufTtcblxuLy8gQ2hlY2sgd2hldGhlciB0aGUgaGVhcCBpcyBlbXB0eVxuRmFzdFByaW9yaXR5UXVldWUucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gMDtcbn07XG5cbi8vIGl0ZXJhdGUgb3ZlciB0aGUgaXRlbXMgaW4gb3JkZXIsIHBhc3MgYSBjYWxsYmFjayB0aGF0IHJlY2VpdmVzIChpdGVtLCBpbmRleCkgYXMgYXJncy5cbi8vIFRPRE8gb25jZSB3ZSB0cmFuc3BpbGUsIHVuY29tbWVudFxuLy8gaWYgKFN5bWJvbCAmJiBTeW1ib2wuaXRlcmF0b3IpIHtcbi8vICAgRmFzdFByaW9yaXR5UXVldWUucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiooKSB7XG4vLyAgICAgaWYgKHRoaXMuaXNFbXB0eSgpKSByZXR1cm47XG4vLyAgICAgdmFyIGZwcSA9IHRoaXMuY2xvbmUoKTtcbi8vICAgICB3aGlsZSAoIWZwcS5pc0VtcHR5KCkpIHtcbi8vICAgICAgIHlpZWxkIGZwcS5wb2xsKCk7XG4vLyAgICAgfVxuLy8gICB9O1xuLy8gfVxuRmFzdFByaW9yaXR5UXVldWUucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICBpZiAodGhpcy5pc0VtcHR5KCkgfHwgdHlwZW9mIGNhbGxiYWNrICE9ICdmdW5jdGlvbicpIHJldHVybjtcbiAgICB2YXIgaSA9IDA7XG4gICAgdmFyIGZwcSA9IHRoaXMuY2xvbmUoKTtcbiAgICB3aGlsZSAoIWZwcS5pc0VtcHR5KCkpIHtcbiAgICAgICAgY2FsbGJhY2soZnBxLnBvbGwoKSwgaSsrKTtcbiAgICB9XG59O1xuXG4vLyByZXR1cm4gdGhlIGsgJ3NtYWxsZXN0JyBlbGVtZW50cyBvZiB0aGUgcXVldWUgYXMgYW4gYXJyYXksXG4vLyBydW5zIGluIE8oayBsb2cgaykgdGltZSwgdGhlIGVsZW1lbnRzIGFyZSBub3QgcmVtb3ZlZFxuLy8gZnJvbSB0aGUgcHJpb3JpdHkgcXVldWUuXG5GYXN0UHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUua1NtYWxsZXN0ID0gZnVuY3Rpb24gKGspIHtcbiAgICBpZiAoKHRoaXMuc2l6ZSA9PSAwKSB8fCAoayA8PSAwKSkgcmV0dXJuIFtdO1xuICAgIGsgPSBNYXRoLm1pbih0aGlzLnNpemUsIGspO1xuICAgIGNvbnN0IG5ld1NpemUgPSBNYXRoLm1pbih0aGlzLnNpemUsICgyICoqIChrIC0gMSkpICsgMSk7XG4gICAgaWYgKG5ld1NpemUgPCAyKSB7IHJldHVybiBbdGhpcy5wZWVrKCldIH1cblxuICAgIGNvbnN0IGZwcSA9IG5ldyBGYXN0UHJpb3JpdHlRdWV1ZSh0aGlzLmNvbXBhcmUpO1xuICAgIGZwcS5zaXplID0gbmV3U2l6ZTtcbiAgICBmcHEuYXJyYXkgPSB0aGlzLmFycmF5LnNsaWNlKDAsIG5ld1NpemUpO1xuXG4gICAgY29uc3Qgc21hbGxlc3QgPSBuZXcgQXJyYXkoayk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrOyBpKyspIHtcbiAgICAgICAgc21hbGxlc3RbaV0gPSBmcHEucG9sbCgpO1xuICAgIH1cbiAgICByZXR1cm4gc21hbGxlc3Q7XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZhc3RQcmlvcml0eVF1ZXVlO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/external/priorityqueue.js\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.ts");
/******/ 	
/******/ })()
;